"use strict";(self.webpackChunkclipz=self.webpackChunkclipz||[]).push([[179],{6217:(jt,He,L)=>{L.d(He,{nm:()=>Oi});var g=L(4976);L(4650),L(259);var O=L(5861),se=L(6881),he=L(4859),Ve=L(2090),Ge=L(1877);const Ae=new Map,me={activated:!1,tokenObservers:[]},Be={initialized:!1,enabled:!1};function pt(xe){return Ae.get(xe)||Object.assign({},me)}function Dt(){return Be}const Rn="https://content-firebaseappcheck.googleapis.com/v1",Je="exchangeDebugToken",at={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class tt{constructor(Ie,je,dt,Tt,vn){if(this.operation=Ie,this.retryPolicy=je,this.getWaitDuration=dt,this.lowerBound=Tt,this.upperBound=vn,this.pending=null,this.nextErrorWaitInterval=Tt,Tt>vn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ie){var je=this;return(0,O.Z)(function*(){je.stop();try{je.pending=new Ve.BH,yield function Xe(xe){return new Promise(Ie=>{setTimeout(Ie,xe)})}(je.getNextRun(Ie)),je.pending.resolve(),yield je.pending.promise,je.pending=new Ve.BH,yield je.operation(),je.pending.resolve(),yield je.pending.promise,je.process(!0).catch(()=>{})}catch(dt){je.retryPolicy(dt)?je.process(!1).catch(()=>{}):je.stop()}})()}getNextRun(Ie){if(Ie)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const je=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),je}}}const Rt=new Ve.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gn(xe,Ie){return $n.apply(this,arguments)}function $n(){return($n=(0,O.Z)(function*({url:xe,body:Ie},je){const dt={"Content-Type":"application/json"},Tt=je.getImmediate({optional:!0});if(Tt){const Er=yield Tt.getHeartbeatsHeader();Er&&(dt["X-Firebase-Client"]=Er)}const vn={method:"POST",body:JSON.stringify(Ie),headers:dt};let bn,Dn;try{bn=yield fetch(xe,vn)}catch(Er){throw Rt.create("fetch-network-error",{originalErrorMessage:Er?.message})}if(200!==bn.status)throw Rt.create("fetch-status-error",{httpStatus:bn.status});try{Dn=yield bn.json()}catch(Er){throw Rt.create("fetch-parse-error",{originalErrorMessage:Er?.message})}const Wn=Dn.ttl.match(/^([\d.]+)(s)$/);if(!Wn||!Wn[2]||isNaN(Number(Wn[1])))throw Rt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Dn.ttl}`});const Or=1e3*Number(Wn[1]),is=Date.now();return{token:Dn.token,expireTimeMillis:is+Or,issuedAtTimeMillis:is}})).apply(this,arguments)}const br="firebase-app-check-database",Xr=1,ar="firebase-app-check-store";let Ut=null;function zn(xe,Ie){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(xe,Ie){const dt=(yield function Xn(){return Ut||(Ut=new Promise((xe,Ie)=>{try{const je=indexedDB.open(br,Xr);je.onsuccess=dt=>{xe(dt.target.result)},je.onerror=dt=>{var Tt;Ie(Rt.create("storage-open",{originalErrorMessage:null===(Tt=dt.target.error)||void 0===Tt?void 0:Tt.message}))},je.onupgradeneeded=dt=>{0===dt.oldVersion&&dt.target.result.createObjectStore(ar,{keyPath:"compositeKey"})}}catch(je){Ie(Rt.create("storage-open",{originalErrorMessage:je?.message}))}}),Ut)}()).transaction(ar,"readwrite"),vn=dt.objectStore(ar).put({compositeKey:xe,value:Ie});return new Promise((bn,Dn)=>{vn.onsuccess=Wn=>{bn()},dt.onerror=Wn=>{var Or;Dn(Rt.create("storage-set",{originalErrorMessage:null===(Or=Wn.target.error)||void 0===Or?void 0:Or.message}))}})})).apply(this,arguments)}const fr=new Ge.Yd("@firebase/app-check");function lr(xe,Ie){return(0,Ve.hl)()?function Br(xe,Ie){return zn(function $r(xe){return`${xe.options.appId}-${xe.name}`}(xe),Ie)}(xe,Ie).catch(je=>{fr.warn(`Failed to write token to IndexedDB. Error: ${je}`)}):Promise.resolve()}function An(){return _r.apply(this,arguments)}function _r(){return(_r=(0,O.Z)(function*(){const xe=Dt();if(xe.enabled&&xe.token)return xe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Sr={error:"UNKNOWN_ERROR"};function Oe(xe){return Ve.US.encodeString(JSON.stringify(xe),!1)}function Mt(xe){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*(xe,Ie=!1){const je=xe.app;!function vt(xe){if(!pt(xe).activated)throw Rt.create("use-before-activation",{appName:xe.name})}(je);const dt=pt(je);let vn,Tt=dt.token;if(Tt&&!$e(Tt)&&(dt.token=void 0,Tt=void 0),!Tt){const Wn=yield dt.cachedTokenPromise;Wn&&($e(Wn)?Tt=Wn:yield lr(je,void 0))}if(!Ie&&Tt&&$e(Tt))return{token:Tt.token};let Dn,bn=!1;if(function qn(){return Dt().enabled}()){dt.exchangeTokenPromise||(dt.exchangeTokenPromise=gn(function Jn(xe,Ie){const{projectId:je,appId:dt,apiKey:Tt}=xe.options;return{url:`${Rn}/projects/${je}/apps/${dt}:${Je}?key=${Tt}`,body:{debug_token:Ie}}}(je,yield An()),xe.heartbeatServiceProvider).finally(()=>{dt.exchangeTokenPromise=void 0}),bn=!0);const Wn=yield dt.exchangeTokenPromise;return yield lr(je,Wn),dt.token=Wn,{token:Wn.token}}try{dt.exchangeTokenPromise||(dt.exchangeTokenPromise=dt.provider.getToken().finally(()=>{dt.exchangeTokenPromise=void 0}),bn=!0),Tt=yield pt(je).exchangeTokenPromise}catch(Wn){"appCheck/throttled"===Wn.code?fr.warn(Wn.message):fr.error(Wn),vn=Wn}return Tt?vn?Dn=$e(Tt)?{token:Tt.token,internalError:vn}:Et(vn):(Dn={token:Tt.token},dt.token=Tt,yield lr(je,Tt)):Dn=Et(vn),bn&&function lt(xe,Ie){const je=pt(xe).tokenObservers;for(const dt of je)try{"EXTERNAL"===dt.type&&null!=Ie.error?dt.error(Ie.error):dt.next(Ie)}catch{}}(je,Dn),Dn})).apply(this,arguments)}function ue(xe,Ie){const je=pt(xe),dt=je.tokenObservers.filter(Tt=>Tt.next!==Ie);0===dt.length&&je.tokenRefresher&&je.tokenRefresher.isRunning()&&je.tokenRefresher.stop(),je.tokenObservers=dt}function ce(xe){const{app:Ie}=xe,je=pt(Ie);let dt=je.tokenRefresher;dt||(dt=function Ce(xe){const{app:Ie}=xe;return new tt((0,O.Z)(function*(){let dt;if(dt=pt(Ie).token?yield Mt(xe,!0):yield Mt(xe),dt.error)throw dt.error;if(dt.internalError)throw dt.internalError}),()=>!0,()=>{const je=pt(Ie);if(je.token){let dt=je.token.issuedAtTimeMillis+.5*(je.token.expireTimeMillis-je.token.issuedAtTimeMillis)+3e5;return dt=Math.min(dt,je.token.expireTimeMillis-3e5),Math.max(0,dt-Date.now())}return 0},at.RETRIAL_MIN_WAIT,at.RETRIAL_MAX_WAIT)}(xe),je.tokenRefresher=dt),!dt.isRunning()&&je.isTokenAutoRefreshEnabled&&dt.start()}function $e(xe){return xe.expireTimeMillis-Date.now()>0}function Et(xe){return{token:Oe(Sr),error:xe}}class we{constructor(Ie,je){this.app=Ie,this.heartbeatServiceProvider=je}_delete(){const{tokenObservers:Ie}=pt(this.app);for(const je of Ie)ue(this.app,je.next);return Promise.resolve()}}const Ln="app-check-internal";!function Pr(){(0,se._registerComponent)(new he.wA("app-check",xe=>function ve(xe,Ie){return new we(xe,Ie)}(xe.getProvider("app").getImmediate(),xe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((xe,Ie,je)=>{xe.getProvider(Ln).initialize()})),(0,se._registerComponent)(new he.wA(Ln,xe=>function ne(xe){return{getToken:Ie=>Mt(xe,Ie),addTokenListener:Ie=>function Xt(xe,Ie,je,dt){const{app:Tt}=xe,vn=pt(Tt);if(vn.tokenObservers=[...vn.tokenObservers,{next:je,error:dt,type:Ie}],vn.token&&$e(vn.token)){const Dn=vn.token;Promise.resolve().then(()=>{je({token:Dn.token}),ce(xe)}).catch(()=>{})}vn.cachedTokenPromise.then(()=>ce(xe))}(xe,"INTERNAL",Ie),removeTokenListener:Ie=>ue(xe.app,Ie)}}(xe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)("@firebase/app-check","0.7.0")}();class Oi{constructor(){return(0,g.vb)("app-check")}}typeof window<"u"&&window},1205:(jt,He,L)=>{L.d(He,{zQ:()=>Rn,ww:()=>Qe,rT:()=>Be,f7:()=>ft,L6:()=>Ae,_Q:()=>me,lh:()=>pt,Qv:()=>Ge,nw:()=>Dt});var g=L(4650),W=L(7579),q=L(9646),ye=L(9751),ge=L(8996),pe=L(6451),be=L(5363),F=L(3900),Pe=L(4004),le=L(6063);class ie extends W.x{constructor(Je=1/0,at=1/0,yt=le.l){super(),this._bufferSize=Je,this._windowTime=at,this._timestampProvider=yt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=at===1/0,this._bufferSize=Math.max(1,Je),this._windowTime=Math.max(1,at)}next(Je){const{isStopped:at,_buffer:yt,_infiniteTimeWindow:tt,_timestampProvider:Xe,_windowTime:xt}=this;at||(yt.push(Je),!tt&&yt.push(Xe.now()+xt)),this._trimBuffer(),super.next(Je)}_subscribe(Je){this._throwIfClosed(),this._trimBuffer();const at=this._innerSubscribe(Je),{_infiniteTimeWindow:yt,_buffer:tt}=this,Xe=tt.slice();for(let xt=0;xt<Xe.length&&!Je.closed;xt+=yt?1:2)Je.next(Xe[xt]);return this._checkFinalizedStatuses(Je),at}_trimBuffer(){const{_bufferSize:Je,_timestampProvider:at,_buffer:yt,_infiniteTimeWindow:tt}=this,Xe=(tt?1:2)*Je;if(Je<1/0&&Xe<yt.length&&yt.splice(0,yt.length-Xe),!tt){const xt=at.now();let Rt=0;for(let Pt=1;Pt<yt.length&&yt[Pt]<=xt;Pt+=2)Rt=Pt;Rt&&yt.splice(0,Rt+1)}}}var _e=L(3099);function ht(qe,Je,at){let yt,tt=!1;return qe&&"object"==typeof qe?({bufferSize:yt=1/0,windowTime:Je=1/0,refCount:tt=!1,scheduler:at}=qe):yt=qe??1/0,(0,_e.B)({connector:()=>new ie(yt,Je,at),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:tt})}var Te=L(590),ot=L(576);function rt(qe,Je){return(0,ot.m)(Je)?(0,F.w)(()=>qe,Je):(0,F.w)(()=>qe)}var Le=L(9468),ke=L(9300),st=L(4976),z=L(2011),O=L(6895),se=L(6217),he=L(9260);const Ge=new g.OlP("angularfire2.auth.use-emulator"),Ae=new g.OlP("angularfire2.auth.settings"),me=new g.OlP("angularfire2.auth.tenant-id"),Be=new g.OlP("angularfire2.auth.langugage-code"),pt=new g.OlP("angularfire2.auth.use-device-language"),ft=new g.OlP("angularfire.auth.persistence"),Dt=(qe,Je,at,yt,tt,Xe,xt,Rt)=>(0,z.cc)(`${qe.name}.auth`,"AngularFireAuth",qe.name,()=>{const Pt=Je.runOutsideAngular(()=>qe.auth());if(at&&Pt.useEmulator(...at),yt&&(Pt.tenantId=yt),Pt.languageCode=tt,Xe&&Pt.useDeviceLanguage(),xt)for(const[vt,tn]of Object.entries(xt))Pt.settings[vt]=tn;return Rt&&Pt.setPersistence(Rt),Pt},[at,yt,tt,Xe,xt,Rt]);let Rn=(()=>{class qe{constructor(at,yt,tt,Xe,xt,Rt,Pt,vt,tn,nn,gn,$n){const Nr=new W.x,_n=(0,q.of)(void 0).pipe((0,be.Q)(xt.outsideAngular),(0,F.w)(()=>Xe.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2644)))),(0,Pe.U)(()=>(0,z.on)(at,Xe,yt)),(0,Pe.U)(Jn=>Dt(Jn,Xe,Rt,vt,tn,nn,Pt,gn)),ht({bufferSize:1,refCount:!1}));if((0,O.PM)(tt))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,q.of)(null);else{_n.pipe((0,Te.P)()).subscribe();const br=_n.pipe((0,F.w)(on=>on.getRedirectResult().then(Ut=>Ut,()=>null)),st.iC,ht({bufferSize:1,refCount:!1})),Xr=_n.pipe((0,F.w)(on=>new ye.y(Ut=>({unsubscribe:Xe.runOutsideAngular(()=>on.onAuthStateChanged(Xn=>Ut.next(Xn),Xn=>Ut.error(Xn),()=>Ut.complete()))})))),ar=_n.pipe((0,F.w)(on=>new ye.y(Ut=>({unsubscribe:Xe.runOutsideAngular(()=>on.onIdTokenChanged(Xn=>Ut.next(Xn),Xn=>Ut.error(Xn),()=>Ut.complete()))}))));this.authState=br.pipe(rt(Xr),(0,Le.R)(xt.outsideAngular),(0,be.Q)(xt.insideAngular)),this.user=br.pipe(rt(ar),(0,Le.R)(xt.outsideAngular),(0,be.Q)(xt.insideAngular)),this.idToken=this.user.pipe((0,F.w)(on=>on?(0,ge.D)(on.getIdToken()):(0,q.of)(null))),this.idTokenResult=this.user.pipe((0,F.w)(on=>on?(0,ge.D)(on.getIdTokenResult()):(0,q.of)(null))),this.credential=(0,pe.T)(br,Nr,this.authState.pipe((0,ke.h)(on=>!on))).pipe((0,Pe.U)(on=>on?.user?on:null),(0,Le.R)(xt.outsideAngular),(0,be.Q)(xt.insideAngular))}return(0,z.pX)(this,_n,Xe,{spy:{apply:(Jn,br,Xr)=>{(Jn.startsWith("signIn")||Jn.startsWith("createUser"))&&Xr.then(ar=>Nr.next(ar))}}})}}return qe.\u0275fac=function(at){return new(at||qe)(g.LFG(z.Dh),g.LFG(z.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(st.HU),g.LFG(Ge,8),g.LFG(Ae,8),g.LFG(me,8),g.LFG(Be,8),g.LFG(pt,8),g.LFG(ft,8),g.LFG(se.nm,8))},qe.\u0275prov=g.Yz7({token:qe,factory:qe.\u0275fac,providedIn:"any"}),qe})(),Qe=(()=>{class qe{constructor(){he.Z.registerVersion("angularfire",st.q4.full,"auth-compat")}}return qe.\u0275fac=function(at){return new(at||qe)},qe.\u0275mod=g.oAB({type:qe}),qe.\u0275inj=g.cJS({providers:[Rn]}),qe})()},2255:(jt,He,L)=>{L.d(He,{ST:()=>Sm,yb:()=>E_});var g=L(4650),W=L(4986),q=L(9751),ye=L(8996),ge=L(9646),pe=L(4976),be=L(8675),F=L(4482),Pe=L(5403);function le(){return(0,F.e)((r,e)=>{let t,s=!1;r.subscribe((0,Pe.x)(e,a=>{const c=t;t=a,s&&e.next([c,a]),s=!0}))})}var ie=L(4004),_e=L(5026),ht=L(4671);function ot(r,e){return r===e}var Be,rt=L(9300),Le=L(2011),ke=L(6895),z=(L(2644),L(3942)),O=L(5861),se=L(6881),he=L(4859),Ve=L(1877),Ge=L(2090),Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},me={},pt=pt||{},ft=Ae||self;function Dt(){}function Rn(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Qe(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Je="closure_uid_"+(1e9*Math.random()>>>0),at=0;function yt(r,e,t){return r.call.apply(r.bind,arguments)}function tt(r,e,t){if(!r)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),r.apply(e,a)}}return function(){return r.apply(e,arguments)}}function Xe(r,e,t){return(Xe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yt:tt).apply(null,arguments)}function xt(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),r.apply(this,s)}}function Rt(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(s,a,c){for(var f=Array(arguments.length-2),C=2;C<arguments.length;C++)f[C-2]=arguments[C];return e.prototype[a].apply(s,f)}}function Pt(){this.s=this.s,this.o=this.o}Pt.prototype.s=!1,Pt.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function qe(r){Object.prototype.hasOwnProperty.call(r,Je)&&r[Je]||(r[Je]=++at)}(this)},Pt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const tn=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function nn(r){const e=r.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=r[s];return t}return[]}function gn(r,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Rn(s)){const a=r.length||0,c=s.length||0;r.length=a+c;for(let f=0;f<c;f++)r[a+f]=s[f]}else r.push(s)}}function $n(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}$n.prototype.h=function(){this.defaultPrevented=!0};var Nr=function(){if(!ft.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{ft.addEventListener("test",Dt,e),ft.removeEventListener("test",Dt,e)}catch{}return r}();function _n(r){return/^[\s\xa0]*$/.test(r)}var Jn=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function br(r,e){return r<e?-1:r>e?1:0}function Xr(){var r=ft.navigator;return r&&(r=r.userAgent)?r:""}function ar(r){return-1!=Xr().indexOf(r)}function on(r){return on[" "](r),r}function Ut(r,e,t){return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}on[" "]=Dt;var zt,r,Xn=ar("Opera"),kr=ar("Trident")||ar("MSIE"),Br=ar("Edge"),ur=Br||kr,mi=ar("Gecko")&&!(-1!=Xr().toLowerCase().indexOf("webkit")&&!ar("Edge"))&&!(ar("Trident")||ar("MSIE"))&&!ar("Edge"),zn=-1!=Xr().toLowerCase().indexOf("webkit")&&!ar("Edge");function Nn(){var r=ft.document;return r?r.documentMode:void 0}e:{var rn="",$r=(r=Xr(),mi?/rv:([^\);]+)(\)|;)/.exec(r):Br?/Edge\/([\d\.]+)/.exec(r):kr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):zn?/WebKit\/(\S+)/.exec(r):Xn?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if($r&&(rn=$r?$r[1]:""),kr){var fr=Nn();if(null!=fr&&fr>parseFloat(rn)){zt=String(fr);break e}}zt=rn}var an={},nr=ft.document&&kr&&(Nn()||parseInt(zt,10))||void 0;function qn(r,e){if($n.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,s=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(mi){e:{try{on(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:An[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&qn.$.h.call(this)}}Rt(qn,$n);var An={2:"touch",3:"pen",4:"mouse"};qn.prototype.h=function(){qn.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var _r="closure_listenable_"+(1e6*Math.random()|0),Fn=0;function Sr(r,e,t,s,a){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.la=a,this.key=++Fn,this.fa=this.ia=!1}function Oe(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Mt(r,e,t){for(const s in r)e.call(t,r[s],s,r)}function Me(r){const e={};for(const t in r)e[t]=r[t];return e}const Ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wn(r,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)r[t]=s[t];for(let c=0;c<Ct.length;c++)t=Ct[c],Object.prototype.hasOwnProperty.call(s,t)&&(r[t]=s[t])}}function Xt(r){this.src=r,this.g={},this.h=0}function ue(r,e){var t=e.type;if(t in r.g){var c,s=r.g[t],a=tn(s,e);(c=0<=a)&&Array.prototype.splice.call(s,a,1),c&&(Oe(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function ce(r,e,t,s){for(var a=0;a<r.length;++a){var c=r[a];if(!c.fa&&c.listener==e&&c.capture==!!t&&c.la==s)return a}return-1}Xt.prototype.add=function(r,e,t,s,a){var c=r.toString();(r=this.g[c])||(r=this.g[c]=[],this.h++);var f=ce(r,e,s,a);return-1<f?(e=r[f],t||(e.ia=!1)):((e=new Sr(e,this.src,c,!!s,a)).ia=t,r.push(e)),e};var Ce="closure_lm_"+(1e6*Math.random()|0),lt={};function $e(r,e,t,s,a){if(s&&s.once)return ve(r,e,t,s,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)$e(r,e[c],t,s,a);return null}return t=rr(t),r&&r[_r]?r.O(e,t,Qe(s)?!!s.capture:!!s,a):Et(r,e,t,!1,s,a)}function Et(r,e,t,s,a,c){if(!e)throw Error("Invalid event type");var f=Qe(a)?!!a.capture:!!a,C=hn(r);if(C||(r[Ce]=C=new Xt(r)),(t=C.add(e,t,s,f,c)).proxy)return t;if(s=function we(){const e=bt;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=s,s.src=r,s.listener=t,r.addEventListener)Nr||(a=f),void 0===a&&(a=!1),r.addEventListener(e.toString(),s,a);else if(r.attachEvent)r.attachEvent(ut(e.toString()),s);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(s)}return t}function ve(r,e,t,s,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)ve(r,e[c],t,s,a);return null}return t=rr(t),r&&r[_r]?r.P(e,t,Qe(s)?!!s.capture:!!s,a):Et(r,e,t,!0,s,a)}function ne(r,e,t,s,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)ne(r,e[c],t,s,a);else s=Qe(s)?!!s.capture:!!s,t=rr(t),r&&r[_r]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=ce(c=r.g[e],t,s,a))&&(Oe(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete r.g[e],r.h--))):r&&(r=hn(r))&&(e=r.g[e.toString()],r=-1,e&&(r=ce(e,t,s,a)),(t=-1<r?e[r]:null)&&Se(t))}function Se(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[_r])ue(e.i,r);else{var t=r.type,s=r.proxy;e.removeEventListener?e.removeEventListener(t,s,r.capture):e.detachEvent?e.detachEvent(ut(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=hn(e))?(ue(t,r),0==t.h&&(t.src=null,e[Ce]=null)):Oe(r)}}}function ut(r){return r in lt?lt[r]:lt[r]="on"+r}function bt(r,e){if(r.fa)r=!0;else{e=new qn(e,this);var t=r.listener,s=r.la||r.src;r.ia&&Se(r),r=t.call(s,e)}return r}function hn(r){return(r=r[Ce])instanceof Xt?r:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function rr(r){return"function"==typeof r?r:(r[On]||(r[On]=function(e){return r.handleEvent(e)}),r[On])}function cr(){Pt.call(this),this.i=new Xt(this),this.S=this,this.J=null}function Ke(r,e){var t,s=r.J;if(s)for(t=[];s;s=s.J)t.push(s);if(r=r.S,s=e.type||e,"string"==typeof e)e=new $n(e,r);else if(e instanceof $n)e.target=e.target||r;else{var a=e;wn(e=new $n(s,r),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var f=e.g=t[c];a=ze(f,s,!0,e)&&a}if(a=ze(f=e.g=r,s,!0,e)&&a,a=ze(f,s,!1,e)&&a,t)for(c=0;c<t.length;c++)a=ze(f=e.g=t[c],s,!1,e)&&a}function ze(r,e,t,s){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var f=e[c];if(f&&!f.fa&&f.capture==t){var C=f.listener,k=f.la||f.src;f.ia&&ue(r.i,f),a=!1!==C.call(k,s)&&a}}return a&&!s.defaultPrevented}Rt(cr,Pt),cr.prototype[_r]=!0,cr.prototype.removeEventListener=function(r,e,t,s){ne(this,r,e,t,s)},cr.prototype.N=function(){if(cr.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],s=0;s<t.length;s++)Oe(t[s]);delete r.g[e],r.h--}}this.J=null},cr.prototype.O=function(r,e,t,s){return this.i.add(String(r),e,!1,t,s)},cr.prototype.P=function(r,e,t,s){return this.i.add(String(r),e,!0,t,s)};var wt=ft.JSON.stringify;function Kt(){var r=Ks;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var gr,Tn=new class{constructor(r,e){this.i=r,this.j=e,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new un,r=>r.reset());class un{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Gn(r){ft.setTimeout(()=>{throw r},0)}function kn(r,e){gr||function Zr(){var r=ft.Promise.resolve(void 0);gr=function(){r.then(Zs)}}(),qs||(gr(),qs=!0),Ks.add(r,e)}var qs=!1,Ks=new class fn{constructor(){this.h=this.g=null}add(e,t){const s=Tn.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Zs(){for(var r;r=Kt();){try{r.h.call(r.g)}catch(t){Gn(t)}var e=Tn;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}qs=!1}function ai(r,e){cr.call(this),this.h=r||1,this.g=e||ft,this.j=Xe(this.qb,this),this.l=Date.now()}function Ft(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function Mn(r,e,t){if("function"==typeof r)t&&(r=Xe(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Xe(r.handleEvent,r)}return 2147483647<Number(e)?-1:ft.setTimeout(r,e||0)}function vr(r){r.g=Mn(()=>{r.g=null,r.i&&(r.i=!1,vr(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Rt(ai,cr),(Be=ai.prototype).ga=!1,Be.T=null,Be.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ke(this,"tick"),this.ga&&(Ft(this),this.start()))}},Be.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Be.N=function(){ai.$.N.call(this),Ft(this),delete this.g};class yi extends Pt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vr(this)}N(){super.N(),this.g&&(ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ln(r){Pt.call(this),this.h=r,this.g={}}Rt(Ln,Pt);var Pr=[];function Pi(r,e,t,s){Array.isArray(t)||(t&&(Pr[0]=t.toString()),t=Pr);for(var a=0;a<t.length;a++){var c=$e(e,t[a],s||r.handleEvent,!1,r.h||r);if(!c)break;r.g[c.key]=c}}function Yn(r){Mt(r.g,function(e,t){this.g.hasOwnProperty(t)&&Se(e)},r),r.g={}}function Oi(){this.g=!0}function _i(r,e,t,s){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $i(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var s=t[r];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var f=1;f<a.length;f++)a[f]=""}}}return wt(t)}catch{return e}}(r,t)+(s?" "+s:"")})}Ln.prototype.N=function(){Ln.$.N.call(this),Yn(this)},Ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Oi.prototype.Ea=function(){this.g=!1},Oi.prototype.info=function(){};var ki={},Wr=null;function _s(){return Wr=Wr||new cr}function qr(r){$n.call(this,ki.Ta,r)}function Ai(r){const e=_s();Ke(e,new qr(e))}function As(r,e){$n.call(this,ki.STAT_EVENT,r),this.stat=e}function ir(r){const e=_s();Ke(e,new As(e,r))}function mr(r,e){$n.call(this,ki.Ua,r),this.size=e}function ui(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return ft.setTimeout(function(){r()},e)}ki.Ta="serverreachability",Rt(qr,$n),ki.STAT_EVENT="statevent",Rt(As,$n),ki.Ua="timingevent",Rt(mr,$n);var Mi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},xe={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ie(){}function dt(){}Ie.prototype.h=null;var Dn,Tt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function vn(){$n.call(this,"d")}function bn(){$n.call(this,"c")}function Wn(){}function Or(r,e,t,s){this.l=r,this.j=e,this.m=t,this.W=s||1,this.U=new Ln(this),this.P=Er,this.V=new ai(r=ur?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new is}function is(){this.i=null,this.g="",this.h=!1}Rt(vn,$n),Rt(bn,$n),Rt(Wn,Ie),Wn.prototype.g=function(){return new XMLHttpRequest},Wn.prototype.i=function(){return{}},Dn=new Wn;var Er=45e3,Ys={},vi={};function vs(r,e,t){r.L=1,r.v=Fs(hs(e)),r.s=t,r.S=!0,vo(r,null)}function vo(r,e){r.G=Date.now(),lo(r),r.A=hs(r.v);var t=r.A,s=r.W;Array.isArray(s)||(s=[String(s)]),ei(t.i,"t",s),r.C=0,t=r.l.I,r.h=new is,r.g=no(r.l,t?e:null,!r.s),0<r.O&&(r.M=new yi(Xe(r.Pa,r,r.g),r.O)),Pi(r.U,r.g,"readystatechange",r.nb),e=r.I?Me(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),Ai(),function Ni(r,e,t,s,a,c){r.info(function(){if(r.g)if(c)for(var f="",C=c.split("&"),k=0;k<C.length;k++){var j=C[k].split("=");if(1<j.length){var X=j[0];j=j[1];var fe=X.split("_");f=2<=fe.length&&"type"==fe[1]?f+(X+"=")+j+"&":f+(X+"=redacted&")}}else f=null;else f=c;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(r.j,r.u,r.A,r.m,r.W,r.s)}function ss(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function Oo(r,e,t){let a,s=!0;for(;!r.J&&r.C<t.length;){if(a=uo(r,t),a==vi){4==e&&(r.o=4,ir(14),s=!1),_i(r.j,r.m,null,"[Incomplete Response]");break}if(a==Ys){r.o=4,ir(15),_i(r.j,r.m,t,"[Invalid Chunk]"),s=!1;break}_i(r.j,r.m,a,null),No(r,a)}ss(r)&&a!=vi&&a!=Ys&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,ir(16),s=!1),r.i=r.i&&s,s?0<t.length&&!r.ca&&(r.ca=!0,(e=r.l).g==r&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Lo(e),e.L=!0,ir(11))):(_i(r.j,r.m,t,"[Invalid Chunked Response]"),Es(r),Qi(r))}function uo(r,e){var t=r.C,s=e.indexOf("\n",t);return-1==s?vi:(t=Number(e.substring(t,s)),isNaN(t)?Ys:(s+=1)+t>e.length?vi:(e=e.substr(s,t),r.C=s+t,e))}function lo(r){r.Y=Date.now()+r.P,Ns(r,r.P)}function Ns(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=ui(Xe(r.lb,r),e)}function co(r){r.B&&(ft.clearTimeout(r.B),r.B=null)}function Qi(r){0==r.l.H||r.J||Xa(r.l,r)}function Es(r){co(r);var e=r.M;e&&"function"==typeof e.ra&&e.ra(),r.M=null,Ft(r.V),Yn(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.ra())}function No(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||to(t.h,r)))if(!r.K&&to(t.h,r)&&3==t.H){try{var s=t.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;Co(t),Ms(t)}Do(t),ir(18)}}else t.Fa=a[1],0<t.Fa-t.V&&37500>a[2]&&t.M&&0==t.A&&!t.v&&(t.v=ui(Xe(t.ib,t),6e3));if(1>=ws(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else ea(t,11)}else if((r.K||t.g==r)&&Co(t),!_n(e))for(a=t.Ja.g.parse(e),e=0;e<a.length;e++){let j=a[e];if(t.V=j[0],j=j[1],2==t.H)if("c"==j[0]){t.J=j[1],t.oa=j[2];const X=j[3];null!=X&&(t.qa=X,t.j.info("VER="+t.qa));const fe=j[4];null!=fe&&(t.Ga=fe,t.j.info("SVER="+t.Ga));const We=j[5];null!=We&&"number"==typeof We&&0<We&&(t.K=s=1.5*We,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const gt=r.g;if(gt){const $t=gt.g?gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($t){var c=s.h;c.g||-1==$t.indexOf("spdy")&&-1==$t.indexOf("quic")&&-1==$t.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Hi(c,c.h),c.h=null))}if(s.F){const Jt=gt.g?gt.g.getResponseHeader("X-HTTP-Session-Id"):null;Jt&&(s.Da=Jt,wr(s.G,s.F,Jt))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-r.G,t.j.info("Handshake RTT: "+t.S+"ms"));var f=r;if((s=t).wa=Xi(s,s.I?s.oa:null,s.Y),f.K){Is(s.h,f);var C=f,k=s.K;k&&C.setTimeout(k),C.B&&(co(C),lo(C)),s.g=f}else Fo(s);0<t.i.length&&gi(t)}else"stop"!=j[0]&&"close"!=j[0]||ea(t,7);else 3==t.H&&("stop"==j[0]||"close"==j[0]?"stop"==j[0]?ea(t,7):Cs(t):"noop"!=j[0]&&t.l&&t.l.Aa(j),t.A=0)}Ai()}catch{}}function Yo(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(Rn(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function ds(r){if(r.sa&&"function"==typeof r.sa)return r.sa();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(Rn(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const s in r)e[t++]=s;return e}}}(r),s=function ko(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(Rn(r)){for(var e=[],t=r.length,s=0;s<t;s++)e.push(r[s]);return e}for(s in e=[],t=0,r)e[t++]=r[s];return e}(r),a=s.length,c=0;c<a;c++)e.call(void 0,s[c],t&&t[c],r)}(Be=Or.prototype).setTimeout=function(r){this.P=r},Be.nb=function(r){r=r.target;const e=this.M;e&&3==sr(r)?e.l():this.Pa(r)},Be.Pa=function(r){try{if(r==this.g)e:{const X=sr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>X)&&(3!=X||ur||this.g&&(this.h.h||this.g.ja()||ti(this.g)))){this.J||4!=X||7==e||Ai(),co(this);var t=this.g.da();this.aa=t;t:if(ss(this)){var s=ti(this.g);r="";var a=s.length,c=4==sr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),Qi(this);var f="";break t}this.h.i=new ft.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,r+=this.h.i.decode(s[e],{stream:c&&e==a-1});s.splice(0,a),this.h.g+=r,this.C=0,f=this.h.g}else f=this.g.ja();if(this.i=200==t,function ln(r,e,t,s,a,c,f){r.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+f})}(this.j,this.u,this.A,this.m,this.W,X,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var C,k=this.g;if((C=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_n(C)){var j=C;break t}}j=null}if(!(t=j)){this.i=!1,this.o=3,ir(12),Es(this),Qi(this);break e}_i(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,No(this,t)}this.S?(Oo(this,X,f),ur&&this.i&&3==X&&(Pi(this.U,this.V,"tick",this.mb),this.V.start())):(_i(this.j,this.m,f,null),No(this,f)),4==X&&Es(this),this.i&&!this.J&&(4==X?Xa(this.l,this):(this.i=!1,lo(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,ir(12)):(this.o=0,ir(13)),Es(this),Qi(this)}}}catch{}},Be.mb=function(){if(this.g){var r=sr(this.g),e=this.g.ja();this.C<e.length&&(co(this),Oo(this,r,e),this.i&&4!=r&&lo(this))}},Be.cancel=function(){this.J=!0,Es(this)},Be.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function ys(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ai(),ir(17)),Es(this),this.o=2,Qi(this)):Ns(this,this.Y-r)};var ho=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qs(r,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Qs){this.h=void 0!==e?e:r.h,Ei(this,r.j),this.s=r.s,this.g=r.g,wi(this,r.m),this.l=r.l,e=r.i;var t=new Ar;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Ji(this,t),this.o=r.o}else r&&(t=String(r).match(ho))?(this.h=!!e,Ei(this,t[1]||"",!0),this.s=Js(t[2]||""),this.g=Js(t[3]||"",!0),wi(this,t[4]),this.l=Js(t[5]||"",!0),Ji(this,t[6]||"",!0),this.o=Js(t[7]||"")):(this.h=!!e,this.i=new Ar(null,this.h))}function hs(r){return new Qs(r)}function Ei(r,e,t){r.j=t?Js(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function wi(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function Ji(r,e,t){e instanceof Ar?(r.i=e,function Eo(r,e){e&&!r.j&&(ji(r),r.i=null,r.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(ci(this,s),ei(this,a,t))},r)),r.j=e}(r.i,r.h)):(t||(e=Ls(e,Us)),r.i=new Ar(e,r.h))}function wr(r,e,t){r.i.set(e,t)}function Fs(r){return wr(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Js(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Ls(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,fs),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function fs(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Qs.prototype.toString=function(){var r=[],e=this.j;e&&r.push(Ls(e,oa,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(Ls(e,oa,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(Ls(t,"/"==t.charAt(0)?Xs:Qo,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",Ls(t,li)),r.join("")};var oa=/[#\/\?@]/g,Qo=/[#\?:]/g,Xs=/[#\?]/g,Us=/[#\?@]/g,li=/#/g;function Ar(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function ji(r){r.g||(r.g=new Map,r.h=0,r.i&&function ks(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var s=r[t].indexOf("="),a=null;if(0<=s){var c=r[t].substring(0,s);a=r[t].substring(s+1)}else c=r[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ci(r,e){ji(r),e=Kr(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function ps(r,e){return ji(r),e=Kr(r,e),r.g.has(e)}function ei(r,e,t){ci(r,e),0<t.length&&(r.i=null,r.g.set(Kr(r,e),nn(t)),r.h+=t.length)}function Kr(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function xi(r){this.l=r||pi,r=ft.PerformanceNavigationTiming?0<(r=ft.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(ft.g&&ft.g.Ka&&ft.g.Ka()&&ft.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Be=Ar.prototype).add=function(r,e){ji(this),this.i=null,r=Kr(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},Be.forEach=function(r,e){ji(this),this.g.forEach(function(t,s){t.forEach(function(a){r.call(e,a,s,this)},this)},this)},Be.sa=function(){ji(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const a=r[s];for(let c=0;c<a.length;c++)t.push(e[s])}return t},Be.Z=function(r){ji(this);let e=[];if("string"==typeof r)ps(this,r)&&(e=e.concat(this.g.get(Kr(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},Be.set=function(r,e){return ji(this),this.i=null,ps(this,r=Kr(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},Be.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},Be.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const c=encodeURIComponent(String(s)),f=this.Z(s);for(s=0;s<f.length;s++){var a=c;""!==f[s]&&(a+="="+encodeURIComponent(String(f[s]))),r.push(a)}}return this.i=r.join("&")};var pi=10;function eo(r){return!!r.h||!!r.g&&r.g.size>=r.j}function ws(r){return r.h?1:r.g?r.g.size:0}function to(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Hi(r,e){r.g?r.g.add(e):r.h=e}function Is(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function wo(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return nn(r.i)}function xn(){}function Ds(){this.g=new xn}function V(r,e,t){const s=t||"";try{Yo(r,function(a,c){let f=a;Qe(a)&&(f=wt(a)),e.push(s+c+"="+encodeURIComponent(f))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function P(r,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch{}}function I(r){this.l=r.fc||null,this.j=r.ob||!1}function A(r,e){cr.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=Q,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xi.prototype.cancel=function(){if(this.i=wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},xn.prototype.stringify=function(r){return ft.JSON.stringify(r,void 0)},xn.prototype.parse=function(r){return ft.JSON.parse(r,void 0)},Rt(I,Ie),I.prototype.g=function(){return new A(this.l,this.j)},I.prototype.i=function(r){return function(){return r}}({}),Rt(A,cr);var Q=0;function oe(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function ee(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Re(r)}function Re(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(Be=A.prototype).open=function(r,e){if(this.readyState!=Q)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Re(this)},Be.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||ft).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Be.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ee(this)),this.readyState=Q},Be.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Re(this)),this.g&&(this.readyState=3,Re(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ft.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oe(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},Be.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?ee(this):Re(this),3==this.readyState&&oe(this)}},Be.Za=function(r){this.g&&(this.response=this.responseText=r,ee(this))},Be.Ya=function(r){this.g&&(this.response=r,ee(this))},Be.ka=function(){this.g&&ee(this)},Be.setRequestHeader=function(r,e){this.v.append(r,e)},Be.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},Be.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(A.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var It=ft.JSON.parse;function Vt(r){cr.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Bt,this.L=this.M=!1}Rt(Vt,cr);var Bt="",En=/^https?$/i,Kn=["POST","PUT"];function Hr(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Lr(r),Yr(r)}function Lr(r){r.F||(r.F=!0,Ke(r,"complete"),Ke(r,"error"))}function di(r){if(r.h&&typeof pt<"u"&&(!r.C[1]||4!=sr(r)||2!=r.da()))if(r.v&&4==sr(r))Mn(r.La,0,r);else if(Ke(r,"readystatechange"),4==sr(r)){r.h=!1;try{const C=r.da();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===C){var a=String(r.I).match(ho)[1]||null;if(!a&&ft.self&&ft.self.location){var c=ft.self.location.protocol;a=c.substr(0,c.length-1)}s=!En.test(a?a.toLowerCase():"")}t=s}if(t)Ke(r,"complete"),Ke(r,"success");else{r.m=6;try{var f=2<sr(r)?r.g.statusText:""}catch{f=""}r.j=f+" ["+r.da()+"]",Lr(r)}}finally{Yr(r)}}}function Yr(r,e){if(r.g){Gr(r);const t=r.g,s=r.C[0]?Dt:null;r.g=null,r.C=null,e||Ke(r,"ready");try{t.onreadystatechange=s}catch{}}}function Gr(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(ft.clearTimeout(r.A),r.A=null)}function sr(r){return r.g?r.g.readyState:0}function ti(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case Bt:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function jr(r){let e="";return Mt(r,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Ur(r,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=jr(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):wr(r,e,t))}function ni(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function Vs(r){this.Ga=0,this.i=[],this.j=new Oi,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ni("failFast",!1,r),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ni("baseRetryDelayMs",5e3,r),this.hb=ni("retryDelaySeedMs",1e4,r),this.eb=ni("forwardChannelMaxRetries",2,r),this.xa=ni("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.K=void 0,this.I=r&&r.supportsCrossDomainXhr||!1,this.J="",this.h=new xi(r&&r.concurrentRequestLimit),this.Ja=new Ds,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.j.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Cs(r){if(_a(r),3==r.H){var e=r.W++,t=hs(r.G);wr(t,"SID",r.J),wr(t,"RID",e),wr(t,"TYPE","terminate"),Io(r,t),(e=new Or(r,r.j,e,void 0)).L=2,e.v=Fs(hs(t)),t=!1,ft.navigator&&ft.navigator.sendBeacon&&(t=ft.navigator.sendBeacon(e.v.toString(),"")),!t&&ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=no(e.l,null),e.g.ha(e.v)),e.G=Date.now(),lo(e)}Ea(r)}function Ms(r){r.g&&(Lo(r),r.g.cancel(),r.g=null)}function _a(r){Ms(r),r.u&&(ft.clearTimeout(r.u),r.u=null),Co(r),r.h.cancel(),r.m&&("number"==typeof r.m&&ft.clearTimeout(r.m),r.m=null)}function gi(r){eo(r.h)||r.m||(r.m=!0,kn(r.Na,r),r.C=0)}function Xo(r,e){var t;t=e?e.m:r.W++;const s=hs(r.G);wr(s,"SID",r.J),wr(s,"RID",t),wr(s,"AID",r.V),Io(r,s),r.o&&r.s&&Ur(s,r.o,r.s),t=new Or(r,r.j,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.i=e.F.concat(r.i)),e=Na(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Hi(r.h,t),vs(t,s,e)}function Io(r,e){r.ma&&Mt(r.ma,function(t,s){wr(e,s,t)}),r.l&&Yo({},function(t,s){wr(e,s,t)})}function Na(r,e,t){t=Math.min(r.i.length,t);var s=r.l?Xe(r.l.Va,r.l,r):null;e:{var a=r.i;let c=-1;for(;;){const f=["count="+t];-1==c?0<t?(c=a[0].h,f.push("ofs="+c)):c=0:f.push("ofs="+c);let C=!0;for(let k=0;k<t;k++){let j=a[k].h;const X=a[k].g;if(j-=c,0>j)c=Math.max(0,a[k].h-100),C=!1;else try{V(X,f,"req"+j+"_")}catch{s&&s(X)}}if(C){s=f.join("&");break e}}}return r=r.i.splice(0,t),e.F=r,s}function Fo(r){r.g||r.u||(r.ba=1,kn(r.Ma,r),r.A=0)}function Do(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=ui(Xe(r.Ma,r),va(r,r.A)),r.A++,0))}function Lo(r){null!=r.B&&(ft.clearTimeout(r.B),r.B=null)}function Uo(r){r.g=new Or(r,r.j,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=hs(r.wa);wr(e,"RID","rpc"),wr(e,"SID",r.J),wr(e,"CI",r.M?"0":"1"),wr(e,"AID",r.V),wr(e,"TYPE","xmlhttp"),Io(r,e),r.o&&r.s&&Ur(e,r.o,r.s),r.K&&r.g.setTimeout(r.K);var t=r.g;r=r.oa,t.L=1,t.v=Fs(hs(e)),t.s=null,t.S=!0,vo(t,r)}function Co(r){null!=r.v&&(ft.clearTimeout(r.v),r.v=null)}function Xa(r,e){var t=null;if(r.g==e){Co(r),Lo(r),r.g=null;var s=2}else{if(!to(r.h,e))return;t=e.F,Is(r.h,e),s=1}if(0!=r.H)if(r.ta=e.aa,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.G;var a=r.C;Ke(s=_s(),new mr(s,t)),gi(r)}else Fo(r);else if(3==(a=e.o)||0==a&&0<r.ta||!(1==s&&function aa(r,e){return!(ws(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=e.F.concat(r.i),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=ui(Xe(r.Na,r,e),va(r,r.C)),r.C++,0)))}(r,e)||2==s&&Do(r)))switch(t&&0<t.length&&(e=r.h,e.i=e.i.concat(t)),a){case 1:ea(r,5);break;case 4:ea(r,10);break;case 3:ea(r,6);break;default:ea(r,2)}}function va(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.l||(t*=2),t*e}function ea(r,e){if(r.j.info("Error code "+e),2==e){var t=null;r.l&&(t=null);var s=Xe(r.pb,r);t||(t=new Qs("//www.google.com/images/cleardot.gif"),ft.location&&"http"==ft.location.protocol||Ei(t,"https"),Fs(t)),function N(r,e){const t=new Oi;if(ft.Image){const s=new Image;s.onload=xt(P,t,s,"TestLoadImage: loaded",!0,e),s.onerror=xt(P,t,s,"TestLoadImage: error",!1,e),s.onabort=xt(P,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=xt(P,t,s,"TestLoadImage: timeout",!1,e),ft.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=r}else e(!1)}(t.toString(),s)}else ir(2);r.H=0,r.l&&r.l.za(e),Ea(r),_a(r)}function Ea(r){if(r.H=0,r.pa=[],r.l){const e=wo(r.h);(0!=e.length||0!=r.i.length)&&(gn(r.pa,e),gn(r.pa,r.i),r.h.i.length=0,nn(r.i),r.i.length=0),r.l.ya()}}function Xi(r,e,t){var s=t instanceof Qs?hs(t):new Qs(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),wi(s,s.m);else{var a=ft.location;s=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Qs(null,void 0);s&&Ei(c,s),e&&(c.g=e),a&&wi(c,a),t&&(c.l=t),s=c}return e=r.Da,(t=r.F)&&e&&wr(s,t,e),wr(s,"VER",r.qa),Io(r,s),s}function no(r,e,t){if(e&&!r.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vt(t&&r.Ha&&!r.va?new I({ob:!0}):r.va)).Oa(r.I),e}function ri(){}function Vo(){if(kr&&!(10<=Number(nr)))throw Error("Environmental error: no available transport.")}function xs(r,e){cr.call(this),this.g=new Vs(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!_n(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_n(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new ta(this)}function bo(r){vn.call(this);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function Iu(){bn.call(this),this.status=1}function ta(r){this.g=r}function gs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function wa(r,e,t){t||(t=0);var s=Array(16);if("string"==typeof e)for(var a=0;16>a;++a)s[a]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(a=0;16>a;++a)s[a]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var c=r.g[3],f=(e=r.g[0])+(c^(t=r.g[1])&((a=r.g[2])^c))+s[0]+3614090360&4294967295;f=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=(t=(a=(c=(e=t+(f<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[1]+3905402710&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[2]+606105819&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[3]+3250441966&4294967295)<<22&4294967295|f>>>10))+((f=e+(c^t&(a^c))+s[4]+4118548399&4294967295)<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[5]+1200080426&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[6]+2821735955&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[7]+4249261313&4294967295)<<22&4294967295|f>>>10))+((f=e+(c^t&(a^c))+s[8]+1770035416&4294967295)<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[9]+2336552879&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[10]+4294925233&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[11]+2304563134&4294967295)<<22&4294967295|f>>>10))+((f=e+(c^t&(a^c))+s[12]+1804603682&4294967295)<<7&4294967295|f>>>25))+((f=c+(a^e&(t^a))+s[13]+4254626195&4294967295)<<12&4294967295|f>>>20))+((f=a+(t^c&(e^t))+s[14]+2792965006&4294967295)<<17&4294967295|f>>>15))+((f=t+(e^a&(c^e))+s[15]+1236535329&4294967295)<<22&4294967295|f>>>10))+((f=e+(a^c&(t^a))+s[1]+4129170786&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[6]+3225465664&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[11]+643717713&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[0]+3921069994&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^c&(t^a))+s[5]+3593408605&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[10]+38016083&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[15]+3634488961&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[4]+3889429448&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^c&(t^a))+s[9]+568446438&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[14]+3275163606&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[3]+4107603335&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[8]+1163531501&4294967295)<<20&4294967295|f>>>12))+((f=e+(a^c&(t^a))+s[13]+2850285829&4294967295)<<5&4294967295|f>>>27))+((f=c+(t^a&(e^t))+s[2]+4243563512&4294967295)<<9&4294967295|f>>>23))+((f=a+(e^t&(c^e))+s[7]+1735328473&4294967295)<<14&4294967295|f>>>18))+((f=t+(c^e&(a^c))+s[12]+2368359562&4294967295)<<20&4294967295|f>>>12))+((f=e+(t^a^c)+s[5]+4294588738&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[8]+2272392833&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[11]+1839030562&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[14]+4259657740&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^c)+s[1]+2763975236&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[4]+1272893353&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[7]+4139469664&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[10]+3200236656&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^c)+s[13]+681279174&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[0]+3936430074&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[3]+3572445317&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[6]+76029189&4294967295)<<23&4294967295|f>>>9))+((f=e+(t^a^c)+s[9]+3654602809&4294967295)<<4&4294967295|f>>>28))+((f=c+(e^t^a)+s[12]+3873151461&4294967295)<<11&4294967295|f>>>21))+((f=a+(c^e^t)+s[15]+530742520&4294967295)<<16&4294967295|f>>>16))+((f=t+(a^c^e)+s[2]+3299628645&4294967295)<<23&4294967295|f>>>9))+((f=e+(a^(t|~c))+s[0]+4096336452&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[7]+1126891415&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(c|~t))+s[14]+2878612391&4294967295)<<15&4294967295|f>>>17))+((f=t+(c^(a|~e))+s[5]+4237533241&4294967295)<<21&4294967295|f>>>11))+((f=e+(a^(t|~c))+s[12]+1700485571&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[3]+2399980690&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(c|~t))+s[10]+4293915773&4294967295)<<15&4294967295|f>>>17))+((f=t+(c^(a|~e))+s[1]+2240044497&4294967295)<<21&4294967295|f>>>11))+((f=e+(a^(t|~c))+s[8]+1873313359&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[15]+4264355552&4294967295)<<10&4294967295|f>>>22))+((f=a+(e^(c|~t))+s[6]+2734768916&4294967295)<<15&4294967295|f>>>17))+((f=t+(c^(a|~e))+s[13]+1309151649&4294967295)<<21&4294967295|f>>>11))+((c=(e=t+((f=e+(a^(t|~c))+s[4]+4149444226&4294967295)<<6&4294967295|f>>>26))+((f=c+(t^(e|~a))+s[11]+3174756917&4294967295)<<10&4294967295|f>>>22))^((a=c+((f=a+(e^(c|~t))+s[2]+718787259&4294967295)<<15&4294967295|f>>>17))|~e))+s[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(a+(f<<21&4294967295|f>>>11))&4294967295,r.g[2]=r.g[2]+a&4294967295,r.g[3]=r.g[3]+c&4294967295}function Ir(r,e){this.h=e;for(var t=[],s=!0,a=r.length-1;0<=a;a--){var c=0|r[a];s&&c==e||(t[a]=c,s=!1)}this.g=t}(Be=Vt.prototype).Oa=function(r){this.M=r},Be.ha=function(r,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Dn.g(),this.C=function je(r){return r.h||(r.h=r.i())}(this.u?this.u:Dn),this.g.onreadystatechange=Xe(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(c){return void Hr(this,c)}if(r=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var a in s)t.set(a,s[a]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const c of s.keys())t.set(c,s.get(c))}s=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=ft.FormData&&r instanceof ft.FormData,!(0<=tn(Kn,e))||s||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,f]of t)this.g.setRequestHeader(c,f);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Gr(this),0<this.B&&((this.L=function dr(r){return kr&&function Tr(){return Ut(an,9,function(){let r=0;const e=Jn(String(zt)).split("."),t=Jn("9").split("."),s=Math.max(e.length,t.length);for(let f=0;0==r&&f<s;f++){var a=e[f]||"",c=t[f]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;r=br(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||br(0==a[2].length,0==c[2].length)||br(a[2],c[2]),a=a[3],c=c[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xe(this.ua,this)):this.A=Mn(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(c){Hr(this,c)}},Be.ua=function(){typeof pt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ke(this,"timeout"),this.abort(8))},Be.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,Ke(this,"complete"),Ke(this,"abort"),Yr(this))},Be.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yr(this,!0)),Vt.$.N.call(this)},Be.La=function(){this.s||(this.G||this.v||this.l?di(this):this.kb())},Be.kb=function(){di(this)},Be.da=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},Be.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Be.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),It(e)}},Be.Ia=function(){return this.m},Be.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Be=Vs.prototype).qa=8,Be.H=1,Be.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const a=new Or(this,this.j,r,void 0);let c=this.s;if(this.U&&(c?(c=Me(c),wn(c,this.U)):c=this.U),null!==this.o||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Na(this,a,e),wr(t=hs(this.G),"RID",r),wr(t,"CVER",22),this.F&&wr(t,"X-HTTP-Session-Id",this.F),Io(this,t),c&&(this.O?e="headers="+encodeURIComponent(String(jr(c)))+"&"+e:this.o&&Ur(t,this.o,c)),Hi(this.h,a),this.bb&&wr(t,"TYPE","init"),this.P?(wr(t,"$req",e),wr(t,"SID","null"),a.ba=!0,vs(a,t,null)):vs(a,t,e),this.H=2}}else 3==this.H&&(r?Xo(this,r):0==this.i.length||eo(this.h)||Xo(this))},Be.Ma=function(){if(this.u=null,Uo(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var r=2*this.S;this.j.info("BP detection timer enabled: "+r),this.B=ui(Xe(this.jb,this),r)}},Be.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,ir(10),Ms(this),Uo(this))},Be.ib=function(){null!=this.v&&(this.v=null,Ms(this),Do(this),ir(19))},Be.pb=function(r){r?(this.j.info("Successfully pinged google.com"),ir(2)):(this.j.info("Failed to ping google.com"),ir(1))},(Be=ri.prototype).Ba=function(){},Be.Aa=function(){},Be.za=function(){},Be.ya=function(){},Be.Va=function(){},Vo.prototype.g=function(r,e){return new xs(r,e)},Rt(xs,cr),xs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var r=this.g,e=this.l,t=this.h||void 0;ir(0),r.Y=e,r.ma=t||{},r.M=r.aa,r.G=Xi(r,null,r.Y),gi(r)},xs.prototype.close=function(){Cs(this.g)},xs.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=wt(r),r=t);e.i.push(new class{constructor(r,e){this.h=r,this.g=e}}(e.fb++,r)),3==e.H&&gi(e)},xs.prototype.N=function(){this.g.l=null,delete this.j,Cs(this.g),delete this.g,xs.$.N.call(this)},Rt(bo,vn),Rt(Iu,bn),Rt(ta,ri),ta.prototype.Ba=function(){Ke(this.g,"a")},ta.prototype.Aa=function(r){Ke(this.g,new bo(r))},ta.prototype.za=function(r){Ke(this.g,new Iu)},ta.prototype.ya=function(){Ke(this.g,"b")},Rt(gs,function Il(){this.blockSize=-1}),gs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},gs.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,s=this.m,a=this.h,c=0;c<e;){if(0==a)for(;c<=t;)wa(this,r,c),c+=this.blockSize;if("string"==typeof r){for(;c<e;)if(s[a++]=r.charCodeAt(c++),a==this.blockSize){wa(this,s),a=0;break}}else for(;c<e;)if(s[a++]=r[c++],a==this.blockSize){wa(this,s),a=0;break}}this.h=a,this.i+=e},gs.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var s=0;32>s;s+=8)r[t++]=this.g[e]>>>s&255;return r};var S={};function G(r){return-128<=r&&128>r?Ut(S,r,function(e){return new Ir([0|e],0>e?-1:0)}):new Ir([0|r],0>r?-1:0)}function R(r){if(isNaN(r)||!isFinite(r))return it;if(0>r)return Sn(R(-r));for(var e=[],t=1,s=0;r>=t;s++)e[s]=r/t|0,t*=de;return new Ir(e,0)}var de=4294967296,it=G(0),_t=G(1),dn=G(16777216);function yr(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Zn(r){return-1==r.h}function Sn(r){for(var e=r.g.length,t=[],s=0;s<e;s++)t[s]=~r.g[s];return new Ir(t,~r.h).add(_t)}function Un(r,e){return r.add(Sn(e))}function Qr(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function er(r,e){this.g=r,this.h=e}function ii(r,e){if(yr(e))throw Error("division by zero");if(yr(r))return new er(it,it);if(Zn(r))return e=ii(Sn(r),e),new er(Sn(e.g),Sn(e.h));if(Zn(e))return e=ii(r,Sn(e)),new er(Sn(e.g),e.h);if(30<r.g.length){if(Zn(r)||Zn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=_t,s=e;0>=s.X(r);)t=ro(t),s=ro(s);var a=Fi(t,1),c=Fi(s,1);for(s=Fi(s,2),t=Fi(t,2);!yr(s);){var f=c.add(s);0>=f.X(r)&&(a=a.add(t),c=f),s=Fi(s,1),t=Fi(t,1)}return e=Un(r,a.R(e)),new er(a,e)}for(a=it;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),s=48>=(s=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,s-48),f=(c=R(t)).R(e);Zn(f)||0<f.X(r);)f=(c=R(t-=s)).R(e);yr(c)&&(c=_t),a=a.add(c),r=Un(r,f)}return new er(a,r)}function ro(r){for(var e=r.g.length+1,t=[],s=0;s<e;s++)t[s]=r.D(s)<<1|r.D(s-1)>>>31;return new Ir(t,r.h)}function Fi(r,e){var t=e>>5;e%=32;for(var s=r.g.length-t,a=[],c=0;c<s;c++)a[c]=0<e?r.D(c+t)>>>e|r.D(c+t+1)<<32-e:r.D(c+t);return new Ir(a,r.h)}(Be=Ir.prototype).ea=function(){if(Zn(this))return-Sn(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var s=this.D(t);r+=(0<=s?s:de+s)*e,e*=de}return r},Be.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(yr(this))return"0";if(Zn(this))return"-"+Sn(this).toString(r);for(var e=R(Math.pow(r,6)),t=this,s="";;){var a=ii(t,e).g,c=((0<(t=Un(t,a.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(yr(t=a))return c+s;for(;6>c.length;)c="0"+c;s=c+s}},Be.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},Be.X=function(r){return Zn(r=Un(this,r))?-1:yr(r)?0:1},Be.abs=function(){return Zn(this)?Sn(this):this},Be.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0,a=0;a<=e;a++){var c=s+(65535&this.D(a))+(65535&r.D(a)),f=(c>>>16)+(this.D(a)>>>16)+(r.D(a)>>>16);s=f>>>16,t[a]=(f&=65535)<<16|(c&=65535)}return new Ir(t,-2147483648&t[t.length-1]?-1:0)},Be.R=function(r){if(yr(this)||yr(r))return it;if(Zn(this))return Zn(r)?Sn(this).R(Sn(r)):Sn(Sn(this).R(r));if(Zn(r))return Sn(this.R(Sn(r)));if(0>this.X(dn)&&0>r.X(dn))return R(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],s=0;s<2*e;s++)t[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<r.g.length;a++){var c=this.D(s)>>>16,f=65535&this.D(s),C=r.D(a)>>>16,k=65535&r.D(a);t[2*s+2*a]+=f*k,Qr(t,2*s+2*a),t[2*s+2*a+1]+=c*k,Qr(t,2*s+2*a+1),t[2*s+2*a+1]+=f*C,Qr(t,2*s+2*a+1),t[2*s+2*a+2]+=c*C,Qr(t,2*s+2*a+2)}for(s=0;s<e;s++)t[s]=t[2*s+1]<<16|t[2*s];for(s=e;s<2*e;s++)t[s]=0;return new Ir(t,0)},Be.gb=function(r){return ii(this,r).h},Be.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)&r.D(s);return new Ir(t,this.h&r.h)},Be.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)|r.D(s);return new Ir(t,this.h|r.h)},Be.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],s=0;s<e;s++)t[s]=this.D(s)^r.D(s);return new Ir(t,this.h^r.h)},Vo.prototype.createWebChannel=Vo.prototype.g,xs.prototype.send=xs.prototype.u,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,xe.COMPLETE="complete",dt.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",cr.prototype.listen=cr.prototype.O,Vt.prototype.listenOnce=Vt.prototype.P,Vt.prototype.getLastError=Vt.prototype.Sa,Vt.prototype.getLastErrorCode=Vt.prototype.Ia,Vt.prototype.getStatus=Vt.prototype.da,Vt.prototype.getResponseJson=Vt.prototype.Wa,Vt.prototype.getResponseText=Vt.prototype.ja,Vt.prototype.send=Vt.prototype.ha,Vt.prototype.setWithCredentials=Vt.prototype.Oa,gs.prototype.digest=gs.prototype.l,gs.prototype.reset=gs.prototype.reset,gs.prototype.update=gs.prototype.j,Ir.prototype.add=Ir.prototype.add,Ir.prototype.multiply=Ir.prototype.R,Ir.prototype.modulo=Ir.prototype.gb,Ir.prototype.compare=Ir.prototype.X,Ir.prototype.toNumber=Ir.prototype.ea,Ir.prototype.toString=Ir.prototype.toString,Ir.prototype.getBits=Ir.prototype.D,Ir.fromNumber=R,Ir.fromString=function Y(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Sn(Y(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=R(Math.pow(e,8)),s=it,a=0;a<r.length;a+=8){var c=Math.min(8,r.length-a),f=parseInt(r.substring(a,a+c),e);8>c?(c=R(Math.pow(e,c)),s=s.R(c).add(R(f))):s=(s=s.R(t)).add(R(f))}return s};var fo=me.createWebChannelTransport=function(){return new Vo},Li=me.getStatEventTarget=function(){return _s()},os=me.ErrorCode=Mi,To=me.EventType=xe,Bs=me.Event=ki,eu=me.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Du=me.FetchXmlHttpFactory=I,Cu=me.WebChannel=dt,bu=me.XhrIo=Vt,Tu=me.Md5=gs,So=me.Integer=Ir;const Bo="@firebase/firestore";class si{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}si.UNAUTHENTICATED=new si(null),si.GOOGLE_CREDENTIALS=new si("google-credentials-uid"),si.FIRST_PARTY=new si("first-party-uid"),si.MOCK_USER=new si("mock-user");let ua="9.22.0";const po=new Ve.Yd("@firebase/firestore");function Ia(){return po.logLevel}function ct(r,...e){if(po.logLevel<=Ve.in.DEBUG){const t=e.map(tu);po.debug(`Firestore (${ua}): ${r}`,...t)}}function Ui(r,...e){if(po.logLevel<=Ve.in.ERROR){const t=e.map(tu);po.error(`Firestore (${ua}): ${r}`,...t)}}function as(r,...e){if(po.logLevel<=Ve.in.WARN){const t=e.map(tu);po.warn(`Firestore (${ua}): ${r}`,...t)}}function tu(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function en(r="Unexpected state"){const e=`FIRESTORE (${ua}) INTERNAL ASSERTION FAILED: `+r;throw Ui(e),new Error(e)}function mn(r,e){r||en()}function Yt(r,e){return r}const Ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends Ge.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class es{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class na{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(si.UNAUTHENTICATED))}shutdown(){}}class ka{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ju{constructor(e){this.t=e,this.currentUser=si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const c=j=>this.i!==a?(a=this.i,t(j)):Promise.resolve();let f=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Ii,e.enqueueRetryable(()=>c(this.currentUser))};const C=()=>{const j=f;e.enqueueRetryable((0,O.Z)(function*(){yield j.promise,yield c(s.currentUser)}))},k=j=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=j,this.auth.addAuthTokenListener(this.o),C()};this.t.onInit(j=>k(j)),setTimeout(()=>{if(!this.auth){const j=this.t.getImmediate({optional:!0});j?k(j):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Ii)}},0),C()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(mn("string"==typeof s.accessToken),new es(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mn(null===e||"string"==typeof e),new si(e)}}class Da{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=si.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class $o{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Da(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(si.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ca{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=c=>{null!=c.error&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.T;return this.T=c.token,ct("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.I.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.I.getImmediate({optional:!0});c?a(c):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mn("string"==typeof t.token),this.T=t.token,new Ca(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function iu(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class la{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=iu(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<t&&(s+=e.charAt(a[c]%e.length))}return s}}function jn(r,e){return r<e?-1:r>e?1:0}function Rs(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}function ca(r){return r+"\0"}class Di{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new St(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new St(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new St(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new St(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Di.fromMillis(Date.now())}static fromDate(e){return Di.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Di(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jn(this.nanoseconds,e.nanoseconds):jn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class In{constructor(e){this.timestamp=e}static fromTimestamp(e){return new In(e)}static min(){return new In(new Di(0,0))}static max(){return new In(new Di(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Mr{constructor(e,t,s){void 0===t?t=0:t>e.length&&en(),void 0===s?s=e.length-t:s>e.length-t&&en(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Mr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const c=e.get(a),f=t.get(a);if(c<f)return-1;if(c>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xr extends Mr{construct(e,t,s){return new xr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new St(Ze.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new xr(t)}static emptyPath(){return new xr([])}}const Su=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends Mr{construct(e,t,s){return new Vi(e,t,s)}static isValidIdentifier(e){return Su.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vi(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const c=()=>{if(0===s.length)throw new St(Ze.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;a<e.length;){const C=e[a];if("\\"===C){if(a+1===e.length)throw new St(Ze.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const k=e[a+1];if("\\"!==k&&"."!==k&&"`"!==k)throw new St(Ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=k,a+=2}else"`"===C?(f=!f,a++):"."!==C||f?(s+=C,a++):(c(),a++)}if(c(),f)throw new St(Ze.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vi(t)}static emptyPath(){return new Vi([])}}class Qt{constructor(e){this.path=e}static fromPath(e){return new Qt(xr.fromString(e))}static fromName(e){return new Qt(xr.fromString(e).popFirst(5))}static empty(){return new Qt(xr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qt(new xr(e.slice()))}}class ba{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Hu(r){return r.fields.find(e=>2===e.kind)}function Ta(r){return r.fields.filter(e=>2!==e.kind)}ba.UNKNOWN_ID=-1;class Gu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ci{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ci(0,Ps.min())}}function Aa(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=In.fromTimestamp(1e9===s?new Di(t+1,0):new Di(t,s));return new Ps(a,Qt.empty(),e)}function Fa(r){return new Ps(r.readTime,r.key,-1)}class Ps{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ps(In.min(),Qt.empty(),-1)}static max(){return new Ps(In.max(),Qt.empty(),-1)}}function $s(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qt.comparator(r.documentKey,e.documentKey),0!==t?t:jn(r.largestBatchId,e.largestBatchId))}const io="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function js(r){return E.apply(this,arguments)}function E(){return E=(0,O.Z)(function*(r){if(r.code!==Ze.FAILED_PRECONDITION||r.message!==io)throw r;ct("LocalStore","Unexpectedly lost primary lease")}),E.apply(this,arguments)}class _{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&en(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _?t:_.resolve(t)}catch(t){return _.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_.reject(t)}static resolve(e){return new _((t,s)=>{t(e)})}static reject(e){return new _((t,s)=>{s(e)})}static waitFor(e){return new _((t,s)=>{let a=0,c=0,f=!1;e.forEach(C=>{++a,C.next(()=>{++c,f&&c===a&&t()},k=>s(k))}),f=!0,c===a&&t()})}static or(e){let t=_.resolve(!1);for(const s of e)t=t.next(a=>a?_.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,c)=>{s.push(t.call(this,a,c))}),this.waitFor(s)}static mapArray(e,t){return new _((s,a)=>{const c=e.length,f=new Array(c);let C=0;for(let k=0;k<c;k++){const j=k;t(e[j]).next(X=>{f[j]=X,++C,C===c&&s(f)},X=>a(X))}})}static doWhile(e,t){return new _((s,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):s()};c()})}}class m{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Ii,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new K(e,t.error)):this.v.resolve()},this.transaction.onerror=s=>{const a=qt(s.target.error);this.v.reject(new K(e,a))}}static open(e,t,s,a){try{return new m(t,e.transaction(a,s))}catch(c){throw new K(t,c)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ct("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Fe(t)}}class T{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===T.S((0,Ge.z$)())&&Ui("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ct("SimpleDb","Removing database:",e),mt(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ge.hl)())return!1;if(T.C())return!0;const e=(0,Ge.z$)(),t=T.S(e),s=0<t&&t<10,a=T.N(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,O.Z)(function*(){return t.db||(ct("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=f=>{s(f.target.result)},c.onblocked=()=>{a(new K(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=f=>{const C=f.target.error;a("VersionError"===C.name?new St(Ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new St(Ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new K(e,C))},c.onupgradeneeded=f=>{ct("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.V.O(f.target.result,c.transaction,f.oldVersion,t.version).next(()=>{ct("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var c=this;return(0,O.Z)(function*(){const f="readonly"===t;let C=0;for(;;){++C;try{c.db=yield c.$(e);const k=m.open(c.db,e,f?"readonly":"readwrite",s),j=a(k).next(X=>(k.P(),X)).catch(X=>(k.abort(X),_.reject(X))).toPromise();return j.catch(()=>{}),yield k.R,j}catch(k){const j=k,X="FirebaseError"!==j.name&&C<3;if(ct("SimpleDb","Transaction failed with error:",j.message,"Retrying:",X),c.close(),!X)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class U{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return mt(this.L.delete())}}class K extends St{constructor(e,t){super(Ze.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function te(r){return"IndexedDbTransactionError"===r.name}class Fe{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(ct("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(ct("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),mt(s)}add(e){return ct("SimpleDb","ADD",this.store.name,e,e),mt(this.store.add(e))}get(e){return mt(this.store.get(e)).next(t=>(void 0===t&&(t=null),ct("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ct("SimpleDb","DELETE",this.store.name,e),mt(this.store.delete(e))}count(){return ct("SimpleDb","COUNT",this.store.name),mt(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),c=[];return this.W(a,(f,C)=>{c.push(C)}).next(()=>c)}{const a=this.store.getAll(s.range);return new _((c,f)=>{a.onerror=C=>{f(C.target.error)},a.onsuccess=C=>{c(C.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new _((a,c)=>{s.onerror=f=>{c(f.target.error)},s.onsuccess=f=>{a(f.target.result)}})}J(e,t){ct("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const a=this.cursor(s);return this.W(a,(c,f,C)=>C.delete())}X(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.W(a,t)}Z(e){const t=this.cursor({});return new _((s,a)=>{t.onerror=c=>{const f=qt(c.target.error);a(f)},t.onsuccess=c=>{const f=c.target.result;f?e(f.primaryKey,f.value).next(C=>{C?f.continue():s()}):s()}})}W(e,t){const s=[];return new _((a,c)=>{e.onerror=f=>{c(f.target.error)},e.onsuccess=f=>{const C=f.target.result;if(!C)return void a();const k=new U(C),j=t(C.primaryKey,C.value,k);if(j instanceof _){const X=j.catch(fe=>(k.done(),_.reject(fe)));s.push(X)}k.isDone?a():null===k.K?C.continue():C.continue(k.K)}}).next(()=>_.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mt(r){return new _((e,t)=>{r.onsuccess=s=>{e(s.target.result)},r.onerror=s=>{const a=qt(s.target.error);t(a)}})}let Zt=!1;function qt(r){const e=T.S((0,Ge.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const s=new St("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zt||(Zt=!0,setTimeout(()=>{throw s},0)),s}}return r}class Rr{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ct("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,O.Z)(function*(){t.task=null;try{ct("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){te(s)?ct("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield js(s)}yield t.et(6e4)}))}}class ts{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,O.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let a=t,c=!0;return _.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(f=>{if(null!==f&&!s.has(f))return ct("IndexBackiller",`Processing collection: ${f}`),this.it(e,f,a).next(C=>{a-=C,s.add(f)});c=!1})).next(()=>t-a)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(c=>{const f=c.changes;return this.localStore.indexManager.updateIndexEntries(e,f).next(()=>this.rt(a,c)).next(C=>(ct("IndexBackiller",`Updating offset: ${C}`),this.localStore.indexManager.updateCollectionGroup(e,t,C))).next(()=>f.size)}))}rt(e,t){let s=e;return t.changes.forEach((a,c)=>{const f=Fa(c);$s(f,s)>0&&(s=f)}),new Ps(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let bi=(()=>{class r{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=a=>this.ot(a),this.ut=a=>s.writeSequenceNumber(a))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function bs(r){return null==r}function so(r){return 0===r&&1/r==-1/0}function Ti(r){return"number"==typeof r&&Number.isInteger(r)&&!so(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Gi(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ua(e)),e=La(r.get(t),e);return Ua(e)}function La(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const c=r.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function Ua(r){return r+"\x01\x01"}function Ao(r){const e=r.length;if(mn(e>=2),2===e)return mn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),xr.emptyPath();const t=e-2,s=[];let a="";for(let c=0;c<e;){const f=r.indexOf("\x01",c);switch((f<0||f>t)&&en(),r.charAt(f+1)){case"\x01":const C=r.substring(c,f);let k;0===a.length?k=C:(a+=C,k=a,a=""),s.push(k);break;case"\x10":a+=r.substring(c,f),a+="\0";break;case"\x11":a+=r.substring(c,f+1);break;default:en()}c=f+2}return new xr(s)}const Wu=["userId","batchId"];function Au(r,e){return[r,Gi(e)]}function qu(r,e,t){return[r,Gi(e),t]}const su={},ou=["prefixPath","collectionGroup","readTime","documentId"],qd=["prefixPath","collectionGroup","documentId"],nc=["collectionGroup","readTime","prefixPath","documentId"],Wc=["canonicalId","targetId"],au=["targetId","path"],Mu=["path","targetId"],nf=["collectionId","parent"],qc=["indexId","uid"],Kc=["uid","sequenceNumber"],rc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Kd=["indexId","uid","orderedDocumentKey"],Zd=["userId","collectionPath","documentId"],ic=["userId","collectionPath","largestBatchId"],Yd=["userId","collectionGroup","largestBatchId"],Ku=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bl=[...Ku,"documentOverlays"],Zc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Yc=Zc,Qc=[...Yc,"indexConfiguration","indexState","indexEntries"];class Tl extends zu{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function us(r,e){const t=Yt(r);return T.M(t.ht,e)}function Zu(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function da(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function uu(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Jr{constructor(e,t){this.comparator=e,this.root=t||zi.EMPTY}insert(e,t){return new Jr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zi.BLACK,null,null))}remove(e){return new Jr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yu(this.root,e,this.comparator,!0)}}class Yu{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zi{constructor(e,t,s,a,c){this.key=e,this.value=t,this.color=s??zi.RED,this.left=a??zi.EMPTY,this.right=c??zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,c){return new zi(e??this.key,t??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return zi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw en();const e=this.left.check();if(e!==this.right.check())throw en();return e+(this.isRed()?0:1)}}zi.EMPTY=null,zi.RED=!0,zi.BLACK=!1,zi.EMPTY=new class{constructor(){this.size=0}get key(){throw en()}get value(){throw en()}get color(){throw en()}get left(){throw en()}get right(){throw en()}copy(r,e,t,s,a){return this}insert(r,e,t){return new zi(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hi{constructor(e){this.comparator=e,this.data=new Jr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sl(this.data.getIterator())}getIteratorFrom(e){return new Sl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof hi)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hi(this.comparator);return t.data=e,t}}class Sl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lu(r){return r.hasNext()?r.getNext():void 0}class Mo{constructor(e){this.fields=e,e.sort(Vi.comparator)}static empty(){return new Mo([])}unionWith(e){let t=new hi(Vi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Mo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rs(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Jc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ls{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Jc("Invalid base64 string: "+a):a}}(e);return new ls(t)}static fromUint8Array(e){const t=function(s){let a="";for(let c=0;c<s.length;++c)a+=String.fromCharCode(s[c]);return a}(e);return new ls(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ls.EMPTY_BYTE_STRING=new ls("");const sc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(r){if(mn(!!r),"string"==typeof r){let e=0;const t=sc.exec(r);if(mn(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ri(r.seconds),nanos:Ri(r.nanos)}}function Ri(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function ha(r){return"string"==typeof r?ls.fromBase64String(r):ls.fromUint8Array(r)}function go(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function fa(r){const e=r.mapValue.fields.__previous_value__;return go(e)?fa(e):e}function Va(r){const e=Hs(r.mapValue.fields.__local_write_time__.timestampValue);return new Di(e.seconds,e.nanos)}class cu{constructor(e,t,s,a,c,f,C,k,j){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=C,this.longPollingOptions=k,this.useFetchStreams=j}}class Ma{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ma("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ma&&e.projectId===this.projectId&&e.database===this.database}}const xa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qu={nullValue:"NULL_VALUE"};function Ba(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?go(r)?4:xo(r)?9007199254740991:10:en()}function pa(r,e){if(r===e)return!0;const t=Ba(r);if(t!==Ba(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Va(r).isEqual(Va(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const c=Hs(s.timestampValue),f=Hs(a.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return a=e,ha(r.bytesValue).isEqual(ha(a.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,a){return Ri(s.geoPointValue.latitude)===Ri(a.geoPointValue.latitude)&&Ri(s.geoPointValue.longitude)===Ri(a.geoPointValue.longitude)}(r,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Ri(s.integerValue)===Ri(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const c=Ri(s.doubleValue),f=Ri(a.doubleValue);return c===f?so(c)===so(f):isNaN(c)&&isNaN(f)}return!1}(r,e);case 9:return Rs(r.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:return function(s,a){const c=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Zu(c)!==Zu(f))return!1;for(const C in c)if(c.hasOwnProperty(C)&&(void 0===f[C]||!pa(c[C],f[C])))return!1;return!0}(r,e);default:return en()}var a}function Ju(r,e){return void 0!==(r.values||[]).find(t=>pa(t,e))}function D(r,e){if(r===e)return 0;const t=Ba(r),s=Ba(e);if(t!==s)return jn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return jn(r.booleanValue,e.booleanValue);case 2:return function(a,c){const f=Ri(a.integerValue||a.doubleValue),C=Ri(c.integerValue||c.doubleValue);return f<C?-1:f>C?1:f===C?0:isNaN(f)?isNaN(C)?0:-1:1}(r,e);case 3:return M(r.timestampValue,e.timestampValue);case 4:return M(Va(r),Va(e));case 5:return jn(r.stringValue,e.stringValue);case 6:return function(a,c){const f=ha(a),C=ha(c);return f.compareTo(C)}(r.bytesValue,e.bytesValue);case 7:return function(a,c){const f=a.split("/"),C=c.split("/");for(let k=0;k<f.length&&k<C.length;k++){const j=jn(f[k],C[k]);if(0!==j)return j}return jn(f.length,C.length)}(r.referenceValue,e.referenceValue);case 8:return function(a,c){const f=jn(Ri(a.latitude),Ri(c.latitude));return 0!==f?f:jn(Ri(a.longitude),Ri(c.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(a,c){const f=a.values||[],C=c.values||[];for(let k=0;k<f.length&&k<C.length;++k){const j=D(f[k],C[k]);if(j)return j}return jn(f.length,C.length)}(r.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===xa.mapValue&&c===xa.mapValue)return 0;if(a===xa.mapValue)return 1;if(c===xa.mapValue)return-1;const f=a.fields||{},C=Object.keys(f),k=c.fields||{},j=Object.keys(k);C.sort(),j.sort();for(let X=0;X<C.length&&X<j.length;++X){const fe=jn(C[X],j[X]);if(0!==fe)return fe;const We=D(f[C[X]],k[j[X]]);if(0!==We)return We}return jn(C.length,j.length)}(r.mapValue,e.mapValue);default:throw en()}}function M(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return jn(r,e);const t=Hs(r),s=Hs(e),a=jn(t.seconds,s.seconds);return 0!==a?a:jn(t.nanos,s.nanos)}function $(r){return re(r)}function re(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(s){const a=Hs(s);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?ha(r.bytesValue).toBase64():"referenceValue"in r?Qt.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(s){let a="[",c=!0;for(const f of s.values||[])c?c=!1:a+=",",a+=re(f);return a+"]"}(r.arrayValue):"mapValue"in r?function(s){const a=Object.keys(s.fields||{}).sort();let c="{",f=!0;for(const C of a)f?f=!1:c+=",",c+=`${C}:${re(s.fields[C])}`;return c+"}"}(r.mapValue):en();var e}function Ue(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function nt(r){return!!r&&"integerValue"in r}function Ht(r){return!!r&&"arrayValue"in r}function Wt(r){return!!r&&"nullValue"in r}function yn(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Hn(r){return!!r&&"mapValue"in r}function Vn(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return da(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Vn(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vn(r.arrayValue.values[t]);return e}return Object.assign({},r)}function xo(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function cs(r){return"nullValue"in r?Qu:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Ue(Ma.empty(),Qt.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:en()}function xu(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Ue(Ma.empty(),Qt.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?xa:en()}function Xu(r,e){const t=D(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function $a(r,e){const t=D(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Hn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vn(t)}setAll(e){let t=Vi.emptyPath(),s={},a=[];e.forEach((f,C)=>{if(!t.isImmediateParentOf(C)){const k=this.getFieldsMap(t);this.applyChanges(k,s,a),s={},a=[],t=C.popLast()}f?s[C.lastSegment()]=Vn(f):a.push(C.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,a)}delete(e){const t=this.field(e.popLast());Hn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Hn(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){da(t,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new fi(Vn(this.value))}}function jo(r){const e=[];return da(r.fields,(t,s)=>{const a=new Vi([t]);if(Hn(s)){const c=jo(s.mapValue).fields;if(0===c.length)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new Mo(e)}class oi{constructor(e,t,s,a,c,f,C){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=C}static newInvalidDocument(e){return new oi(e,0,In.min(),In.min(),In.min(),fi.empty(),0)}static newFoundDocument(e,t,s,a){return new oi(e,1,t,In.min(),s,a,0)}static newNoDocument(e,t){return new oi(e,2,t,In.min(),In.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new oi(e,3,t,In.min(),In.min(),fi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(In.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=In.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ja{constructor(e,t){this.position=e,this.inclusive=t}}function Al(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const c=e[a],f=r.position[a];if(s=c.field.isKeyField()?Qt.comparator(Qt.fromName(f.referenceValue),t.key):D(f,t.data.field(c.field)),"desc"===c.dir&&(s*=-1),0!==s)break}return s}function Gp(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!pa(r.position[t],e.position[t]))return!1;return!0}class Ru{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xc(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class el{}class Dr extends el{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new tl(e,t,s):"array-contains"===t?new uf(e,s):"in"===t?new xl(e,s):"not-in"===t?new qp(e,s):"array-contains-any"===t?new Kp(e,s):new Dr(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Wp(e,s):new af(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(D(t,this.value)):null!==t&&Ba(this.value)===Ba(t)&&this.matchesComparison(D(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return en()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Vr extends el{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Vr(e,t)}matches(e){return Pu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Pu(r){return"and"===r.op}function ed(r){return"or"===r.op}function Qd(r){return td(r)&&Pu(r)}function td(r){for(const e of r.filters)if(e instanceof Vr)return!1;return!0}function Jd(r){if(r instanceof Dr)return r.field.canonicalString()+r.op.toString()+$(r.value);if(Qd(r))return r.filters.map(e=>Jd(e)).join(",");{const e=r.filters.map(t=>Jd(t)).join(",");return`${r.op}(${e})`}}function Xd(r,e){return r instanceof Dr?(t=r,(s=e)instanceof Dr&&t.op===s.op&&t.field.isEqual(s.field)&&pa(t.value,s.value)):r instanceof Vr?function(t,s){return s instanceof Vr&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((a,c,f)=>a&&Xd(c,s.filters[f]),!0)}(r,e):void en();var t,s}function sf(r,e){const t=r.filters.concat(e);return Vr.create(t,r.op)}function zp(r){return r instanceof Dr?`${(e=r).field.canonicalString()} ${e.op} ${$(e.value)}`:r instanceof Vr?function(e){return e.op.toString()+" {"+e.getFilters().map(zp).join(" ,")+"}"}(r):"Filter";var e}class tl extends Dr{constructor(e,t,s){super(e,t,s),this.key=Qt.fromName(s.referenceValue)}matches(e){const t=Qt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Wp extends Dr{constructor(e,t){super(e,"in",t),this.keys=Ml(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class af extends Dr{constructor(e,t){super(e,"not-in",t),this.keys=Ml(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ml(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Qt.fromName(s.referenceValue))}class uf extends Dr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ht(t)&&Ju(t.arrayValue,this.value)}}class xl extends Dr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ju(this.value.arrayValue,t)}}class qp extends Dr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ju(this.value.arrayValue,t)}}class Kp extends Dr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ht(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ju(this.value.arrayValue,s))}}class nd{constructor(e,t=null,s=[],a=[],c=null,f=null,C=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=C,this.dt=null}}function rd(r,e=null,t=[],s=[],a=null,c=null,f=null){return new nd(r,e,t,s,a,c,f)}function ra(r){const e=Yt(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Jd(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),bs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>$(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>$(s)).join(",")),e.dt=t}return e.dt}function Ou(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Xc(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Xd(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Gp(r.startAt,e.startAt)&&Gp(r.endAt,e.endAt)}function oc(r){return Qt.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function id(r,e){return r.filters.filter(t=>t instanceof Dr&&t.field.isEqual(e))}function Zp(r,e,t){let s=Qu,a=!0;for(const c of id(r,e)){let f=Qu,C=!0;switch(c.op){case"<":case"<=":f=cs(c.value);break;case"==":case"in":case">=":f=c.value;break;case">":f=c.value,C=!1;break;case"!=":case"not-in":f=Qu}Xu({value:s,inclusive:a},{value:f,inclusive:C})<0&&(s=f,a=C)}if(null!==t)for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const f=t.position[c];Xu({value:s,inclusive:a},{value:f,inclusive:t.inclusive})<0&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}function ac(r,e,t){let s=xa,a=!0;for(const c of id(r,e)){let f=xa,C=!0;switch(c.op){case">=":case">":f=xu(c.value),C=!1;break;case"==":case"in":case"<=":f=c.value;break;case"<":f=c.value,C=!1;break;case"!=":case"not-in":f=xa}$a({value:s,inclusive:a},{value:f,inclusive:C})>0&&(s=f,a=C)}if(null!==t)for(let c=0;c<r.orderBy.length;++c)if(r.orderBy[c].field.isEqual(e)){const f=t.position[c];$a({value:s,inclusive:a},{value:f,inclusive:t.inclusive})>0&&(s=f,a=t.inclusive);break}return{value:s,inclusive:a}}class du{constructor(e,t=null,s=[],a=[],c=null,f="F",C=null,k=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=C,this.endAt=k,this.wt=null,this._t=null}}function sd(r,e,t,s,a,c,f,C){return new du(r,e,t,s,a,c,f,C)}function hu(r){return new du(r)}function eh(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function uc(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function nl(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Nu(r){return null!==r.collectionGroup}function Ha(r){const e=Yt(r);if(null===e.wt){e.wt=[];const t=nl(e),s=uc(e);if(null!==t&&null===s)t.isKeyField()||e.wt.push(new Ru(t)),e.wt.push(new Ru(Vi.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e.wt.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Ru(Vi.keyField(),c))}}}return e.wt}function mo(r){const e=Yt(r);if(!e._t)if("F"===e.limitType)e._t=rd(e.path,e.collectionGroup,Ha(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of Ha(e))t.push(new Ru(c.field,"desc"===c.dir?"asc":"desc"));const s=e.endAt?new ja(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new ja(e.startAt.position,e.startAt.inclusive):null;e._t=rd(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e._t}function ku(r,e){e.getFirstInequalityField(),nl(r);const t=r.filters.concat([e]);return new du(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Rl(r,e,t){return new du(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function rl(r,e){return Ou(mo(r),mo(e))&&r.limitType===e.limitType}function Pl(r){return`${ra(mo(r))}|lt:${r.limitType}`}function od(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>zp(s)).join(", ")}]`),bs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(a=s).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>$(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>$(s)).join(",")),`Target(${t})`}(mo(r))}; limitType=${r.limitType})`}function Ol(r,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Qt.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(r,e)&&function(t,s){for(const a of Ha(t))if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(r,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(r,e)&&(s=e,!((t=r).startAt&&!function(a,c,f){const C=Al(a,c,f);return a.inclusive?C<=0:C<0}(t.startAt,Ha(t),s)||t.endAt&&!function(a,c,f){const C=Al(a,c,f);return a.inclusive?C>=0:C>0}(t.endAt,Ha(t),s)));var t,s}function lf(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function cf(r){return(e,t)=>{let s=!1;for(const a of Ha(r)){const c=Yp(a,e,t);if(0!==c)return c;s=s||a.field.isKeyField()}return 0}}function Yp(r,e,t){const s=r.field.isKeyField()?Qt.comparator(e.key,t.key):function(a,c,f){const C=c.data.field(a),k=f.data.field(a);return null!==C&&null!==k?D(C,k):en()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return en()}}class Ho{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,c]of s)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(t,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return uu(this.inner)}size(){return this.innerSize}}const df=new Jr(Qt.comparator);function Gs(){return df}const ad=new Jr(Qt.comparator);function Ga(...r){let e=ad;for(const t of r)e=e.insert(t.key,t);return e}function hf(r){let e=ad;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function za(){return il()}function ff(){return il()}function il(){return new Ho(r=>r.toString(),(r,e)=>r.isEqual(e))}const lc=new Jr(Qt.comparator),pf=new hi(Qt.comparator);function or(...r){let e=pf;for(const t of r)e=e.add(t);return e}const Nl=new hi(jn);function cc(){return Nl}function Ro(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:so(e)?"-0":e}}function sl(r){return{integerValue:""+r}}function ud(r,e){return Ti(e)?sl(e):Ro(r,e)}class Wa{constructor(){this._=void 0}}function th(r,e,t){return r instanceof ol?function(s,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&go(a)&&(a=fa(a)),a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):r instanceof al?oo(r,e):r instanceof ia?mf(r,e):function(s,a){const c=gf(s,a),f=yf(c)+yf(s.gt);return nt(c)&&nt(s.gt)?sl(f):Ro(s.serializer,f)}(r,e)}function nh(r,e,t){return r instanceof al?oo(r,e):r instanceof ia?mf(r,e):t}function gf(r,e){return r instanceof kl?nt(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class ol extends Wa{}class al extends Wa{constructor(e){super(),this.elements=e}}function oo(r,e){const t=rh(e);for(const s of r.elements)t.some(a=>pa(a,s))||t.push(s);return{arrayValue:{values:t}}}class ia extends Wa{constructor(e){super(),this.elements=e}}function mf(r,e){let t=rh(e);for(const s of r.elements)t=t.filter(a=>!pa(a,s));return{arrayValue:{values:t}}}class kl extends Wa{constructor(e,t){super(),this.serializer=e,this.gt=t}}function yf(r){return Ri(r.integerValue||r.doubleValue)}function rh(r){return Ht(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class zs{constructor(e,t){this.field=e,this.transform=t}}class ld{constructor(e,t){this.version=e,this.transformResults=t}}class Wi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wi}static exists(e){return new Wi(void 0,e)}static updateTime(e){return new Wi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ga(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class Fu{}function sh(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new h(r.key,Wi.none()):new ll(r.key,r.data,Wi.none());{const t=r.data,s=fi.empty();let a=new hi(Vi.comparator);for(let c of e.fields)if(!a.has(c)){let f=t.field(c);null===f&&c.length>1&&(c=c.popLast(),f=t.field(c)),null===f?s.delete(c):s.set(c,f),a=a.add(c)}return new qa(r.key,s,new Mo(a.toArray()),Wi.none())}}function dc(r,e,t){r instanceof ll?function(s,a,c){const f=s.value.clone(),C=y(s.fieldTransforms,a,c.transformResults);f.setAll(C),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(r,e,t):r instanceof qa?function(s,a,c){if(!ga(s.precondition,a))return void a.convertToUnknownDocument(c.version);const f=y(s.fieldTransforms,a,c.transformResults),C=a.data;C.setAll(Qp(s)),C.setAll(f),a.convertToFoundDocument(c.version,C).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sa(r,e,t,s){return r instanceof ll?function(a,c,f,C){if(!ga(a.precondition,c))return f;const k=a.value.clone(),j=d(a.fieldTransforms,C,c);return k.setAll(j),c.convertToFoundDocument(c.version,k).setHasLocalMutations(),null}(r,e,t,s):r instanceof qa?function(a,c,f,C){if(!ga(a.precondition,c))return f;const k=d(a.fieldTransforms,C,c),j=c.data;return j.setAll(Qp(a)),j.setAll(k),c.convertToFoundDocument(c.version,j).setHasLocalMutations(),null===f?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(X=>X.field))}(r,e,t,s):(f=t,ga(r.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f);var c,f}function ul(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),c=gf(s.transform,a||null);null!=c&&(null===t&&(t=fi.empty()),t.set(s.field,c))}return t||null}function oh(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===s||t&&s&&Rs(t,s,(a,c)=>function ih(r,e){return r.field.isEqual(e.field)&&(s=e.transform,(t=r.transform)instanceof al&&s instanceof al||t instanceof ia&&s instanceof ia?Rs(t.elements,s.elements,pa):t instanceof kl&&s instanceof kl?pa(t.gt,s.gt):t instanceof ol&&s instanceof ol);var t,s}(a,c))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,s}class ll extends Fu{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class qa extends Fu{constructor(e,t,s,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Qp(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function y(r,e,t){const s=new Map;mn(r.length===t.length);for(let a=0;a<t.length;a++){const c=r[a],f=c.transform,C=e.data.field(c.field);s.set(c.field,nh(f,C,t[a]))}return s}function d(r,e,t){const s=new Map;for(const a of r){const c=a.transform,f=t.data.field(a.field);s.set(a.field,th(c,f,e))}return s}class h extends Fu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w extends Fu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class B{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&dc(c,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=sa(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=sa(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ff();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let C=this.applyToLocalView(f,c.mutatedFields);C=t.has(a.key)?null:C;const k=sh(f,C);null!==k&&s.set(a.key,k),f.isValidDocument()||f.convertToNoDocument(In.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),or())}isEqual(e){return this.batchId===e.batchId&&Rs(this.mutations,e.mutations,(t,s)=>oh(t,s))&&Rs(this.baseMutations,e.baseMutations,(t,s)=>oh(t,s))}}class Z{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){mn(e.mutations.length===s.length);let a=lc;const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Z(e,t,s,a)}}class Ee{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ot{constructor(e,t){this.count=e,this.unchangedNames=t}}var Nt,kt;function pn(r){switch(r){default:return en();case Ze.CANCELLED:case Ze.UNKNOWN:case Ze.DEADLINE_EXCEEDED:case Ze.RESOURCE_EXHAUSTED:case Ze.INTERNAL:case Ze.UNAVAILABLE:case Ze.UNAUTHENTICATED:return!1;case Ze.INVALID_ARGUMENT:case Ze.NOT_FOUND:case Ze.ALREADY_EXISTS:case Ze.PERMISSION_DENIED:case Ze.FAILED_PRECONDITION:case Ze.ABORTED:case Ze.OUT_OF_RANGE:case Ze.UNIMPLEMENTED:case Ze.DATA_LOSS:return!0}}function Si(r){if(void 0===r)return Ui("GRPC error has no .code"),Ze.UNKNOWN;switch(r){case Nt.OK:return Ze.OK;case Nt.CANCELLED:return Ze.CANCELLED;case Nt.UNKNOWN:return Ze.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return Ze.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return Ze.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return Ze.INTERNAL;case Nt.UNAVAILABLE:return Ze.UNAVAILABLE;case Nt.UNAUTHENTICATED:return Ze.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return Ze.INVALID_ARGUMENT;case Nt.NOT_FOUND:return Ze.NOT_FOUND;case Nt.ALREADY_EXISTS:return Ze.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return Ze.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return Ze.FAILED_PRECONDITION;case Nt.ABORTED:return Ze.ABORTED;case Nt.OUT_OF_RANGE:return Ze.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return Ze.UNIMPLEMENTED;case Nt.DATA_LOSS:return Ze.DATA_LOSS;default:return en()}}(kt=Nt||(Nt={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";class Go{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return fu}static getOrCreateInstance(){return null===fu&&(fu=new Go),fu}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let fu=null;function ah(){return new TextEncoder}const ns=new So([4294967295,4294967295],0);function uh(r){const e=ah().encode(r),t=new Tu;return t.update(e),new Uint8Array(t.digest())}function lh(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new So([t,s],0),new So([a,c],0)]}class cl{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new dl(`Invalid padding: ${t}`);if(s<0)throw new dl(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new dl(`Invalid hash count: ${s}`);if(0===e.length&&0!==t)throw new dl(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=So.fromNumber(this.It)}Et(e,t,s){let a=e.add(t.multiply(So.fromNumber(s)));return 1===a.compare(ns)&&(a=new So([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=uh(e),[s,a]=lh(t);for(let c=0;c<this.hashCount;c++){const f=this.Et(s,a,c);if(!this.At(f))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new cl(c,a,t);return s.forEach(C=>f.insert(C)),f}insert(e){if(0===this.It)return;const t=uh(e),[s,a]=lh(t);for(let c=0;c<this.hashCount;c++){const f=this.Et(s,a,c);this.Rt(f)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Fl{constructor(e,t,s,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Fl(In.min(),a,new Jr(jn),Gs(),or())}}class hl{constructor(e,t,s,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new hl(s,t,or(),or(),or())}}class hc{constructor(e,t,s,a){this.Pt=e,this.removedTargetIds=t,this.key=s,this.bt=a}}class _f{constructor(e,t){this.targetId=e,this.Vt=t}}class fc{constructor(e,t,s=ls.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Jp{constructor(){this.St=0,this.Dt=vf(),this.Ct=ls.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=or(),t=or(),s=or();return this.Dt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:en()}}),new hl(this.Ct,this.xt,e,t,s)}Ft(){this.Nt=!1,this.Dt=vf()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class W0{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Gs(),this.zt=cd(),this.Wt=new Jr(jn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const s=this.Zt(t);switch(e.state){case 0:this.te(t)&&s.$t(e.resumeToken);break;case 1:s.Ut(),s.kt||s.Ft(),s.$t(e.resumeToken);break;case 2:s.Ut(),s.kt||this.removeTarget(t);break;case 3:this.te(t)&&(s.Kt(),s.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),s.$t(e.resumeToken));break;default:en()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((s,a)=>{this.te(a)&&t(a)})}ne(e){var t;const s=e.targetId,a=e.Vt.count,c=this.se(s);if(c){const f=c.target;if(oc(f))if(0===a){const C=new Qt(f.path);this.Yt(s,C,oi.newNoDocument(C,In.min()))}else mn(1===a);else{const C=this.ie(s);if(C!==a){const k=this.re(e,C);0!==k&&(this.ee(s),this.Wt=this.Wt.insert(s,2===k?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Go.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(j,X,fe){var We,gt,$t,Jt,cn,hr;const zr={localCacheCount:X,existenceFilterCount:fe.count},tr=fe.unchangedNames;return tr&&(zr.bloomFilter={applied:0===j,hashCount:null!==(We=tr?.hashCount)&&void 0!==We?We:0,bitmapLength:null!==(Jt=null===($t=null===(gt=tr?.bits)||void 0===gt?void 0:gt.bitmap)||void 0===$t?void 0:$t.length)&&void 0!==Jt?Jt:0,padding:null!==(hr=null===(cn=tr?.bits)||void 0===cn?void 0:cn.padding)&&void 0!==hr?hr:0}),zr}(k,C,e.Vt))}}}}re(e,t){const{unchangedNames:s,count:a}=e.Vt;if(!s||!s.bits)return 1;const{bits:{bitmap:c="",padding:f=0},hashCount:C=0}=s;let k,j;try{k=ha(c).toUint8Array()}catch(X){if(X instanceof Jc)return as("Decoding the base64 bloom filter in existence filter failed ("+X.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw X}try{j=new cl(k,f,C)}catch(X){return as(X instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",X),1}return 0===j.It?1:a!==t-this.oe(e.targetId,j)?2:0}oe(e,t){const s=this.Gt.getRemoteKeysForTarget(e);let a=0;return s.forEach(c=>{const f=this.Gt.ue(),C=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;t.vt(C)||(this.Yt(e,c,null),a++)}),a}ce(e){const t=new Map;this.Qt.forEach((c,f)=>{const C=this.se(f);if(C){if(c.current&&oc(C.target)){const k=new Qt(C.target.path);null!==this.jt.get(k)||this.ae(f,k)||this.Yt(f,k,oi.newNoDocument(k,e))}c.Mt&&(t.set(f,c.Ot()),c.Ft())}});let s=or();this.zt.forEach((c,f)=>{let C=!0;f.forEachWhile(k=>{const j=this.se(k);return!j||"TargetPurposeLimboResolution"===j.purpose||(C=!1,!1)}),C&&(s=s.add(c))}),this.jt.forEach((c,f)=>f.setReadTime(e));const a=new Fl(e,t,this.Wt,this.jt,s);return this.jt=Gs(),this.zt=cd(),this.Wt=new Jr(jn),a}Jt(e,t){if(!this.te(e))return;const s=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,s),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,s){if(!this.te(e))return;const a=this.Zt(e);this.ae(e,t)?a.Bt(t,1):a.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),s&&(this.jt=this.jt.insert(t,s))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Jp,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new hi(jn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ct("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Jp),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function cd(){return new Jr(Qt.comparator)}function vf(){return new Jr(Qt.comparator)}const Mm={asc:"ASCENDING",desc:"DESCENDING"},xm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rm={and:"AND",or:"OR"};class q0{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xp(r,e){return r.useProto3Json||bs(e)?e:{value:e}}function pc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eg(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function tg(r,e){return pc(r,e.toTimestamp())}function Ws(r){return mn(!!r),In.fromTimestamp(function(e){const t=Hs(e);return new Di(t.seconds,t.nanos)}(r))}function ch(r,e){return(t=r,new xr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Pm(r){const e=xr.fromString(r);return mn(R_(e)),e}function gc(r,e){return ch(r.databaseId,e.path)}function pu(r,e){const t=Pm(e);if(t.get(1)!==r.databaseId.projectId)throw new St(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new St(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Qt(wf(t))}function Ef(r,e){return ch(r.databaseId,e)}function Ll(r){const e=Pm(r);return 4===e.length?xr.emptyPath():wf(e)}function dh(r){return new xr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function wf(r){return mn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function hh(r,e,t){return{name:gc(r,e),fields:t.value.mapValue.fields}}function Om(r,e,t){const s=pu(r,e.name),a=Ws(e.updateTime),c=e.createTime?Ws(e.createTime):In.min(),f=new fi({mapValue:{fields:e.fields}}),C=oi.newFoundDocument(s,a,c,f);return t&&C.setHasCommittedMutations(),t?C.setHasCommittedMutations():C}function gu(r,e){let t;if(e instanceof ll)t={update:hh(r,e.key,e.value)};else if(e instanceof h)t={delete:gc(r,e.key)};else if(e instanceof qa)t={update:hh(r,e.key,e.data),updateMask:Lm(e.fieldMask)};else{if(!(e instanceof w))return en();t={verify:gc(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,c){const f=c.transform;if(f instanceof ol)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof al)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ia)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof kl)return{fieldPath:c.field.canonicalString(),increment:f.gt};throw en()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:tg(r,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:en()),t;var a}function Df(r,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Wi.updateTime(Ws(a.updateTime)):void 0!==a.exists?Wi.exists(a.exists):Wi.none():Wi.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(c,f){let C=null;"setToServerValue"in f?(mn("REQUEST_TIME"===f.setToServerValue),C=new ol):"appendMissingElements"in f?C=new al(f.appendMissingElements.values||[]):"removeAllFromArray"in f?C=new ia(f.removeAllFromArray.values||[]):"increment"in f?C=new kl(c,f.increment):en();const k=Vi.fromServerFormat(f.fieldPath);return new zs(k,C)}(r,a)):[];var a;if(e.update){const a=pu(r,e.update.name),c=new fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new Mo((e.updateMask.fieldPaths||[]).map(j=>Vi.fromServerFormat(j)));return new qa(a,c,f,t,s)}return new ll(a,c,t,s)}if(e.delete){const a=pu(r,e.delete);return new h(a,t)}if(e.verify){const a=pu(r,e.verify);return new w(a,t)}return en()}function Nm(r,e){return{documents:[Ef(r,e.path)]}}function ig(r,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Ef(r,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ef(r,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(k){if(0!==k.length)return Fm(Vr.create(k,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(k){if(0!==k.length)return k.map(j=>{return{field:Ul((X=j).field),direction:M_(X.dir)};var X})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Xp(r,e.limit);var C,k;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(C=e.startAt).inclusive,values:C.position}),e.endAt&&(t.structuredQuery.endAt={before:!(k=e.endAt).inclusive,values:k.position}),t}function sg(r){let e=Ll(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){mn(1===s);const X=t.from[0];X.allDescendants?a=X.collectionId:e=e.child(X.collectionId)}let c=[];t.where&&(c=function(X){const fe=km(X);return fe instanceof Vr&&Qd(fe)?fe.getFilters():[fe]}(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(X=>{return new Ru(mc((fe=X).field),function(We){switch(We){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(fe.direction));var fe}));let C=null;t.limit&&(C=function(X){let fe;return fe="object"==typeof X?X.value:X,bs(fe)?null:fe}(t.limit));let k=null;var X;t.startAt&&(k=new ja((X=t.startAt).values||[],!!X.before));let j=null;return t.endAt&&(j=function(X){return new ja(X.values||[],!X.before)}(t.endAt)),sd(e,a,f,c,C,"F",k,j)}function km(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=mc(e.unaryFilter.field);return Dr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=mc(e.unaryFilter.field);return Dr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=mc(e.unaryFilter.field);return Dr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=mc(e.unaryFilter.field);return Dr.create(c,"!=",{nullValue:"NULL_VALUE"});default:return en()}}(r):void 0!==r.fieldFilter?Dr.create(mc((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return en()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return Vr.create(e.compositeFilter.filters.map(t=>km(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return en()}}(e.compositeFilter.op))}(r):en();var e}function M_(r){return Mm[r]}function x_(r){return xm[r]}function og(r){return Rm[r]}function Ul(r){return{fieldPath:r.canonicalString()}}function mc(r){return Vi.fromServerFormat(r.fieldPath)}function Fm(r){return r instanceof Dr?function(e){if("=="===e.op){if(yn(e.value))return{unaryFilter:{field:Ul(e.field),op:"IS_NAN"}};if(Wt(e.value))return{unaryFilter:{field:Ul(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(yn(e.value))return{unaryFilter:{field:Ul(e.field),op:"IS_NOT_NAN"}};if(Wt(e.value))return{unaryFilter:{field:Ul(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(e.field),op:x_(e.op),value:e.value}}}(r):r instanceof Vr?function(e){const t=e.getFilters().map(s=>Fm(s));return 1===t.length?t[0]:{compositeFilter:{op:og(e.op),filters:t}}}(r):en()}function Lm(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function R_(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class fl{constructor(e,t,s,a,c=In.min(),f=In.min(),C=ls.EMPTY_BYTE_STRING,k=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=C,this.expectedCount=k}withSequenceNumber(e){return new fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class hd{constructor(e){this.fe=e}}function yc(r,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:gc(a=r.fe,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:pc(a,c.version.toTimestamp()),createTime:pc(a,c.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:_c(e.version)};else{if(!e.isUnknownDocument())return en();s.unknownDocument={path:t.path.toArray(),version:_c(e.version)}}var a,c;return s}function Vl(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function _c(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bl(r){const e=new Di(r.seconds,r.nanoseconds);return In.fromTimestamp(e)}function vc(r,e){const t=(e.baseMutations||[]).map(c=>Df(r.fe,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const s=e.mutations.map(c=>Df(r.fe,c)),a=Di.fromMillis(e.localWriteTimeMs);return new B(e.batchId,a,t,s)}function fh(r){const e=Bl(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Bl(r.lastLimboFreeSnapshotVersion):In.min();let s;var a;return void 0!==r.query.documents?(mn(1===(a=r.query).documents.length),s=mo(hu(Ll(a.documents[0])))):s=mo(sg(r.query)),new fl(s,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,ls.fromBase64String(r.resumeToken))}function Um(r,e){const t=_c(e.snapshotVersion),s=_c(e.lastLimboFreeSnapshotVersion);let a;a=oc(e.target)?Nm(r.fe,e.target):ig(r.fe,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ra(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function Cf(r){const e=sg({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Rl(e,e.limit,"L"):e}function bf(r,e){return new Ee(e.largestBatchId,Df(r.fe,e.overlayMutation))}function Tf(r,e){const t=e.path.lastSegment();return[r,Gi(e.path.popLast()),t]}function Sf(r,e,t,s){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:_c(s.readTime),documentKey:Gi(s.documentKey.path),largestBatchId:s.largestBatchId}}class O_{getBundleMetadata(e,t){return Af(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Bl(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Af(e).put({bundleId:(s=t).id,createTime:_c(Ws(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return fd(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:Cf(a.bundledQuery),readTime:Bl(a.readTime)};var a})}saveNamedQuery(e,t){return fd(e).put({name:(s=t).name,readTime:_c(Ws(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Af(r){return us(r,"bundles")}function fd(r){return us(r,"namedQueries")}class Mf{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Mf(e,t.uid||"")}getOverlay(e,t){return ph(e).get(Tf(this.userId,t)).next(s=>s?bf(this.serializer,s):null)}getOverlays(e,t){const s=za();return _.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((c,f)=>{const C=new Ee(t,f);a.push(this.we(e,C))}),_.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(f=>a.add(Gi(f.getCollectionPath())));const c=[];return a.forEach(f=>{const C=IDBKeyRange.bound([this.userId,f,s],[this.userId,f,s+1],!1,!0);c.push(ph(e).J("collectionPathOverlayIndex",C))}),_.waitFor(c)}getOverlaysForCollection(e,t,s){const a=za(),c=Gi(t),f=IDBKeyRange.bound([this.userId,c,s],[this.userId,c,Number.POSITIVE_INFINITY],!0);return ph(e).j("collectionPathOverlayIndex",f).next(C=>{for(const k of C){const j=bf(this.serializer,k);a.set(j.getKey(),j)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const c=za();let f;const C=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ph(e).X({index:"collectionGroupOverlayIndex",range:C},(k,j,X)=>{const fe=bf(this.serializer,j);c.size()<a||fe.largestBatchId===f?(c.set(fe.getKey(),fe),f=fe.largestBatchId):X.done()}).next(()=>c)}we(e,t){return ph(e).put(function(s,a,c){const[f,C,k]=Tf(a,c.mutation.key);return{userId:a,collectionPath:C,documentId:k,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:gu(s.fe,c.mutation)}}(this.serializer,this.userId,t))}}function ph(r){return us(r,"documentOverlays")}class Ec{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Ri(e.integerValue));else if("doubleValue"in e){const s=Ri(e.doubleValue);isNaN(s)?this.ye(t,13):(this.ye(t,15),so(s)?t.pe(0):t.pe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ye(t,20),"string"==typeof s?t.Ie(s):(t.Ie(`${s.seconds||""}`),t.pe(s.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ha(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ye(t,45),t.pe(s.latitude||0),t.pe(s.longitude||0)}else"mapValue"in e?xo(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):en()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const s=e.fields||{};this.ye(t,55);for(const a of Object.keys(s))this.Te(a,t),this.me(s[a],t)}Pe(e,t){const s=e.values||[];this.ye(t,50);for(const a of s)this.me(a,t)}ve(e,t){this.ye(t,37),Qt.fromName(e).path.forEach(s=>{this.ye(t,60),this.be(s,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function N_(r){if(0===r)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function Vm(r){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const c=N_(255&t[a]);if(s+=c,8!==c)break}return s}(r);return Math.ceil(e/8)}Ec.Ve=new Ec;class k_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.De(s.value),s=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ne(s.value),s=t.next();this.ke()}Me(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.De(s);else if(s<2048)this.De(960|s>>>6),this.De(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.De(480|s>>>12),this.De(128|63&s>>>6),this.De(128|63&s);else{const a=t.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}this.Ce()}$e(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ne(s);else if(s<2048)this.Ne(960|s>>>6),this.Ne(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s);else{const a=t.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}this.ke()}Oe(e){const t=this.Fe(e),s=Vm(t);this.Be(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Le(e){const t=this.Fe(e),s=Vm(t);this.Be(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class F_{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class pd{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Ra{constructor(){this.je=new k_,this.ze=new F_(this.je),this.We=new pd(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class wc{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new wc(this.indexId,this.documentKey,this.arrayValue,s)}}function $l(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=L_(r.arrayValue,e.arrayValue),0!==t?t:(t=L_(r.directionalValue,e.directionalValue),0!==t?t:Qt.comparator(r.documentKey,e.documentKey)))}function L_(r,e){for(let t=0;t<r.length&&t<e.length;++t){const s=r[t]-e[t];if(0!==s)return s}return r.length-e.length}class K0{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ze=s:this.Xe.push(s)}}tn(e){mn(e.collectionGroup===this.collectionId);const t=Hu(e);if(void 0!==t&&!this.en(t))return!1;const s=Ta(e);let a=0,c=0;for(;a<s.length&&this.en(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.Ze){const f=s[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1;++a}for(;a<s.length;++a)if(c>=this.Ye.length||!this.sn(this.Ye[c++],s[a]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function ag(r){var e,t;if(mn(r instanceof Dr||r instanceof Vr),r instanceof Dr){if(r instanceof xl){const a=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>Dr.create(r.field,"==",c)))||[];return Vr.create(a,"or")}return r}const s=r.filters.map(a=>ag(a));return Vr.create(s,r.op)}function Z0(r){if(0===r.getFilters().length)return[];const e=Pf(ag(r));return mn(Bm(e)),xf(e)||Rf(e)?[e]:e.getFilters()}function xf(r){return r instanceof Dr}function Rf(r){return r instanceof Vr&&Qd(r)}function Bm(r){return xf(r)||Rf(r)||function(e){if(e instanceof Vr&&ed(e)){for(const t of e.getFilters())if(!xf(t)&&!Rf(t))return!1;return!0}return!1}(r)}function Pf(r){if(mn(r instanceof Dr||r instanceof Vr),r instanceof Dr)return r;if(1===r.filters.length)return Pf(r.filters[0]);const e=r.filters.map(s=>Pf(s));let t=Vr.create(e,r.op);return t=ma(t),Bm(t)?t:(mn(t instanceof Vr),mn(Pu(t)),mn(t.filters.length>1),t.filters.reduce((s,a)=>ug(s,a)))}function ug(r,e){let t;return mn(r instanceof Dr||r instanceof Vr),mn(e instanceof Dr||e instanceof Vr),t=r instanceof Dr?e instanceof Dr?Vr.create([r,e],"and"):$m(r,e):e instanceof Dr?$m(e,r):function(s,a){if(mn(s.filters.length>0&&a.filters.length>0),Pu(s)&&Pu(a))return sf(s,a.getFilters());const c=ed(s)?s:a,f=ed(s)?a:s,C=c.filters.map(k=>ug(k,f));return Vr.create(C,"or")}(r,e),ma(t)}function $m(r,e){if(Pu(e))return sf(e,r.getFilters());{const t=e.filters.map(s=>ug(r,s));return Vr.create(t,"or")}}function ma(r){if(mn(r instanceof Dr||r instanceof Vr),r instanceof Dr)return r;const e=r.getFilters();if(1===e.length)return ma(e[0]);if(td(r))return r;const t=e.map(a=>ma(a)),s=[];return t.forEach(a=>{a instanceof Dr?s.push(a):a instanceof Vr&&(a.op===r.op?s.push(...a.filters):s.push(a))}),1===s.length?s[0]:Vr.create(s,r.op)}class U_{constructor(){this.rn=new Of}addToCollectionParentIndex(e,t){return this.rn.add(t),_.resolve()}getCollectionParents(e,t){return _.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return _.resolve()}deleteFieldIndex(e,t){return _.resolve()}getDocumentsMatchingTarget(e,t){return _.resolve(null)}getIndexType(e,t){return _.resolve(0)}getFieldIndexes(e,t){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,t){return _.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return _.resolve(Ps.min())}updateCollectionGroup(e,t,s){return _.resolve()}updateIndexEntries(e,t){return _.resolve()}}class Of{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new hi(xr.comparator),c=!a.has(s);return this.index[t]=a.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new hi(xr.comparator)).toArray()}}const Nf=new Uint8Array(0);class V_{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Of,this.un=new Ho(s=>ra(s),(s,a)=>Ou(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const c={collectionId:s,parent:Gi(a)};return jm(e).put(c)}return _.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[ca(t),""],!1,!0);return jm(e).j(a).next(c=>{for(const f of c){if(f.collectionId!==t)break;s.push(Ao(f.parent))}return s})}addFieldIndex(e,t){const s=mh(e),a={indexId:(f=t).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(C=>[C.fieldPath.canonicalString(),C.kind])};var f;delete a.indexId;const c=s.add(a);if(t.indexState){const f=yh(e);return c.next(C=>{f.put(Sf(C,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const s=mh(e),a=yh(e),c=gh(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=gh(e);let a=!0;const c=new Map;return _.forEach(this.cn(t),f=>this.an(e,f).next(C=>{a&&(a=!!C),c.set(f,C)})).next(()=>{if(a){let f=or();const C=[];return _.forEach(c,(k,j)=>{var X;ct("IndexedDbIndexManager",`Using index ${X=k,`id=${X.indexId}|cg=${X.collectionGroup}|f=${X.fields.map(tr=>`${tr.fieldPath}:${tr.kind}`).join(",")}`} to execute ${ra(t)}`);const fe=function(tr,Zi){const Yi=Hu(Zi);if(void 0===Yi)return null;for(const Bi of id(tr,Yi.fieldPath))switch(Bi.op){case"array-contains-any":return Bi.value.arrayValue.values||[];case"array-contains":return[Bi.value]}return null}(j,k),We=function(tr,Zi){const Yi=new Map;for(const Bi of Ta(Zi))for(const Po of id(tr,Bi.fieldPath))switch(Po.op){case"==":case"in":Yi.set(Bi.fieldPath.canonicalString(),Po.value);break;case"not-in":case"!=":return Yi.set(Bi.fieldPath.canonicalString(),Po.value),Array.from(Yi.values())}return null}(j,k),gt=function(tr,Zi){const Yi=[];let Bi=!0;for(const Po of Ta(Zi)){const tc=0===Po.kind?Zp(tr,Po.fieldPath,tr.startAt):ac(tr,Po.fieldPath,tr.startAt);Yi.push(tc.value),Bi&&(Bi=tc.inclusive)}return new ja(Yi,Bi)}(j,k),$t=function(tr,Zi){const Yi=[];let Bi=!0;for(const Po of Ta(Zi)){const tc=0===Po.kind?ac(tr,Po.fieldPath,tr.endAt):Zp(tr,Po.fieldPath,tr.endAt);Yi.push(tc.value),Bi&&(Bi=tc.inclusive)}return new ja(Yi,Bi)}(j,k),Jt=this.hn(k,j,gt),cn=this.hn(k,j,$t),hr=this.ln(k,j,We),zr=this.fn(k.indexId,fe,Jt,gt.inclusive,cn,$t.inclusive,hr);return _.forEach(zr,tr=>s.H(tr,t.limit).next(Zi=>{Zi.forEach(Yi=>{const Bi=Qt.fromSegments(Yi.documentKey);f.has(Bi)||(f=f.add(Bi),C.push(Bi))})}))}).next(()=>C)}return _.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Z0(Vr.create(e.filters,"and")).map(s=>rd(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,s,a,c,f,C){const k=(null!=t?t.length:1)*Math.max(s.length,c.length),j=k/(null!=t?t.length:1),X=[];for(let fe=0;fe<k;++fe){const We=t?this.dn(t[fe/j]):Nf,gt=this.wn(e,We,s[fe%j],a),$t=this._n(e,We,c[fe%j],f),Jt=C.map(cn=>this.wn(e,We,cn,!0));X.push(...this.createRange(gt,$t,Jt))}return X}wn(e,t,s,a){const c=new wc(e,Qt.empty(),t,s);return a?c:c.Je()}_n(e,t,s,a){const c=new wc(e,Qt.empty(),t,s);return a?c.Je():c}an(e,t){const s=new K0(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let f=null;for(const C of c)s.tn(C)&&(!f||C.fields.length>f.fields.length)&&(f=C);return f})}getIndexType(e,t){let s=2;const a=this.cn(t);return _.forEach(a,c=>this.an(e,c).next(f=>{f?0!==s&&f.fields.length<function(C){let k=new hi(Vi.comparator),j=!1;for(const X of C.filters)for(const fe of X.getFlattenedFilters())fe.field.isKeyField()||("array-contains"===fe.op||"array-contains-any"===fe.op?j=!0:k=k.add(fe.field));for(const X of C.orderBy)X.field.isKeyField()||(k=k.add(X.field));return k.size+(j?1:0)}(c)&&(s=1):s=0})).next(()=>null!==t.limit&&a.length>1&&2===s?1:s)}mn(e,t){const s=new Ra;for(const a of Ta(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const f=s.He(a.kind);Ec.Ve._e(c,f)}return s.Qe()}dn(e){const t=new Ra;return Ec.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const s=new Ra;return Ec.Ve._e(Ue(this.databaseId,t),s.He(function(a){const c=Ta(a);return 0===c.length?0:c[c.length-1].kind}(e))),s.Qe()}ln(e,t,s){if(null===s)return[];let a=[];a.push(new Ra);let c=0;for(const f of Ta(e)){const C=s[c++];for(const k of a)if(this.yn(t,f.fieldPath)&&Ht(C))a=this.pn(a,f,C);else{const j=k.He(f.kind);Ec.Ve._e(C,j)}}return this.In(a)}hn(e,t,s){return this.ln(e,t,s.position)}In(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Qe();return t}pn(e,t,s){const a=[...e],c=[];for(const f of s.arrayValue.values||[])for(const C of a){const k=new Ra;k.seed(C.Qe()),Ec.Ve._e(f,k.He(t.kind)),c.push(k)}return c}yn(e,t){return!!e.filters.find(s=>s instanceof Dr&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=mh(e),a=yh(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(c=>{const f=[];return _.forEach(c,C=>a.get([C.indexId,this.uid]).next(k=>{f.push(function(j,X){const fe=X?new Ci(X.sequenceNumber,new Ps(Bl(X.readTime),new Qt(Ao(X.documentKey)),X.largestBatchId)):Ci.empty(),We=j.fields.map(([gt,$t])=>new Gu(Vi.fromServerFormat(gt),$t));return new ba(j.indexId,j.collectionGroup,We,fe)}(C,k))})).next(()=>f)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const c=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:jn(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=mh(e),c=yh(e);return this.Tn(e).next(f=>a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(C=>_.forEach(C,k=>c.put(Sf(k.indexId,this.user,f,s)))))}updateIndexEntries(e,t){const s=new Map;return _.forEach(t,(a,c)=>{const f=s.get(a.collectionGroup);return(f?_.resolve(f):this.getFieldIndexes(e,a.collectionGroup)).next(C=>(s.set(a.collectionGroup,C),_.forEach(C,k=>this.En(e,a,k).next(j=>{const X=this.An(c,k);return j.isEqual(X)?_.resolve():this.vn(e,c,k,j,X)}))))})}Rn(e,t,s,a){return gh(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.gn(s,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,s,a){return gh(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.gn(s,t.key),t.key.path.toArray()])}En(e,t,s){const a=gh(e);let c=new hi($l);return a.X({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.gn(s,t)])},(f,C)=>{c=c.add(new wc(s.indexId,t,C.arrayValue,C.directionalValue))}).next(()=>c)}An(e,t){let s=new hi($l);const a=this.mn(t,e);if(null==a)return s;const c=Hu(t);if(null!=c){const f=e.data.field(c.fieldPath);if(Ht(f))for(const C of f.arrayValue.values||[])s=s.add(new wc(t.indexId,e.key,this.dn(C),a))}else s=s.add(new wc(t.indexId,e.key,Nf,a));return s}vn(e,t,s,a,c){ct("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const f=[];return function(C,k,j,X,fe){const We=C.getIterator(),gt=k.getIterator();let $t=lu(We),Jt=lu(gt);for(;$t||Jt;){let cn=!1,hr=!1;if($t&&Jt){const zr=j($t,Jt);zr<0?hr=!0:zr>0&&(cn=!0)}else null!=$t?hr=!0:cn=!0;cn?(X(Jt),Jt=lu(gt)):hr?(fe($t),$t=lu(We)):($t=lu(We),Jt=lu(gt))}}(a,c,$l,C=>{f.push(this.Rn(e,t,s,C))},C=>{f.push(this.Pn(e,t,s,C))}),_.waitFor(f)}Tn(e){let t=1;return yh(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((f,C)=>$l(f,C)).filter((f,C,k)=>!C||0!==$l(f,k[C-1]));const a=[];a.push(e);for(const f of s){const C=$l(f,e),k=$l(f,t);if(0===C)a[0]=e.Je();else if(C>0&&k<0)a.push(f),a.push(f.Je());else if(k>0)break}a.push(t);const c=[];for(let f=0;f<a.length;f+=2){if(this.bn(a[f],a[f+1]))return[];c.push(IDBKeyRange.bound([a[f].indexId,this.uid,a[f].arrayValue,a[f].directionalValue,Nf,[]],[a[f+1].indexId,this.uid,a[f+1].arrayValue,a[f+1].directionalValue,Nf,[]]))}return c}bn(e,t){return $l(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Hm)}getMinOffset(e,t){return _.mapArray(this.cn(t),s=>this.an(e,s).next(a=>a||en())).next(Hm)}}function jm(r){return us(r,"collectionParents")}function gh(r){return us(r,"indexEntries")}function mh(r){return us(r,"indexConfiguration")}function yh(r){return us(r,"indexState")}function Hm(r){mn(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<r.length;s++){const a=r[s].indexState.offset;$s(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Ps(e.readTime,e.documentKey,t)}const Gm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pn{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function lg(r,e,t){const s=r.store("mutations"),a=r.store("documentMutations"),c=[],f=IDBKeyRange.only(t.batchId);let C=0;const k=s.X({range:f},(X,fe,We)=>(C++,We.delete()));c.push(k.next(()=>{mn(1===C)}));const j=[];for(const X of t.mutations){const fe=qu(e,X.key.path,t.batchId);c.push(a.delete(fe)),j.push(X.key)}return _.waitFor(c).next(()=>j)}function _h(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw en();e=r.noDocument}return JSON.stringify(e).length}Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(41943040,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);class vh{constructor(e,t,s,a){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=a,this.Vn={}}static de(e,t,s,a){mn(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new vh(c,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jl(e).X({index:"userMutationsIndex",range:s},(a,c,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const c=Ic(e),f=jl(e);return f.add({}).next(C=>{mn("number"==typeof C);const k=new B(C,t,s,a),j=function(We,gt,$t){const Jt=$t.baseMutations.map(hr=>gu(We.fe,hr)),cn=$t.mutations.map(hr=>gu(We.fe,hr));return{userId:gt,batchId:$t.batchId,localWriteTimeMs:$t.localWriteTime.toMillis(),baseMutations:Jt,mutations:cn}}(this.serializer,this.userId,k),X=[];let fe=new hi((We,gt)=>jn(We.canonicalString(),gt.canonicalString()));for(const We of a){const gt=qu(this.userId,We.key.path,C);fe=fe.add(We.key.path.popLast()),X.push(f.put(j)),X.push(c.put(gt,su))}return fe.forEach(We=>{X.push(this.indexManager.addToCollectionParentIndex(e,We))}),e.addOnCommittedListener(()=>{this.Vn[C]=k.keys()}),_.waitFor(X).next(()=>k)})}lookupMutationBatch(e,t){return jl(e).get(t).next(s=>s?(mn(s.userId===this.userId),vc(this.serializer,s)):null)}Sn(e,t){return this.Vn[t]?_.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let c=null;return jl(e).X({index:"userMutationsIndex",range:a},(f,C,k)=>{C.userId===this.userId&&(mn(C.batchId>=s),c=vc(this.serializer,C)),k.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return jl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(a,c,f)=>{s=c.batchId,f.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jl(e).j("userMutationsIndex",t).next(s=>s.map(a=>vc(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Au(this.userId,t.path),a=IDBKeyRange.lowerBound(s),c=[];return Ic(e).X({range:a},(f,C,k)=>{const[j,X,fe]=f,We=Ao(X);if(j===this.userId&&t.path.isEqual(We))return jl(e).get(fe).next(gt=>{if(!gt)throw en();mn(gt.userId===this.userId),c.push(vc(this.serializer,gt))});k.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new hi(jn);const a=[];return t.forEach(c=>{const f=Au(this.userId,c.path),C=IDBKeyRange.lowerBound(f),k=Ic(e).X({range:C},(j,X,fe)=>{const[We,gt,$t]=j,Jt=Ao(gt);We===this.userId&&c.path.isEqual(Jt)?s=s.add($t):fe.done()});a.push(k)}),_.waitFor(a).next(()=>this.Dn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,c=Au(this.userId,s),f=IDBKeyRange.lowerBound(c);let C=new hi(jn);return Ic(e).X({range:f},(k,j,X)=>{const[fe,We,gt]=k,$t=Ao(We);fe===this.userId&&s.isPrefixOf($t)?$t.length===a&&(C=C.add(gt)):X.done()}).next(()=>this.Dn(e,C))}Dn(e,t){const s=[],a=[];return t.forEach(c=>{a.push(jl(e).get(c).next(f=>{if(null===f)throw en();mn(f.userId===this.userId),s.push(vc(this.serializer,f))}))}),_.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return lg(e.ht,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),_.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return _.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return Ic(e).X({range:s},(c,f,C)=>{if(c[0]===this.userId){const k=Ao(c[1]);a.push(k)}else C.done()}).next(()=>{mn(0===a.length)})})}containsKey(e,t){return zm(e,this.userId,t)}xn(e){return Wm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zm(r,e,t){const s=Au(e,t.path),a=s[1],c=IDBKeyRange.lowerBound(s);let f=!1;return Ic(r).X({range:c,Y:!0},(C,k,j)=>{const[X,fe,We]=C;X===e&&fe===a&&(f=!0),j.done()}).next(()=>f)}function jl(r){return us(r,"mutations")}function Ic(r){return us(r,"documentMutations")}function Wm(r){return us(r,"mutationQueues")}class Hl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Hl(0)}static Mn(){return new Hl(-1)}}class B_{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const s=new Hl(t.highestTargetId);return t.highestTargetId=s.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>In.fromTimestamp(new Di(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.$n(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.On(e,a)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(s=>(s.targetCount+=1,this.Bn(t,s),this.On(e,s))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>gd(e).delete(t.targetId)).next(()=>this.$n(e)).next(s=>(mn(s.targetCount>0),s.targetCount-=1,this.On(e,s)))}removeTargets(e,t,s){let a=0;const c=[];return gd(e).X((f,C)=>{const k=fh(C);k.sequenceNumber<=t&&null===s.get(k.targetId)&&(a++,c.push(this.removeTargetData(e,k)))}).next(()=>_.waitFor(c)).next(()=>a)}forEachTarget(e,t){return gd(e).X((s,a)=>{const c=fh(a);t(c)})}$n(e){return $_(e).get("targetGlobalKey").next(t=>(mn(null!==t),t))}On(e,t){return $_(e).put("targetGlobalKey",t)}Fn(e,t){return gd(e).put(Um(this.serializer,t))}Bn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const s=ra(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let c=null;return gd(e).X({range:a,index:"queryTargetsIndex"},(f,C,k)=>{const j=fh(C);Ou(t,j.target)&&(c=j,k.done())}).next(()=>c)}addMatchingKeys(e,t,s){const a=[],c=pl(e);return t.forEach(f=>{const C=Gi(f.path);a.push(c.put({targetId:s,path:C})),a.push(this.referenceDelegate.addReference(e,s,f))}),_.waitFor(a)}removeMatchingKeys(e,t,s){const a=pl(e);return _.forEach(t,c=>{const f=Gi(c.path);return _.waitFor([a.delete([s,f]),this.referenceDelegate.removeReference(e,s,c)])})}removeMatchingKeysForTargetId(e,t){const s=pl(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=pl(e);let c=or();return a.X({range:s,Y:!0},(f,C,k)=>{const j=Ao(f[1]),X=new Qt(j);c=c.add(X)}).next(()=>c)}containsKey(e,t){const s=Gi(t.path),a=IDBKeyRange.bound([s],[ca(s)],!1,!0);let c=0;return pl(e).X({index:"documentTargetsIndex",Y:!0,range:a},([f,C],k,j)=>{0!==f&&(c++,j.done())}).next(()=>c>0)}le(e,t){return gd(e).get(t).next(s=>s?fh(s):null)}}function gd(r){return us(r,"targets")}function $_(r){return us(r,"targetGlobal")}function pl(r){return us(r,"targetDocuments")}function cg([r,e],[t,s]){const a=jn(r,t);return 0===a?jn(e,s):a}class Dc{constructor(e){this.Ln=e,this.buffer=new hi(cg),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();cg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qm{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ct("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,O.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){te(s)?ct("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield js(s)}yield t.Qn(3e5)}))}}class dg{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return _.resolve(bi.ct);const s=new Dc(t);return this.jn.forEachTarget(e,a=>s.Kn(a.sequenceNumber)).next(()=>this.jn.Wn(e,a=>s.Kn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),_.resolve(Gm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gm):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let s,a,c,f,C,k,j;const X=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(fe=>(fe>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${fe}`),a=this.params.maximumSequenceNumbersToCollect):a=fe,f=Date.now(),this.nthSequenceNumber(e,a))).next(fe=>(s=fe,C=Date.now(),this.removeTargets(e,s,t))).next(fe=>(c=fe,k=Date.now(),this.removeOrphanedDocuments(e,s))).next(fe=>(j=Date.now(),Ia()<=Ve.in.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-X}ms\n\tDetermined least recently used ${a} in `+(C-f)+`ms\n\tRemoved ${c} targets in `+(k-C)+`ms\n\tRemoved ${fe} documents in `+(j-k)+`ms\nTotal Duration: ${j-X}ms`),_.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:fe})))}}class j_{constructor(e,t){this.db=e,this.garbageCollector=function kf(r,e){return new dg(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Jn(e){let t=0;return this.Wn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(s,a)=>t(a))}addReference(e,t,s){return hg(e,s)}removeReference(e,t,s){return hg(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return hg(e,t)}Xn(e,t){return function(s,a){let c=!1;return Wm(s).Z(f=>zm(s,f,a).next(C=>(C&&(c=!0),_.resolve(!C)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Yn(e,(f,C)=>{if(C<=t){const k=this.Xn(e,f).next(j=>{if(!j)return c++,s.getEntry(e,f).next(()=>(s.removeEntry(f,In.min()),pl(e).delete([0,Gi(f.path)])))});a.push(k)}}).next(()=>_.waitFor(a)).next(()=>s.apply(e)).next(()=>c)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return hg(e,t)}Yn(e,t){const s=pl(e);let a,c=bi.ct;return s.X({index:"documentTargetsIndex"},([f,C],{path:k,sequenceNumber:j})=>{0===f?(c!==bi.ct&&t(new Qt(Ao(a)),c),c=j,a=k):c=bi.ct}).next(()=>{c!==bi.ct&&t(new Qt(Ao(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hg(r,e){return pl(r).put((s=r.currentSequenceNumber,{targetId:0,path:Gi(e.path),sequenceNumber:s}));var s}class H_{constructor(){this.changes=new Ho(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?_.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Y0{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Cc(e).put(s)}removeEntry(e,t,s){return Cc(e).delete(function(a,c){const f=a.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Vl(c),f[f.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Zn(e,s)))}getEntry(e,t){let s=oi.newInvalidDocument(t);return Cc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Lu(t))},(a,c)=>{s=this.ts(t,c)}).next(()=>s)}es(e,t){let s={size:0,document:oi.newInvalidDocument(t)};return Cc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Lu(t))},(a,c)=>{s={document:this.ts(t,c),size:_h(c)}}).next(()=>s)}getEntries(e,t){let s=Gs();return this.ns(e,t,(a,c)=>{const f=this.ts(a,c);s=s.insert(a,f)}).next(()=>s)}ss(e,t){let s=Gs(),a=new Jr(Qt.comparator);return this.ns(e,t,(c,f)=>{const C=this.ts(c,f);s=s.insert(c,C),a=a.insert(c,_h(f))}).next(()=>({documents:s,rs:a}))}ns(e,t,s){if(t.isEmpty())return _.resolve();let a=new hi(fg);t.forEach(k=>a=a.add(k));const c=IDBKeyRange.bound(Lu(a.first()),Lu(a.last())),f=a.getIterator();let C=f.getNext();return Cc(e).X({index:"documentKeyIndex",range:c},(k,j,X)=>{const fe=Qt.fromSegments([...j.prefixPath,j.collectionGroup,j.documentId]);for(;C&&fg(C,fe)<0;)s(C,null),C=f.getNext();C&&C.isEqual(fe)&&(s(C,j),C=f.hasNext()?f.getNext():null),C?X.G(Lu(C)):X.done()}).next(()=>{for(;C;)s(C,null),C=f.hasNext()?f.getNext():null})}getDocumentsMatchingQuery(e,t,s,a){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),Vl(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],C=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Cc(e).j(IDBKeyRange.bound(f,C,!0)).next(k=>{let j=Gs();for(const X of k){const fe=this.ts(Qt.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);fe.isFoundDocument()&&(Ol(t,fe)||a.has(fe.key))&&(j=j.insert(fe.key,fe))}return j})}getAllFromCollectionGroup(e,t,s,a){let c=Gs();const f=Ym(t,s),C=Ym(t,Ps.max());return Cc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(f,C,!0)},(k,j,X)=>{const fe=this.ts(Qt.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);c=c.insert(fe.key,fe),c.size===a&&X.done()}).next(()=>c)}newChangeBuffer(e){return new Zm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return G_(e).get("remoteDocumentGlobalKey").next(t=>(mn(!!t),t))}Zn(e,t){return G_(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const s=function P_(r,e){let t;if(e.document)t=Om(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Qt.fromSegments(e.noDocument.path),a=Bl(e.noDocument.readTime);t=oi.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return en();{const s=Qt.fromSegments(e.unknownDocument.path),a=Bl(e.unknownDocument.version);t=oi.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new Di(s[0],s[1]);return In.fromTimestamp(a)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(In.min()))return s}return oi.newInvalidDocument(e)}}function Km(r){return new Y0(r)}class Zm extends H_{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Ho(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new hi((c,f)=>jn(c.canonicalString(),f.canonicalString()));return this.changes.forEach((c,f)=>{const C=this.us.get(c);if(t.push(this.os.removeEntry(e,c,C.readTime)),f.isValidDocument()){const k=yc(this.os.serializer,f);a=a.add(c.path.popLast());const j=_h(k);s+=j-C.size,t.push(this.os.addEntry(e,c,k))}else if(s-=C.size,this.trackRemovals){const k=yc(this.os.serializer,f.convertToNoDocument(In.min()));t.push(this.os.addEntry(e,c,k))}}),a.forEach(c=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.os.updateMetadata(e,s)),_.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(s=>(this.us.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:s,rs:a})=>(a.forEach((c,f)=>{this.us.set(c,{size:f,readTime:s.get(c).readTime})}),s))}}function G_(r){return us(r,"remoteDocumentGlobal")}function Cc(r){return us(r,"remoteDocumentsV14")}function Lu(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ym(r,e){const t=e.documentKey.path.toArray();return[r,Vl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fg(r,e){const t=r.path.toArray(),s=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<s.length-2;++c)if(a=jn(t[c],s[c]),a)return a;return a=jn(t.length,s.length),a||(a=jn(t[t.length-2],s[s.length-2]),a||jn(t[t.length-1],s[s.length-1]))}class Ff{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qm{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==s&&sa(s.mutation,a,Mo.empty(),Di.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,or()).next(()=>s))}getLocalViewOfDocuments(e,t,s=or()){const a=za();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(c=>{let f=Ga();return c.forEach((C,k)=>{f=f.insert(C,k.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const s=za();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,or()))}populateOverlays(e,t,s){const a=[];return s.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,C)=>{t.set(f,C)})})}computeViews(e,t,s,a){let c=Gs();const f=il(),C=il();return t.forEach((k,j)=>{const X=s.get(j.key);a.has(j.key)&&(void 0===X||X.mutation instanceof qa)?c=c.insert(j.key,j):void 0!==X?(f.set(j.key,X.mutation.getFieldMask()),sa(X.mutation,j,X.mutation.getFieldMask(),Di.now())):f.set(j.key,Mo.empty())}),this.recalculateAndSaveOverlays(e,c).next(k=>(k.forEach((j,X)=>f.set(j,X)),t.forEach((j,X)=>{var fe;return C.set(j,new Ff(X,null!==(fe=f.get(j))&&void 0!==fe?fe:null))}),C))}recalculateAndSaveOverlays(e,t){const s=il();let a=new Jr((f,C)=>f-C),c=or();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const C of f)C.keys().forEach(k=>{const j=t.get(k);if(null===j)return;let X=s.get(k)||Mo.empty();X=C.applyToLocalView(j,X),s.set(k,X);const fe=(a.get(C.batchId)||or()).add(k);a=a.insert(C.batchId,fe)})}).next(()=>{const f=[],C=a.getReverseIterator();for(;C.hasNext();){const k=C.getNext(),j=k.key,X=k.value,fe=ff();X.forEach(We=>{if(!c.has(We)){const gt=sh(t.get(We),s.get(We));null!==gt&&fe.set(We,gt),c=c.add(We)}}),f.push(this.documentOverlayCache.saveOverlays(e,j,fe))}return _.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Qt.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Nu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-c.size):_.resolve(za());let C=-1,k=c;return f.next(j=>_.forEach(j,(X,fe)=>(C<fe.largestBatchId&&(C=fe.largestBatchId),c.get(X)?_.resolve():this.remoteDocumentCache.getEntry(e,X).next(We=>{k=k.insert(X,We)}))).next(()=>this.populateOverlays(e,j,c)).next(()=>this.computeViews(e,k,j,or())).next(X=>({batchId:C,changes:hf(X)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qt(t)).next(s=>{let a=Ga();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let c=Ga();return this.indexManager.getCollectionParents(e,a).next(f=>_.forEach(f,C=>{const k=(j=t,X=C.child(a),new du(X,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt));var j,X;return this.getDocumentsMatchingCollectionQuery(e,k,s).next(j=>{j.forEach((X,fe)=>{c=c.insert(X,fe)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,a))).next(c=>{a.forEach((C,k)=>{const j=k.getKey();null===c.get(j)&&(c=c.insert(j,oi.newInvalidDocument(j)))});let f=Ga();return c.forEach((C,k)=>{const j=a.get(C);void 0!==j&&sa(j.mutation,k,Mo.empty(),Di.now()),Ol(t,k)&&(f=f.insert(C,k))}),f})}}class Jm{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return _.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var s;return this.cs.set(t.id,{id:(s=t).id,version:s.version,createTime:Ws(s.createTime)}),_.resolve()}getNamedQuery(e,t){return _.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(s=t).name,query:Cf(s.bundledQuery),readTime:Ws(s.readTime)}),_.resolve();var s}}class z_{constructor(){this.overlays=new Jr(Qt.comparator),this.ls=new Map}getOverlay(e,t){return _.resolve(this.overlays.get(t))}getOverlays(e,t){const s=za();return _.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&s.set(a,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,c)=>{this.we(e,t,c)}),_.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.ls.get(s);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.ls.delete(s)),_.resolve()}getOverlaysForCollection(e,t,s){const a=za(),c=t.length+1,f=new Qt(t.child("")),C=this.overlays.getIteratorFrom(f);for(;C.hasNext();){const k=C.getNext().value,j=k.getKey();if(!t.isPrefixOf(j.path))break;j.path.length===c&&k.largestBatchId>s&&a.set(k.getKey(),k)}return _.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let c=new Jr((j,X)=>j-X);const f=this.overlays.getIterator();for(;f.hasNext();){const j=f.getNext().value;if(j.getKey().getCollectionGroup()===t&&j.largestBatchId>s){let X=c.get(j.largestBatchId);null===X&&(X=za(),c=c.insert(j.largestBatchId,X)),X.set(j.getKey(),j)}}const C=za(),k=c.getIterator();for(;k.hasNext()&&(k.getNext().value.forEach((j,X)=>C.set(j,X)),!(C.size()>=a)););return _.resolve(C)}we(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const f=this.ls.get(a.largestBatchId).delete(s.key);this.ls.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new Ee(t,s));let c=this.ls.get(t);void 0===c&&(c=or(),this.ls.set(t,c)),this.ls.set(t,c.add(s.key))}}class pg{constructor(){this.fs=new hi(yo.ds),this.ws=new hi(yo._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const s=new yo(e,t);this.fs=this.fs.add(s),this.ws=this.ws.add(s)}gs(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.ys(new yo(e,t))}ps(e,t){e.forEach(s=>this.removeReference(s,t))}Is(e){const t=new Qt(new xr([])),s=new yo(t,e),a=new yo(t,e+1),c=[];return this.ws.forEachInRange([s,a],f=>{this.ys(f),c.push(f.key)}),c}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Qt(new xr([])),s=new yo(t,e),a=new yo(t,e+1);let c=or();return this.ws.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const t=new yo(e,0),s=this.fs.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class yo{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Qt.comparator(e.key,t.key)||jn(e.As,t.As)}static _s(e,t){return jn(e.As,t.As)||Qt.comparator(e.key,t.key)}}class W_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new hi(yo.ds)}checkEmpty(e){return _.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const c=this.vs;this.vs++;const f=new B(c,t,s,a);this.mutationQueue.push(f);for(const C of a)this.Rs=this.Rs.add(new yo(C.key,c)),this.indexManager.addToCollectionParentIndex(e,C.key.path.popLast());return _.resolve(f)}lookupMutationBatch(e,t){return _.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.bs(t+1),c=a<0?0:a;return _.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new yo(t,0),a=new yo(t,Number.POSITIVE_INFINITY),c=[];return this.Rs.forEachInRange([s,a],f=>{const C=this.Ps(f.As);c.push(C)}),_.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new hi(jn);return t.forEach(a=>{const c=new yo(a,0),f=new yo(a,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([c,f],C=>{s=s.add(C.As)})}),_.resolve(this.Vs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let c=s;Qt.isDocumentKey(c)||(c=c.child(""));const f=new yo(new Qt(c),0);let C=new hi(jn);return this.Rs.forEachWhile(k=>{const j=k.key.path;return!!s.isPrefixOf(j)&&(j.length===a&&(C=C.add(k.As)),!0)},f),_.resolve(this.Vs(C))}Vs(e){const t=[];return e.forEach(s=>{const a=this.Ps(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){mn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let s=this.Rs;return _.forEach(t.mutations,a=>{const c=new yo(a.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Rs=s})}Cn(e){}containsKey(e,t){const s=new yo(t,0),a=this.Rs.firstAfterOrEqual(s);return _.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return _.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class q_{constructor(e){this.Ds=e,this.docs=new Jr(Qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),c=a?a.size:0,f=this.Ds(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return _.resolve(s?s.document.mutableCopy():oi.newInvalidDocument(t))}getEntries(e,t){let s=Gs();return t.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():oi.newInvalidDocument(a))}),_.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let c=Gs();const f=t.path,C=new Qt(f.child("")),k=this.docs.getIteratorFrom(C);for(;k.hasNext();){const{key:j,value:{document:X}}=k.getNext();if(!f.isPrefixOf(j.path))break;j.path.length>f.length+1||$s(Fa(X),s)<=0||(a.has(X.key)||Ol(t,X))&&(c=c.insert(X.key,X.mutableCopy()))}return _.resolve(c)}getAllFromCollectionGroup(e,t,s,a){en()}Cs(e,t){return _.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Xm(this)}getSize(e){return _.resolve(this.size)}}class Xm extends H_{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.os.addEntry(e,a)):this.os.removeEntry(s)}),_.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class K_{constructor(e){this.persistence=e,this.xs=new Ho(t=>ra(t),Ou),this.lastRemoteSnapshotVersion=In.min(),this.highestTargetId=0,this.Ns=0,this.ks=new pg,this.targetCount=0,this.Ms=Hl.kn()}forEachTarget(e,t){return this.xs.forEach((s,a)=>t(a)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Ns&&(this.Ns=t),_.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Hl(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,_.resolve()}updateTargetData(e,t){return this.Fn(t),_.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,t,s){let a=0;const c=[];return this.xs.forEach((f,C)=>{C.sequenceNumber<=t&&null===s.get(C.targetId)&&(this.xs.delete(f),c.push(this.removeMatchingKeysForTargetId(e,C.targetId)),a++)}),_.waitFor(c).next(()=>a)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,t){const s=this.xs.get(t)||null;return _.resolve(s)}addMatchingKeys(e,t,s){return this.ks.gs(t,s),_.resolve()}removeMatchingKeys(e,t,s){this.ks.ps(t,s);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),_.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),_.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ks.Es(t);return _.resolve(s)}containsKey(e,t){return _.resolve(this.ks.containsKey(t))}}class Lf{constructor(e,t){this.$s={},this.overlays={},this.Os=new bi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new K_(this),this.indexManager=new U_,this.remoteDocumentCache=new q_(s=>this.referenceDelegate.Ls(s)),this.serializer=new hd(t),this.qs=new Jm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new z_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.$s[e.toKey()];return s||(s=new W_(t,this.referenceDelegate),this.$s[e.toKey()]=s),s}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,s){ct("MemoryPersistence","Starting transaction:",e);const a=new ey(this.Os.next());return this.referenceDelegate.Us(),s(a).next(c=>this.referenceDelegate.Ks(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gs(e,t){return _.or(Object.values(this.$s).map(s=>()=>s.containsKey(e,t)))}}class ey extends zu{constructor(e){super(),this.currentSequenceNumber=e}}class md{constructor(e){this.persistence=e,this.Qs=new pg,this.js=null}static zs(e){return new md(e)}get Ws(){if(this.js)return this.js;throw en()}addReference(e,t,s){return this.Qs.addReference(s,t),this.Ws.delete(s.toString()),_.resolve()}removeReference(e,t,s){return this.Qs.removeReference(s,t),this.Ws.add(s.toString()),_.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),_.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(a=>this.Ws.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ws.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Ws,s=>{const a=Qt.fromPath(s);return this.Hs(e,a).next(c=>{c||t.removeEntry(a,In.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(s=>{s?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return _.or([()=>_.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class mg{constructor(e){this.serializer=e}O(e,t,s,a){const c=new m("createOrUpgrade",t);var C;s<1&&a>=1&&(e.createObjectStore("owner"),(C=e).createObjectStore("mutationQueues",{keyPath:"userId"}),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wu,{unique:!0}),C.createObjectStore("documentMutations"),ty(e),function(C){C.createObjectStore("remoteDocuments")}(e));let f=_.resolve();return s<3&&a>=3&&(0!==s&&(function(C){C.deleteObjectStore("targetDocuments"),C.deleteObjectStore("targets"),C.deleteObjectStore("targetGlobal")}(e),ty(e)),f=f.next(()=>function(C){const k=C.store("targetGlobal"),j={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:In.min().toTimestamp(),targetCount:0};return k.put("targetGlobalKey",j)}(c))),s<4&&a>=4&&(0!==s&&(f=f.next(()=>function(C,k){return k.store("mutations").j().next(j=>{C.deleteObjectStore("mutations"),C.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wu,{unique:!0});const X=k.store("mutations"),fe=j.map(We=>X.put(We));return _.waitFor(fe)})}(e,c))),f=f.next(()=>{!function(C){C.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(f=f.next(()=>this.Ys(c))),s<6&&a>=6&&(f=f.next(()=>(function(C){C.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(c)))),s<7&&a>=7&&(f=f.next(()=>this.Zs(c))),s<8&&a>=8&&(f=f.next(()=>this.ti(e,c))),s<9&&a>=9&&(f=f.next(()=>{!function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(f=f.next(()=>this.ei(c))),s<11&&a>=11&&(f=f.next(()=>{(function(C){C.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(C){C.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(f=f.next(()=>{!function(C){const k=C.createObjectStore("documentOverlays",{keyPath:Zd});k.createIndex("collectionPathOverlayIndex",ic,{unique:!1}),k.createIndex("collectionGroupOverlayIndex",Yd,{unique:!1})}(e)})),s<13&&a>=13&&(f=f.next(()=>function(C){const k=C.createObjectStore("remoteDocumentsV14",{keyPath:ou});k.createIndex("documentKeyIndex",qd),k.createIndex("collectionGroupIndex",nc)}(e)).next(()=>this.ni(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(f=f.next(()=>this.si(e,c))),s<15&&a>=15&&(f=f.next(()=>function(C){C.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),C.createObjectStore("indexState",{keyPath:qc}).createIndex("sequenceNumberIndex",Kc,{unique:!1}),C.createObjectStore("indexEntries",{keyPath:rc}).createIndex("documentKeyIndex",Kd,{unique:!1})}(e))),f}Xs(e){let t=0;return e.store("remoteDocuments").X((s,a)=>{t+=_h(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Ys(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(a=>_.forEach(a,c=>{const f=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",f).next(C=>_.forEach(C,k=>{mn(k.userId===c.userId);const j=vc(this.serializer,k);return lg(e,c.userId,j).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return s.X((f,C)=>{const k=new xr(f),j=[0,Gi(k)];c.push(t.get(j).next(X=>X?_.resolve():t.put({targetId:0,path:Gi(k),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>_.waitFor(c))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:nf});const s=t.store("collectionParents"),a=new Of,c=f=>{if(a.add(f)){const C=f.lastSegment(),k=f.popLast();return s.put({collectionId:C,parent:Gi(k)})}};return t.store("remoteDocuments").X({Y:!0},(f,C)=>{const k=new xr(f);return c(k.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([f,C,k],j)=>{const X=Ao(C);return c(X.popLast())}))}ei(e){const t=e.store("targets");return t.X((s,a)=>{const c=fh(a),f=Um(this.serializer,c);return t.put(f)})}ni(e,t){const s=t.store("remoteDocuments"),a=[];return s.X((c,f)=>{const C=t.store("remoteDocumentsV14"),k=(j=f,j.document?new Qt(xr.fromString(j.document.name).popFirst(5)):j.noDocument?Qt.fromSegments(j.noDocument.path):j.unknownDocument?Qt.fromSegments(j.unknownDocument.path):en()).path.toArray();var j;const X={prefixPath:k.slice(0,k.length-2),collectionGroup:k[k.length-2],documentId:k[k.length-1],readTime:f.readTime||[0,0],unknownDocument:f.unknownDocument,noDocument:f.noDocument,document:f.document,hasCommittedMutations:!!f.hasCommittedMutations};a.push(C.put(X))}).next(()=>_.waitFor(a))}si(e,t){const s=t.store("mutations"),a=Km(this.serializer),c=new Lf(md.zs,this.serializer.fe);return s.j().next(f=>{const C=new Map;return f.forEach(k=>{var j;let X=null!==(j=C.get(k.userId))&&void 0!==j?j:or();vc(this.serializer,k).keys().forEach(fe=>X=X.add(fe)),C.set(k.userId,X)}),_.forEach(C,(k,j)=>{const X=new si(j),fe=Mf.de(this.serializer,X),We=c.getIndexManager(X),gt=vh.de(X,this.serializer,We,c.referenceDelegate);return new Qm(a,gt,fe,We).recalculateAndSaveOverlaysForDocumentKeys(new Tl(t,bi.ct),k).next()})})}}function ty(r){r.createObjectStore("targetDocuments",{keyPath:au}).createIndex("documentTargetsIndex",Mu,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wc,{unique:!0}),r.createObjectStore("targetGlobal")}const ny="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gl{constructor(e,t,s,a,c,f,C,k,j,X,fe=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ii=c,this.window=f,this.document=C,this.ri=j,this.oi=X,this.ui=fe,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=We=>Promise.resolve(),!Gl.D())throw new St(Ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new j_(this,a),this.di=t+"main",this.serializer=new hd(k),this.wi=new T(this.di,this.ui,new mg(this.serializer)),this.Bs=new B_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Km(this.serializer),this.qs=new O_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===X&&Ui("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new St(Ze.FAILED_PRECONDITION,ny);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new bi(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var s=(0,O.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,O.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,O.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(te(e))return ct("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ct("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return yd(e).get("owner").next(t=>_.resolve(this.Ri(t)))}Pi(e){return Uf(e).delete(this.clientId)}bi(){var e=this;return(0,O.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=us(s,"clientMetadata");return a.j().next(c=>{const f=e.Si(c,18e5),C=c.filter(k=>-1===f.indexOf(k));return _.forEach(C,k=>a.delete(k.clientId)).next(()=>C)})}).catch(()=>[]);if(e._i)for(const s of t)e._i.removeItem(e.Di(s.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?_.resolve(!0):yd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new St(Ze.FAILED_PRECONDITION,ny);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uf(e).j().next(s=>void 0===this.Si(s,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ct("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,O.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Tl(t,bi.ct);return e.Ai(s).next(()=>e.Pi(s))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(s=>this.Vi(s.updateTimeMs,t)&&!this.Ci(s.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Uf(e).j().next(t=>this.Si(t,18e5).map(s=>s.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return vh.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new V_(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Mf.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,s){ct("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(f=this.ui)?Qc:14===f?Yc:13===f?Zc:12===f?bl:11===f?Ku:void en();var f;let C;return this.wi.runTransaction(e,a,c,k=>(C=new Tl(k,this.Os?this.Os.next():bi.ct),"readwrite-primary"===t?this.Ti(C).next(j=>!!j||this.Ei(C)).next(j=>{if(!j)throw Ui(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new St(Ze.FAILED_PRECONDITION,io);return s(C)}).next(j=>this.vi(C).next(()=>j)):this.Oi(C).next(()=>s(C)))).then(k=>(C.raiseOnCommittedEvent(),k))}Oi(e){return yd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new St(Ze.FAILED_PRECONDITION,ny)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yd(e).put("owner",t)}static D(){return T.D()}Ai(e){const t=yd(e);return t.get("owner").next(s=>this.Ri(s)?(ct("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):_.resolve())}Vi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Ui(`Detected an update time that is in the future: ${e} > ${s}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Ge.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const s=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ct("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Ui("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Ui("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yd(r){return us(r,"owner")}function Uf(r){return us(r,"clientMetadata")}function Vf(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class yg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Fi=s,this.Bi=a}static Li(e,t){let s=or(),a=or();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new yg(e,t.fromCache,s,a)}}class ry{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ki(e,t).next(c=>c||this.Gi(e,t,a,s)).next(c=>c||this.Qi(e,t))}Ki(e,t){if(eh(t))return _.resolve(null);let s=mo(t);return this.indexManager.getIndexType(e,s).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=Rl(t,null,"F"),s=mo(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=or(...c);return this.Ui.getDocuments(e,f).next(C=>this.indexManager.getMinOffset(e,s).next(k=>{const j=this.ji(t,C);return this.zi(t,j,f,k.readTime)?this.Ki(e,Rl(t,null,"F")):this.Wi(e,j,t,k)}))})))}Gi(e,t,s,a){return eh(t)||a.isEqual(In.min())?this.Qi(e,t):this.Ui.getDocuments(e,s).next(c=>{const f=this.ji(t,c);return this.zi(t,f,s,a)?this.Qi(e,t):(Ia()<=Ve.in.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),od(t)),this.Wi(e,f,t,Aa(a,-1)))})}ji(e,t){let s=new hi(cf(e));return t.forEach((a,c)=>{Ol(e,c)&&(s=s.add(c))}),s}zi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Qi(e,t){return Ia()<=Ve.in.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",od(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ps.min())}Wi(e,t,s,a){return this.Ui.getDocumentsMatchingQuery(e,s,a).next(c=>(t.forEach(f=>{c=c.insert(f.key,f)}),c))}}class Bf{constructor(e,t,s,a){this.persistence=e,this.Hi=t,this.serializer=a,this.Ji=new Jr(jn),this.Yi=new Ho(c=>ra(c),Ou),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(s)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qm(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function bc(r,e,t,s){return new Bf(r,e,t,s)}function $f(r,e){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,O.Z)(function*(r,e){const t=Yt(r);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,t.tr(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],C=[];let k=or();for(const j of a){f.push(j.batchId);for(const X of j.mutations)k=k.add(X.key)}for(const j of c){C.push(j.batchId);for(const X of j.mutations)k=k.add(X.key)}return t.localDocuments.getDocuments(s,k).next(j=>({er:j,removedBatchIds:f,addedBatchIds:C}))})})}),Tc.apply(this,arguments)}function Eh(r){const e=Yt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function jf(r,e,t){let s=or(),a=or();return t.forEach(c=>s=s.add(c)),e.getEntries(r,s).next(c=>{let f=Gs();return t.forEach((C,k)=>{const j=c.get(C);k.isFoundDocument()!==j.isFoundDocument()&&(a=a.add(C)),k.isNoDocument()&&k.version.isEqual(In.min())?(e.removeEntry(C,k.readTime),f=f.insert(C,k)):!j.isValidDocument()||k.version.compareTo(j.version)>0||0===k.version.compareTo(j.version)&&j.hasPendingWrites?(e.addEntry(k),f=f.insert(C,k)):ct("LocalStore","Ignoring outdated watch update for ",C,". Current version:",j.version," Watch version:",k.version)}),{nr:f,sr:a}})}function vg(r,e){const t=Yt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function zl(r,e){const t=Yt(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Bs.getTargetData(s,e).next(c=>c?(a=c,_.resolve(a)):t.Bs.allocateTargetId(s).next(f=>(a=new fl(e,f,"TargetPurposeListen",s.currentSequenceNumber),t.Bs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ji.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(s.targetId,s),t.Yi.set(e,s.targetId)),s})}function Sc(r,e,t){return wh.apply(this,arguments)}function wh(){return wh=(0,O.Z)(function*(r,e,t){const s=Yt(r),a=s.Ji.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!te(f))throw f;ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ji=s.Ji.remove(e),s.Yi.delete(a.target)}),wh.apply(this,arguments)}function Hf(r,e,t){const s=Yt(r);let a=In.min(),c=or();return s.persistence.runTransaction("Execute query","readonly",f=>function(C,k,j){const X=Yt(C),fe=X.Yi.get(j);return void 0!==fe?_.resolve(X.Ji.get(fe)):X.Bs.getTargetData(k,j)}(s,f,mo(e)).next(C=>{if(C)return a=C.lastLimboFreeSnapshotVersion,s.Bs.getMatchingKeysForTargetId(f,C.targetId).next(k=>{c=k})}).next(()=>s.Hi.getDocumentsMatchingQuery(f,e,t?a:In.min(),t?c:or())).next(C=>(oy(s,lf(e),C),{documents:C,ir:c})))}function sy(r,e){const t=Yt(r),s=Yt(t.Bs),a=t.Ji.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>s.le(c,e).next(f=>f?f.target:null))}function Eg(r,e){const t=Yt(r),s=t.Xi.get(e)||In.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Zi.getAllFromCollectionGroup(a,e,Aa(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(oy(t,e,a),a))}function oy(r,e,t){let s=r.Xi.get(e)||In.min();t.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Xi.set(e,s)}function Gf(){return Gf=(0,O.Z)(function*(r,e,t,s){const a=Yt(r);let c=or(),f=Gs();for(const j of t){const X=e.rr(j.metadata.name);j.document&&(c=c.add(X));const fe=e.ur(j);fe.setReadTime(e.cr(j.metadata.readTime)),f=f.insert(X,fe)}const C=a.Zi.newChangeBuffer({trackRemovals:!0}),k=yield zl(a,(j=s,mo(hu(xr.fromString(`__bundle__/docs/${j}`)))));var j;return a.persistence.runTransaction("Apply bundle documents","readwrite",j=>jf(j,C,f).next(X=>(C.apply(j),X)).next(X=>a.Bs.removeMatchingKeysForTargetId(j,k.targetId).next(()=>a.Bs.addMatchingKeys(j,c,k.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(j,X.nr,X.sr)).next(()=>X.nr)))}),Gf.apply(this,arguments)}function Z_(r,e){return wg.apply(this,arguments)}function wg(){return wg=(0,O.Z)(function*(r,e,t=or()){const s=yield zl(r,mo(Cf(e.bundledQuery))),a=Yt(r);return a.persistence.runTransaction("Save named query","readwrite",c=>{const f=Ws(e.readTime);if(s.snapshotVersion.compareTo(f)>=0)return a.qs.saveNamedQuery(c,e);const C=s.withResumeToken(ls.EMPTY_BYTE_STRING,f);return a.Ji=a.Ji.insert(C.targetId,C),a.Bs.updateTargetData(c,C).next(()=>a.Bs.removeMatchingKeysForTargetId(c,s.targetId)).next(()=>a.Bs.addMatchingKeys(c,t,s.targetId)).next(()=>a.qs.saveNamedQuery(c,e))})}),wg.apply(this,arguments)}function ya(r,e){return`firestore_clients_${r}_${e}`}function uy(r,e,t){let s=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Ig(r,e){return`firestore_targets_${r}_${e}`}class Dg{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static ar(e,t,s){const a=JSON.parse(s);let c,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(c=new St(a.error.code,a.error.message))),f?new Dg(e,t,a.state,c):(Ui("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ac{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static ar(e,t){const s=JSON.parse(t);let a,c="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(a=new St(s.error.code,s.error.message))),c?new Ac(e,s.state,a):(Ui("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ih{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,c=cc();for(let f=0;a&&f<s.activeTargetIds.length;++f)a=Ti(s.activeTargetIds[f]),c=c.add(s.activeTargetIds[f]);return a?new Ih(e,c):(Ui("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Cg{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Cg(t.clientId,t.onlineState):(Ui("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bg{constructor(){this.activeTargetIds=cc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tg{constructor(e,t,s,a,c){this.window=e,this.ii=t,this.persistenceKey=s,this.wr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Jr(jn),this.started=!1,this.yr=[];const f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.pr=ya(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new bg),this.Tr=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(C){return`firestore_bundle_loaded_v2_${C}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,O.Z)(function*(){const t=yield e.syncEngine.$i();for(const a of t){if(a===e.wr)continue;const c=e.getItem(ya(e.persistenceKey,a));if(c){const f=Ih.ar(a,c);f&&(e.gr=e.gr.insert(f.clientId,f))}}e.Pr();const s=e.storage.getItem(e.vr);if(s){const a=e.br(s);a&&e.Vr(a)}for(const a of e.yr)e.mr(a);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,s){this.Dr(e,t,s),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ig(this.persistenceKey,e));if(s){const a=Ac.ar(e,s);a&&(t=a.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ig(this.persistenceKey,e))}updateQueryState(e,t,s){this.kr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.Cr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ct("SharedClientState","READ",e,t),t}setItem(e,t){ct("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ct("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(ct("SharedClientState","EVENT",s.key,s.newValue),s.key===this.pr)return void Ui("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,O.Z)(function*(){if(t.started){if(null!==s.key)if(t.Tr.test(s.key)){if(null==s.newValue){const a=t.Or(s.key);return t.Fr(a,null)}{const a=t.Br(s.key,s.newValue);if(a)return t.Fr(a.clientId,a)}}else if(t.Er.test(s.key)){if(null!==s.newValue){const a=t.Lr(s.key,s.newValue);if(a)return t.qr(a)}}else if(t.Ar.test(s.key)){if(null!==s.newValue){const a=t.Ur(s.key,s.newValue);if(a)return t.Kr(a)}}else if(s.key===t.vr){if(null!==s.newValue){const a=t.br(s.newValue);if(a)return t.Vr(a)}}else if(s.key===t.Ir){const a=function(c){let f=bi.ct;if(null!=c)try{const C=JSON.parse(c);mn("number"==typeof C),f=C}catch(C){Ui("SharedClientState","Failed to read sequence number from WebStorage",C)}return f}(s.newValue);a!==bi.ct&&t.sequenceNumberHandler(a)}else if(s.key===t.Rr){const a=t.Gr(s.newValue);yield Promise.all(a.map(c=>t.syncEngine.Qr(c)))}}else t.yr.push(s)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,s){const a=new Dg(this.currentUser,e,t,s),c=uy(this.persistenceKey,this.currentUser,e);this.setItem(c,a.hr())}Cr(e){const t=uy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,s){const a=Ig(this.persistenceKey,e),c=new Ac(e,t,s);this.setItem(a,c.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const s=this.Or(e);return Ih.ar(s,t)}Lr(e,t){const s=this.Er.exec(e),a=Number(s[1]);return Dg.ar(new si(void 0!==s[2]?s[2]:null),a,t)}Ur(e,t){const s=this.Ar.exec(e),a=Number(s[1]);return Ac.ar(a,t)}br(e){return Cg.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,O.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ct("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const s=t?this.gr.insert(e,t):this.gr.remove(e),a=this.Sr(this.gr),c=this.Sr(s),f=[],C=[];return c.forEach(k=>{a.has(k)||f.push(k)}),a.forEach(k=>{c.has(k)||C.push(k)}),this.syncEngine.Wr(f,C).then(()=>{this.gr=s})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=cc();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Sg{constructor(){this.Hr=new bg,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,s){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new bg,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Y_{Yr(e){}shutdown(){}}class ly{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _d=null;function Ag(){return null===_d?_d=268435456+Math.round(2147483648*Math.random()):_d++,"0x"+_d.toString(16)}const Q_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class J_{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const zo="WebChannelConnection";class X_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,s,a,c){const f=Ag(),C=this.To(e,t);ct("RestConnection",`Sending RPC '${e}' ${f}:`,C,s);const k={};return this.Eo(k,a,c),this.Ao(e,C,k,s).then(j=>(ct("RestConnection",`Received RPC '${e}' ${f}: `,j),j),j=>{throw as("RestConnection",`RPC '${e}' ${f} failed with error: `,j,"url: ",C,"request:",s),j})}vo(e,t,s,a,c,f){return this.Io(e,t,s,a,c)}Eo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+ua,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}To(e,t){return`${this.mo}/v1/${t}:${Q_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,s,a){const c=Ag();return new Promise((f,C)=>{const k=new bu;k.setWithCredentials(!0),k.listenOnce(To.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case os.NO_ERROR:const X=k.getResponseJson();ct(zo,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(X)),f(X);break;case os.TIMEOUT:ct(zo,`RPC '${e}' ${c} timed out`),C(new St(Ze.DEADLINE_EXCEEDED,"Request time out"));break;case os.HTTP_ERROR:const fe=k.getStatus();if(ct(zo,`RPC '${e}' ${c} failed with status:`,fe,"response text:",k.getResponseText()),fe>0){let We=k.getResponseJson();Array.isArray(We)&&(We=We[0]);const gt=We?.error;if(gt&&gt.status&&gt.message){const $t=function(Jt){const cn=Jt.toLowerCase().replace(/_/g,"-");return Object.values(Ze).indexOf(cn)>=0?cn:Ze.UNKNOWN}(gt.status);C(new St($t,gt.message))}else C(new St(Ze.UNKNOWN,"Server responded with status "+k.getStatus()))}else C(new St(Ze.UNAVAILABLE,"Connection failed."));break;default:en()}}finally{ct(zo,`RPC '${e}' ${c} completed.`)}});const j=JSON.stringify(a);ct(zo,`RPC '${e}' ${c} sending request:`,a),k.send(t,"POST",j,s,15)})}Ro(e,t,s){const a=Ag(),c=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=fo(),C=Li(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},j=this.longPollingOptions.timeoutSeconds;void 0!==j&&(k.longPollingTimeout=Math.round(1e3*j)),this.useFetchStreams&&(k.xmlHttpFactory=new Du({})),this.Eo(k.initMessageHeaders,t,s),k.encodeInitMessageHeaders=!0;const X=c.join("");ct(zo,`Creating RPC '${e}' stream ${a}: ${X}`,k);const fe=f.createWebChannel(X,k);let We=!1,gt=!1;const $t=new J_({ro:cn=>{gt?ct(zo,`Not sending because RPC '${e}' stream ${a} is closed:`,cn):(We||(ct(zo,`Opening RPC '${e}' stream ${a} transport.`),fe.open(),We=!0),ct(zo,`RPC '${e}' stream ${a} sending:`,cn),fe.send(cn))},oo:()=>fe.close()}),Jt=(cn,hr,zr)=>{cn.listen(hr,tr=>{try{zr(tr)}catch(Zi){setTimeout(()=>{throw Zi},0)}})};return Jt(fe,Cu.EventType.OPEN,()=>{gt||ct(zo,`RPC '${e}' stream ${a} transport opened.`)}),Jt(fe,Cu.EventType.CLOSE,()=>{gt||(gt=!0,ct(zo,`RPC '${e}' stream ${a} transport closed`),$t.wo())}),Jt(fe,Cu.EventType.ERROR,cn=>{gt||(gt=!0,as(zo,`RPC '${e}' stream ${a} transport errored:`,cn),$t.wo(new St(Ze.UNAVAILABLE,"The operation could not be completed")))}),Jt(fe,Cu.EventType.MESSAGE,cn=>{var hr;if(!gt){const zr=cn.data[0];mn(!!zr);const Zi=zr.error||(null===(hr=zr[0])||void 0===hr?void 0:hr.error);if(Zi){ct(zo,`RPC '${e}' stream ${a} received error:`,Zi);const Yi=Zi.status;let Bi=function(tc){const $p=Nt[tc];if(void 0!==$p)return Si($p)}(Yi),Po=Zi.message;void 0===Bi&&(Bi=Ze.INTERNAL,Po="Unknown error status: "+Yi+" with message "+Zi.message),gt=!0,$t.wo(new St(Bi,Po)),fe.close()}else ct(zo,`RPC '${e}' stream ${a} received:`,zr),$t._o(zr)}}),Jt(C,Bs.STAT_EVENT,cn=>{cn.stat===eu.PROXY?ct(zo,`RPC '${e}' stream ${a} detected buffering proxy`):cn.stat===eu.NOPROXY&&ct(zo,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{$t.fo()},0),$t}}function mu(){return typeof window<"u"?window:null}function vd(){return typeof document<"u"?document:null}function Dh(r){return new q0(r,!0)}class Mg{constructor(e,t,s=1e3,a=1.5,c=6e4){this.ii=e,this.timerId=t,this.Po=s,this.bo=a,this.Vo=c,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),s=Math.max(0,Date.now()-this.Co),a=Math.max(0,t-s);a>0&&ct("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,a,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class xg{constructor(e,t,s,a,c,f,C,k){this.ii=e,this.$o=s,this.Oo=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=C,this.listener=k,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Mg(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,O.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,O.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var s=this;return(0,O.Z)(function*(){s.Ho(),s.Jo(),s.qo.cancel(),s.Fo++,4!==e?s.qo.reset():t&&t.code===Ze.RESOURCE_EXHAUSTED?(Ui(t.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),s.qo.xo()):t&&t.code===Ze.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Yo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Fo===t&&this.Zo(s,a)},s=>{e(()=>{const a=new St(Ze.UNKNOWN,"Fetching auth token failed: "+s.message);return this.tu(a)})})}Zo(e,t){const s=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{s(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(a=>{s(()=>this.tu(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}Go(){var e=this;this.state=5,this.qo.No((0,O.Z)(function*(){e.state=0,e.start()}))}tu(e){return ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ev extends xg{constructor(e,t,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function If(r,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(k=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===k?1:"REMOVE"===k?2:"CURRENT"===k?3:"RESET"===k?4:en(),a=e.targetChange.targetIds||[],c=function(k,j){return k.useProto3Json?(mn(void 0===j||"string"==typeof j),ls.fromBase64String(j||"")):(mn(void 0===j||j instanceof Uint8Array),ls.fromUint8Array(j||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,C=f&&function(k){const j=void 0===k.code?Ze.UNKNOWN:Si(k.code);return new St(j,k.message||"")}(f);t=new fc(s,a,c,C||null)}else if("documentChange"in e){const s=e.documentChange,a=pu(r,s.document.name),c=Ws(s.document.updateTime),f=s.document.createTime?Ws(s.document.createTime):In.min(),C=new fi({mapValue:{fields:s.document.fields}}),k=oi.newFoundDocument(a,c,f,C);t=new hc(s.targetIds||[],s.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const s=e.documentDelete,a=pu(r,s.document),c=s.readTime?Ws(s.readTime):In.min(),f=oi.newNoDocument(a,c);t=new hc([],s.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const s=e.documentRemove,a=pu(r,s.document);t=new hc([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return en();{const s=e.filter,{count:a=0,unchangedNames:c}=s,f=new Ot(a,c);t=new _f(s.targetId,f)}}var k;return t}(this.serializer,e),s=function(a){if(!("targetChange"in a))return In.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?In.min():c.readTime?Ws(c.readTime):In.min()}(e);return this.listener.nu(t,s)}su(e){const t={};t.database=dh(this.serializer),t.addTarget=function(a,c){let f;const C=c.target;if(f=oc(C)?{documents:Nm(a,C)}:{query:ig(a,C)},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=eg(a,c.resumeToken);const k=Xp(a,c.expectedCount);null!==k&&(f.expectedCount=k)}else if(c.snapshotVersion.compareTo(In.min())>0){f.readTime=pc(a,c.snapshotVersion.toTimestamp());const k=Xp(a,c.expectedCount);null!==k&&(f.expectedCount=k)}return f}(this.serializer,e);const s=function dd(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return en()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Wo(t)}iu(e){const t={};t.database=dh(this.serializer),t.removeTarget=e,this.Wo(t)}}class tv extends xg{constructor(e,t,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,f),this.serializer=c,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function rg(r,e){return r&&r.length>0?(mn(void 0!==e),r.map(t=>function(s,a){let c=Ws(s.updateTime?s.updateTime:a);return c.isEqual(In.min())&&(c=Ws(a)),new ld(c,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ws(e.commitTime);return this.listener.cu(s,t)}return mn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=dh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>gu(this.serializer,s))};this.Wo(t)}}class nv extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.lu=!1}fu(){if(this.lu)throw new St(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Io(e,t,s,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new St(Ze.UNKNOWN,a.toString())})}vo(e,t,s,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.vo(e,t,s,c,f,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new St(Ze.UNKNOWN,c.toString())})}terminate(){this.lu=!0}}class rv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Ui(t),this.mu=!1):ct("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class zf{constructor(e,t,s,a,c){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=c,this.Pu.Yr(C=>{s.enqueueAndForget((0,O.Z)(function*(){var k;Wo(f)&&(ct("RemoteStore","Restarting streams for network reachability change."),yield(k=(0,O.Z)(function*(j){const X=Yt(j);X.vu.add(4),yield Ch(X),X.bu.set("Unknown"),X.vu.delete(4),yield Wl(X)}),function(j){return k.apply(this,arguments)})(f))}))}),this.bu=new rv(s,a)}}function Wl(r){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,O.Z)(function*(r){if(Wo(r))for(const e of r.Ru)yield e(!0)}),Ed.apply(this,arguments)}function Ch(r){return bh.apply(this,arguments)}function bh(){return bh=(0,O.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),bh.apply(this,arguments)}function Og(r,e){const t=Yt(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Th(t)?qf(t):Id(t).Ko()&&Wf(t,e))}function wd(r,e){const t=Yt(r),s=Id(t);t.Au.delete(e),s.Ko()&&Ng(t,e),0===t.Au.size&&(s.Ko()?s.jo():Wo(t)&&t.bu.set("Unknown"))}function Wf(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(In.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Id(r).su(e)}function Ng(r,e){r.Vu.qt(e),Id(r).iu(e)}function qf(r){r.Vu=new W0({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),Id(r).start(),r.bu.gu()}function Th(r){return Wo(r)&&!Id(r).Uo()&&r.Au.size>0}function Wo(r){return 0===Yt(r).vu.size}function Sh(r){r.Vu=void 0}function Kf(r){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,O.Z)(function*(r){r.Au.forEach((e,t)=>{Wf(r,e)})}),Mc.apply(this,arguments)}function iv(r,e){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,O.Z)(function*(r,e){Sh(r),Th(r)?(r.bu.Iu(e),qf(r)):r.bu.set("Unknown")}),Zf.apply(this,arguments)}function cy(r,e,t){return kg.apply(this,arguments)}function kg(){return kg=(0,O.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof fc&&2===e.state&&e.cause)try{yield(s=(0,O.Z)(function*(a,c){const f=c.cause;for(const C of c.targetIds)a.Au.has(C)&&(yield a.remoteSyncer.rejectListen(C,f),a.Au.delete(C),a.Vu.removeTarget(C))}),function(a,c){return s.apply(this,arguments)})(r,e)}catch(s){ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Yf(r,s)}else if(e instanceof hc?r.Vu.Ht(e):e instanceof _f?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(In.min()))try{const s=yield Eh(r.localStore);t.compareTo(s)>=0&&(yield function(a,c){const f=a.Vu.ce(c);return f.targetChanges.forEach((C,k)=>{if(C.resumeToken.approximateByteSize()>0){const j=a.Au.get(k);j&&a.Au.set(k,j.withResumeToken(C.resumeToken,c))}}),f.targetMismatches.forEach((C,k)=>{const j=a.Au.get(C);if(!j)return;a.Au.set(C,j.withResumeToken(ls.EMPTY_BYTE_STRING,j.snapshotVersion)),Ng(a,C);const X=new fl(j.target,C,k,j.sequenceNumber);Wf(a,X)}),a.remoteSyncer.applyRemoteEvent(f)}(r,t))}catch(s){ct("RemoteStore","Failed to raise snapshot:",s),yield Yf(r,s)}var s}),kg.apply(this,arguments)}function Yf(r,e,t){return xc.apply(this,arguments)}function xc(){return xc=(0,O.Z)(function*(r,e,t){if(!te(e))throw e;r.vu.add(1),yield Ch(r),r.bu.set("Offline"),t||(t=()=>Eh(r.localStore)),r.asyncQueue.enqueueRetryable((0,O.Z)(function*(){ct("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield Wl(r)}))}),xc.apply(this,arguments)}function dy(r,e){return e().catch(t=>Yf(r,t,e))}function Ah(r){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,O.Z)(function*(r){const e=Yt(r),t=gl(e);let s=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;sv(e);)try{const a=yield vg(e.localStore,s);if(null===a){0===e.Eu.length&&t.jo();break}s=a.batchId,ov(e,a)}catch(a){yield Yf(e,a)}hy(e)&&fy(e)}),Fg.apply(this,arguments)}function sv(r){return Wo(r)&&r.Eu.length<10}function ov(r,e){r.Eu.push(e);const t=gl(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function hy(r){return Wo(r)&&!gl(r).Uo()&&r.Eu.length>0}function fy(r){gl(r).start()}function av(r){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,O.Z)(function*(r){gl(r).hu()}),Lg.apply(this,arguments)}function py(r){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,O.Z)(function*(r){const e=gl(r);for(const t of r.Eu)e.uu(t.mutations)}),Mh.apply(this,arguments)}function uv(r,e,t){return xh.apply(this,arguments)}function xh(){return xh=(0,O.Z)(function*(r,e,t){const s=r.Eu.shift(),a=Z.from(s,e,t);yield dy(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),yield Ah(r)}),xh.apply(this,arguments)}function lv(r,e){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,O.Z)(function*(r,e){var t;e&&gl(r).ou&&(yield(t=(0,O.Z)(function*(s,a){if(pn(c=a.code)&&c!==Ze.ABORTED){const f=s.Eu.shift();gl(s).Qo(),yield dy(s,()=>s.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield Ah(s)}var c}),function(s,a){return t.apply(this,arguments)})(r,e)),hy(r)&&fy(r)}),Ug.apply(this,arguments)}function gy(r,e){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,O.Z)(function*(r,e){const t=Yt(r);t.asyncQueue.verifyOperationInProgress(),ct("RemoteStore","RemoteStore received new credentials");const s=Wo(t);t.vu.add(3),yield Ch(t),s&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Wl(t)}),Vg.apply(this,arguments)}function Bg(r,e){return $g.apply(this,arguments)}function $g(){return $g=(0,O.Z)(function*(r,e){const t=Yt(r);e?(t.vu.delete(2),yield Wl(t)):e||(t.vu.add(2),yield Ch(t),t.bu.set("Unknown"))}),$g.apply(this,arguments)}function Id(r){return r.Su||(r.Su=function(e,t,s){const a=Yt(e);return a.fu(),new ev(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:Kf.bind(null,r),ao:iv.bind(null,r),nu:cy.bind(null,r)}),r.Ru.push(function(){var e=(0,O.Z)(function*(t){t?(r.Su.Qo(),Th(r)?qf(r):r.bu.set("Unknown")):(yield r.Su.stop(),Sh(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function gl(r){return r.Du||(r.Du=function(e,t,s){const a=Yt(e);return a.fu(),new tv(t,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(r.datastore,r.asyncQueue,{uo:av.bind(null,r),ao:lv.bind(null,r),au:py.bind(null,r),cu:uv.bind(null,r)}),r.Ru.push(function(){var e=(0,O.Z)(function*(t){t?(r.Du.Qo(),yield Ah(r)):(yield r.Du.stop(),r.Eu.length>0&&(ct("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class Qf{constructor(e,t,s,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,s,a,c){const f=Date.now()+s,C=new Qf(e,t,f,a,c);return C.start(s),C}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new St(Ze.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dd(r,e){if(Ui("AsyncQueue",`${e}: ${r}`),te(r))return new St(Ze.UNAVAILABLE,`${e}: ${r}`);throw r}class Rh{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Qt.comparator(t.key,s.key):(t,s)=>Qt.comparator(t.key,s.key),this.keyedMap=Ga(),this.sortedSet=new Jr(this.comparator)}static emptySet(e){return new Rh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Rh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class jg{constructor(){this.Cu=new Jr(Qt.comparator)}track(e){const t=e.doc.key,s=this.Cu.get(t);s?0!==e.type&&3===s.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==s.type?this.Cu=this.Cu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Cu=this.Cu.remove(t):1===e.type&&2===s.type?this.Cu=this.Cu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):en():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ph{constructor(e,t,s,a,c,f,C,k,j){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=C,this.excludesMetadataChanges=k,this.hasCachedResults=j}static fromInitialDocuments(e,t,s,a,c){const f=[];return t.forEach(C=>{f.push({type:0,doc:C})}),new Ph(e,t,Rh.emptySet(t),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Jf{constructor(){this.Nu=void 0,this.listeners=[]}}class cv{constructor(){this.queries=new Ho(e=>Pl(e),rl),this.onlineState="Unknown",this.ku=new Set}}function Hg(r,e){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,O.Z)(function*(r,e){const t=Yt(r),s=e.query;let a=!1,c=t.queries.get(s);if(c||(a=!0,c=new Jf),a)try{c.Nu=yield t.onListen(s)}catch(f){const C=Dd(f,`Initialization of query '${od(e.query)}' failed`);return void e.onError(C)}t.queries.set(s,c),c.listeners.push(e),e.Mu(t.onlineState),c.Nu&&e.$u(c.Nu)&&ml(t)}),Oh.apply(this,arguments)}function Gg(r,e){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,O.Z)(function*(r,e){const t=Yt(r),s=e.query;let a=!1;const c=t.queries.get(s);if(c){const f=c.listeners.indexOf(e);f>=0&&(c.listeners.splice(f,1),a=0===c.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Ka.apply(this,arguments)}function Nh(r,e){const t=Yt(r);let s=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const C of f.listeners)C.$u(a)&&(s=!0);f.Nu=a}}s&&ml(t)}function qo(r,e,t){const s=Yt(r),a=s.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);s.queries.delete(e)}function ml(r){r.ku.forEach(e=>{e.next()})}class Cd{constructor(e,t,s){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=s||{}}$u(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Ph(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ph.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Za{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Xf{constructor(e){this.serializer=e}rr(e){return pu(this.serializer,e)}ur(e){return e.metadata.exists?Om(this.serializer,e.document,!1):oi.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ws(e)}}class bd{constructor(e,t,s){this.ju=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Rc(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const s=xr.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,s=new Xf(this.serializer);for(const a of e)if(a.metadata.queries){const c=s.rr(a.metadata.name);for(const f of a.metadata.queries){const C=(t.get(f)||or()).add(c);t.set(f,C)}}return t}complete(){var e=this;return(0,O.Z)(function*(){const t=yield function ay(r,e,t,s){return Gf.apply(this,arguments)}(e.localStore,new Xf(e.serializer),e.documents,e.ju.id),s=e.Wu(e.documents);for(const a of e.queries)yield Z_(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Rc(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Pc{constructor(e){this.key=e}}class Oc{constructor(e){this.key=e}}class Nc{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=or(),this.mutatedKeys=or(),this.tc=cf(e),this.ec=new Rh(this.tc)}get nc(){return this.Yu}sc(e,t){const s=t?t.ic:new jg,a=t?t.ec:this.ec;let c=t?t.mutatedKeys:this.mutatedKeys,f=a,C=!1;const k="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,j="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((X,fe)=>{const We=a.get(X),gt=Ol(this.query,fe)?fe:null,$t=!!We&&this.mutatedKeys.has(We.key),Jt=!!gt&&(gt.hasLocalMutations||this.mutatedKeys.has(gt.key)&&gt.hasCommittedMutations);let cn=!1;We&&gt?We.data.isEqual(gt.data)?$t!==Jt&&(s.track({type:3,doc:gt}),cn=!0):this.rc(We,gt)||(s.track({type:2,doc:gt}),cn=!0,(k&&this.tc(gt,k)>0||j&&this.tc(gt,j)<0)&&(C=!0)):!We&&gt?(s.track({type:0,doc:gt}),cn=!0):We&&!gt&&(s.track({type:1,doc:We}),cn=!0,(k||j)&&(C=!0)),cn&&(gt?(f=f.add(gt),c=Jt?c.add(X):c.delete(X)):(f=f.delete(X),c=c.delete(X)))}),null!==this.query.limit)for(;f.size>this.query.limit;){const X="F"===this.query.limitType?f.last():f.first();f=f.delete(X.key),c=c.delete(X.key),s.track({type:1,doc:X})}return{ec:f,ic:s,zi:C,mutatedKeys:c}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const c=e.ic.xu();c.sort((j,X)=>function(fe,We){const gt=$t=>{switch($t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return en()}};return gt(fe)-gt(We)}(j.type,X.type)||this.tc(j.doc,X.doc)),this.oc(s);const f=t?this.uc():[],C=0===this.Zu.size&&this.current?1:0,k=C!==this.Xu;return this.Xu=C,0!==c.length||k?{snapshot:new Ph(this.query,e.ec,a,c,e.mutatedKeys,0===C,k,!1,!!s&&s.resumeToken.approximateByteSize()>0),cc:f}:{cc:f}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new jg,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=or(),this.ec.forEach(s=>{this.ac(s.key)&&(this.Zu=this.Zu.add(s.key))});const t=[];return e.forEach(s=>{this.Zu.has(s)||t.push(new Oc(s))}),this.Zu.forEach(s=>{e.has(s)||t.push(new Pc(s))}),t}hc(e){this.Yu=e.ir,this.Zu=or();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ph.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Td{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Sd{constructor(e){this.key=e,this.fc=!1}}class Ad{constructor(e,t,s,a,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.dc={},this.wc=new Ho(C=>Pl(C),rl),this._c=new Map,this.mc=new Set,this.gc=new Jr(Qt.comparator),this.yc=new Map,this.Ic=new pg,this.Tc={},this.Ec=new Map,this.Ac=Hl.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Md(r,e){return ep.apply(this,arguments)}function ep(){return ep=(0,O.Z)(function*(r,e){const t=gp(r);let s,a;const c=t.wc.get(e);if(c)s=c.targetId,t.sharedClientState.addLocalQueryTarget(s),a=c.view.lc();else{const f=yield zl(t.localStore,mo(e)),C=t.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,a=yield tp(t,e,s,"current"===C,f.resumeToken),t.isPrimaryClient&&Og(t.remoteStore,f)}return a}),ep.apply(this,arguments)}function tp(r,e,t,s,a){return np.apply(this,arguments)}function np(){return np=(0,O.Z)(function*(r,e,t,s,a){r.Rc=(fe,We,gt)=>{return($t=(0,O.Z)(function*(Jt,cn,hr,zr){let tr=cn.view.sc(hr);tr.zi&&(tr=yield Hf(Jt.localStore,cn.query,!1).then(({documents:Bi})=>cn.view.sc(Bi,tr)));const Zi=zr&&zr.targetChanges.get(cn.targetId),Yi=cn.view.applyChanges(tr,Jt.isPrimaryClient,Zi);return Od(Jt,cn.targetId,Yi.cc),Yi.snapshot}),function(Jt,cn,hr,zr){return $t.apply(this,arguments)})(r,fe,We,gt);var $t};const c=yield Hf(r.localStore,e,!0),f=new Nc(e,c.ir),C=f.sc(c.documents),k=hl.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==r.onlineState,a),j=f.applyChanges(C,r.isPrimaryClient,k);Od(r,t,j.cc);const X=new Td(e,t,f);return r.wc.set(e,X),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),j.snapshot}),np.apply(this,arguments)}function my(r,e){return rp.apply(this,arguments)}function rp(){return rp=(0,O.Z)(function*(r,e){const t=Yt(r),s=t.wc.get(e),a=t._c.get(s.targetId);if(a.length>1)return t._c.set(s.targetId,a.filter(c=>!rl(c,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Sc(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),wd(t.remoteStore,s.targetId),Pd(t,s.targetId)}).catch(js))):(Pd(t,s.targetId),yield Sc(t.localStore,s.targetId,!0))}),rp.apply(this,arguments)}function ip(){return ip=(0,O.Z)(function*(r,e,t){const s=mp(r);try{const a=yield function(c,f){const C=Yt(c),k=Di.now(),j=f.reduce((We,gt)=>We.add(gt.key),or());let X,fe;return C.persistence.runTransaction("Locally write mutations","readwrite",We=>{let gt=Gs(),$t=or();return C.Zi.getEntries(We,j).next(Jt=>{gt=Jt,gt.forEach((cn,hr)=>{hr.isValidDocument()||($t=$t.add(cn))})}).next(()=>C.localDocuments.getOverlayedDocuments(We,gt)).next(Jt=>{X=Jt;const cn=[];for(const hr of f){const zr=ul(hr,X.get(hr.key).overlayedDocument);null!=zr&&cn.push(new qa(hr.key,zr,jo(zr.value.mapValue),Wi.exists(!0)))}return C.mutationQueue.addMutationBatch(We,k,cn,f)}).next(Jt=>{fe=Jt;const cn=Jt.applyToLocalDocumentSet(X,$t);return C.documentOverlayCache.saveOverlays(We,Jt.batchId,cn)})}).then(()=>({batchId:fe.batchId,changes:hf(X)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(c,f,C){let k=c.Tc[c.currentUser.toKey()];k||(k=new Jr(jn)),k=k.insert(f,C),c.Tc[c.currentUser.toKey()]=k}(s,a.batchId,t),yield yu(s,a.changes),yield Ah(s.remoteStore)}catch(a){const c=Dd(a,"Failed to persist write");t.reject(c)}}),ip.apply(this,arguments)}function zg(r,e){return sp.apply(this,arguments)}function sp(){return sp=(0,O.Z)(function*(r,e){const t=Yt(r);try{const s=yield function iy(r,e){const t=Yt(r),s=e.snapshotVersion;let a=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=t.Zi.newChangeBuffer({trackRemovals:!0});a=t.Ji;const C=[];e.targetChanges.forEach((X,fe)=>{const We=a.get(fe);if(!We)return;C.push(t.Bs.removeMatchingKeys(c,X.removedDocuments,fe).next(()=>t.Bs.addMatchingKeys(c,X.addedDocuments,fe)));let gt=We.withSequenceNumber(c.currentSequenceNumber);var $t,Jt,cn;null!==e.targetMismatches.get(fe)?gt=gt.withResumeToken(ls.EMPTY_BYTE_STRING,In.min()).withLastLimboFreeSnapshotVersion(In.min()):X.resumeToken.approximateByteSize()>0&&(gt=gt.withResumeToken(X.resumeToken,s)),a=a.insert(fe,gt),Jt=gt,cn=X,(0===($t=We).resumeToken.approximateByteSize()||Jt.snapshotVersion.toMicroseconds()-$t.snapshotVersion.toMicroseconds()>=3e8||cn.addedDocuments.size+cn.modifiedDocuments.size+cn.removedDocuments.size>0)&&C.push(t.Bs.updateTargetData(c,gt))});let k=Gs(),j=or();if(e.documentUpdates.forEach(X=>{e.resolvedLimboDocuments.has(X)&&C.push(t.persistence.referenceDelegate.updateLimboDocument(c,X))}),C.push(jf(c,f,e.documentUpdates).next(X=>{k=X.nr,j=X.sr})),!s.isEqual(In.min())){const X=t.Bs.getLastRemoteSnapshotVersion(c).next(fe=>t.Bs.setTargetsMetadata(c,c.currentSequenceNumber,s));C.push(X)}return _.waitFor(C).next(()=>f.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,k,j)).next(()=>k)}).then(c=>(t.Ji=a,c))}(t.localStore,e);e.targetChanges.forEach((a,c)=>{const f=t.yc.get(c);f&&(mn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.fc=!0:a.modifiedDocuments.size>0?mn(f.fc):a.removedDocuments.size>0&&(mn(f.fc),f.fc=!1))}),yield yu(t,s,e)}catch(s){yield js(s)}}),sp.apply(this,arguments)}function _y(r,e,t){const s=Yt(r);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.wc.forEach((c,f)=>{const C=f.view.Mu(e);C.snapshot&&a.push(C.snapshot)}),function(c,f){const C=Yt(c);C.onlineState=f;let k=!1;C.queries.forEach((j,X)=>{for(const fe of X.listeners)fe.Mu(f)&&(k=!0)}),k&&ml(C)}(s.eventManager,e),a.length&&s.dc.nu(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function dv(r,e,t){return op.apply(this,arguments)}function op(){return op=(0,O.Z)(function*(r,e,t){const s=Yt(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.yc.get(e),c=a&&a.key;if(c){let f=new Jr(Qt.comparator);f=f.insert(c,oi.newNoDocument(c,In.min()));const C=or().add(c),k=new Fl(In.min(),new Map,new Jr(jn),f,C);yield zg(s,k),s.gc=s.gc.remove(c),s.yc.delete(e),up(s)}else yield Sc(s.localStore,e,!1).then(()=>Pd(s,e,t)).catch(js)}),op.apply(this,arguments)}function hv(r,e){return ap.apply(this,arguments)}function ap(){return ap=(0,O.Z)(function*(r,e){const t=Yt(r),s=e.batch.batchId;try{const a=yield function _g(r,e){const t=Yt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=t.Zi.newChangeBuffer({trackRemovals:!0});return function(f,C,k,j){const X=k.batch,fe=X.keys();let We=_.resolve();return fe.forEach(gt=>{We=We.next(()=>j.getEntry(C,gt)).next($t=>{const Jt=k.docVersions.get(gt);mn(null!==Jt),$t.version.compareTo(Jt)<0&&(X.applyToRemoteDocument($t,k),$t.isValidDocument()&&($t.setReadTime(k.commitVersion),j.addEntry($t)))})}),We.next(()=>f.mutationQueue.removeMutationBatch(C,X))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let C=or();for(let k=0;k<f.mutationResults.length;++k)f.mutationResults[k].transformResults.length>0&&(C=C.add(f.batch.mutations[k].key));return C}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}(t.localStore,e);Fh(t,s,null),Rd(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield yu(t,a)}catch(a){yield js(a)}}),ap.apply(this,arguments)}function Wg(r,e,t){return kh.apply(this,arguments)}function kh(){return kh=(0,O.Z)(function*(r,e,t){const s=Yt(r);try{const a=yield function(c,f){const C=Yt(c);return C.persistence.runTransaction("Reject batch","readwrite-primary",k=>{let j;return C.mutationQueue.lookupMutationBatch(k,f).next(X=>(mn(null!==X),j=X.keys(),C.mutationQueue.removeMutationBatch(k,X))).next(()=>C.mutationQueue.performConsistencyCheck(k)).next(()=>C.documentOverlayCache.removeOverlaysForBatchId(k,j,f)).next(()=>C.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(k,j)).next(()=>C.localDocuments.getDocuments(k,j))})}(s.localStore,e);Fh(s,e,t),Rd(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield yu(s,a)}catch(a){yield js(a)}}),kh.apply(this,arguments)}function xd(){return xd=(0,O.Z)(function*(r,e){const t=Yt(r);Wo(t.remoteStore)||ct("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(c){const f=Yt(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",C=>f.mutationQueue.getHighestUnacknowledgedBatchId(C))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ec.get(s)||[];a.push(e),t.Ec.set(s,a)}catch(s){const a=Dd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),xd.apply(this,arguments)}function Rd(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function Fh(r,e,t){const s=Yt(r);let a=s.Tc[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),s.Tc[s.currentUser.toKey()]=a}}function Pd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r._c.get(e))r.wc.delete(s),t&&r.dc.Pc(s,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(s=>{r.Ic.containsKey(s)||Lh(r,s)})}function Lh(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(wd(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),up(r))}function Od(r,e,t){for(const s of t)s instanceof Pc?(r.Ic.addReference(s.key,e),vy(r,s)):s instanceof Oc?(ct("SyncEngine","Document no longer in limbo: "+s.key),r.Ic.removeReference(s.key,e),r.Ic.containsKey(s.key)||Lh(r,s.key)):en()}function vy(r,e){const t=e.key,s=t.path.canonicalString();r.gc.get(t)||r.mc.has(s)||(ct("SyncEngine","New document in limbo: "+t),r.mc.add(s),up(r))}function up(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new Qt(xr.fromString(e)),s=r.Ac.next();r.yc.set(s,new Sd(t)),r.gc=r.gc.insert(t,s),Og(r.remoteStore,new fl(mo(hu(t.path)),s,"TargetPurposeLimboResolution",bi.ct))}}function yu(r,e,t){return lp.apply(this,arguments)}function lp(){return lp=(0,O.Z)(function*(r,e,t){const s=Yt(r),a=[],c=[],f=[];var C;s.wc.isEmpty()||(s.wc.forEach((C,k)=>{f.push(s.Rc(k,e,t).then(j=>{if((j||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(k.targetId,j?.fromCache?"not-current":"current"),j){a.push(j);const X=yg.Li(k.targetId,j);c.push(X)}}))}),yield Promise.all(f),s.dc.nu(a),yield(C=(0,O.Z)(function*(k,j){const X=Yt(k);try{yield X.persistence.runTransaction("notifyLocalViewChanges","readwrite",fe=>_.forEach(j,We=>_.forEach(We.Fi,gt=>X.persistence.referenceDelegate.addReference(fe,We.targetId,gt)).next(()=>_.forEach(We.Bi,gt=>X.persistence.referenceDelegate.removeReference(fe,We.targetId,gt)))))}catch(fe){if(!te(fe))throw fe;ct("LocalStore","Failed to update sequence numbers: "+fe)}for(const fe of j){const We=fe.targetId;if(!fe.fromCache){const gt=X.Ji.get(We),Jt=gt.withLastLimboFreeSnapshotVersion(gt.snapshotVersion);X.Ji=X.Ji.insert(We,Jt)}}}),function(k,j){return C.apply(this,arguments)})(s.localStore,c))}),lp.apply(this,arguments)}function Ey(r,e){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,O.Z)(function*(r,e){const t=Yt(r);if(!t.currentUser.isEqual(e)){ct("SyncEngine","User change. New user:",e.toKey());const s=yield $f(t.localStore,e);t.currentUser=e,(a=t).Ec.forEach(f=>{f.forEach(C=>{C.reject(new St(Ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ec.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield yu(t,s.er)}var a}),Uh.apply(this,arguments)}function wy(r,e){const t=Yt(r),s=t.yc.get(e);if(s&&s.fc)return or().add(s.key);{let a=or();const c=t._c.get(e);if(!c)return a;for(const f of c){const C=t.wc.get(f);a=a.unionWith(C.view.nc)}return a}}function pv(r,e){return cp.apply(this,arguments)}function cp(){return cp=(0,O.Z)(function*(r,e){const t=Yt(r),s=yield Hf(t.localStore,e.query,!0),a=e.view.hc(s);return t.isPrimaryClient&&Od(t,e.targetId,a.cc),a}),cp.apply(this,arguments)}function Iy(r,e){return dp.apply(this,arguments)}function dp(){return dp=(0,O.Z)(function*(r,e){const t=Yt(r);return Eg(t.localStore,e).then(s=>yu(t,s))}),dp.apply(this,arguments)}function Dy(r,e,t,s){return qg.apply(this,arguments)}function qg(){return qg=(0,O.Z)(function*(r,e,t,s){const a=Yt(r),c=yield function(f,C){const k=Yt(f),j=Yt(k.mutationQueue);return k.persistence.runTransaction("Lookup mutation documents","readonly",X=>j.Sn(X,C).next(fe=>fe?k.localDocuments.getDocuments(X,fe):_.resolve(null)))}(a.localStore,e);var C;null!==c?("pending"===t?yield Ah(a.remoteStore):"acknowledged"===t||"rejected"===t?(Fh(a,e,s||null),Rd(a,e),C=e,Yt(Yt(a.localStore).mutationQueue).Cn(C)):en(),yield yu(a,c)):ct("SyncEngine","Cannot apply mutation batch with id: "+e)}),qg.apply(this,arguments)}function hp(){return hp=(0,O.Z)(function*(r,e){const t=Yt(r);if(gp(t),mp(t),!0===e&&!0!==t.vc){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Kg(t,s.toArray());t.vc=!0,yield Bg(t.remoteStore,!0);for(const c of a)Og(t.remoteStore,c)}else if(!1===e&&!1!==t.vc){const s=[];let a=Promise.resolve();t._c.forEach((c,f)=>{t.sharedClientState.isLocalQueryTarget(f)?s.push(f):a=a.then(()=>(Pd(t,f),Sc(t.localStore,f,!0))),wd(t.remoteStore,f)}),yield a,yield Kg(t,s),function(c){const f=Yt(c);f.yc.forEach((C,k)=>{wd(f.remoteStore,k)}),f.Ic.Ts(),f.yc=new Map,f.gc=new Jr(Qt.comparator)}(t),t.vc=!1,yield Bg(t.remoteStore,!1)}}),hp.apply(this,arguments)}function Kg(r,e,t){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,O.Z)(function*(r,e,t){const s=Yt(r),a=[],c=[];for(const f of e){let C;const k=s._c.get(f);if(k&&0!==k.length){C=yield zl(s.localStore,mo(k[0]));for(const j of k){const X=s.wc.get(j),fe=yield pv(s,X);fe.snapshot&&c.push(fe.snapshot)}}else{const j=yield sy(s.localStore,f);C=yield zl(s.localStore,j),yield tp(s,Zg(j),f,!1,C.resumeToken)}a.push(C)}return s.dc.nu(c),a}),Vh.apply(this,arguments)}function Zg(r){return sd(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function by(r){const e=Yt(r);return Yt(Yt(e.localStore).persistence).$i()}function Ty(r,e,t,s){return fp.apply(this,arguments)}function fp(){return fp=(0,O.Z)(function*(r,e,t,s){const a=Yt(r);if(a.vc)return void ct("SyncEngine","Ignoring unexpected query state notification.");const c=a._c.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const f=yield Eg(a.localStore,lf(c[0])),C=Fl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ls.EMPTY_BYTE_STRING);yield yu(a,f,C);break}case"rejected":yield Sc(a.localStore,e,!0),Pd(a,e,s);break;default:en()}}),fp.apply(this,arguments)}function Sy(r,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,O.Z)(function*(r,e,t){const s=gp(r);if(s.vc){for(const a of e){if(s._c.has(a)){ct("SyncEngine","Adding an already active target "+a);continue}const c=yield sy(s.localStore,a),f=yield zl(s.localStore,c);yield tp(s,Zg(c),f.targetId,!1,f.resumeToken),Og(s.remoteStore,f)}for(const a of t)s._c.has(a)&&(yield Sc(s.localStore,a,!1).then(()=>{wd(s.remoteStore,a),Pd(s,a)}).catch(js))}}),pp.apply(this,arguments)}function gp(r){const e=Yt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=zg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dv.bind(null,e),e.dc.nu=Nh.bind(null,e.eventManager),e.dc.Pc=qo.bind(null,e.eventManager),e}function mp(r){const e=Yt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wg.bind(null,e),e}class Ya{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,O.Z)(function*(){t.serializer=Dh(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return bc(this.persistence,new ry,e.initialUser,this.serializer)}createPersistence(e){return new Lf(md.zs,this.serializer)}createSharedClientState(e){return new Sg}terminate(){var e=this;return(0,O.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Yg extends Ya{constructor(e,t,s){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,O.Z)(function*(){yield t().call(s,e),yield s.Vc.initialize(s,e),yield mp(s.Vc.syncEngine),yield Ah(s.Vc.remoteStore),yield s.persistence.Ii(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return bc(this.persistence,new ry,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new qm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new ts(t,this.persistence);return new Rr(e.asyncQueue,s)}createPersistence(e){const t=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Gl(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,mu(),vd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Sg}}class _p extends Yg{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,O.Z)(function*(){yield t().call(s,e);const a=s.Vc.syncEngine;s.sharedClientState instanceof Tg&&(s.sharedClientState.syncEngine={jr:Dy.bind(null,a),zr:Ty.bind(null,a),Wr:Sy.bind(null,a),$i:by.bind(null,a),Qr:Iy.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.Ii(function(){var c=(0,O.Z)(function*(f){yield function Cy(r,e){return hp.apply(this,arguments)}(s.Vc.syncEngine,f),s.gcScheduler&&(f&&!s.gcScheduler.started?s.gcScheduler.start():f||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(f&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():f||s.indexBackfillerScheduler.stop())});return function(f){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=mu();if(!Tg.D(t))throw new St(Ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Vf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tg(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Qa{initialize(e,t){var s=this;return(0,O.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>_y(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ey.bind(null,s.syncEngine),yield Bg(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new cv}createDatastore(e){const t=Dh(e.databaseInfo.databaseId),s=new X_(e.databaseInfo);return new nv(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,c=C=>_y(this.syncEngine,C,0),f=ly.D()?new ly:new Y_,new zf(t,s,a,c,f);var t,s,a,c,f}createSyncEngine(e,t){return function(s,a,c,f,C,k,j){const X=new Ad(s,a,c,f,C,k);return j&&(X.vc=!0),X}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,O.Z)(function*(t){const s=Yt(t);ct("RemoteStore","RemoteStore shutting down."),s.vu.add(5),yield Ch(s),s.Pu.shutdown(),s.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vp(r,e=10240){let t=0;return{read:()=>(0,O.Z)(function*(){if(t<r.byteLength){const s={value:r.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,O.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Ep{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Qg{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Ii,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(s=>{s&&s.Qu()?this.metadata.resolve(s.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.Gu)}`))},s=>this.metadata.reject(s))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,O.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,O.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,O.Z)(function*(){const t=yield e.kc();if(null===t)return null;const s=e.xc.decode(t),a=Number(s);isNaN(a)&&e.Mc(`length string (${s}) is not valid number`);const c=yield e.$c(a);return new Za(JSON.parse(c),t.length+a)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,O.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}$c(e){var t=this;return(0,O.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const s=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,O.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Q0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,O.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new St(Ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,O.Z)(function*(c,f){const C=Yt(c),k=dh(C.serializer)+"/documents",j={documents:f.map(gt=>gc(C.serializer,gt))},X=yield C.vo("BatchGetDocuments",k,j,f.length),fe=new Map;X.forEach(gt=>{const $t=function ng(r,e){return"found"in e?function(t,s){mn(!!s.found);const a=pu(t,s.found.name),c=Ws(s.found.updateTime),f=s.found.createTime?Ws(s.found.createTime):In.min(),C=new fi({mapValue:{fields:s.found.fields}});return oi.newFoundDocument(a,c,f,C)}(r,e):"missing"in e?function(t,s){mn(!!s.missing),mn(!!s.readTime);const a=pu(t,s.missing),c=Ws(s.readTime);return oi.newNoDocument(a,c)}(r,e):en()}(C.serializer,gt);fe.set($t.key.toString(),$t)});const We=[];return f.forEach(gt=>{const $t=fe.get(gt.toString());mn(!!$t),We.push($t)}),We}),function(c,f){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new h(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,O.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const c=Qt.fromPath(a);e.mutations.push(new w(c,e.precondition(c)))}),yield(s=(0,O.Z)(function*(a,c){const f=Yt(a),C=dh(f.serializer)+"/documents",k={writes:c.map(j=>gu(f.serializer,j))};yield f.Io("Commit",C,k)}),function(a,c){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw en();t=In.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new St(Ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(In.min())?Wi.exists(!1):Wi.updateTime(t):Wi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(In.min()))throw new St(Ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wi.updateTime(t)}return Wi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class J0{constructor(e,t,s,a,c){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=c,this.Bc=s.maxAttempts,this.qo=new Mg(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,O.Z)(function*(){const t=new Q0(e.datastore),s=e.qc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Uc(c)}))}).catch(a=>{e.Uc(a)})}))}qc(e){try{const t=this.updateFunction(e);return!bs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!pn(t)}return!1}}class mv{constructor(e,t,s,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=si.UNAUTHENTICATED,this.clientId=la.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var f=(0,O.Z)(function*(C){ct("FirestoreClient","Received user=",C.uid),yield c.authCredentialListener(C),c.user=C});return function(C){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(s,f=>(ct("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}getConfiguration(){var e=this;return(0,O.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new St(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,O.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=Dd(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function wp(r,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,O.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),ct("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(function(){var a=(0,O.Z)(function*(c){s.isEqual(c)||(yield $f(e.localStore,c),s=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),Ip.apply(this,arguments)}function Jg(r,e){return Os.apply(this,arguments)}function Os(){return Os=(0,O.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield em(r);ct("FirestoreClient","Initializing OnlineComponentProvider");const s=yield r.getConfiguration();yield e.initialize(t,s),r.setCredentialChangeListener(a=>gy(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,c)=>gy(e.remoteStore,c)),r._onlineComponents=e}),Os.apply(this,arguments)}function Xg(r){return"FirebaseError"===r.name?r.code===Ze.FAILED_PRECONDITION||r.code===Ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function em(r){return tm.apply(this,arguments)}function tm(){return tm=(0,O.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ct("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Xg(t))throw t;as("Error using user provided cache. Falling back to memory cache: "+t),yield wp(r,new Ya)}}else ct("FirestoreClient","Using default OfflineComponentProvider"),yield wp(r,new Ya);return r._offlineComponents}),tm.apply(this,arguments)}function Bh(r){return nm.apply(this,arguments)}function nm(){return nm=(0,O.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ct("FirestoreClient","Using user provided OnlineComponentProvider"),yield Jg(r,r._uninitializedComponentsProvider._online)):(ct("FirestoreClient","Using default OnlineComponentProvider"),yield Jg(r,new Qa))),r._onlineComponents}),nm.apply(this,arguments)}function rm(r){return em(r).then(e=>e.persistence)}function $h(r){return em(r).then(e=>e.localStore)}function kc(r){return Bh(r).then(e=>e.remoteStore)}function im(r){return Bh(r).then(e=>e.syncEngine)}function Fc(r){return sm.apply(this,arguments)}function sm(){return sm=(0,O.Z)(function*(r){const e=yield Bh(r),t=e.eventManager;return t.onListen=Md.bind(null,e.syncEngine),t.onUnlisten=my.bind(null,e.syncEngine),t}),sm.apply(this,arguments)}function Dp(r,e,t={}){const s=new Ii;return r.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return function(a,c,f,C,k){const j=new Ep({next:fe=>{c.enqueueAndForget(()=>Gg(a,X));const We=fe.docs.has(f);!We&&fe.fromCache?k.reject(new St(Ze.UNAVAILABLE,"Failed to get document because the client is offline.")):We&&fe.fromCache&&C&&"server"===C.source?k.reject(new St(Ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):k.resolve(fe)},error:fe=>k.reject(fe)}),X=new Cd(hu(f.path),j,{includeMetadataChanges:!0,Ku:!0});return Hg(a,X)}(yield Fc(r),r.asyncQueue,e,t,s)})),s.promise}function Ry(r,e,t={}){const s=new Ii;return r.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return function(a,c,f,C,k){const j=new Ep({next:fe=>{c.enqueueAndForget(()=>Gg(a,X)),fe.fromCache&&"server"===C.source?k.reject(new St(Ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):k.resolve(fe)},error:fe=>k.reject(fe)}),X=new Cd(f,j,{includeMetadataChanges:!0,Ku:!0});return Hg(a,X)}(yield Fc(r),r.asyncQueue,e,t,s)})),s.promise}function om(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const am=new Map;function um(r,e,t){if(!t)throw new St(Ze.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Py(r,e,t,s){if(!0===e&&!0===s)throw new St(Ze.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Oy(r){if(!Qt.isDocumentKey(r))throw new St(Ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ny(r){if(Qt.isDocumentKey(r))throw new St(Ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Nd(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":en()}function Cr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new St(Ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Nd(r);throw new St(Ze.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function ky(r,e){if(e<=0)throw new St(Ze.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class lm{constructor(e){var t,s;if(void 0===e.host){if(void 0!==e.ssl)throw new St(Ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new St(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Py("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=om(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(a){if(void 0!==a.timeoutSeconds){if(isNaN(a.timeoutSeconds))throw new St(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new St(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new St(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new St(Ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new St(Ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new na;switch(t.type){case"firstParty":return new $o(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new St(Ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=am.get(e);t&&(ct("ComponentProvider","Removing Datastore"),am.delete(e),t.terminate())}(this),Promise.resolve()}}class qi{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qi(this.firestore,e,this._key)}}class _o{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class Pa extends _o{constructor(e,t,s){super(e,t,hu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qi(this.firestore,null,new Qt(e))}withConverter(e){return new Pa(this.firestore,e,this._path)}}function Ly(r,e,...t){if(r=(0,Ge.m9)(r),um("collection","path",e),r instanceof jh){const s=xr.fromString(e,...t);return Ny(s),new Pa(r,null,s)}{if(!(r instanceof qi||r instanceof Pa))throw new St(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(xr.fromString(e,...t));return Ny(s),new Pa(r.firestore,null,s)}}function Hh(r,e,...t){if(r=(0,Ge.m9)(r),1===arguments.length&&(e=la.A()),um("doc","path",e),r instanceof jh){const s=xr.fromString(e,...t);return Oy(s),new qi(r,null,new Qt(s))}{if(!(r instanceof qi||r instanceof Pa))throw new St(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(xr.fromString(e,...t));return Oy(s),new qi(r.firestore,r instanceof Pa?r.converter:null,new Qt(s))}}function Cp(r,e){return r=(0,Ge.m9)(r),e=(0,Ge.m9)(e),(r instanceof qi||r instanceof Pa)&&(e instanceof qi||e instanceof Pa)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function kd(r,e){return r=(0,Ge.m9)(r),e=(0,Ge.m9)(e),r instanceof _o&&e instanceof _o&&r.firestore===e.firestore&&rl(r._query,e._query)&&r.converter===e.converter}class Vy{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Mg(this,"async_queue_retry"),this.Xc=()=>{const t=vd();t&&ct("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=vd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=vd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Ii;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,O.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!te(t))throw t;ct("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(s=>{throw this.Wc=s,this.Hc=!1,Ui("INTERNAL UNHANDLED ERROR: ",function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),f}(s)),s}).then(s=>(this.Hc=!1,s))));return this.Gc=t,t}enqueueAfterDelay(e,t,s){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const a=Qf.createAndSchedule(this,e,t,s,c=>this.na(c));return this.zc.push(a),a}Zc(){this.Wc&&en()}verifyOperationInProgress(){}sa(){var e=this;return(0,O.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function bp(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(r)}class By{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ki extends jh{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Vy,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||jy(this),this._firestoreClient.terminate()}}function Ts(r){return r._firestoreClient||jy(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function jy(r){var e,t,s;const a=r._freezeSettings(),c=(C=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new cu(r._databaseId,C,r._persistenceKey,(j=a).host,j.ssl,j.experimentalForceLongPolling,j.experimentalAutoDetectLongPolling,om(j.experimentalLongPollingOptions),j.useFetchStreams));var C,j;r._firestoreClient=new mv(r._authCredentials,r._appCheckCredentials,r._queue,c),null!==(t=a.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=a.cache)&&void 0!==s&&s._onlineComponentProvider&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Hy(r,e,t){const s=new Ii;return r.asyncQueue.enqueue((0,O.Z)(function*(){try{yield wp(r,t),yield Jg(r,e),s.resolve()}catch(a){const c=a;if(!Xg(c))throw c;as("Error enabling indexeddb cache. Falling back to memory cache: "+c),s.reject(c)}})).then(()=>s.promise)}function Gy(r){if(r._initialized||r._terminated)throw new St(Ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bu(ls.fromBase64String(e))}catch(t){throw new St(Ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bu(ls.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new St(Ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lc{constructor(e){this._methodName=e}}class zh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new St(Ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new St(Ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jn(this._lat,e._lat)||jn(this._long,e._long)}}const zy=/^__.*__$/;class Wy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new qa(e,this.data,this.fieldMask,t,this.fieldTransforms):new ll(e,this.data,t,this.fieldTransforms)}}class cm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new qa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dm(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw en()}}class Wh{constructor(e,t,s,a,c,f){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,void 0===c&&this.ua(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Wh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.fa(e),a}da(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.aa({path:s,la:!1});return a.ua(),a}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return vl(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(dm(this.ca)&&zy.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class qy{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Dh(e)}ya(e,t,s,a=!1){return new Wh({ca:e,methodName:t,ga:s,path:Vi.emptyPath(),la:!1,ma:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ql(r){const e=r._freezeSettings(),t=Dh(r._databaseId);return new qy(r._databaseId,!!e.ignoreUndefinedProperties,t)}function qh(r,e,t,s,a,c={}){const f=r.ya(c.merge||c.mergeFields?2:0,e,t,a);Bn("Data must be an object, but it was:",f,s);const C=fm(s,f);let k,j;if(c.merge)k=new Mo(f.fieldMask),j=f.fieldTransforms;else if(c.mergeFields){const X=[];for(const fe of c.mergeFields){const We=Zh(e,fe,t);if(!f.contains(We))throw new St(Ze.INVALID_ARGUMENT,`Field '${We}' is specified in your field mask but missing from your input data.`);Zy(X,We)||X.push(We)}k=new Mo(X),j=f.fieldTransforms.filter(fe=>k.covers(fe.field))}else k=null,j=f.fieldTransforms;return new Wy(new fi(C),k,j)}class Fd extends Lc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fd}}function hm(r,e,t){return new Wh({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _l extends Lc{_toFieldTransform(e){return new zs(e.path,new ol)}isEqual(e){return e instanceof _l}}class Mv extends Lc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hm(this,e,!0),s=this.pa.map(c=>Kl(c,t)),a=new al(s);return new zs(e.path,a)}isEqual(e){return this===e}}class xv extends Lc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=hm(this,e,!0),s=this.pa.map(c=>Kl(c,t)),a=new ia(s);return new zs(e.path,a)}isEqual(e){return this===e}}class Ld extends Lc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new kl(e.serializer,ud(e.serializer,this.Ia));return new zs(e.path,t)}isEqual(e){return this===e}}function Ky(r,e,t,s){const a=r.ya(1,e,t);Bn("Data must be an object, but it was:",a,s);const c=[],f=fi.empty();da(s,(k,j)=>{const X=Tp(e,k,t);j=(0,Ge.m9)(j);const fe=a.da(X);if(j instanceof Fd)c.push(X);else{const We=Kl(j,fe);null!=We&&(c.push(X),f.set(X,We))}});const C=new Mo(c);return new cm(f,C,a.fieldTransforms)}function Kh(r,e,t,s,a,c){const f=r.ya(1,e,t),C=[Zh(e,s,t)],k=[a];if(c.length%2!=0)throw new St(Ze.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let We=0;We<c.length;We+=2)C.push(Zh(e,c[We])),k.push(c[We+1]);const j=[],X=fi.empty();for(let We=C.length-1;We>=0;--We)if(!Zy(j,C[We])){const gt=C[We];let $t=k[We];$t=(0,Ge.m9)($t);const Jt=f.da(gt);if($t instanceof Fd)j.push(gt);else{const cn=Kl($t,Jt);null!=cn&&(j.push(gt),X.set(gt,cn))}}const fe=new Mo(j);return new cm(X,fe,f.fieldTransforms)}function Rv(r,e,t,s=!1){return Kl(t,r.ya(s?4:3,e))}function Kl(r,e){if(Pv(r=(0,Ge.m9)(r)))return Bn("Unsupported field value:",e,r),fm(r,e);if(r instanceof Lc)return function(t,s){if(!dm(s.ca))throw s._a(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s._a(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,s){const a=[];let c=0;for(const f of t){let C=Kl(f,s.wa(c));null==C&&(C={nullValue:"NULL_VALUE"}),a.push(C),c++}return{arrayValue:{values:a}}}(r,e)}return function(t,s){if(null===(t=(0,Ge.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ud(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Di.fromDate(t);return{timestampValue:pc(s.serializer,a)}}if(t instanceof Di){const a=new Di(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pc(s.serializer,a)}}if(t instanceof zh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bu)return{bytesValue:eg(s.serializer,t._byteString)};if(t instanceof qi){const a=s.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw s._a(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ch(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s._a(`Unsupported field value: ${Nd(t)}`)}(r,e)}function fm(r,e){const t={};return uu(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(r,(s,a)=>{const c=Kl(a,e.ha(s));null!=c&&(t[s]=c)}),{mapValue:{fields:t}}}function Pv(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Di||r instanceof zh||r instanceof Bu||r instanceof qi||r instanceof Lc)}function Bn(r,e,t){if(!Pv(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Nd(t);throw e._a("an object"===s?r+" a custom object":r+" "+s)}var s}function Zh(r,e,t){if((e=(0,Ge.m9)(e))instanceof yl)return e._internalPath;if("string"==typeof e)return Tp(r,e);throw vl("Field path arguments must be of type string or ",r,!1,void 0,t)}const Ov=new RegExp("[~\\*/\\[\\]]");function Tp(r,e,t){if(e.search(Ov)>=0)throw vl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new yl(...e.split("."))._internalPath}catch{throw vl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function vl(r,e,t,s,a){const c=s&&!s.isEmpty(),f=void 0!==a;let C=`Function ${e}() called with invalid data`;t&&(C+=" (via `toFirestore()`)"),C+=". ";let k="";return(c||f)&&(k+=" (found",c&&(k+=` in field ${s}`),f&&(k+=` in document ${a}`),k+=")"),new St(Ze.INVALID_ARGUMENT,C+r+k)}function Zy(r,e){return r.some(t=>t.isEqual(e))}class Zl{constructor(e,t,s,a,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new qi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Sp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rs("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Sp extends Zl{data(){return super.data()}}function rs(r,e){return"string"==typeof e?Tp(r,e):e instanceof yl?e._internalPath:e._delegate._internalPath}function Nv(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new St(Ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}class Ud extends Ap{}function Yl(r,e,...t){let s=[];e instanceof Ap&&s.push(e),s=s.concat(t),function(a){const c=a.filter(C=>C instanceof Uc).length,f=a.filter(C=>C instanceof Vd).length;if(c>1||c>0&&f>0)throw new St(Ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class Vd extends Ud{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Vd(e,t,s)}_apply(e){const t=this._parse(e);return e_(e._query,t),new _o(e.firestore,e.converter,ku(e._query,t))}_parse(e){const t=ql(e.firestore);return function(a,c,f,C,k,j,X){let fe;if(k.isKeyField()){if("array-contains"===j||"array-contains-any"===j)throw new St(Ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if("in"===j||"not-in"===j){Xy(X,j);const We=[];for(const gt of X)We.push($d(C,a,gt));fe={arrayValue:{values:We}}}else fe=$d(C,a,X)}else"in"!==j&&"not-in"!==j&&"array-contains-any"!==j||Xy(X,j),fe=Rv(f,"where",X,"in"===j||"not-in"===j);return Dr.create(k,j,fe)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Uc extends Ap{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uc(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:Vr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,a){let c=s;const f=a.getFlattenedFilters();for(const C of f)e_(c,C),c=ku(c,C)}(e._query,t),new _o(e.firestore,e.converter,ku(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pm extends Ud{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pm(e,t)}_apply(e){const t=function(s,a,c){if(null!==s.startAt)throw new St(Ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new St(Ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new Ru(a,c);return function(C,k){if(null===uc(C)){const j=nl(C);null!==j&&t_(0,j,k.field)}}(s,f),f}(e._query,this._field,this._direction);return new _o(e.firestore,e.converter,function(s,a){const c=s.explicitOrderBy.concat([a]);return new du(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Ql extends Ud{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ql(e,t,s)}_apply(e){return new _o(e.firestore,e.converter,Rl(e._query,this._limit,this._limitType))}}class Mp extends Ud{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Mp(e,t,s)}_apply(e){const t=Bd(e,this.type,this._docOrFields,this._inclusive);return new _o(e.firestore,e.converter,(a=t,new du((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class Yh extends Ud{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Yh(e,t,s)}_apply(e){const t=Bd(e,this.type,this._docOrFields,this._inclusive);return new _o(e.firestore,e.converter,(a=t,new du((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function Bd(r,e,t,s){if(t[0]=(0,Ge.m9)(t[0]),t[0]instanceof Zl)return function(a,c,f,C,k){if(!C)throw new St(Ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const j=[];for(const X of Ha(a))if(X.field.isKeyField())j.push(Ue(c,C.key));else{const fe=C.data.field(X.field);if(go(fe))throw new St(Ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+X.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===fe){const We=X.field.canonicalString();throw new St(Ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${We}' (used as the orderBy) does not exist.`)}j.push(fe)}return new ja(j,k)}(r._query,r.firestore._databaseId,e,t[0]._document,s);{const a=ql(r.firestore);return function(c,f,C,k,j,X){const fe=c.explicitOrderBy;if(j.length>fe.length)throw new St(Ze.INVALID_ARGUMENT,`Too many arguments provided to ${k}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const We=[];for(let gt=0;gt<j.length;gt++){const $t=j[gt];if(fe[gt].field.isKeyField()){if("string"!=typeof $t)throw new St(Ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${k}(), but got a ${typeof $t}`);if(!Nu(c)&&-1!==$t.indexOf("/"))throw new St(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${k}() must be a plain document ID, but '${$t}' contains a slash.`);const Jt=c.path.child(xr.fromString($t));if(!Qt.isDocumentKey(Jt))throw new St(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${k}() must result in a valid document path, but '${Jt}' is not because it contains an odd number of segments.`);const cn=new Qt(Jt);We.push(Ue(f,cn))}else{const Jt=Rv(C,k,$t);We.push(Jt)}}return new ja(We,X)}(r._query,r.firestore._databaseId,a,e,t,s)}}function $d(r,e,t){if("string"==typeof(t=(0,Ge.m9)(t))){if(""===t)throw new St(Ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nu(e)&&-1!==t.indexOf("/"))throw new St(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(xr.fromString(t));if(!Qt.isDocumentKey(s))throw new St(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ue(r,new Qt(s))}if(t instanceof qi)return Ue(r,t._key);throw new St(Ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nd(t)}.`)}function Xy(r,e){if(!Array.isArray(r)||0===r.length)throw new St(Ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function e_(r,e){if(e.isInequality()){const s=nl(r),a=e.field;if(null!==s&&!s.isEqual(a))throw new St(Ze.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${a.toString()}'`);const c=uc(r);null!==c&&t_(0,a,c)}const t=function(s,a){for(const c of s)for(const f of c.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new St(Ze.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function t_(r,e,t){if(!t.isEqual(e))throw new St(Ze.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Rp{convertValue(e,t="none"){switch(Ba(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw en()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return da(e,(a,c)=>{s[a]=this.convertValue(c,t)}),s}convertGeoPoint(e){return new zh(Ri(e.latitude),Ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=fa(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Va(e));default:return null}}convertTimestamp(e){const t=Hs(e);return new Di(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=xr.fromString(e);mn(R_(s));const a=new Ma(s.get(1),s.get(3)),c=new Qt(s.popFirst(5));return a.isEqual(t)||Ui(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Qh(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Bv extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qi(this.firestore,null,t)}}class jd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jl extends Zl{constructor(e,t,s,a,c,f){super(e,t,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(rs("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Hd extends Jl{data(e={}){return super.data(e)}}class Eu{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new jd(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Hd(this._firestore,this._userDataWriter,s.key,s,new jd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new St(Ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new Hd(s._firestore,s._userDataWriter,f.doc.key,f.doc,new jd(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:c++}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const C=new Hd(s._firestore,s._userDataWriter,f.doc.key,f.doc,new jd(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let k=-1,j=-1;return 0!==f.type&&(k=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),1!==f.type&&(c=c.add(f.doc),j=c.indexOf(f.doc.key)),{type:Hv(f.type),doc:C,oldIndex:k,newIndex:j}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Hv(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return en()}}function n_(r,e){return r instanceof Jl&&e instanceof Jl?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Eu&&e instanceof Eu&&r._firestore===e._firestore&&kd(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class Ja extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qi(this.firestore,null,t)}}function i_(r,e,t){r=Cr(r,qi);const s=Cr(r.firestore,Ki),a=Qh(r.converter,e,t);return Vc(s,[qh(ql(s),"setDoc",r._key,a,null!==r.converter,t).toMutation(r._key,Wi.none())])}function mm(r,e,t,...s){r=Cr(r,qi);const a=Cr(r.firestore,Ki),c=ql(a);let f;return f="string"==typeof(e=(0,Ge.m9)(e))||e instanceof yl?Kh(c,"updateDoc",r._key,e,t,s):Ky(c,"updateDoc",r._key,e),Vc(a,[f.toMutation(r._key,Wi.exists(!0))])}function Gd(r,...e){var t,s,a;r=(0,Ge.m9)(r);let c={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||bp(e[f])||(c=e[f],f++);const C={includeMetadataChanges:c.includeMetadataChanges};if(bp(e[f])){const fe=e[f];e[f]=null===(t=fe.next)||void 0===t?void 0:t.bind(fe),e[f+1]=null===(s=fe.error)||void 0===s?void 0:s.bind(fe),e[f+2]=null===(a=fe.complete)||void 0===a?void 0:a.bind(fe)}let k,j,X;if(r instanceof qi)j=Cr(r.firestore,Ki),X=hu(r._key.path),k={next:fe=>{e[f]&&e[f](ym(j,r,fe))},error:e[f+1],complete:e[f+2]};else{const fe=Cr(r,_o);j=Cr(fe.firestore,Ki),X=fe._query;const We=new Ja(j);k={next:gt=>{e[f]&&e[f](new Eu(j,We,fe,gt))},error:e[f+1],complete:e[f+2]},Nv(r._query)}return function(fe,We,gt,$t){const Jt=new Ep($t),cn=new Cd(We,Jt,gt);return fe.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return Hg(yield Fc(fe),cn)})),()=>{Jt.Dc(),fe.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return Gg(yield Fc(fe),cn)}))}}(Ts(j),X,C,k)}function Vc(r,e){return function(t,s){const a=new Ii;return t.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return function yy(r,e,t){return ip.apply(this,arguments)}(yield im(t),s,a)})),a.promise}(Ts(r),e)}function ym(r,e,t){const s=t.docs.get(e._key),a=new Ja(r);return new Jl(r,a,e._key,s,new jd(t.hasPendingWrites,t.fromCache),e.converter)}const a0={maxAttempts:5};class o_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ql(e)}set(e,t,s){this._verifyNotCommitted();const a=Xl(e,this._firestore),c=Qh(a.converter,t,s),f=qh(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,s);return this._mutations.push(f.toMutation(a._key,Wi.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const c=Xl(e,this._firestore);let f;return f="string"==typeof(t=(0,Ge.m9)(t))||t instanceof yl?Kh(this._dataReader,"WriteBatch.update",c._key,t,s,a):Ky(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(f.toMutation(c._key,Wi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xl(e,this._firestore);return this._mutations=this._mutations.concat(new h(t._key,Wi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new St(Ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xl(r,e){if((r=(0,Ge.m9)(r)).firestore!==e)throw new St(Ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class u0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ql(e)}get(e){const t=Xl(e,this._firestore),s=new Bv(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return en();const c=a[0];if(c.isFoundDocument())return new Zl(this._firestore,s,c.key,c,t.converter);if(c.isNoDocument())return new Zl(this._firestore,s,t._key,null,t.converter);throw en()})}set(e,t,s){const a=Xl(e,this._firestore),c=Qh(a.converter,t,s),f=qh(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,s);return this._transaction.set(a._key,f),this}update(e,t,s,...a){const c=Xl(e,this._firestore);let f;return f="string"==typeof(t=(0,Ge.m9)(t))||t instanceof yl?Kh(this._dataReader,"Transaction.update",c._key,t,s,a):Ky(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,f),this}delete(e){const t=Xl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xl(e,this._firestore),s=new Ja(this._firestore);return super.get(e).then(a=>new Jl(this._firestore,s,t._key,a._document,new jd(!1,!1),t.converter))}}!function(r,e=!0){ua=se.SDK_VERSION,(0,se._registerComponent)(new he.wA("firestore",(t,{instanceIdentifier:s,options:a})=>{const c=t.getProvider("app").getImmediate(),f=new Ki(new ju(t.getProvider("auth-internal")),new nu(t.getProvider("app-check-internal")),function(C,k){if(!Object.prototype.hasOwnProperty.apply(C.options,["projectId"]))throw new St(Ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ma(C.options.projectId,k)}(c,s),c);return a=Object.assign({useFetchStreams:e},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Bo,"3.12.0",r),(0,se.registerVersion)(Bo,"3.12.0","esm2017")}();function wm(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new St("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Pp(){if(typeof Uint8Array>"u")throw new St("unimplemented","Uint8Arrays are not available in this environment.")}function Op(){if(!function rf(){return typeof atob<"u"}())throw new St("unimplemented","Blobs are unavailable in Firestore in this environment.")}class zd{constructor(e){this._delegate=e}static fromBase64String(e){return Op(),new zd(Bu.fromBase64String(e))}static fromUint8Array(e){return Pp(),new zd(Bu.fromUint8Array(e))}toBase64(){return Op(),this._delegate.toBase64()}toUint8Array(){return Pp(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Jh(r){return function g0(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(r,["next","error","complete"])}class m0{enableIndexedDbPersistence(e,t){return function Ev(r,e){Gy(r=Cr(r,Ki));const t=Ts(r);if(t._uninitializedComponentsProvider)throw new St(Ze.FAILED_PRECONDITION,"SDK cache is already specified.");as("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=r._freezeSettings(),a=new Qa;return Hy(t,a,new Yg(a,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wv(r){Gy(r=Cr(r,Ki));const e=Ts(r);if(e._uninitializedComponentsProvider)throw new St(Ze.FAILED_PRECONDITION,"SDK cache is already specified.");as("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),s=new Qa;return Hy(e,s,new _p(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Iv(r){if(r._initialized&&!r._terminated)throw new St(Ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ii;return r._queue.enqueueAndForgetEvenWhileRestricted((0,O.Z)(function*(){try{yield(t=(0,O.Z)(function*(s){if(!T.D())return Promise.resolve();const a=s+"main";yield T.delete(a)}),function(s){return t.apply(this,arguments)})(Vf(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Np{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ma||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&as("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Fy(r,e,t,s={}){var a;const c=(r=Cr(r,jh))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&as("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let f,C;if("string"==typeof s.mockUserToken)f=s.mockUserToken,C=si.MOCK_USER;else{f=(0,Ge.Sg)(s.mockUserToken,null===(a=r._app)||void 0===a?void 0:a.options.projectId);const k=s.mockUserToken.sub||s.mockUserToken.user_id;if(!k)throw new St(Ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new si(k)}r._authCredentials=new ka(new es(f,C))}}(this._delegate,e,t,s)}enableNetwork(){return function Cv(r){return function My(r){return r.asyncQueue.enqueue((0,O.Z)(function*(){const e=yield rm(r),t=yield kc(r);return e.setNetworkEnabled(!0),function(s){const a=Yt(s);return a.vu.delete(0),Wl(a)}(t)}))}(Ts(r=Cr(r,Ki)))}(this._delegate)}disableNetwork(){return function bv(r){return function X0(r){return r.asyncQueue.enqueue((0,O.Z)(function*(){const e=yield rm(r),t=yield kc(r);return e.setNetworkEnabled(!1),(s=(0,O.Z)(function*(a){const c=Yt(a);c.vu.add(0),yield Ch(c),c.bu.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Ts(r=Cr(r,Ki)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Py("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Dv(r){return function(e){const t=new Ii;return e.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return function fv(r,e){return xd.apply(this,arguments)}(yield im(e),t)})),t.promise}(Ts(r=Cr(r,Ki)))}(this._delegate)}onSnapshotsInSync(e){return function Yv(r,e){return function yv(r,e){const t=new Ep(e);return r.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return s=yield Fc(r),a=t,Yt(s).ku.add(a),void a.next();var s,a})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return s=yield Fc(r),a=t,void Yt(s).ku.delete(a);var s,a}))}}(Ts(r=Cr(r,Ki)),bp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new St("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hc(this,Ly(this._delegate,e))}catch(t){throw Ko(t,"collection()","Firestore.collection()")}}doc(e){try{return new wu(this,Hh(this._delegate,e))}catch(t){throw Ko(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zo(this,function Uy(r,e){if(r=Cr(r,jh),um("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new St(Ze.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _o(r,null,(t=e,new du(xr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ko(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function l0(r,e,t){r=Cr(r,Ki);const s=Object.assign(Object.assign({},a0),t);return function(a){if(a.maxAttempts<1)throw new St(Ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(a,c,f){const C=new Ii;return a.asyncQueue.enqueueAndForget((0,O.Z)(function*(){const k=yield function Ay(r){return Bh(r).then(e=>e.datastore)}(a);new J0(a.asyncQueue,k,f,c,C).run()})),C.promise}(Ts(r),a=>e(new u0(r,a)),s)}(this._delegate,t=>e(new Bc(this,t)))}batch(){return Ts(this._delegate),new Im(new o_(this._delegate,e=>Vc(this._delegate,e)))}loadBundle(e){return function Tv(r,e){const t=Ts(r=Cr(r,Ki)),s=new By;return function Vu(r,e,t,s){const a=function(c,f){let C;return C="string"==typeof c?ah().encode(c):c,k=function(k,j){if(k instanceof Uint8Array)return vp(k,j);if(k instanceof ArrayBuffer)return vp(new Uint8Array(k),j);if(k instanceof ReadableStream)return k.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(C),new Qg(k,f);var k}(t,Dh(e));r.asyncQueue.enqueueAndForget((0,O.Z)(function*(){!function yp(r,e,t){const s=Yt(r);var a;(a=(0,O.Z)(function*(c,f,C){try{const k=yield f.getMetadata();if(yield function(We,gt){const $t=Yt(We),Jt=Ws(gt.createTime);return $t.persistence.runTransaction("hasNewerBundle","readonly",cn=>$t.qs.getBundleMetadata(cn,gt.id)).then(cn=>!!cn&&cn.createTime.compareTo(Jt)>=0)}(c.localStore,k))return yield f.close(),C._completeWith({taskState:"Success",documentsLoaded:(We=k).totalDocuments,bytesLoaded:We.totalBytes,totalDocuments:We.totalDocuments,totalBytes:We.totalBytes}),Promise.resolve(new Set);C._updateProgress(Rc(k));const j=new bd(k,c.localStore,f.serializer);let X=yield f.bc();for(;X;){const We=yield j.zu(X);We&&C._updateProgress(We),X=yield f.bc()}const fe=yield j.complete();return yield yu(c,fe.Ju,void 0),yield function(We,gt){const $t=Yt(We);return $t.persistence.runTransaction("Save bundle","readwrite",Jt=>$t.qs.saveBundleMetadata(Jt,gt))}(c.localStore,k),C._completeWith(fe.progress),Promise.resolve(fe.Hu)}catch(k){return as("SyncEngine",`Loading bundle failed with ${k}`),C._failWith(k),Promise.resolve(new Set)}var We}),function(c,f,C){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield im(r),a,s)}))}(t,r._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Sv(r,e){return function _u(r,e){return r.asyncQueue.enqueue((0,O.Z)(function*(){return function(t,s){const a=Yt(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.qs.getNamedQuery(c,s))}(yield $h(r),e)}))}(Ts(r=Cr(r,Ki)),e).then(t=>t?new _o(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Zo(this,t):null)}}class kp extends Rp{constructor(e){super(),this.firestore=e}convertBytes(e){return new zd(new Bu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wu.forKey(t,this.firestore,null)}}class Bc{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kp(e)}get(e){const t=ec(e);return this._delegate.get(t).then(s=>new jc(this._firestore,new Jl(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=ec(e);return s?(wm("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const c=ec(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,s,...a),this}delete(e){const t=ec(e);return this._delegate.delete(t),this}}class Im{constructor(e){this._delegate=e}set(e,t,s){const a=ec(e);return s?(wm("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const c=ec(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,s,...a),this}delete(e){const t=ec(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $c{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Hd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xh(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=$c.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let c=a.get(t);return c||(c=new $c(e,new kp(e),t),a.set(t,c)),c}}$c.INSTANCES=new WeakMap;class wu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kp(e)}static forPath(e,t,s){if(e.length%2!=0)throw new St("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wu(t,new qi(t._delegate,s,new Qt(e)))}static forKey(e,t,s){return new wu(t,new qi(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Hc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hc(this.firestore,Ly(this._delegate,e))}catch(t){throw Ko(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ge.m9)(e))instanceof qi&&Cp(this._delegate,e)}set(e,t){t=wm("DocumentReference.set",t);try{return t?i_(this._delegate,e,t):i_(this._delegate,e)}catch(s){throw Ko(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?mm(this._delegate,e):mm(this._delegate,e,t,...s)}catch(a){throw Ko(a,"updateDoc()","DocumentReference.update()")}}delete(){return function Kv(r){return Vc(Cr(r.firestore,Ki),[new h(r._key,Wi.none())])}(this._delegate)}onSnapshot(...e){const t=Fp(e),s=c_(e,a=>new jc(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Gd(this._delegate,t,s)}get(e){let t;return t="cache"===e?.source?function Gv(r){r=Cr(r,qi);const e=Cr(r.firestore,Ki),t=Ts(e),s=new Ja(e);return function xy(r,e){const t=new Ii;return r.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return(s=(0,O.Z)(function*(a,c,f){try{const C=yield function(k,j){const X=Yt(k);return X.persistence.runTransaction("read document","readonly",fe=>X.localDocuments.getDocument(fe,j))}(a,c);C.isFoundDocument()?f.resolve(C):C.isNoDocument()?f.resolve(null):f.reject(new St(Ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(C){const k=Dd(C,`Failed to get document '${c} from cache`);f.reject(k)}}),function(a,c,f){return s.apply(this,arguments)})(yield $h(r),e,t);var s})),t.promise}(t,r._key).then(a=>new Jl(e,s,r._key,a,new jd(null!==a&&a.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===e?.source?function zv(r){r=Cr(r,qi);const e=Cr(r.firestore,Ki);return Dp(Ts(e),r._key,{source:"server"}).then(t=>ym(e,r,t))}(this._delegate):function r_(r){r=Cr(r,qi);const e=Cr(r.firestore,Ki);return Dp(Ts(e),r._key).then(t=>ym(e,r,t))}(this._delegate),t.then(s=>new jc(this.firestore,new Jl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new wu(this.firestore,this._delegate.withConverter(e?$c.getInstance(this.firestore,e):null))}}function Ko(r,e,t){return r.message=r.message.replace(e,t),r}function Fp(r){for(const e of r)if("object"==typeof e&&!Jh(e))return e;return{}}function c_(r,e){var t,s;let a;return a=Jh(r[0])?r[0]:Jh(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class jc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return n_(this._delegate,e._delegate)}}class Xh extends jc{data(e){const t=this._delegate.data(e);return function ms(r,e){r||en()}(void 0!==t),t}}class Zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kp(e)}where(e,t,s){try{return new Zo(this.firestore,Yl(this._delegate,function Yy(r,e,t){const s=e,a=rs("where",r);return Vd._create(a,s,t)}(e,t,s)))}catch(a){throw Ko(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Zo(this.firestore,Yl(this._delegate,function Fv(r,e="asc"){const t=e,s=rs("orderBy",r);return pm._create(s,t)}(e,t)))}catch(s){throw Ko(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zo(this.firestore,Yl(this._delegate,function Lv(r){return ky("limit",r),Ql._create("limit",r,"F")}(e)))}catch(t){throw Ko(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Zo(this.firestore,Yl(this._delegate,function Uv(r){return ky("limitToLast",r),Ql._create("limitToLast",r,"L")}(e)))}catch(t){throw Ko(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zo(this.firestore,Yl(this._delegate,function xp(...r){return Mp._create("startAt",r,!0)}(...e)))}catch(t){throw Ko(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zo(this.firestore,Yl(this._delegate,function Qy(...r){return Mp._create("startAfter",r,!1)}(...e)))}catch(t){throw Ko(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zo(this.firestore,Yl(this._delegate,function Jy(...r){return Yh._create("endBefore",r,!1)}(...e)))}catch(t){throw Ko(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zo(this.firestore,Yl(this._delegate,function Vv(...r){return Yh._create("endAt",r,!0)}(...e)))}catch(t){throw Ko(t,"endAt()","Query.endAt()")}}isEqual(e){return kd(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function qv(r){r=Cr(r,_o);const e=Cr(r.firestore,Ki),t=Ts(e),s=new Ja(e);return function Uu(r,e){const t=new Ii;return r.asyncQueue.enqueueAndForget((0,O.Z)(function*(){return(s=(0,O.Z)(function*(a,c,f){try{const C=yield Hf(a,c,!0),k=new Nc(c,C.ir),j=k.sc(C.documents),X=k.applyChanges(j,!1);f.resolve(X.snapshot)}catch(C){const k=Dd(C,`Failed to execute query '${c} against cache`);f.reject(k)}}),function(a,c,f){return s.apply(this,arguments)})(yield $h(r),e,t);var s})),t.promise}(t,r._query).then(a=>new Eu(e,s,r,a))}(this._delegate):"server"===e?.source?function iE(r){r=Cr(r,_o);const e=Cr(r.firestore,Ki),t=Ts(e),s=new Ja(e);return Ry(t,r._query,{source:"server"}).then(a=>new Eu(e,s,r,a))}(this._delegate):function Wv(r){r=Cr(r,_o);const e=Cr(r.firestore,Ki),t=Ts(e),s=new Ja(e);return Nv(r._query),Ry(t,r._query).then(a=>new Eu(e,s,r,a))}(this._delegate),t.then(s=>new Lp(this.firestore,new Eu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Fp(e),s=c_(e,a=>new Lp(this.firestore,new Eu(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Gd(this._delegate,t,s)}withConverter(e){return new Zo(this.firestore,this._delegate.withConverter(e?$c.getInstance(this.firestore,e):null))}}class Dm{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Lp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Zo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Dm(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Xh(this._firestore,s))})}isEqual(e){return n_(this._delegate,e._delegate)}}class Hc extends Zo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wu(this.firestore,e):null}doc(e){try{return new wu(this.firestore,void 0===e?Hh(this._delegate):Hh(this._delegate,e))}catch(t){throw Ko(t,"doc()","CollectionReference.doc()")}}add(e){return function Zv(r,e){const t=Cr(r.firestore,Ki),s=Hh(r),a=Qh(r.converter,e);return Vc(t,[qh(ql(r.firestore),"addDoc",s._key,a,null!==r.converter,{}).toMutation(s._key,Wi.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new wu(this.firestore,t))}isEqual(e){return Cp(this._delegate,e._delegate)}withConverter(e){return new Hc(this.firestore,this._delegate.withConverter(e?$c.getInstance(this.firestore,e):null))}}function ec(r){return Cr(r,qi)}class Up{constructor(...e){this._delegate=new yl(...e)}static documentId(){return new Up(Vi.keyField().canonicalString())}isEqual(e){return(e=(0,Ge.m9)(e))instanceof yl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function d0(){return new _l("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gc(e)}static delete(){const e=function c0(){return new Fd("deleteField")}();return e._methodName="FieldValue.delete",new Gc(e)}static arrayUnion(...e){const t=function h0(...r){return new Mv("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new Gc(t)}static arrayRemove(...e){const t=function a_(...r){return new xv("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new Gc(t)}static increment(e){const t=function u_(r){return new Ld("increment",r)}(e);return t._methodName="FieldValue.increment",new Gc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const y0={Firestore:Np,GeoPoint:zh,Timestamp:Di,Blob:zd,Transaction:Bc,WriteBatch:Im,DocumentReference:wu,DocumentSnapshot:jc,Query:Zo,QueryDocumentSnapshot:Xh,QuerySnapshot:Lp,CollectionReference:Hc,FieldPath:Up,FieldValue:Gc,setLogLevel:function l_(r){!function Dl(r){po.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function v0(r){(function _0(r,e){r.INTERNAL.registerComponent(new he.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},y0)))})(r,(e,t)=>new Np(e,t,new m0)),r.registerVersion("@firebase/firestore-compat","0.3.9")}(z.Z);var El=L(1205),lE=L(6217),d_=L(9260);function h_(r,e){return function E0(r,e=W.z){return new q.y(t=>{let s;return null!=e?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}(r,e)}function Cm(r,e){return h_(r,e).pipe((0,ie.U)(t=>({payload:t,type:"query"})))}function Vp(r,e){return Cm(r,e).pipe((0,be.O)(void 0),le(),(0,ie.U)(([t,s])=>{const a=s.payload.docChanges(),c=a.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((f,C)=>{const k=a.find(X=>X.doc.ref.isEqual(f.ref)),j=t?.payload.docs.find(X=>X.ref.isEqual(f.ref));k&&JSON.stringify(k.doc.metadata)===JSON.stringify(f.metadata)||!k&&j&&JSON.stringify(j.metadata)===JSON.stringify(f.metadata)||c.push({type:"modified",payload:{oldIndex:C,newIndex:C,type:"modified",doc:f}})}),c}))}function bm(r,e,t){return Vp(r,t).pipe((0,_e.R)((s,a)=>function f_(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=function w0(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Bp(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Bp(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Bp(r,e.oldIndex,1)}return r}(r,s))}),r}(s,a.map(c=>c.payload),e),[]),function Te(r,e=ht.y){return r=r??ot,(0,F.e)((t,s)=>{let a,c=!0;t.subscribe((0,Pe.x)(s,f=>{const C=e(f);(c||!r(a,C))&&(c=!1,a=C,s.next(f))}))})}(),(0,ie.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function Bp(r,e,t,...s){const a=r.slice();return a.splice(e,t,...s),a}function p_(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}class g_{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Vp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ie.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,be.O)(void 0),le(),(0,rt.h)(([s,a])=>a.length>0||!s),(0,ie.U)(([s,a])=>a),pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,_e.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=p_(e);return bm(this.query,t,this.afs.schedulers.outsideAngular).pipe(pe.iC)}valueChanges(e={}){return Cm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),pe.iC)}get(e){return(0,ye.D)(this.query.get(e)).pipe(pe.iC)}add(e){return this.ref.add(e)}doc(e){return new m_(this.ref.doc(e),this.afs)}}class m_{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:c}=Tm(s,t);return new g_(a,c,this.afs)}snapshotChanges(){return function cE(r,e){return h_(r,e).pipe((0,be.O)(void 0),le(),(0,ie.U)(([t,s])=>s.exists?t?.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ie.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ye.D)(this.ref.get(e)).pipe(pe.iC)}}class I0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Vp(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,rt.h)(t=>t.length>0),pe.iC):Vp(this.query,this.afs.schedulers.outsideAngular).pipe(pe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,_e.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=p_(e);return bm(this.query,t,this.afs.schedulers.outsideAngular).pipe(pe.iC)}valueChanges(e={}){return Cm(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),pe.iC)}get(e){return(0,ye.D)(this.query.get(e)).pipe(pe.iC)}}const y_=new g.OlP("angularfire2.enableFirestorePersistence"),__=new g.OlP("angularfire2.firestore.persistenceSettings"),ef=new g.OlP("angularfire2.firestore.settings"),v_=new g.OlP("angularfire2.firestore.use-emulator");function Tm(r,e=(t=>t)){return{query:e(r),ref:r}}let Sm=(()=>{class r{constructor(t,s,a,c,f,C,k,j,X,fe,We,gt,$t,Jt,cn,hr,zr){this.schedulers=k;const tr=(0,Le.on)(t,C,s),Zi=X;fe&&(0,El.nw)(tr,C,We,$t,Jt,cn,gt,hr),[this.firestore,this.persistenceEnabled$]=(0,Le.cc)(`${tr.name}.firestore`,"AngularFirestore",tr.name,()=>{const Yi=C.runOutsideAngular(()=>tr.firestore());if(c&&Yi.settings(c),Zi&&Yi.useEmulator(...Zi),a&&!(0,ke.PM)(f)){const Bi=()=>{try{return(0,ye.D)(Yi.enablePersistence(j||void 0).then(()=>!0,()=>!1))}catch(Po){return typeof console<"u"&&console.warn(Po),(0,ge.of)(!1)}};return[Yi,C.runOutsideAngular(Bi)]}return[Yi,(0,ge.of)(!1)]},[c,Zi,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:f}=Tm(a,s),C=this.schedulers.ngZone.run(()=>c);return new g_(C,f,this)}collectionGroup(t,s){const a=s||(f=>f),c=this.firestore.collectionGroup(t);return new I0(a(c),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new m_(a,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(g.LFG(Le.Dh),g.LFG(Le.xv,8),g.LFG(y_,8),g.LFG(ef,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(pe.HU),g.LFG(__,8),g.LFG(v_,8),g.LFG(El.zQ,8),g.LFG(El.Qv,8),g.LFG(El.L6,8),g.LFG(El._Q,8),g.LFG(El.rT,8),g.LFG(El.lh,8),g.LFG(El.f7,8),g.LFG(lE.nm,8))},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),E_=(()=>{class r{constructor(){d_.Z.registerVersion("angularfire",pe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:r,providers:[{provide:y_,useValue:!0},{provide:__,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=g.oAB({type:r}),r.\u0275inj=g.cJS({providers:[Sm]}),r})()},377:(jt,He,L)=>{L.d(He,{Q1:()=>Ds,TE:()=>P});var g=L(9751),W=L(9646),q=L(8996),ye=L(4986),ge=L(4482),pe=L(5403),F=L(4004),Pe=L(3900),le=L(4976),ie=L(4650),_e=L(2011),ht=L(3942),Te=L(5861),ot=L(6881),rt=L(2090),Le=L(4859);const ke="firebasestorage.googleapis.com",st="storageBucket";class he extends rt.ZR{constructor(A,Q,oe=0){super(Ge(A),`Firebase Storage: ${Q} (${Ge(A)})`),this.status_=oe,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,he.prototype)}get status(){return this.status_}set status(A){this.status_=A}_codeEquals(A){return Ge(A)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(A){this.customData.serverResponse=A,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ve=(()=>{return(I=Ve||(Ve={})).UNKNOWN="unknown",I.OBJECT_NOT_FOUND="object-not-found",I.BUCKET_NOT_FOUND="bucket-not-found",I.PROJECT_NOT_FOUND="project-not-found",I.QUOTA_EXCEEDED="quota-exceeded",I.UNAUTHENTICATED="unauthenticated",I.UNAUTHORIZED="unauthorized",I.UNAUTHORIZED_APP="unauthorized-app",I.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",I.INVALID_CHECKSUM="invalid-checksum",I.CANCELED="canceled",I.INVALID_EVENT_NAME="invalid-event-name",I.INVALID_URL="invalid-url",I.INVALID_DEFAULT_BUCKET="invalid-default-bucket",I.NO_DEFAULT_BUCKET="no-default-bucket",I.CANNOT_SLICE_BLOB="cannot-slice-blob",I.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",I.NO_DOWNLOAD_URL="no-download-url",I.INVALID_ARGUMENT="invalid-argument",I.INVALID_ARGUMENT_COUNT="invalid-argument-count",I.APP_DELETED="app-deleted",I.INVALID_ROOT_OPERATION="invalid-root-operation",I.INVALID_FORMAT="invalid-format",I.INTERNAL_ERROR="internal-error",I.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ve;var I})();function Ge(I){return"storage/"+I}function Ae(){return new he(Ve.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Rn(){return new he(Ve.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Qe(){return new he(Ve.CANCELED,"User canceled the upload/download.")}function yt(){return new he(Ve.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Rt(I){return new he(Ve.INVALID_ARGUMENT,I)}function Pt(){return new he(Ve.APP_DELETED,"The Firebase app was deleted.")}function vt(I){return new he(Ve.INVALID_ROOT_OPERATION,"The operation '"+I+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tn(I,A){return new he(Ve.INVALID_FORMAT,"String does not match format '"+I+"': "+A)}function nn(I){throw new he(Ve.INTERNAL_ERROR,"Internal error: "+I)}class gn{constructor(A,Q){this.bucket=A,this.path_=Q}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const A=encodeURIComponent;return"/b/"+A(this.bucket)+"/o/"+A(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(A,Q){let oe;try{oe=gn.makeFromUrl(A,Q)}catch{return new gn(A,"")}if(""===oe.path)return oe;throw function Je(I){return new he(Ve.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+I+"'.")}(A)}static makeFromUrl(A,Q){let oe=null;const ee="([A-Za-z0-9.\\-_]+)",Vt=new RegExp("^gs://"+ee+"(/(.*))?$","i");function En(Ur){Ur.path_=decodeURIComponent(Ur.path)}const dr=Q.replace(/[.]/g,"\\."),jr=[{regex:Vt,indices:{bucket:1,path:3},postModify:function Re(Ur){"/"===Ur.path.charAt(Ur.path.length-1)&&(Ur.path_=Ur.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${dr}/v[A-Za-z0-9_]+/b/${ee}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:En},{regex:new RegExp(`^https?://${Q===ke?"(?:storage.googleapis.com|storage.cloud.google.com)":Q}/${ee}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:En}];for(let Ur=0;Ur<jr.length;Ur++){const ni=jr[Ur],Vs=ni.regex.exec(A);if(Vs){let Ms=Vs[ni.indices.path];Ms||(Ms=""),oe=new gn(Vs[ni.indices.bucket],Ms),ni.postModify(oe);break}}if(null==oe)throw function qe(I){return new he(Ve.INVALID_URL,"Invalid URL '"+I+"'.")}(A);return oe}}class $n{constructor(A){this.promise_=Promise.reject(A)}getPromise(){return this.promise_}cancel(A=!1){}}function ar(I){return"string"==typeof I||I instanceof String}function on(I){return Ut()&&I instanceof Blob}function Ut(){return typeof Blob<"u"&&!(0,rt.UG)()}function Xn(I,A,Q,oe){if(oe<A)throw Rt(`Invalid value for '${I}'. Expected ${A} or greater.`);if(oe>Q)throw Rt(`Invalid value for '${I}'. Expected ${Q} or less.`)}function kr(I,A,Q){let oe=A;return null==Q&&(oe=`https://${A}`),`${Q}://${oe}/v0${I}`}function Br(I){const A=encodeURIComponent;let Q="?";for(const oe in I)I.hasOwnProperty(oe)&&(Q=Q+(A(oe)+"=")+A(I[oe])+"&");return Q=Q.slice(0,-1),Q}var ur=(()=>{return(I=ur||(ur={}))[I.NO_ERROR=0]="NO_ERROR",I[I.NETWORK_ERROR=1]="NETWORK_ERROR",I[I.ABORT=2]="ABORT",ur;var I})();function mi(I,A){const Q=I>=500&&I<600,ee=-1!==[408,429].indexOf(I),Re=-1!==A.indexOf(I);return Q||ee||Re}class zn{constructor(A,Q,oe,ee,Re,It,Vt,Bt,En,Kn,dr,Hr=!0){this.url_=A,this.method_=Q,this.headers_=oe,this.body_=ee,this.successCodes_=Re,this.additionalRetryCodes_=It,this.callback_=Vt,this.errorCallback_=Bt,this.timeout_=En,this.progressCallback_=Kn,this.connectionFactory_=dr,this.retry=Hr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Lr,di)=>{this.resolve_=Lr,this.reject_=di,this.start_()})}start_(){const Q=(oe,ee)=>{const Re=this.resolve_,It=this.reject_,Vt=ee.connection;if(ee.wasSuccessCode)try{const Bt=this.callback_(Vt,Vt.getResponse());!function Jn(I){return void 0!==I}(Bt)?Re():Re(Bt)}catch(Bt){It(Bt)}else if(null!==Vt){const Bt=Ae();Bt.serverResponse=Vt.getErrorText(),It(this.errorCallback_?this.errorCallback_(Vt,Bt):Bt)}else It(ee.canceled?this.appDelete_?Pt():Qe():Rn())};this.canceled_?Q(0,new Nn(!1,null,!0)):this.backoffId_=function Nr(I,A,Q){let oe=1,ee=null,Re=null,It=!1,Vt=0;function Bt(){return 2===Vt}let En=!1;function Kn(...Gr){En||(En=!0,A.apply(null,Gr))}function dr(Gr){ee=setTimeout(()=>{ee=null,I(Lr,Bt())},Gr)}function Hr(){Re&&clearTimeout(Re)}function Lr(Gr,...sr){if(En)return void Hr();if(Gr)return Hr(),void Kn.call(null,Gr,...sr);if(Bt()||It)return Hr(),void Kn.call(null,Gr,...sr);let jr;oe<64&&(oe*=2),1===Vt?(Vt=2,jr=0):jr=1e3*(oe+Math.random()),dr(jr)}let di=!1;function Yr(Gr){di||(di=!0,Hr(),!En&&(null!==ee?(Gr||(Vt=2),clearTimeout(ee),dr(0)):Gr||(Vt=1)))}return dr(0),Re=setTimeout(()=>{It=!0,Yr(!0)},Q),Yr}((oe,ee)=>{if(ee)return void oe(!1,new Nn(!1,null,!0));const Re=this.connectionFactory_();this.pendingConnection_=Re;const It=Vt=>{null!==this.progressCallback_&&this.progressCallback_(Vt.loaded,Vt.lengthComputable?Vt.total:-1)};null!==this.progressCallback_&&Re.addUploadProgressListener(It),Re.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Re.removeUploadProgressListener(It),this.pendingConnection_=null;const Vt=Re.getErrorCode()===ur.NO_ERROR,Bt=Re.getStatus();if(!Vt||mi(Bt,this.additionalRetryCodes_)&&this.retry){const Kn=Re.getErrorCode()===ur.ABORT;return void oe(!1,new Nn(!1,null,Kn))}const En=-1!==this.successCodes_.indexOf(Bt);oe(!0,new Nn(En,Re))})},Q,this.timeout_)}getPromise(){return this.promise_}cancel(A){this.canceled_=!0,this.appDelete_=A||!1,null!==this.backoffId_&&function _n(I){I(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Nn{constructor(A,Q,oe){this.wasSuccessCode=A,this.connection=Q,this.canceled=!!oe}}function lr(...I){const A=function Tr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==A){const Q=new A;for(let oe=0;oe<I.length;oe++)Q.append(I[oe]);return Q.getBlob()}if(Ut())return new Blob(I);throw new he(Ve.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class An{constructor(A,Q){this.data=A,this.contentType=Q||null}}function _r(I,A){switch(I){case qn.RAW:return new An(Fn(A));case qn.BASE64:case qn.BASE64URL:return new An(Oe(I,A));case qn.DATA_URL:return new An(function Me(I){const A=new Mt(I);return A.base64?Oe(qn.BASE64,A.rest):function Sr(I){let A;try{A=decodeURIComponent(I)}catch{throw tn(qn.DATA_URL,"Malformed data URL.")}return Fn(A)}(A.rest)}(A),function Ct(I){return new Mt(I).contentType}(A))}throw Ae()}function Fn(I){const A=[];for(let Q=0;Q<I.length;Q++){let oe=I.charCodeAt(Q);oe<=127?A.push(oe):oe<=2047?A.push(192|oe>>6,128|63&oe):55296==(64512&oe)?Q<I.length-1&&56320==(64512&I.charCodeAt(Q+1))?(oe=65536|(1023&oe)<<10|1023&I.charCodeAt(++Q),A.push(240|oe>>18,128|oe>>12&63,128|oe>>6&63,128|63&oe)):A.push(239,191,189):56320==(64512&oe)?A.push(239,191,189):A.push(224|oe>>12,128|oe>>6&63,128|63&oe)}return new Uint8Array(A)}function Oe(I,A){switch(I){case qn.BASE64:{const ee=-1!==A.indexOf("-"),Re=-1!==A.indexOf("_");if(ee||Re)throw tn(I,"Invalid character '"+(ee?"-":"_")+"' found: is it base64url encoded?");break}case qn.BASE64URL:{const ee=-1!==A.indexOf("+"),Re=-1!==A.indexOf("/");if(ee||Re)throw tn(I,"Invalid character '"+(ee?"+":"/")+"' found: is it base64 encoded?");A=A.replace(/-/g,"+").replace(/_/g,"/");break}}let Q;try{Q=function nr(I){if(typeof atob>"u")throw function xt(I){return new he(Ve.UNSUPPORTED_ENVIRONMENT,`${I} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(I)}(A)}catch(ee){throw ee.message.includes("polyfill")?ee:tn(I,"Invalid character found")}const oe=new Uint8Array(Q.length);for(let ee=0;ee<Q.length;ee++)oe[ee]=Q.charCodeAt(ee);return oe}class Mt{constructor(A){this.base64=!1,this.contentType=null;const Q=A.match(/^data:([^,]+)?,/);if(null===Q)throw tn(qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const oe=Q[1]||null;null!=oe&&(this.base64=function wn(I,A){return I.length>=A.length&&I.substring(I.length-A.length)===A}(oe,";base64"),this.contentType=this.base64?oe.substring(0,oe.length-7):oe),this.rest=A.substring(A.indexOf(",")+1)}}class Xt{constructor(A,Q){let oe=0,ee="";on(A)?(this.data_=A,oe=A.size,ee=A.type):A instanceof ArrayBuffer?(Q?this.data_=new Uint8Array(A):(this.data_=new Uint8Array(A.byteLength),this.data_.set(new Uint8Array(A))),oe=this.data_.length):A instanceof Uint8Array&&(Q?this.data_=A:(this.data_=new Uint8Array(A.length),this.data_.set(A)),oe=A.length),this.size_=oe,this.type_=ee}size(){return this.size_}type(){return this.type_}slice(A,Q){if(on(this.data_)){const ee=function Fr(I,A,Q){return I.webkitSlice?I.webkitSlice(A,Q):I.mozSlice?I.mozSlice(A,Q):I.slice?I.slice(A,Q):null}(this.data_,A,Q);return null===ee?null:new Xt(ee)}{const oe=new Uint8Array(this.data_.buffer,A,Q-A);return new Xt(oe,!0)}}static getBlob(...A){if(Ut()){const Q=A.map(oe=>oe instanceof Xt?oe.data_:oe);return new Xt(lr.apply(null,Q))}{const Q=A.map(It=>ar(It)?_r(qn.RAW,It).data:It.data_);let oe=0;Q.forEach(It=>{oe+=It.byteLength});const ee=new Uint8Array(oe);let Re=0;return Q.forEach(It=>{for(let Vt=0;Vt<It.length;Vt++)ee[Re++]=It[Vt]}),new Xt(ee,!0)}}uploadData(){return this.data_}}function ue(I){let A;try{A=JSON.parse(I)}catch{return null}return function Xr(I){return"object"==typeof I&&!Array.isArray(I)}(A)?A:null}function lt(I){const A=I.lastIndexOf("/",I.length-2);return-1===A?I:I.slice(A+1)}function $e(I,A){return A}class Et{constructor(A,Q,oe,ee){this.server=A,this.local=Q||A,this.writable=!!oe,this.xform=ee||$e}}let we=null;function ne(){if(we)return we;const I=[];I.push(new Et("bucket")),I.push(new Et("generation")),I.push(new Et("metageneration")),I.push(new Et("name","fullPath",!0));const Q=new Et("name");Q.xform=function A(Re,It){return function ve(I){return!ar(I)||I.length<2?I:lt(I)}(It)},I.push(Q);const ee=new Et("size");return ee.xform=function oe(Re,It){return void 0!==It?Number(It):It},I.push(ee),I.push(new Et("timeCreated")),I.push(new Et("updated")),I.push(new Et("md5Hash",null,!0)),I.push(new Et("cacheControl",null,!0)),I.push(new Et("contentDisposition",null,!0)),I.push(new Et("contentEncoding",null,!0)),I.push(new Et("contentLanguage",null,!0)),I.push(new Et("contentType",null,!0)),I.push(new Et("metadata","customMetadata",!0)),we=I,we}function bt(I,A,Q){const oe=ue(A);return null===oe?null:function ut(I,A,Q){const oe={type:"file"},ee=Q.length;for(let Re=0;Re<ee;Re++){const It=Q[Re];oe[It.local]=It.xform(oe,A[It.server])}return function Se(I,A){Object.defineProperty(I,"ref",{get:function Q(){const Re=new gn(I.bucket,I.fullPath);return A._makeStorageReference(Re)}})}(oe,I),oe}(I,oe,Q)}function On(I,A){const Q={},oe=A.length;for(let ee=0;ee<oe;ee++){const Re=A[ee];Re.writable&&(Q[Re.server]=I[Re.local])}return JSON.stringify(Q)}const rr="prefixes",cr="items";class wt{constructor(A,Q,oe,ee){this.url=A,this.method=Q,this.handler=oe,this.timeout=ee,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kt(I){if(!I)throw Ae()}function fn(I,A){return function Q(oe,ee){const Re=bt(I,ee,A);return Kt(null!==Re),Re}}function Gn(I){return function A(Q,oe){let ee;return ee=401===Q.getStatus()?Q.getErrorText().includes("Firebase App Check token is invalid")?function ft(){return new he(Ve.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function pt(){return new he(Ve.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Q.getStatus()?function Be(I){return new he(Ve.QUOTA_EXCEEDED,"Quota for bucket '"+I+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(I.bucket):403===Q.getStatus()?function Dt(I){return new he(Ve.UNAUTHORIZED,"User does not have permission to access '"+I+"'.")}(I.path):oe,ee.status=Q.getStatus(),ee.serverResponse=oe.serverResponse,ee}}function kn(I){const A=Gn(I);return function Q(oe,ee){let Re=A(oe,ee);return 404===oe.getStatus()&&(Re=function me(I){return new he(Ve.OBJECT_NOT_FOUND,"Object '"+I+"' does not exist.")}(I.path)),Re.serverResponse=ee.serverResponse,Re}}function gr(I,A,Q){const ee=kr(A.fullServerUrl(),I.host,I._protocol),It=I.maxOperationRetryTime,Vt=new wt(ee,"GET",fn(I,Q),It);return Vt.errorHandler=kn(A),Vt}function Zr(I,A,Q,oe,ee){const Re={};Re.prefix=A.isRoot?"":A.path+"/",Q&&Q.length>0&&(Re.delimiter=Q),oe&&(Re.pageToken=oe),ee&&(Re.maxResults=ee);const Vt=kr(A.bucketOnlyServerUrl(),I.host,I._protocol),En=I.maxOperationRetryTime,Kn=new wt(Vt,"GET",function Tn(I,A){return function Q(oe,ee){const Re=function ze(I,A,Q){const oe=ue(Q);return null===oe?null:function Ke(I,A,Q){const oe={prefixes:[],items:[],nextPageToken:Q.nextPageToken};if(Q[rr])for(const ee of Q[rr]){const Re=ee.replace(/\/$/,""),It=I._makeStorageReference(new gn(A,Re));oe.prefixes.push(It)}if(Q[cr])for(const ee of Q[cr]){const Re=I._makeStorageReference(new gn(A,ee.name));oe.items.push(Re)}return oe}(I,A,oe)}(I,A,ee);return Kt(null!==Re),Re}}(I,A.bucket),En);return Kn.urlParams=Re,Kn.errorHandler=Gn(A),Kn}function Mn(I,A,Q){const oe=Object.assign({},Q);return oe.fullPath=I.path,oe.size=A.size(),oe.contentType||(oe.contentType=function Ft(I,A){return I&&I.contentType||A&&A.type()||"application/octet-stream"}(null,A)),oe}class yi{constructor(A,Q,oe,ee){this.current=A,this.total=Q,this.finalized=!!oe,this.metadata=ee||null}}function Ln(I,A){let Q=null;try{Q=I.getResponseHeader("X-Goog-Upload-Status")}catch{Kt(!1)}return Kt(!!Q&&-1!==(A||["active"]).indexOf(Q)),Q}const Ni={STATE_CHANGED:"state_changed"},ln={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _i(I){switch(I){case"running":case"pausing":case"canceling":return ln.RUNNING;case"paused":return ln.PAUSED;case"success":return ln.SUCCESS;case"canceled":return ln.CANCELED;default:return ln.ERROR}}class ys{constructor(A,Q,oe){if(function br(I){return"function"==typeof I}(A)||null!=Q||null!=oe)this.next=A,this.error=Q??void 0,this.complete=oe??void 0;else{const Re=A;this.next=Re.next,this.error=Re.error,this.complete=Re.complete}}}function $i(I){return(...A)=>{Promise.resolve().then(()=>I(...A))}}let ki=null;class Wr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ur.NO_ERROR,this.sendPromise_=new Promise(A=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ur.ABORT,A()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ur.NETWORK_ERROR,A()}),this.xhr_.addEventListener("load",()=>{A()})})}send(A,Q,oe,ee){if(this.sent_)throw nn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Q,A,!0),void 0!==ee)for(const Re in ee)ee.hasOwnProperty(Re)&&this.xhr_.setRequestHeader(Re,ee[Re].toString());return void 0!==oe?this.xhr_.send(oe):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nn("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(A){return this.xhr_.getResponseHeader(A)}addUploadProgressListener(A){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",A)}removeUploadProgressListener(A){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",A)}}class _s extends Wr{initXhr(){this.xhr_.responseType="text"}}function qr(){return ki?ki():new _s}class ui{constructor(A,Q,oe=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=A,this._blob=Q,this._metadata=oe,this._mappings=ne(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=ee=>{if(this._request=void 0,this._chunkMultiplier=1,ee._codeEquals(Ve.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const Re=this.isExponentialBackoffExpired();if(mi(ee.status,[])){if(!Re)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();ee=Rn()}this._error=ee,this._transition("error")}},this._metadataErrorHandler=ee=>{this._request=void 0,ee._codeEquals(Ve.CANCELED)?this.completeTransitions_():(this._error=ee,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((ee,Re)=>{this._resolve=ee,this._reject=Re,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const A=this._transferred;return Q=>this._updateProgress(A+Q)}_shouldDoResumable(A){return A.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(A){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Q,oe])=>{switch(this._state){case"running":A(Q,oe);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((A,Q)=>{const oe=function Pr(I,A,Q,oe,ee){const Re=A.bucketOnlyServerUrl(),It=Mn(A,oe,ee),Vt={name:It.fullPath},Bt=kr(Re,I.host,I._protocol),Kn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${oe.size()}`,"X-Goog-Upload-Header-Content-Type":It.contentType,"Content-Type":"application/json; charset=utf-8"},dr=On(It,Q),di=new wt(Bt,"POST",function Lr(Yr){let Gr;Ln(Yr);try{Gr=Yr.getResponseHeader("X-Goog-Upload-URL")}catch{Kt(!1)}return Kt(ar(Gr)),Gr},I.maxUploadRetryTime);return di.urlParams=Vt,di.headers=Kn,di.body=dr,di.errorHandler=Gn(A),di}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ee=this._ref.storage._makeRequest(oe,qr,A,Q);this._request=ee,ee.getPromise().then(Re=>{this._request=void 0,this._uploadUrl=Re,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const A=this._uploadUrl;this._resolveToken((Q,oe)=>{const ee=function Pi(I,A,Q,oe){const Bt=new wt(Q,"POST",function Re(En){const Kn=Ln(En,["active","final"]);let dr=null;try{dr=En.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Kt(!1)}dr||Kt(!1);const Hr=Number(dr);return Kt(!isNaN(Hr)),new yi(Hr,oe.size(),"final"===Kn)},I.maxUploadRetryTime);return Bt.headers={"X-Goog-Upload-Command":"query"},Bt.errorHandler=Gn(A),Bt}(this._ref.storage,this._ref._location,A,this._blob),Re=this._ref.storage._makeRequest(ee,qr,Q,oe);this._request=Re,Re.getPromise().then(It=>{this._request=void 0,this._updateProgress(It.current),this._needToFetchStatus=!1,It.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const A=262144*this._chunkMultiplier,Q=new yi(this._transferred,this._blob.size()),oe=this._uploadUrl;this._resolveToken((ee,Re)=>{let It;try{It=function Oi(I,A,Q,oe,ee,Re,It,Vt){const Bt=new yi(0,0);if(It?(Bt.current=It.current,Bt.total=It.total):(Bt.current=0,Bt.total=oe.size()),oe.size()!==Bt.total)throw function tt(){return new he(Ve.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const En=Bt.total-Bt.current;let Kn=En;ee>0&&(Kn=Math.min(Kn,ee));const dr=Bt.current;let Lr="";Lr=0===Kn?"finalize":En===Kn?"upload, finalize":"upload";const di={"X-Goog-Upload-Command":Lr,"X-Goog-Upload-Offset":`${Bt.current}`},Yr=oe.slice(dr,dr+Kn);if(null===Yr)throw yt();const jr=new wt(Q,"POST",function Gr(Ur,ni){const Vs=Ln(Ur,["active","final"]),Cs=Bt.current+Kn,Ms=oe.size();let _a;return _a="final"===Vs?fn(A,Re)(Ur,ni):null,new yi(Cs,Ms,"final"===Vs,_a)},A.maxUploadRetryTime);return jr.headers=di,jr.body=Yr.uploadData(),jr.progressCallback=Vt||null,jr.errorHandler=Gn(I),jr}(this._ref._location,this._ref.storage,oe,this._blob,A,this._mappings,Q,this._makeProgressCallback())}catch(Bt){return this._error=Bt,void this._transition("error")}const Vt=this._ref.storage._makeRequest(It,qr,ee,Re,!1);this._request=Vt,Vt.getPromise().then(Bt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Bt.current),Bt.finalized?(this._metadata=Bt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((A,Q)=>{const oe=gr(this._ref.storage,this._ref._location,this._mappings),ee=this._ref.storage._makeRequest(oe,qr,A,Q);this._request=ee,ee.getPromise().then(Re=>{this._request=void 0,this._metadata=Re,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((A,Q)=>{const oe=function vr(I,A,Q,oe,ee){const Re=A.bucketOnlyServerUrl(),It={"X-Goog-Upload-Protocol":"multipart"},Bt=function Vt(){let jr="";for(let Ur=0;Ur<2;Ur++)jr+=Math.random().toString().slice(2);return jr}();It["Content-Type"]="multipart/related; boundary="+Bt;const En=Mn(A,oe,ee),Kn=On(En,Q),Lr=Xt.getBlob("--"+Bt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Kn+"\r\n--"+Bt+"\r\nContent-Type: "+En.contentType+"\r\n\r\n",oe,"\r\n--"+Bt+"--");if(null===Lr)throw yt();const di={name:En.fullPath},Yr=kr(Re,I.host,I._protocol),sr=I.maxUploadRetryTime,ti=new wt(Yr,"POST",fn(I,Q),sr);return ti.urlParams=di,ti.headers=It,ti.body=Lr.uploadData(),ti.errorHandler=Gn(A),ti}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ee=this._ref.storage._makeRequest(oe,qr,A,Q);this._request=ee,ee.getPromise().then(Re=>{this._request=void 0,this._metadata=Re,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(A){const Q=this._transferred;this._transferred=A,this._transferred!==Q&&this._notifyObservers()}_transition(A){if(this._state!==A)switch(A){case"canceling":case"pausing":this._state=A,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Q="paused"===this._state;this._state=A,Q&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=A,this._notifyObservers();break;case"canceled":this._error=Qe(),this._state=A,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const A=_i(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:A,metadata:this._metadata,task:this,ref:this._ref}}on(A,Q,oe,ee){const Re=new ys(Q||void 0,oe||void 0,ee||void 0);return this._addObserver(Re),()=>{this._removeObserver(Re)}}then(A,Q){return this._promise.then(A,Q)}catch(A){return this.then(null,A)}_addObserver(A){this._observers.push(A),this._notifyObserver(A)}_removeObserver(A){const Q=this._observers.indexOf(A);-1!==Q&&this._observers.splice(Q,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Q=>{this._notifyObserver(Q)})}_finishPromise(){if(void 0!==this._resolve){let A=!0;switch(_i(this._state)){case ln.SUCCESS:$i(this._resolve.bind(null,this.snapshot))();break;case ln.CANCELED:case ln.ERROR:$i(this._reject.bind(null,this._error))();break;default:A=!1}A&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(A){switch(_i(this._state)){case ln.RUNNING:case ln.PAUSED:A.next&&$i(A.next.bind(A,this.snapshot))();break;case ln.SUCCESS:A.complete&&$i(A.complete.bind(A))();break;default:A.error&&$i(A.error.bind(A,this._error))()}}resume(){const A="paused"===this._state||"pausing"===this._state;return A&&this._transition("running"),A}pause(){const A="running"===this._state;return A&&this._transition("pausing"),A}cancel(){const A="running"===this._state||"pausing"===this._state;return A&&this._transition("canceling"),A}}class Mi{constructor(A,Q){this._service=A,this._location=Q instanceof gn?Q:gn.makeFromUrl(Q,A.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(A,Q){return new Mi(A,Q)}get root(){const A=new gn(this._location.bucket,"");return this._newRef(this._service,A)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lt(this._location.path)}get storage(){return this._service}get parent(){const A=function ce(I){if(0===I.length)return null;const A=I.lastIndexOf("/");return-1===A?"":I.slice(0,A)}(this._location.path);if(null===A)return null;const Q=new gn(this._location.bucket,A);return new Mi(this._service,Q)}_throwIfRoot(A){if(""===this._location.path)throw vt(A)}}function bn(I,A,Q){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,Te.Z)(function*(I,A,Q){const ee=yield Wn(I,{pageToken:Q});A.prefixes.push(...ee.prefixes),A.items.push(...ee.items),null!=ee.nextPageToken&&(yield bn(I,A,ee.nextPageToken))})).apply(this,arguments)}function Wn(I,A){null!=A&&"number"==typeof A.maxResults&&Xn("options.maxResults",1,1e3,A.maxResults);const Q=A||{},oe=Zr(I.storage,I._location,"/",Q.pageToken,Q.maxResults);return I.storage.makeRequestWithTokens(oe,qr)}function Er(I){I._throwIfRoot("getDownloadURL");const A=function Ks(I,A,Q){const ee=kr(A.fullServerUrl(),I.host,I._protocol),It=I.maxOperationRetryTime,Vt=new wt(ee,"GET",function un(I,A){return function Q(oe,ee){const Re=bt(I,ee,A);return Kt(null!==Re),function hn(I,A,Q,oe){const ee=ue(A);if(null===ee||!ar(ee.downloadTokens))return null;const Re=ee.downloadTokens;if(0===Re.length)return null;const It=encodeURIComponent;return Re.split(",").map(En=>{const dr=I.fullPath;return kr("/b/"+It(I.bucket)+"/o/"+It(dr),Q,oe)+Br({alt:"media",token:En})})[0]}(Re,ee,I.host,I._protocol)}}(I,Q),It);return Vt.errorHandler=kn(A),Vt}(I.storage,I._location,ne());return I.storage.makeRequestWithTokens(A,qr).then(Q=>{if(null===Q)throw function Xe(){return new he(Ve.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return Q})}function vi(I,A){const Q=function Ce(I,A){const Q=A.split("/").filter(oe=>oe.length>0).join("/");return 0===I.length?Q:I+"/"+Q}(I._location.path,A),oe=new gn(I._location.bucket,Q);return new Mi(I.storage,oe)}function ss(I,A){if(I instanceof Ns){const Q=I;if(null==Q._bucket)throw function at(){return new he(Ve.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+st+"' property when initializing the app?")}();const oe=new Mi(Q,Q._bucket);return null!=A?ss(oe,A):oe}return void 0!==A?vi(I,A):I}function Oo(I,A){if(A&&function vs(I){return/^[A-Za-z]+:\/\//.test(I)}(A)){if(I instanceof Ns)return function vo(I,A){return new Mi(I,A)}(I,A);throw Rt("To use ref(service, url), the first argument must be a Storage instance.")}return ss(I,A)}function uo(I,A){const Q=A?.[st];return null==Q?null:gn.makeFromBucketSpec(Q,I)}class Ns{constructor(A,Q,oe,ee,Re){this.app=A,this._authProvider=Q,this._appCheckProvider=oe,this._url=ee,this._firebaseVersion=Re,this._bucket=null,this._host=ke,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=ee?gn.makeFromBucketSpec(ee,this._host):uo(this._host,this.app.options)}get host(){return this._host}set host(A){this._host=A,this._bucket=null!=this._url?gn.makeFromBucketSpec(this._url,A):uo(A,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(A){Xn("time",0,Number.POSITIVE_INFINITY,A),this._maxUploadRetryTime=A}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(A){Xn("time",0,Number.POSITIVE_INFINITY,A),this._maxOperationRetryTime=A}_getAuthToken(){var A=this;return(0,Te.Z)(function*(){if(A._overrideAuthToken)return A._overrideAuthToken;const Q=A._authProvider.getImmediate({optional:!0});if(Q){const oe=yield Q.getToken();if(null!==oe)return oe.accessToken}return null})()}_getAppCheckToken(){var A=this;return(0,Te.Z)(function*(){const Q=A._appCheckProvider.getImmediate({optional:!0});return Q?(yield Q.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(A=>A.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(A){return new Mi(this,A)}_makeRequest(A,Q,oe,ee,Re=!0){if(this._deleted)return new $n(Pt());{const It=function an(I,A,Q,oe,ee,Re,It=!0){const Vt=Br(I.urlParams),Bt=I.url+Vt,En=Object.assign({},I.headers);return function $r(I,A){A&&(I["X-Firebase-GMPID"]=A)}(En,A),function zt(I,A){null!==A&&A.length>0&&(I.Authorization="Firebase "+A)}(En,Q),function rn(I,A){I["X-Firebase-Storage-Version"]="webjs/"+(A??"AppManager")}(En,Re),function fr(I,A){null!==A&&(I["X-Firebase-AppCheck"]=A)}(En,oe),new zn(Bt,I.method,En,I.body,I.successCodes,I.additionalRetryCodes,I.handler,I.errorHandler,I.timeout,I.progressCallback,ee,It)}(A,this._appId,oe,ee,Q,this._firebaseVersion,Re);return this._requests.add(It),It.getPromise().then(()=>this._requests.delete(It),()=>this._requests.delete(It)),It}}makeRequestWithTokens(A,Q){var oe=this;return(0,Te.Z)(function*(){const[ee,Re]=yield Promise.all([oe._getAuthToken(),oe._getAppCheckToken()]);return oe._makeRequest(A,Q,ee,Re).getPromise()})()}}const co="@firebase/storage";function Ji(I,A){return Oo(I=(0,rt.m9)(I),A)}function oa(I,{instanceIdentifier:A}){const Q=I.getProvider("app").getImmediate(),oe=I.getProvider("auth-internal"),ee=I.getProvider("app-check-internal");return new Ns(Q,oe,ee,A,ot.SDK_VERSION)}!function Qo(){(0,ot._registerComponent)(new Le.wA("storage",oa,"PUBLIC").setMultipleInstances(!0)),(0,ot.registerVersion)(co,"0.11.2",""),(0,ot.registerVersion)(co,"0.11.2","esm2017")}();class Xs{constructor(A,Q,oe){this._delegate=A,this.task=Q,this.ref=oe}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Us{constructor(A,Q){this._delegate=A,this._ref=Q,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xs(this._delegate.snapshot,this,this._ref)}then(A,Q){return this._delegate.then(oe=>{if(A)return A(new Xs(oe,this,this._ref))},Q)}on(A,Q,oe,ee){let Re;return Q&&(Re="function"==typeof Q?It=>Q(new Xs(It,this,this._ref)):{next:Q.next?It=>Q.next(new Xs(It,this,this._ref)):void 0,complete:Q.complete||void 0,error:Q.error||void 0}),this._delegate.on(A,Re,oe||void 0,ee||void 0)}}class li{constructor(A,Q){this._delegate=A,this._service=Q}get prefixes(){return this._delegate.prefixes.map(A=>new Ar(A,this._service))}get items(){return this._delegate.items.map(A=>new Ar(A,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ar{constructor(A,Q){this._delegate=A,this.storage=Q}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(A){const Q=function wr(I,A){return vi(I,A)}(this._delegate,A);return new Ar(Q,this.storage)}get root(){return new Ar(this._delegate.root,this.storage)}get parent(){const A=this._delegate.parent;return null==A?null:new Ar(A,this.storage)}put(A,Q){return this._throwIfRoot("put"),new Us(function Yo(I,A,Q){return function dt(I,A,Q){return I._throwIfRoot("uploadBytesResumable"),new ui(I,new Xt(A),Q)}(I=(0,rt.m9)(I),A,Q)}(this._delegate,A,Q),this)}putString(A,Q=qn.RAW,oe){this._throwIfRoot("putString");const ee=_r(Q,A),Re=Object.assign({},oe);return null==Re.contentType&&null!=ee.contentType&&(Re.contentType=ee.contentType),new Us(new ui(this._delegate,new Xt(ee.data,!0),Re),this)}listAll(){return function hs(I){return function vn(I){const A={prefixes:[],items:[]};return bn(I,A).then(()=>A)}(I=(0,rt.m9)(I))}(this._delegate).then(A=>new li(A,this.storage))}list(A){return function Qs(I,A){return Wn(I=(0,rt.m9)(I),A)}(this._delegate,A||void 0).then(Q=>new li(Q,this.storage))}getMetadata(){return function ho(I){return function Or(I){I._throwIfRoot("getMetadata");const A=gr(I.storage,I._location,ne());return I.storage.makeRequestWithTokens(A,qr)}(I=(0,rt.m9)(I))}(this._delegate)}updateMetadata(A){return function ks(I,A){return function is(I,A){I._throwIfRoot("updateMetadata");const Q=function Zs(I,A,Q,oe){const Re=kr(A.fullServerUrl(),I.host,I._protocol),Vt=On(Q,oe),En=I.maxOperationRetryTime,Kn=new wt(Re,"PATCH",fn(I,oe),En);return Kn.headers={"Content-Type":"application/json; charset=utf-8"},Kn.body=Vt,Kn.errorHandler=kn(A),Kn}(I.storage,I._location,A,ne());return I.storage.makeRequestWithTokens(Q,qr)}(I=(0,rt.m9)(I),A)}(this._delegate,A)}getDownloadURL(){return function Ei(I){return Er(I=(0,rt.m9)(I))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function wi(I){return function Ys(I){I._throwIfRoot("deleteObject");const A=function ai(I,A){const oe=kr(A.fullServerUrl(),I.host,I._protocol),Vt=new wt(oe,"DELETE",function It(Bt,En){},I.maxOperationRetryTime);return Vt.successCodes=[200,204],Vt.errorHandler=kn(A),Vt}(I.storage,I._location);return I.storage.makeRequestWithTokens(A,qr)}(I=(0,rt.m9)(I))}(this._delegate)}_throwIfRoot(A){if(""===this._delegate._location.path)throw vt(A)}}class ji{constructor(A,Q){this.app=A,this._delegate=Q}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(A){if(ci(A))throw Rt("ref() expected a child path but got a URL, use refFromURL instead.");return new Ar(Ji(this._delegate,A),this)}refFromURL(A){if(!ci(A))throw Rt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{gn.makeFromUrl(A,this._delegate.host)}catch{throw Rt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ar(Ji(this._delegate,A),this)}setMaxUploadRetryTime(A){this._delegate.maxUploadRetryTime=A}setMaxOperationRetryTime(A){this._delegate.maxOperationRetryTime=A}useEmulator(A,Q,oe={}){!function Js(I,A,Q,oe={}){!function lo(I,A,Q,oe={}){I.host=`${A}:${Q}`,I._protocol="http";const{mockUserToken:ee}=oe;ee&&(I._overrideAuthToken="string"==typeof ee?ee:(0,rt.Sg)(ee,I.app.options.projectId))}(I,A,Q,oe)}(this._delegate,A,Q,oe)}}function ci(I){return/^[A-Za-z]+:\/\//.test(I)}function Eo(I,{instanceIdentifier:A}){const Q=I.getProvider("app-compat").getImmediate(),oe=I.getProvider("storage").getImmediate({identifier:A});return new ji(Q,oe)}!function Jo(I){const A={TaskState:ln,TaskEvent:Ni,StringFormat:qn,Storage:ji,Reference:Ar};I.INTERNAL.registerComponent(new Le.wA("storage-compat",Eo,"PUBLIC").setServiceProps(A).setMultipleInstances(!0)),I.registerVersion("@firebase/storage-compat","0.3.2")}(ht.Z);var xi=L(6217),pi=L(9260);function ws(I){const A=function eo(I){return new g.y(A=>{const Q=It=>A.next(It);Q(I.snapshot);const Re=I.on("state_changed",Q);return I.then(It=>{Q(It),A.complete()},It=>{Q(I.snapshot),(It=>{A.error(It)})(It)}),function(){Re()}}).pipe(function be(I,A=ye.z){return(0,ge.e)((Q,oe)=>{let ee=null,Re=null,It=null;const Vt=()=>{if(ee){ee.unsubscribe(),ee=null;const En=Re;Re=null,oe.next(En)}};function Bt(){const En=It+I,Kn=A.now();if(Kn<En)return ee=this.schedule(void 0,En-Kn),void oe.add(ee);Vt()}Q.subscribe((0,pe.x)(oe,En=>{Re=En,It=A.now(),ee||(ee=A.schedule(Bt,I),oe.add(ee))},()=>{Vt(),oe.complete()},void 0,()=>{Re=ee=null}))})}(0))}(I);return{task:I,then:I.then.bind(I),catch:I.catch.bind(I),pause:I.pause.bind(I),cancel:I.cancel.bind(I),resume:I.resume.bind(I),snapshotChanges:()=>A,percentageChanges:()=>A.pipe((0,F.U)(Q=>Q.bytesTransferred/Q.totalBytes*100))}}function to(I){return{getDownloadURL:()=>(0,W.of)(void 0).pipe(le.fc,(0,Pe.w)(()=>I.getDownloadURL()),le.iC),getMetadata:()=>(0,W.of)(void 0).pipe(le.fc,(0,Pe.w)(()=>I.getMetadata()),le.iC),delete:()=>(0,q.D)(I.delete()),child:A=>to(I.child(A)),updateMetadata:A=>(0,q.D)(I.updateMetadata(A)),put:(A,Q)=>ws(I.put(A,Q)),putString:(A,Q,oe)=>ws(I.putString(A,Q,oe)),list:A=>(0,q.D)(I.list(A)),listAll:()=>(0,q.D)(I.listAll())}}const Hi=new ie.OlP("angularfire2.storageBucket"),Is=new ie.OlP("angularfire2.storage.maxUploadRetryTime"),wo=new ie.OlP("angularfire2.storage.maxOperationRetryTime"),xn=new ie.OlP("angularfire2.storage.use-emulator");let Ds=(()=>{class I{constructor(Q,oe,ee,Re,It,Vt,Bt,En,Kn,dr){const Hr=(0,_e.on)(Q,It,oe);this.storage=(0,_e.cc)(`${Hr.name}.storage.${ee}`,"AngularFireStorage",Hr.name,()=>{const Lr=It.runOutsideAngular(()=>Hr.storage(ee||void 0)),di=Kn;return di&&Lr.useEmulator(...di),Bt&&Lr.setMaxUploadRetryTime(Bt),En&&Lr.setMaxOperationRetryTime(En),Lr},[Bt,En])}ref(Q){return to(this.storage.ref(Q))}refFromURL(Q){return to(this.storage.refFromURL(Q))}upload(Q,oe,ee){return to(this.storage.ref(Q)).put(oe,ee)}}return I.\u0275fac=function(Q){return new(Q||I)(ie.LFG(_e.Dh),ie.LFG(_e.xv,8),ie.LFG(Hi,8),ie.LFG(ie.Lbi),ie.LFG(ie.R0b),ie.LFG(le.HU),ie.LFG(Is,8),ie.LFG(wo,8),ie.LFG(xn,8),ie.LFG(xi.nm,8))},I.\u0275prov=ie.Yz7({token:I,factory:I.\u0275fac,providedIn:"any"}),I})(),N=(()=>{class I{}return I.\u0275fac=function(Q){return new(Q||I)},I.\u0275mod=ie.oAB({type:I}),I.\u0275inj=ie.cJS({}),I})(),P=(()=>{class I{constructor(){pi.Z.registerVersion("angularfire",le.q4.full,"gcs-compat")}}return I.\u0275fac=function(Q){return new(Q||I)},I.\u0275mod=ie.oAB({type:I}),I.\u0275inj=ie.cJS({providers:[Ds],imports:[N]}),I})()},2011:(jt,He,L)=>{L.d(He,{Dh:()=>F,GT:()=>pe,cc:()=>Te,hO:()=>ht,on:()=>le,pX:()=>ge,xv:()=>Pe});var g=L(4650),W=L(9260),q=L(4976);jt=L.hmd(jt);const ye=["ngOnDestroy"],ge=(ke,st,z,O={})=>new Proxy(ke,{get:(se,he)=>z.runOutsideAngular(()=>{var Ve;if(ke[he])return!(null===(Ve=O?.spy)||void 0===Ve)&&Ve.get&&O.spy.get(he,ke[he]),ke[he];if(ye.indexOf(he)>-1)return()=>{};const Ge=st.toPromise().then(Ae=>{const me=Ae&&Ae[he];return"function"==typeof me?me.bind(Ae):me&&me.then?me.then(Be=>z.run(()=>Be)):z.run(()=>me)});return new Proxy(()=>{},{get:(Ae,me)=>Ge[me],apply:(Ae,me,Be)=>Ge.then(pt=>{var ft;const Dt=pt&&pt(...Be);return!(null===(ft=O?.spy)||void 0===ft)&&ft.apply&&O.spy.apply(he,Be,Dt),Dt})})})}),pe=(ke,st)=>{st.forEach(z=>{Object.getOwnPropertyNames(z.prototype||z).forEach(O=>{Object.defineProperty(ke.prototype,O,Object.getOwnPropertyDescriptor(z.prototype||z,O))})})};class be{constructor(st){return st}}const F=new g.OlP("angularfire2.app.options"),Pe=new g.OlP("angularfire2.app.name");function le(ke,st,z){const se="object"==typeof z&&z||{};se.name=se.name||"string"==typeof z&&z||"[DEFAULT]";const Ve=W.Z.apps.filter(Ge=>Ge&&Ge.name===se.name)[0]||st.runOutsideAngular(()=>W.Z.initializeApp(ke,se));try{JSON.stringify(ke)!==JSON.stringify(Ve.options)&&ie("error",`${Ve.name} Firebase App already initialized with different options${jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new be(Ve)}const ie=(ke,...st)=>{(0,g.X6Q)()&&typeof console<"u"&&console[ke](...st)},_e={provide:be,useFactory:le,deps:[F,g.R0b,[new g.FiY,Pe]]};let ht=(()=>{class ke{constructor(z){W.Z.registerVersion("angularfire",q.q4.full,"core"),W.Z.registerVersion("angularfire",q.q4.full,"app-compat"),W.Z.registerVersion("angular",g.q4F.full,z.toString())}static initializeApp(z,O){return{ngModule:ke,providers:[{provide:F,useValue:z},{provide:Pe,useValue:O}]}}}return ke.\u0275fac=function(z){return new(z||ke)(g.LFG(g.Lbi))},ke.\u0275mod=g.oAB({type:ke}),ke.\u0275inj=g.cJS({providers:[_e]}),ke})();function Te(ke,st,z,O,se){const[,he,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===ke)||[];if(he)return function ot(ke,st){try{return ke.toString()===st.toString()}catch{return ke===st}}(se,Ve)||(Le("error",`${st} was already initialized on the ${z} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),Le("warn",{is:se,was:Ve})),he;{const Ge=O();return globalThis.\u0275AngularfireInstanceCache.push([ke,Ge,se]),Ge}}const rt=!!jt.hot,Le=(ke,...st)=>{(0,g.X6Q)()&&typeof console<"u"&&console[ke](...st)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(jt,He,L)=>{L.d(He,{q4:()=>da,iC:()=>Qu,fc:()=>Ma,HU:()=>go,vb:()=>sc,JM:()=>ls});var g=L(4650),W=L(259),q=L(5861),ye=L(6881),ge=L(2090),pe=L(4859),be=L(1877);const F=(D,M)=>M.some($=>D instanceof $);let Pe,le;const ht=new WeakMap,Te=new WeakMap,ot=new WeakMap,rt=new WeakMap,Le=new WeakMap;let z={get(D,M,$){if(D instanceof IDBTransaction){if("done"===M)return Te.get(D);if("objectStoreNames"===M)return D.objectStoreNames||ot.get(D);if("store"===M)return $.objectStoreNames[1]?void 0:$.objectStore($.objectStoreNames[0])}return Ve(D[M])},set:(D,M,$)=>(D[M]=$,!0),has:(D,M)=>D instanceof IDBTransaction&&("done"===M||"store"===M)||M in D};function he(D){return"function"==typeof D?function se(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...M){return D.apply(Ge(this),M),Ve(ht.get(this))}:function(...M){return Ve(D.apply(Ge(this),M))}:function(M,...$){const re=D.call(Ge(this),M,...$);return ot.set(re,M.sort?M.sort():[M]),Ve(re)}}(D):(D instanceof IDBTransaction&&function st(D){if(Te.has(D))return;const M=new Promise(($,re)=>{const De=()=>{D.removeEventListener("complete",Ue),D.removeEventListener("error",nt),D.removeEventListener("abort",nt)},Ue=()=>{$(),De()},nt=()=>{re(D.error||new DOMException("AbortError","AbortError")),De()};D.addEventListener("complete",Ue),D.addEventListener("error",nt),D.addEventListener("abort",nt)});Te.set(D,M)}(D),F(D,function ie(){return Pe||(Pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,z):D)}function Ve(D){if(D instanceof IDBRequest)return function ke(D){const M=new Promise(($,re)=>{const De=()=>{D.removeEventListener("success",Ue),D.removeEventListener("error",nt)},Ue=()=>{$(Ve(D.result)),De()},nt=()=>{re(D.error),De()};D.addEventListener("success",Ue),D.addEventListener("error",nt)});return M.then($=>{$ instanceof IDBCursor&&ht.set($,D)}).catch(()=>{}),Le.set(M,D),M}(D);if(rt.has(D))return rt.get(D);const M=he(D);return M!==D&&(rt.set(D,M),Le.set(M,D)),M}const Ge=D=>Le.get(D),Be=["get","getKey","getAll","getAllKeys","count"],pt=["put","add","delete","clear"],ft=new Map;function Dt(D,M){if(!(D instanceof IDBDatabase)||M in D||"string"!=typeof M)return;if(ft.get(M))return ft.get(M);const $=M.replace(/FromIndex$/,""),re=M!==$,De=pt.includes($);if(!($ in(re?IDBIndex:IDBObjectStore).prototype)||!De&&!Be.includes($))return;const Ue=function(){var nt=(0,q.Z)(function*(Ht,...Wt){const yn=this.transaction(Ht,De?"readwrite":"readonly");let Hn=yn.store;return re&&(Hn=Hn.index(Wt.shift())),(yield Promise.all([Hn[$](...Wt),De&&yn.done]))[0]});return function(Wt){return nt.apply(this,arguments)}}();return ft.set(M,Ue),Ue}!function O(D){z=D(z)}(D=>({...D,get:(M,$,re)=>Dt(M,$)||D.get(M,$,re),has:(M,$)=>!!Dt(M,$)||D.has(M,$)}));const Rn="@firebase/installations",Qe="0.6.4",qe=1e4,Je=`w:${Qe}`,at="FIS_v2",yt="https://firebaseinstallations.googleapis.com/v1",tt=36e5,Pt=new ge.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function vt(D){return D instanceof ge.ZR&&D.code.includes("request-failed")}function tn({projectId:D}){return`${yt}/projects/${D}/installations`}function nn(D){return{token:D.token,requestStatus:2,expiresIn:Xr(D.expiresIn),creationTime:Date.now()}}function gn(D,M){return $n.apply(this,arguments)}function $n(){return($n=(0,q.Z)(function*(D,M){const re=(yield M.json()).error;return Pt.create("request-failed",{requestName:D,serverCode:re.code,serverMessage:re.message,serverStatus:re.status})})).apply(this,arguments)}function Nr({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Jn(D){return br.apply(this,arguments)}function br(){return(br=(0,q.Z)(function*(D){const M=yield D();return M.status>=500&&M.status<600?D():M})).apply(this,arguments)}function Xr(D){return Number(D.replace("s","000"))}function Ut(){return(Ut=(0,q.Z)(function*({appConfig:D,heartbeatServiceProvider:M},{fid:$}){const re=tn(D),De=Nr(D),Ue=M.getImmediate({optional:!0});if(Ue){const yn=yield Ue.getHeartbeatsHeader();yn&&De.append("x-firebase-client",yn)}const Ht={method:"POST",headers:De,body:JSON.stringify({fid:$,authVersion:at,appId:D.appId,sdkVersion:Je})},Wt=yield Jn(()=>fetch(re,Ht));if(Wt.ok){const yn=yield Wt.json();return{fid:yn.fid||$,registrationStatus:2,refreshToken:yn.refreshToken,authToken:nn(yn.authToken)}}throw yield gn("Create Installation",Wt)})).apply(this,arguments)}function Xn(D){return new Promise(M=>{setTimeout(M,D)})}const Br=/^[cdef][\w-]{21}$/,ur="";function mi(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const $=function zn(D){return function kr(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Br.test($)?$:ur}catch{return ur}}function Nn(D){return`${D.appName}!${D.appId}`}const zt=new Map;function rn(D,M){const $=Nn(D);an($,M),function Tr(D,M){const $=function Fr(){return!lr&&"BroadcastChannel"in self&&(lr=new BroadcastChannel("[Firebase] FID Change"),lr.onmessage=D=>{an(D.data.key,D.data.fid)}),lr}();$&&$.postMessage({key:D,fid:M}),function nr(){0===zt.size&&lr&&(lr.close(),lr=null)}()}($,M)}function an(D,M){const $=zt.get(D);if($)for(const re of $)re(M)}let lr=null;const qn="firebase-installations-database",An=1,_r="firebase-installations-store";let Fn=null;function Sr(){return Fn||(Fn=function Ae(D,M,{blocked:$,upgrade:re,blocking:De,terminated:Ue}={}){const nt=indexedDB.open(D,M),Ht=Ve(nt);return re&&nt.addEventListener("upgradeneeded",Wt=>{re(Ve(nt.result),Wt.oldVersion,Wt.newVersion,Ve(nt.transaction))}),$&&nt.addEventListener("blocked",()=>$()),Ht.then(Wt=>{Ue&&Wt.addEventListener("close",()=>Ue()),De&&Wt.addEventListener("versionchange",()=>De())}).catch(()=>{}),Ht}(qn,An,{upgrade:(D,M)=>{0===M&&D.createObjectStore(_r)}})),Fn}function Oe(D,M){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,q.Z)(function*(D,M){const $=Nn(D),De=(yield Sr()).transaction(_r,"readwrite"),Ue=De.objectStore(_r),nt=yield Ue.get($);return yield Ue.put(M,$),yield De.done,(!nt||nt.fid!==M.fid)&&rn(D,M.fid),M})).apply(this,arguments)}function Me(D){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,q.Z)(function*(D){const M=Nn(D),re=(yield Sr()).transaction(_r,"readwrite");yield re.objectStore(_r).delete(M),yield re.done})).apply(this,arguments)}function wn(D,M){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,q.Z)(function*(D,M){const $=Nn(D),De=(yield Sr()).transaction(_r,"readwrite"),Ue=De.objectStore(_r),nt=yield Ue.get($),Ht=M(nt);return void 0===Ht?yield Ue.delete($):yield Ue.put(Ht,$),yield De.done,Ht&&(!nt||nt.fid!==Ht.fid)&&rn(D,Ht.fid),Ht})).apply(this,arguments)}function ue(D){return ce.apply(this,arguments)}function ce(){return ce=(0,q.Z)(function*(D){let M;const $=yield wn(D.appConfig,re=>{const De=function Ce(D){return Se(D||{fid:mi(),registrationStatus:0})}(re),Ue=function lt(D,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(Pt.create("app-offline"))};const $={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},re=function $e(D,M){return Et.apply(this,arguments)}(D,$);return{installationEntry:$,registrationPromise:re}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:we(D)}:{installationEntry:M}}(D,De);return M=Ue.registrationPromise,Ue.installationEntry});return $.fid===ur?{installationEntry:yield M}:{installationEntry:$,registrationPromise:M}}),ce.apply(this,arguments)}function Et(){return Et=(0,q.Z)(function*(D,M){try{const $=yield function on(D,M){return Ut.apply(this,arguments)}(D,M);return Oe(D.appConfig,$)}catch($){throw vt($)&&409===$.customData.serverCode?yield Me(D.appConfig):yield Oe(D.appConfig,{fid:M.fid,registrationStatus:0}),$}}),Et.apply(this,arguments)}function we(D){return ve.apply(this,arguments)}function ve(){return(ve=(0,q.Z)(function*(D){let M=yield ne(D.appConfig);for(;1===M.registrationStatus;)yield Xn(100),M=yield ne(D.appConfig);if(0===M.registrationStatus){const{installationEntry:$,registrationPromise:re}=yield ue(D);return re||$}return M})).apply(this,arguments)}function ne(D){return wn(D,M=>{if(!M)throw Pt.create("installation-not-found");return Se(M)})}function Se(D){return function ut(D){return 1===D.registrationStatus&&D.registrationTime+qe<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function hn(){return(hn=(0,q.Z)(function*({appConfig:D,heartbeatServiceProvider:M},$){const re=function On(D,{fid:M}){return`${tn(D)}/${M}/authTokens:generate`}(D,$),De=function _n(D,{refreshToken:M}){const $=Nr(D);return $.append("Authorization",function ar(D){return`${at} ${D}`}(M)),$}(D,$),Ue=M.getImmediate({optional:!0});if(Ue){const yn=yield Ue.getHeartbeatsHeader();yn&&De.append("x-firebase-client",yn)}const Ht={method:"POST",headers:De,body:JSON.stringify({installation:{sdkVersion:Je,appId:D.appId}})},Wt=yield Jn(()=>fetch(re,Ht));if(Wt.ok)return nn(yield Wt.json());throw yield gn("Generate Auth Token",Wt)})).apply(this,arguments)}function rr(D){return cr.apply(this,arguments)}function cr(){return cr=(0,q.Z)(function*(D,M=!1){let $;const re=yield wn(D.appConfig,Ue=>{if(!Tn(Ue))throw Pt.create("not-registered");const nt=Ue.authToken;if(!M&&function un(D){return 2===D.requestStatus&&!function Gn(D){const M=Date.now();return M<D.creationTime||D.creationTime+D.expiresIn<M+tt}(D)}(nt))return Ue;if(1===nt.requestStatus)return $=function Ke(D,M){return ze.apply(this,arguments)}(D,M),Ue;{if(!navigator.onLine)throw Pt.create("app-offline");const Ht=function kn(D){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:M})}(Ue);return $=function Kt(D,M){return fn.apply(this,arguments)}(D,Ht),Ht}});return $?yield $:re.authToken}),cr.apply(this,arguments)}function ze(){return(ze=(0,q.Z)(function*(D,M){let $=yield wt(D.appConfig);for(;1===$.authToken.requestStatus;)yield Xn(100),$=yield wt(D.appConfig);const re=$.authToken;return 0===re.requestStatus?rr(D,M):re})).apply(this,arguments)}function wt(D){return wn(D,M=>{if(!Tn(M))throw Pt.create("not-registered");return function gr(D){return 1===D.requestStatus&&D.requestTime+qe<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function fn(){return fn=(0,q.Z)(function*(D,M){try{const $=yield function bt(D,M){return hn.apply(this,arguments)}(D,M),re=Object.assign(Object.assign({},M),{authToken:$});return yield Oe(D.appConfig,re),$}catch($){if(!vt($)||401!==$.customData.serverCode&&404!==$.customData.serverCode){const re=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield Oe(D.appConfig,re)}else yield Me(D.appConfig);throw $}}),fn.apply(this,arguments)}function Tn(D){return void 0!==D&&2===D.registrationStatus}function qs(){return(qs=(0,q.Z)(function*(D){const M=D,{installationEntry:$,registrationPromise:re}=yield ue(M);return re?re.catch(console.error):rr(M).catch(console.error),$.fid})).apply(this,arguments)}function Zs(){return Zs=(0,q.Z)(function*(D,M=!1){const $=D;return yield function ai(D){return Ft.apply(this,arguments)}($),(yield rr($,M)).token}),Zs.apply(this,arguments)}function Ft(){return(Ft=(0,q.Z)(function*(D){const{registrationPromise:M}=yield ue(D);M&&(yield M)})).apply(this,arguments)}function Ni(D){return Pt.create("missing-app-config-values",{valueName:D})}const ln="installations",ys=D=>{const M=D.getProvider("app").getImmediate(),$=function Oi(D){if(!D||!D.options)throw Ni("App Configuration");if(!D.name)throw Ni("App Name");const M=["projectId","apiKey","appId"];for(const $ of M)if(!D.options[$])throw Ni($);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(M);return{app:M,appConfig:$,heartbeatServiceProvider:(0,ye._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},$i=D=>{const M=D.getProvider("app").getImmediate(),$=(0,ye._getProvider)(M,ln).getImmediate();return{getId:()=>function Zr(D){return qs.apply(this,arguments)}($),getToken:De=>function Ks(D){return Zs.apply(this,arguments)}($,De)}};(function ki(){(0,ye._registerComponent)(new pe.wA(ln,ys,"PUBLIC")),(0,ye._registerComponent)(new pe.wA("installations-internal",$i,"PRIVATE"))})(),(0,ye.registerVersion)(Rn,Qe),(0,ye.registerVersion)(Rn,Qe,"esm2017");const Wr="@firebase/remote-config",ir=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ss{constructor(M,$,re,De){this.client=M,this.storage=$,this.storageCache=re,this.logger=De}isCachedDataFresh(M,$){if(!$)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-$,De=re<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${De}.`),De}fetch(M){var $=this;return(0,q.Z)(function*(){const[re,De]=yield Promise.all([$.storage.getLastSuccessfulFetchTimestampMillis(),$.storage.getLastSuccessfulFetchResponse()]);if(De&&$.isCachedDataFresh(M.cacheMaxAgeMillis,re))return De;M.eTag=De&&De.eTag;const Ue=yield $.client.fetch(M),nt=[$.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ue.status&&nt.push($.storage.setLastSuccessfulFetchResponse(Ue)),yield Promise.all(nt),Ue})()}}function Oo(D=navigator){return D.languages&&D.languages[0]||D.language}class uo{constructor(M,$,re,De,Ue,nt){this.firebaseInstallations=M,this.sdkVersion=$,this.namespace=re,this.projectId=De,this.apiKey=Ue,this.appId=nt}fetch(M){var $=this;return(0,q.Z)(function*(){const[re,De]=yield Promise.all([$.firebaseInstallations.getId(),$.firebaseInstallations.getToken()]),nt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${$.projectId}/namespaces/${$.namespace}:fetch?key=${$.apiKey}`,Ht={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},Wt={sdk_version:$.sdkVersion,app_instance_id:re,app_instance_id_token:De,app_id:$.appId,language_code:Oo()},yn={method:"POST",headers:Ht,body:JSON.stringify(Wt)},Hn=fetch(nt,yn),Vn=new Promise((fi,jo)=>{M.signal.addEventListener(()=>{const oi=new Error("The operation was aborted.");oi.name="AbortError",jo(oi)})});let xo;try{yield Promise.race([Hn,Vn]),xo=yield Hn}catch(fi){let jo="fetch-client-network";throw"AbortError"===fi?.name&&(jo="fetch-timeout"),ir.create(jo,{originalErrorMessage:fi?.message})}let cs=xo.status;const xu=xo.headers.get("ETag")||void 0;let Xu,$a;if(200===xo.status){let fi;try{fi=yield xo.json()}catch(jo){throw ir.create("fetch-client-parse",{originalErrorMessage:jo?.message})}Xu=fi.entries,$a=fi.state}if("INSTANCE_STATE_UNSPECIFIED"===$a?cs=500:"NO_CHANGE"===$a?cs=304:("NO_TEMPLATE"===$a||"EMPTY_CONFIG"===$a)&&(Xu={}),304!==cs&&200!==cs)throw ir.create("fetch-status",{httpStatus:cs});return{status:cs,eTag:xu,config:Xu}})()}}class co{constructor(M,$){this.client=M,this.storage=$}fetch(M){var $=this;return(0,q.Z)(function*(){const re=(yield $.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return $.attemptFetch(M,re)})()}attemptFetch(M,{throttleEndTimeMillis:$,backoffCount:re}){var De=this;return(0,q.Z)(function*(){yield function lo(D,M){return new Promise(($,re)=>{const De=Math.max(M-Date.now(),0),Ue=setTimeout($,De);D.addEventListener(()=>{clearTimeout(Ue),re(ir.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,$);try{const Ue=yield De.client.fetch(M);return yield De.storage.deleteThrottleMetadata(),Ue}catch(Ue){if(!function Ns(D){if(!(D instanceof ge.ZR&&D.customData))return!1;const M=Number(D.customData.httpStatus);return 429===M||500===M||503===M||504===M}(Ue))throw Ue;const nt={throttleEndTimeMillis:Date.now()+(0,ge.$s)(re),backoffCount:re+1};return yield De.storage.setThrottleMetadata(nt),De.attemptFetch(M,nt)}})()}}class No{constructor(M,$,re,De,Ue){this.app=M,this._client=$,this._storageCache=re,this._storage=De,this._logger=Ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ko(D,M){const $=D.target.error||void 0;return ir.create(M,{originalErrorMessage:$&&$?.message})}const ds="app_namespace_store";class Qs{constructor(M,$,re,De=function ks(){return new Promise((D,M)=>{try{const $=indexedDB.open("firebase_remote_config",1);$.onerror=re=>{M(ko(re,"storage-open"))},$.onsuccess=re=>{D(re.target.result)},$.onupgradeneeded=re=>{0===re.oldVersion&&re.target.result.createObjectStore(ds,{keyPath:"compositeKey"})}}catch($){M(ir.create("storage-open",{originalErrorMessage:$?.message}))}})}()){this.appId=M,this.appName=$,this.namespace=re,this.openDbPromise=De}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var $=this;return(0,q.Z)(function*(){const re=yield $.openDbPromise;return new Promise((De,Ue)=>{const Ht=re.transaction([ds],"readonly").objectStore(ds),Wt=$.createCompositeKey(M);try{const yn=Ht.get(Wt);yn.onerror=Hn=>{Ue(ko(Hn,"storage-get"))},yn.onsuccess=Hn=>{const Vn=Hn.target.result;De(Vn?Vn.value:void 0)}}catch(yn){Ue(ir.create("storage-get",{originalErrorMessage:yn?.message}))}})})()}set(M,$){var re=this;return(0,q.Z)(function*(){const De=yield re.openDbPromise;return new Promise((Ue,nt)=>{const Wt=De.transaction([ds],"readwrite").objectStore(ds),yn=re.createCompositeKey(M);try{const Hn=Wt.put({compositeKey:yn,value:$});Hn.onerror=Vn=>{nt(ko(Vn,"storage-set"))},Hn.onsuccess=()=>{Ue()}}catch(Hn){nt(ir.create("storage-set",{originalErrorMessage:Hn?.message}))}})})()}delete(M){var $=this;return(0,q.Z)(function*(){const re=yield $.openDbPromise;return new Promise((De,Ue)=>{const Ht=re.transaction([ds],"readwrite").objectStore(ds),Wt=$.createCompositeKey(M);try{const yn=Ht.delete(Wt);yn.onerror=Hn=>{Ue(ko(Hn,"storage-delete"))},yn.onsuccess=()=>{De()}}catch(yn){Ue(ir.create("storage-delete",{originalErrorMessage:yn?.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class hs{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,q.Z)(function*(){const $=M.storage.getLastFetchStatus(),re=M.storage.getLastSuccessfulFetchTimestampMillis(),De=M.storage.getActiveConfig(),Ue=yield $;Ue&&(M.lastFetchStatus=Ue);const nt=yield re;nt&&(M.lastSuccessfulFetchTimestampMillis=nt);const Ht=yield De;Ht&&(M.activeConfig=Ht)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function wr(){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,q.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}!function Ei(){(0,ye._registerComponent)(new pe.wA("remote-config",function D(M,{instanceIdentifier:$}){const re=M.getProvider("app").getImmediate(),De=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ir.create("registration-window");if(!(0,ge.hl)())throw ir.create("indexed-db-unavailable");const{projectId:Ue,apiKey:nt,appId:Ht}=re.options;if(!Ue)throw ir.create("registration-project-id");if(!nt)throw ir.create("registration-api-key");if(!Ht)throw ir.create("registration-app-id");const Wt=new Qs(Ht,re.name,$=$||"firebase"),yn=new hs(Wt),Hn=new be.Yd(Wr);Hn.logLevel=be.in.ERROR;const Vn=new uo(De,ye.SDK_VERSION,$,Ue,nt,Ht),xo=new co(Vn,Wt),cs=new ss(xo,Wt,yn,Hn),xu=new No(re,cs,yn,Wt,Hn);return function bn(D){const M=(0,ge.m9)(D);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(xu),xu},"PUBLIC").setMultipleInstances(!0)),(0,ye.registerVersion)(Wr,"0.4.4"),(0,ye.registerVersion)(Wr,"0.4.4","esm2017")}();const Js=(D,M)=>M.some($=>D instanceof $);let Ls,fs;const Xs=new WeakMap,Us=new WeakMap,li=new WeakMap,Ar=new WeakMap,ji=new WeakMap;let ei={get(D,M,$){if(D instanceof IDBTransaction){if("done"===M)return Us.get(D);if("objectStoreNames"===M)return D.objectStoreNames||li.get(D);if("store"===M)return $.objectStoreNames[1]?void 0:$.objectStore($.objectStoreNames[0])}return xi(D[M])},set:(D,M,$)=>(D[M]=$,!0),has:(D,M)=>D instanceof IDBTransaction&&("done"===M||"store"===M)||M in D};function Jo(D){return"function"==typeof D?function Eo(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qo(){return fs||(fs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...M){return D.apply(pi(this),M),xi(Xs.get(this))}:function(...M){return xi(D.apply(pi(this),M))}:function(M,...$){const re=D.call(pi(this),M,...$);return li.set(re,M.sort?M.sort():[M]),xi(re)}}(D):(D instanceof IDBTransaction&&function ps(D){if(Us.has(D))return;const M=new Promise(($,re)=>{const De=()=>{D.removeEventListener("complete",Ue),D.removeEventListener("error",nt),D.removeEventListener("abort",nt)},Ue=()=>{$(),De()},nt=()=>{re(D.error||new DOMException("AbortError","AbortError")),De()};D.addEventListener("complete",Ue),D.addEventListener("error",nt),D.addEventListener("abort",nt)});Us.set(D,M)}(D),Js(D,function oa(){return Ls||(Ls=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,ei):D)}function xi(D){if(D instanceof IDBRequest)return function ci(D){const M=new Promise(($,re)=>{const De=()=>{D.removeEventListener("success",Ue),D.removeEventListener("error",nt)},Ue=()=>{$(xi(D.result)),De()},nt=()=>{re(D.error),De()};D.addEventListener("success",Ue),D.addEventListener("error",nt)});return M.then($=>{$ instanceof IDBCursor&&Xs.set($,D)}).catch(()=>{}),ji.set(M,D),M}(D);if(Ar.has(D))return Ar.get(D);const M=Jo(D);return M!==D&&(Ar.set(D,M),ji.set(M,D)),M}const pi=D=>ji.get(D);function eo(D,M,{blocked:$,upgrade:re,blocking:De,terminated:Ue}={}){const nt=indexedDB.open(D,M),Ht=xi(nt);return re&&nt.addEventListener("upgradeneeded",Wt=>{re(xi(nt.result),Wt.oldVersion,Wt.newVersion,xi(nt.transaction))}),$&&nt.addEventListener("blocked",()=>$()),Ht.then(Wt=>{Ue&&Wt.addEventListener("close",()=>Ue()),De&&Wt.addEventListener("versionchange",()=>De())}).catch(()=>{}),Ht}function ws(D,{blocked:M}={}){const $=indexedDB.deleteDatabase(D);return M&&$.addEventListener("blocked",()=>M()),xi($).then(()=>{})}const to=["get","getKey","getAll","getAllKeys","count"],Hi=["put","add","delete","clear"],Is=new Map;function wo(D,M){if(!(D instanceof IDBDatabase)||M in D||"string"!=typeof M)return;if(Is.get(M))return Is.get(M);const $=M.replace(/FromIndex$/,""),re=M!==$,De=Hi.includes($);if(!($ in(re?IDBIndex:IDBObjectStore).prototype)||!De&&!to.includes($))return;const Ue=function(){var nt=(0,q.Z)(function*(Ht,...Wt){const yn=this.transaction(Ht,De?"readwrite":"readonly");let Hn=yn.store;return re&&(Hn=Hn.index(Wt.shift())),(yield Promise.all([Hn[$](...Wt),De&&yn.done]))[0]});return function(Wt){return nt.apply(this,arguments)}}();return Is.set(M,Ue),Ue}!function Kr(D){ei=D(ei)}(D=>({...D,get:(M,$,re)=>wo(M,$)||D.get(M,$,re),has:(M,$)=>!!wo(M,$)||D.has(M,$)}));const xn="/firebase-messaging-sw.js",Ds="/firebase-cloud-messaging-push-scope",V="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",N="https://fcmregistrations.googleapis.com/v1",P="google.c.a.c_id",I="google.c.a.c_l",A="google.c.a.ts",Q="google.c.a.e";var ee=(()=>{return(D=ee||(ee={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ee;var D})();function Re(D){const M=new Uint8Array(D);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function It(D){const $=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob($),De=new Uint8Array(re.length);for(let Ue=0;Ue<re.length;++Ue)De[Ue]=re.charCodeAt(Ue);return De}const Vt="fcm_token_details_db",Bt=5,En="fcm_token_object_Store";function dr(){return dr=(0,q.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ue=>Ue.name).includes(Vt))return null;let M=null;return(yield eo(Vt,Bt,{upgrade:(re=(0,q.Z)(function*(De,Ue,nt,Ht){var Wt;if(Ue<2||!De.objectStoreNames.contains(En))return;const yn=Ht.objectStore(En),Hn=yield yn.index("fcmSenderId").get(D);if(yield yn.clear(),Hn)if(2===Ue){const Vn=Hn;if(!Vn.auth||!Vn.p256dh||!Vn.endpoint)return;M={token:Vn.fcmToken,createTime:null!==(Wt=Vn.createTime)&&void 0!==Wt?Wt:Date.now(),subscriptionOptions:{auth:Vn.auth,p256dh:Vn.p256dh,endpoint:Vn.endpoint,swScope:Vn.swScope,vapidKey:"string"==typeof Vn.vapidKey?Vn.vapidKey:Re(Vn.vapidKey)}}}else if(3===Ue){const Vn=Hn;M={token:Vn.fcmToken,createTime:Vn.createTime,subscriptionOptions:{auth:Re(Vn.auth),p256dh:Re(Vn.p256dh),endpoint:Vn.endpoint,swScope:Vn.swScope,vapidKey:Re(Vn.vapidKey)}}}else if(4===Ue){const Vn=Hn;M={token:Vn.fcmToken,createTime:Vn.createTime,subscriptionOptions:{auth:Re(Vn.auth),p256dh:Re(Vn.p256dh),endpoint:Vn.endpoint,swScope:Vn.swScope,vapidKey:Re(Vn.vapidKey)}}}}),function(Ue,nt,Ht,Wt){return re.apply(this,arguments)})})).close(),yield ws(Vt),yield ws("fcm_vapid_details_db"),yield ws("undefined"),function Hr(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:M}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}(M)?M:null;var re}),dr.apply(this,arguments)}const Lr="firebase-messaging-database",di=1,Yr="firebase-messaging-store";let Gr=null;function sr(){return Gr||(Gr=eo(Lr,di,{upgrade:(D,M)=>{0===M&&D.createObjectStore(Yr)}})),Gr}function ti(D){return jr.apply(this,arguments)}function jr(){return jr=(0,q.Z)(function*(D){const M=Ms(D),re=yield(yield sr()).transaction(Yr).objectStore(Yr).get(M);if(re)return re;{const De=yield function Kn(D){return dr.apply(this,arguments)}(D.appConfig.senderId);if(De)return yield Ur(D,De),De}}),jr.apply(this,arguments)}function Ur(D,M){return ni.apply(this,arguments)}function ni(){return(ni=(0,q.Z)(function*(D,M){const $=Ms(D),De=(yield sr()).transaction(Yr,"readwrite");return yield De.objectStore(Yr).put(M,$),yield De.done,M})).apply(this,arguments)}function Cs(){return(Cs=(0,q.Z)(function*(D){const M=Ms(D),re=(yield sr()).transaction(Yr,"readwrite");yield re.objectStore(Yr).delete(M),yield re.done})).apply(this,arguments)}function Ms({appConfig:D}){return D.appId}const gi=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function aa(D,M){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,q.Z)(function*(D,M){const $=yield Uo(D),re=Xa(M),De={method:"POST",headers:$,body:JSON.stringify(re)};let Ue;try{Ue=yield(yield fetch(Lo(D.appConfig),De)).json()}catch(nt){throw gi.create("token-subscribe-failed",{errorInfo:nt?.toString()})}if(Ue.error)throw gi.create("token-subscribe-failed",{errorInfo:Ue.error.message});if(!Ue.token)throw gi.create("token-subscribe-no-token");return Ue.token})).apply(this,arguments)}function Na(){return(Na=(0,q.Z)(function*(D,M){const $=yield Uo(D),re=Xa(M.subscriptionOptions),De={method:"PATCH",headers:$,body:JSON.stringify(re)};let Ue;try{Ue=yield(yield fetch(`${Lo(D.appConfig)}/${M.token}`,De)).json()}catch(nt){throw gi.create("token-update-failed",{errorInfo:nt?.toString()})}if(Ue.error)throw gi.create("token-update-failed",{errorInfo:Ue.error.message});if(!Ue.token)throw gi.create("token-update-no-token");return Ue.token})).apply(this,arguments)}function Fo(D,M){return Do.apply(this,arguments)}function Do(){return(Do=(0,q.Z)(function*(D,M){const re={method:"DELETE",headers:yield Uo(D)};try{const Ue=yield(yield fetch(`${Lo(D.appConfig)}/${M}`,re)).json();if(Ue.error)throw gi.create("token-unsubscribe-failed",{errorInfo:Ue.error.message})}catch(De){throw gi.create("token-unsubscribe-failed",{errorInfo:De?.toString()})}})).apply(this,arguments)}function Lo({projectId:D}){return`${N}/projects/${D}/registrations`}function Uo(D){return Co.apply(this,arguments)}function Co(){return(Co=(0,q.Z)(function*({appConfig:D,installations:M}){const $=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${$}`})})).apply(this,arguments)}function Xa({p256dh:D,auth:M,endpoint:$,vapidKey:re}){const De={web:{endpoint:$,auth:M,p256dh:D}};return re!==V&&(De.web.applicationPubKey=re),De}const va=6048e5;function Ea(){return Ea=(0,q.Z)(function*(D){const M=yield function Iu(D,M){return ta.apply(this,arguments)}(D.swRegistration,D.vapidKey),$={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:M.endpoint,auth:Re(M.getKey("auth")),p256dh:Re(M.getKey("p256dh"))},re=yield ti(D.firebaseDependencies);if(re){if(function Il(D,M){return M.vapidKey===D.vapidKey&&M.endpoint===D.endpoint&&M.auth===D.auth&&M.p256dh===D.p256dh}(re.subscriptionOptions,$))return Date.now()>=re.createTime+va?function ri(D,M){return Vo.apply(this,arguments)}(D,{token:re.token,createTime:Date.now(),subscriptionOptions:$}):re.token;try{yield Fo(D.firebaseDependencies,re.token)}catch(De){console.warn(De)}return xs(D.firebaseDependencies,$)}return xs(D.firebaseDependencies,$)}),Ea.apply(this,arguments)}function no(){return no=(0,q.Z)(function*(D){const M=yield ti(D.firebaseDependencies);M&&(yield Fo(D.firebaseDependencies,M.token),yield function Vs(D){return Cs.apply(this,arguments)}(D.firebaseDependencies));const $=yield D.swRegistration.pushManager.getSubscription();return!$||$.unsubscribe()}),no.apply(this,arguments)}function Vo(){return Vo=(0,q.Z)(function*(D,M){try{const $=yield function Io(D,M){return Na.apply(this,arguments)}(D.firebaseDependencies,M),re=Object.assign(Object.assign({},M),{token:$,createTime:Date.now()});return yield Ur(D.firebaseDependencies,re),$}catch($){throw yield function Xi(D){return no.apply(this,arguments)}(D),$}}),Vo.apply(this,arguments)}function xs(D,M){return bo.apply(this,arguments)}function bo(){return(bo=(0,q.Z)(function*(D,M){const re={token:yield aa(D,M),createTime:Date.now(),subscriptionOptions:M};return yield Ur(D,re),re.token})).apply(this,arguments)}function ta(){return(ta=(0,q.Z)(function*(D,M){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:It(M)})})).apply(this,arguments)}function gs(D){const M={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function wa(D,M){if(!M.notification)return;D.notification={};const $=M.notification.title;$&&(D.notification.title=$);const re=M.notification.body;re&&(D.notification.body=re);const De=M.notification.image;De&&(D.notification.image=De);const Ue=M.notification.icon;Ue&&(D.notification.icon=Ue)}(M,D),function Ir(D,M){M.data&&(D.data=M.data)}(M,D),function S(D,M){var $,re,De,Ue,nt;if(!(M.fcmOptions||null!==($=M.notification)&&void 0!==$&&$.click_action))return;D.fcmOptions={};const Ht=null!==(De=null===(re=M.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==De?De:null===(Ue=M.notification)||void 0===Ue?void 0:Ue.click_action;Ht&&(D.fcmOptions.link=Ht);const Wt=null===(nt=M.fcmOptions)||void 0===nt?void 0:nt.analytics_label;Wt&&(D.fcmOptions.analyticsLabel=Wt)}(M,D),M}function R(D,M){const $=[];for(let re=0;re<D.length;re++)$.push(D.charAt(re)),re<M.length&&$.push(M.charAt(re));return $.join("")}function de(D){return gi.create("missing-app-config-values",{valueName:D})}R("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),R("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class it{constructor(M,$,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const De=function Y(D){if(!D||!D.options)throw de("App Configuration Object");if(!D.name)throw de("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:$}=D;for(const re of M)if(!$[re])throw de(re);return{appName:D.name,projectId:$.projectId,apiKey:$.apiKey,appId:$.appId,senderId:$.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:De,installations:$,analyticsProvider:re}}_delete(){return Promise.resolve()}}function _t(D){return dn.apply(this,arguments)}function dn(){return(dn=(0,q.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(xn,{scope:Ds}),D.swRegistration.update().catch(()=>{})}catch(M){throw gi.create("failed-service-worker-registration",{browserErrorMessage:M?.message})}})).apply(this,arguments)}function Zn(){return(Zn=(0,q.Z)(function*(D,M){if(!M&&!D.swRegistration&&(yield _t(D)),M||!D.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw gi.create("invalid-sw-registration");D.swRegistration=M}})).apply(this,arguments)}function Un(){return(Un=(0,q.Z)(function*(D,M){M?D.vapidKey=M:D.vapidKey||(D.vapidKey=V)})).apply(this,arguments)}function er(){return er=(0,q.Z)(function*(D,M){if(!navigator)throw gi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gi.create("permission-blocked");return yield function Sn(D,M){return Un.apply(this,arguments)}(D,M?.vapidKey),yield function yr(D,M){return Zn.apply(this,arguments)}(D,M?.serviceWorkerRegistration),function ea(D){return Ea.apply(this,arguments)}(D)}),er.apply(this,arguments)}function ro(){return(ro=(0,q.Z)(function*(D,M,$){const re=function Fi(D){switch(D){case ee.NOTIFICATION_CLICKED:return"notification_open";case ee.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(M);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:$[P],message_name:$[I],message_time:$[A],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Li(){return Li=(0,q.Z)(function*(D,M){const $=M.data;if(!$.isFirebaseMessaging)return;D.onMessageHandler&&$.messageType===ee.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(gs($)):D.onMessageHandler.next(gs($)));const re=$.data;(function G(D){return"object"==typeof D&&!!D&&P in D})(re)&&"1"===re[Q]&&(yield function ii(D,M,$){return ro.apply(this,arguments)}(D,$.messageType,re))}),Li.apply(this,arguments)}const os="@firebase/messaging",Bs=D=>{const M=new it(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",$=>function fo(D,M){return Li.apply(this,arguments)}(M,$)),M},eu=D=>{const M=D.getProvider("messaging").getImmediate();return{getToken:re=>function Qr(D,M){return er.apply(this,arguments)}(M,re)}};function Cu(){return bu.apply(this,arguments)}function bu(){return(bu=(0,q.Z)(function*(){try{yield(0,ge.eu)()}catch{return!1}return typeof window<"u"&&(0,ge.hl)()&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Du(){(0,ye._registerComponent)(new pe.wA("messaging",Bs,"PUBLIC")),(0,ye._registerComponent)(new pe.wA("messaging-internal",eu,"PRIVATE")),(0,ye.registerVersion)(os,"0.12.4"),(0,ye.registerVersion)(os,"0.12.4","esm2017")}();const ct="analytics",Ui="firebase_id",as="origin",tu=6e4,en="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mn="https://www.googletagmanager.com/gtag/js",ms=new be.Yd("@firebase/analytics"),Ze=new ge.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function St(D){if(!D.startsWith(mn)){const M=Ze.create("invalid-gtag-resource",{gtagURL:D});return ms.warn(M.message),""}return D}function Ii(D){return Promise.all(D.map(M=>M.catch($=>$)))}function Da(){return(Da=(0,q.Z)(function*(D,M,$,re,De,Ue){const nt=re[De];try{if(nt)yield M[nt];else{const Wt=(yield Ii($)).find(yn=>yn.measurementId===De);Wt&&(yield M[Wt.appId])}}catch(Ht){ms.error(Ht)}D("config",De,Ue)})).apply(this,arguments)}function Ca(){return(Ca=(0,q.Z)(function*(D,M,$,re,De){try{let Ue=[];if(De&&De.send_to){let nt=De.send_to;Array.isArray(nt)||(nt=[nt]);const Ht=yield Ii($);for(const Wt of nt){const yn=Ht.find(Vn=>Vn.measurementId===Wt),Hn=yn&&M[yn.appId];if(!Hn){Ue=[];break}Ue.push(Hn)}}0===Ue.length&&(Ue=Object.values(M)),yield Promise.all(Ue),D("event",re,De||{})}catch(Ue){ms.error(Ue)}})).apply(this,arguments)}const la=30,ca=new class Rs{constructor(M={},$=1e3){this.throttleMetadata=M,this.intervalMillis=$}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,$){this.throttleMetadata[M]=$}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Di(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Mr(){return(Mr=(0,q.Z)(function*(D){var M;const{appId:$,apiKey:re}=D,De={method:"GET",headers:Di(re)},Ue=en.replace("{app-id}",$),nt=yield fetch(Ue,De);if(200!==nt.status&&304!==nt.status){let Ht="";try{const Wt=yield nt.json();null!==(M=Wt.error)&&void 0!==M&&M.message&&(Ht=Wt.error.message)}catch{}throw Ze.create("config-fetch-failed",{httpStatus:nt.status,responseMessage:Ht})}return nt.json()})).apply(this,arguments)}function Su(){return(Su=(0,q.Z)(function*(D,M=ca,$){const{appId:re,apiKey:De,measurementId:Ue}=D.options;if(!re)throw Ze.create("no-app-id");if(!De){if(Ue)return{measurementId:Ue,appId:re};throw Ze.create("no-api-key")}const nt=M.getThrottleMetadata(re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ht=new Ta;return setTimeout((0,q.Z)(function*(){Ht.abort()}),void 0!==$?$:tu),Vi({appId:re,apiKey:De,measurementId:Ue},nt,Ht,M)})).apply(this,arguments)}function Vi(D,M,$){return Qt.apply(this,arguments)}function Qt(){return Qt=(0,q.Z)(function*(D,{throttleEndTimeMillis:M,backoffCount:$},re,De=ca){var Ue;const{appId:nt,measurementId:Ht}=D;try{yield function ba(D,M){return new Promise(($,re)=>{const De=Math.max(M-Date.now(),0),Ue=setTimeout($,De);D.addEventListener(()=>{clearTimeout(Ue),re(Ze.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(re,M)}catch(Wt){if(Ht)return ms.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ht} provided in the "measurementId" field in the local Firebase config. [${Wt?.message}]`),{appId:nt,measurementId:Ht};throw Wt}try{const Wt=yield function In(D){return Mr.apply(this,arguments)}(D);return De.deleteThrottleMetadata(nt),Wt}catch(Wt){const yn=Wt;if(!function Hu(D){if(!(D instanceof ge.ZR&&D.customData))return!1;const M=Number(D.customData.httpStatus);return 429===M||500===M||503===M||504===M}(yn)){if(De.deleteThrottleMetadata(nt),Ht)return ms.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ht} provided in the "measurementId" field in the local Firebase config. [${yn?.message}]`),{appId:nt,measurementId:Ht};throw Wt}const Hn=503===Number(null===(Ue=yn?.customData)||void 0===Ue?void 0:Ue.httpStatus)?(0,ge.$s)($,De.intervalMillis,la):(0,ge.$s)($,De.intervalMillis),Vn={throttleEndTimeMillis:Date.now()+Hn,backoffCount:$+1};return De.setThrottleMetadata(nt,Vn),ms.debug(`Calling attemptFetch again in ${Hn} millis`),Vi(D,Vn,re,De)}}),Qt.apply(this,arguments)}class Ta{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let Sa,m;function Cl(){return(Cl=(0,q.Z)(function*(D,M,$,re,De){if(De&&De.global)D("event",$,re);else{const Ue=yield M;D("event",$,Object.assign(Object.assign({},re),{send_to:Ue}))}})).apply(this,arguments)}function te(){return(te=(0,q.Z)(function*(){if(!(0,ge.hl)())return ms.warn(Ze.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ge.eu)()}catch(D){return ms.warn(Ze.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function mt(){return mt=(0,q.Z)(function*(D,M,$,re,De,Ue,nt){var Ht;const Wt=function xr(D){return Su.apply(this,arguments)}(D);Wt.then(cs=>{$[cs.measurementId]=cs.appId,D.options.measurementId&&cs.measurementId!==D.options.measurementId&&ms.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${cs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(cs=>ms.error(cs)),M.push(Wt);const yn=function K(){return te.apply(this,arguments)}().then(cs=>{if(cs)return re.getId()}),[Hn,Vn]=yield Promise.all([Wt,yn]);(function iu(D){const M=window.document.getElementsByTagName("script");for(const $ of Object.values(M))if($.src&&$.src.includes(mn)&&$.src.includes(D))return $;return null})(Ue)||function na(D,M){const $=function es(D,M){let $;return window.trustedTypes&&($=window.trustedTypes.createPolicy(D,M)),$}("firebase-js-sdk-policy",{createScriptURL:St}),re=document.createElement("script"),De=`${mn}?l=${D}&id=${M}`;re.src=$?$?.createScriptURL(De):De,re.async=!0,document.head.appendChild(re)}(Ue,Hn.measurementId),m&&(De("consent","default",m),function T(D){m=D}(void 0)),De("js",new Date);const xo=null!==(Ht=nt?.config)&&void 0!==Ht?Ht:{};return xo[as]="firebase",xo.update=!0,null!=Vn&&(xo[Ui]=Vn),De("config",Hn.measurementId,xo),Sa&&(De("set",Sa),function U(D){Sa=D}(void 0)),Hn.measurementId}),mt.apply(this,arguments)}class Zt{constructor(M){this.app=M}_delete(){return delete qt[this.app.options.appId],Promise.resolve()}}let qt={},Rr=[];const ts={};let so,Ti,bi="dataLayer",bs="gtag",Gi=!1;function Ao(D,M,$){!function Ua(){const D=[];if((0,ge.ru)()&&D.push("This is a browser extension environment."),(0,ge.zI)()||D.push("Cookies are not available."),D.length>0){const M=D.map((re,De)=>`(${De+1}) ${re}`).join(" "),$=Ze.create("invalid-analytics-context",{errorInfo:M});ms.warn($.message)}}();const re=D.options.appId;if(!re)throw Ze.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Ze.create("no-api-key");ms.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=qt[re])throw Ze.create("already-exists",{id:re});if(!Gi){!function ka(D){let M=[];Array.isArray(window[D])?M=window[D]:window[D]=M}(bi);const{wrappedGtag:Ue,gtagCore:nt}=function ru(D,M,$,re,De){let Ue=function(...nt){window[re].push(arguments)};return window[De]&&"function"==typeof window[De]&&(Ue=window[De]),window[De]=function nu(D,M,$,re){function Ue(){return Ue=(0,q.Z)(function*(nt,...Ht){try{if("event"===nt){const[Wt,yn]=Ht;yield function $o(D,M,$,re,De){return Ca.apply(this,arguments)}(D,M,$,Wt,yn)}else if("config"===nt){const[Wt,yn]=Ht;yield function ju(D,M,$,re,De,Ue){return Da.apply(this,arguments)}(D,M,$,re,Wt,yn)}else if("consent"===nt){const[Wt]=Ht;D("consent","update",Wt)}else if("get"===nt){const[Wt,yn,Hn]=Ht;D("get",Wt,yn,Hn)}else if("set"===nt){const[Wt]=Ht;D("set",Wt)}else D(nt,...Ht)}catch(Wt){ms.error(Wt)}}),Ue.apply(this,arguments)}return function De(nt){return Ue.apply(this,arguments)}}(Ue,D,M,$),{gtagCore:Ue,wrappedGtag:window[De]}}(qt,Rr,ts,bi,bs);Ti=Ue,so=nt,Gi=!0}return qt[re]=function Fe(D,M,$,re,De,Ue,nt){return mt.apply(this,arguments)}(D,Rr,ts,M,so,bi,$),new Zt(D)}function qu(){return su.apply(this,arguments)}function su(){return(su=(0,q.Z)(function*(){if((0,ge.ru)()||!(0,ge.zI)()||!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}const rc="@firebase/analytics";!function Zd(){(0,ye._registerComponent)(new pe.wA(ct,(M,{options:$})=>Ao(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),$),"PUBLIC")),(0,ye._registerComponent)(new pe.wA("analytics-internal",function D(M){try{const $=M.getProvider(ct).getImmediate();return{logEvent:(re,De,Ue)=>function qc(D,M,$,re){D=(0,ge.m9)(D),function Gu(D,M,$,re,De){return Cl.apply(this,arguments)}(Ti,qt[D.app.options.appId],M,$,re).catch(De=>ms.error(De))}($,re,De,Ue)}}catch($){throw Ze.create("interop-component-reg-failed",{reason:$})}},"PRIVATE")),(0,ye.registerVersion)(rc,"0.10.0"),(0,ye.registerVersion)(rc,"0.10.0","esm2017")}();var ic=L(4408),Ku=L(7565);const Zc=new class bl extends Ku.v{}(class Yd extends ic.o{constructor(M,$){super(M,$),this.scheduler=M,this.work=$}schedule(M,$=0){return $>0?super.schedule(M,$):(this.delay=$,this.state=M,this.scheduler.flush(this),this)}execute(M,$){return $>0||this.closed?super.execute(M,$):this._execute(M,$)}requestAsyncId(M,$,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(M,$,re):(M.flush(this),0)}});var Qc=L(4986),Tl=L(8505),us=L(5363),Zu=L(9468);const da=new g.GfV("7.5.0"),uu="__angularfire_symbol__analyticsIsSupportedValue",Jr="__angularfire_symbol__analyticsIsSupported",Yu="__angularfire_symbol__remoteConfigIsSupportedValue",zi="__angularfire_symbol__remoteConfigIsSupported",hi="__angularfire_symbol__messagingIsSupportedValue",Sl="__angularfire_symbol__messagingIsSupported";function ls(D,M,$){if(M){if(1===M.length)return M[0];const Ue=M.filter(nt=>nt.app===$);if(1===Ue.length)return Ue[0]}return $.container.getProvider(D).getImmediate({optional:!0})}globalThis[Jr]||(globalThis[Jr]=qu().then(D=>globalThis[uu]=D).catch(()=>globalThis[uu]=!1)),globalThis[Sl]||(globalThis[Sl]=Cu().then(D=>globalThis[hi]=D).catch(()=>globalThis[hi]=!1)),globalThis[zi]||(globalThis[zi]=wr().then(D=>globalThis[Yu]=D).catch(()=>globalThis[Yu]=!1));const sc=(D,M)=>{const $=M?[M]:(0,W.C6)(),re=[];return $.forEach(De=>{De.container.getProvider(D).instances.forEach(nt=>{re.includes(nt)||re.push(nt)})}),re};function Hs(){}class Ri{constructor(M,$=Zc){this.zone=M,this.delegate=$}now(){return this.delegate.now()}schedule(M,$,re){const De=this.zone;return this.delegate.schedule(function(nt){De.runGuarded(()=>{M.apply(this,[nt])})},$,re)}}class ha{constructor(M){this.zone=M,this.task=null}call(M,$){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hs,{},Hs,Hs)),$.pipe((0,Tl.b)({next:re,complete:re,error:re})).subscribe(M).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let go=(()=>{class D{constructor($){this.ngZone=$,this.outsideAngular=$.runOutsideAngular(()=>new Ri(Zone.current)),this.insideAngular=$.run(()=>new Ri(Zone.current,Qc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function($){return new($||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function fa(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Ma(D){return D.pipe((0,us.Q)(fa().outsideAngular))}function Qu(D){return fa(),function Ba(D){return function($){return($=$.lift(new ha(D.ngZone))).pipe((0,Zu.R)(D.outsideAngular),(0,us.Q)(D.insideAngular))}}(fa())(D)}},2090:(jt,He,L)=>{L.d(He,{$s:()=>Me,BH:()=>he,G6:()=>Je,L:()=>Pe,LL:()=>Rt,Pz:()=>se,Sg:()=>Ve,UG:()=>me,US:()=>pe,ZB:()=>_e,ZR:()=>xt,aH:()=>O,b$:()=>ft,eu:()=>yt,hl:()=>at,jU:()=>Be,m9:()=>Xt,ne:()=>Nn,pd:()=>mi,r3:()=>br,ru:()=>pt,tV:()=>le,uI:()=>Ae,vZ:()=>Ut,w1:()=>Rn,xO:()=>Br,xb:()=>ar,z$:()=>Ge,zI:()=>tt,zd:()=>ur});const ye=function(ue){const ce=[];let Ce=0;for(let lt=0;lt<ue.length;lt++){let $e=ue.charCodeAt(lt);$e<128?ce[Ce++]=$e:$e<2048?(ce[Ce++]=$e>>6|192,ce[Ce++]=63&$e|128):55296==(64512&$e)&&lt+1<ue.length&&56320==(64512&ue.charCodeAt(lt+1))?($e=65536+((1023&$e)<<10)+(1023&ue.charCodeAt(++lt)),ce[Ce++]=$e>>18|240,ce[Ce++]=$e>>12&63|128,ce[Ce++]=$e>>6&63|128,ce[Ce++]=63&$e|128):(ce[Ce++]=$e>>12|224,ce[Ce++]=$e>>6&63|128,ce[Ce++]=63&$e|128)}return ce},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ue,ce){if(!Array.isArray(ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ce=ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,lt=[];for(let $e=0;$e<ue.length;$e+=3){const Et=ue[$e],we=$e+1<ue.length,ve=we?ue[$e+1]:0,ne=$e+2<ue.length,Se=ne?ue[$e+2]:0;let hn=(15&ve)<<2|Se>>6,On=63&Se;ne||(On=64,we||(hn=64)),lt.push(Ce[Et>>2],Ce[(3&Et)<<4|ve>>4],Ce[hn],Ce[On])}return lt.join("")},encodeString(ue,ce){return this.HAS_NATIVE_SUPPORT&&!ce?btoa(ue):this.encodeByteArray(ye(ue),ce)},decodeString(ue,ce){return this.HAS_NATIVE_SUPPORT&&!ce?atob(ue):function(ue){const ce=[];let Ce=0,lt=0;for(;Ce<ue.length;){const $e=ue[Ce++];if($e<128)ce[lt++]=String.fromCharCode($e);else if($e>191&&$e<224){const Et=ue[Ce++];ce[lt++]=String.fromCharCode((31&$e)<<6|63&Et)}else if($e>239&&$e<365){const ne=((7&$e)<<18|(63&ue[Ce++])<<12|(63&ue[Ce++])<<6|63&ue[Ce++])-65536;ce[lt++]=String.fromCharCode(55296+(ne>>10)),ce[lt++]=String.fromCharCode(56320+(1023&ne))}else{const Et=ue[Ce++],we=ue[Ce++];ce[lt++]=String.fromCharCode((15&$e)<<12|(63&Et)<<6|63&we)}}return ce.join("")}(this.decodeStringToByteArray(ue,ce))},decodeStringToByteArray(ue,ce){this.init_();const Ce=ce?this.charToByteMapWebSafe_:this.charToByteMap_,lt=[];for(let $e=0;$e<ue.length;){const Et=Ce[ue.charAt($e++)],ve=$e<ue.length?Ce[ue.charAt($e)]:0;++$e;const Se=$e<ue.length?Ce[ue.charAt($e)]:64;++$e;const bt=$e<ue.length?Ce[ue.charAt($e)]:64;if(++$e,null==Et||null==ve||null==Se||null==bt)throw new be;lt.push(Et<<2|ve>>4),64!==Se&&(lt.push(ve<<4&240|Se>>2),64!==bt&&lt.push(Se<<6&192|bt))}return lt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ue=0;ue<this.ENCODED_VALS.length;ue++)this.byteToCharMap_[ue]=this.ENCODED_VALS.charAt(ue),this.charToByteMap_[this.byteToCharMap_[ue]]=ue,this.byteToCharMapWebSafe_[ue]=this.ENCODED_VALS_WEBSAFE.charAt(ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ue]]=ue,ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ue)]=ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ue)]=ue)}}};class be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pe=function(ue){return function(ue){const ce=ye(ue);return pe.encodeByteArray(ce,!0)}(ue).replace(/\./g,"")},le=function(ue){try{return pe.decodeString(ue,!0)}catch(ce){console.error("base64Decode failed: ",ce)}return null};function _e(ue,ce){if(!(ce instanceof Object))return ce;switch(ce.constructor){case Date:return new Date(ce.getTime());case Object:void 0===ue&&(ue={});break;case Array:ue=[];break;default:return ce}for(const Ce in ce)!ce.hasOwnProperty(Ce)||!ht(Ce)||(ue[Ce]=_e(ue[Ce],ce[Ce]));return ue}function ht(ue){return"__proto__"!==ue}const ke=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ue=process.env.__FIREBASE_DEFAULTS__;return ue?JSON.parse(ue):void 0})()||(()=>{if(typeof document>"u")return;let ue;try{ue=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ce=ue&&le(ue[1]);return ce&&JSON.parse(ce)})()}catch(ue){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ue}`)}},O=()=>{var ue;return null===(ue=ke())||void 0===ue?void 0:ue.config},se=ue=>{var ce;return null===(ce=ke())||void 0===ce?void 0:ce[`_${ue}`]};class he{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ce,Ce)=>{this.resolve=ce,this.reject=Ce})}wrapCallback(ce){return(Ce,lt)=>{Ce?this.reject(Ce):this.resolve(lt),"function"==typeof ce&&(this.promise.catch(()=>{}),1===ce.length?ce(Ce):ce(Ce,lt))}}}function Ve(ue,ce){if(ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const lt=ce||"demo-project",$e=ue.iat||0,Et=ue.sub||ue.user_id;if(!Et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const we=Object.assign({iss:`https://securetoken.google.com/${lt}`,aud:lt,iat:$e,exp:$e+3600,auth_time:$e,sub:Et,user_id:Et,firebase:{sign_in_provider:"custom",identities:{}}},ue);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(we)),""].join(".")}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function me(){var ue;const ce=null===(ue=ke())||void 0===ue?void 0:ue.forceEnvironment;if("node"===ce)return!0;if("browser"===ce)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Be(){return"object"==typeof self&&self.self===self}function pt(){const ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ue&&void 0!==ue.id}function ft(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Rn(){const ue=Ge();return ue.indexOf("MSIE ")>=0||ue.indexOf("Trident/")>=0}function Je(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function at(){try{return"object"==typeof indexedDB}catch{return!1}}function yt(){return new Promise((ue,ce)=>{try{let Ce=!0;const lt="validate-browser-context-for-indexeddb-analytics-module",$e=self.indexedDB.open(lt);$e.onsuccess=()=>{$e.result.close(),Ce||self.indexedDB.deleteDatabase(lt),ue(!0)},$e.onupgradeneeded=()=>{Ce=!1},$e.onerror=()=>{var Et;ce((null===(Et=$e.error)||void 0===Et?void 0:Et.message)||"")}}catch(Ce){ce(Ce)}})}function tt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xt extends Error{constructor(ce,Ce,lt){super(Ce),this.code=ce,this.customData=lt,this.name="FirebaseError",Object.setPrototypeOf(this,xt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rt.prototype.create)}}class Rt{constructor(ce,Ce,lt){this.service=ce,this.serviceName=Ce,this.errors=lt}create(ce,...Ce){const lt=Ce[0]||{},$e=`${this.service}/${ce}`,Et=this.errors[ce],we=Et?function Pt(ue,ce){return ue.replace(vt,(Ce,lt)=>{const $e=ce[lt];return null!=$e?String($e):`<${lt}?>`})}(Et,lt):"Error";return new xt($e,`${this.serviceName}: ${we} (${$e}).`,lt)}}const vt=/\{\$([^}]+)}/g;function br(ue,ce){return Object.prototype.hasOwnProperty.call(ue,ce)}function ar(ue){for(const ce in ue)if(Object.prototype.hasOwnProperty.call(ue,ce))return!1;return!0}function Ut(ue,ce){if(ue===ce)return!0;const Ce=Object.keys(ue),lt=Object.keys(ce);for(const $e of Ce){if(!lt.includes($e))return!1;const Et=ue[$e],we=ce[$e];if(Xn(Et)&&Xn(we)){if(!Ut(Et,we))return!1}else if(Et!==we)return!1}for(const $e of lt)if(!Ce.includes($e))return!1;return!0}function Xn(ue){return null!==ue&&"object"==typeof ue}function Br(ue){const ce=[];for(const[Ce,lt]of Object.entries(ue))Array.isArray(lt)?lt.forEach($e=>{ce.push(encodeURIComponent(Ce)+"="+encodeURIComponent($e))}):ce.push(encodeURIComponent(Ce)+"="+encodeURIComponent(lt));return ce.length?"&"+ce.join("&"):""}function ur(ue){const ce={};return ue.replace(/^\?/,"").split("&").forEach(lt=>{if(lt){const[$e,Et]=lt.split("=");ce[decodeURIComponent($e)]=decodeURIComponent(Et)}}),ce}function mi(ue){const ce=ue.indexOf("?");if(!ce)return"";const Ce=ue.indexOf("#",ce);return ue.substring(ce,Ce>0?Ce:void 0)}function Nn(ue,ce){const Ce=new zt(ue,ce);return Ce.subscribe.bind(Ce)}class zt{constructor(ce,Ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ce,this.task.then(()=>{ce(this)}).catch(lt=>{this.error(lt)})}next(ce){this.forEachObserver(Ce=>{Ce.next(ce)})}error(ce){this.forEachObserver(Ce=>{Ce.error(ce)}),this.close(ce)}complete(){this.forEachObserver(ce=>{ce.complete()}),this.close()}subscribe(ce,Ce,lt){let $e;if(void 0===ce&&void 0===Ce&&void 0===lt)throw new Error("Missing Observer.");$e=function $r(ue,ce){if("object"!=typeof ue||null===ue)return!1;for(const Ce of ce)if(Ce in ue&&"function"==typeof ue[Ce])return!0;return!1}(ce,["next","error","complete"])?ce:{next:ce,error:Ce,complete:lt},void 0===$e.next&&($e.next=fr),void 0===$e.error&&($e.error=fr),void 0===$e.complete&&($e.complete=fr);const Et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$e.error(this.finalError):$e.complete()}catch{}}),this.observers.push($e),Et}unsubscribeOne(ce){void 0===this.observers||void 0===this.observers[ce]||(delete this.observers[ce],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ce){if(!this.finalized)for(let Ce=0;Ce<this.observers.length;Ce++)this.sendOne(Ce,ce)}sendOne(ce,Ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ce])try{Ce(this.observers[ce])}catch(lt){typeof console<"u"&&console.error&&console.error(lt)}})}close(ce){this.finalized||(this.finalized=!0,void 0!==ce&&(this.finalError=ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fr(){}const Fn=1e3,Sr=2,Oe=144e5,Mt=.5;function Me(ue,ce=Fn,Ce=Sr){const lt=ce*Math.pow(Ce,ue),$e=Math.round(Mt*lt*(Math.random()-.5)*2);return Math.min(Oe,lt+$e)}function Xt(ue){return ue&&ue._delegate?ue._delegate:ue}},4411:(jt,He,L)=>{L.d(He,{Y:()=>ie});var g=L(5861),W=L(9841),q=L(3900),ye=L(9646),ge=L(4004),pe=L(4650),be=L(2255),F=L(1205),Pe=L(377),le=L(9062);let ie=(()=>{class _e{constructor(Te,ot,rt,Le){this.db=Te,this.auth=ot,this.storage=rt,this.router=Le,this.pageClips=[],this.pendingRequest=!1,this.clipsCollection=Te.collection("clips")}createClip(Te){return this.clipsCollection.add(Te)}getUserClips(Te){return(0,W.a)([this.auth.user,Te]).pipe((0,q.w)(ot=>{const[rt,Le]=ot;return rt?this.clipsCollection.ref.where("uid","==",rt.uid).orderBy("timestamp","1"===Le?"desc":"asc").get():(0,ye.of)([])}),(0,ge.U)(ot=>ot.docs))}updateClip(Te,ot){return this.clipsCollection.doc(Te).update({title:ot})}deleteClip(Te){var ot=this;return(0,g.Z)(function*(){const rt=ot.storage.ref(`clips/${Te.fileName}.mp4`),Le=ot.storage.ref(`screenshots/${Te.screenshotFileName}.png`);rt.delete(),Le.delete(),yield ot.clipsCollection.doc(Te.docID).delete()})()}getClips(){var Te=this;return(0,g.Z)(function*(){if(Te.pendingRequest)return;Te.pendingRequest=!0;let ot=Te.clipsCollection.ref.orderBy("timestamp","desc").limit(6);const{length:rt}=Te.pageClips;if(rt){const ke=Te.pageClips[rt-1].docID,st=yield Te.clipsCollection.doc(ke).get().toPromise();ot=ot.startAfter(st)}(yield ot.get()).forEach(ke=>{Te.pageClips.push({docID:ke.id,uid:ke.data().uid,displayName:ke.data().displayName,title:ke.data().title,fileName:ke.data().fileName,url:ke.data().url,timestamp:ke.data().timestamp,screenshotURL:ke.data().screenshotURL,screenshotFileName:ke.data().screenshotFileName})}),Te.pendingRequest=!1})()}resolve(Te,ot){return this.clipsCollection.doc(Te.params.id).get().pipe((0,ge.U)(rt=>rt.data()||(this.router.navigate(["/"]),null)))}}return _e.\u0275fac=function(Te){return new(Te||_e)(pe.LFG(be.ST),pe.LFG(F.zQ),pe.LFG(Pe.Q1),pe.LFG(le.F0))},_e.\u0275prov=pe.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})()},1609:(jt,He,L)=>{L.d(He,{Z:()=>W});var g=L(4650);let W=(()=>{class q{constructor(){this.modals=[]}register(ge){this.modals.push({id:ge,visible:!1})}unregister(ge){this.modals=this.modals.filter(pe=>pe.id!==ge)}isModalVisible(ge){return!!this.modals.find(pe=>pe.id===ge)?.visible}toggleModal(ge){const pe=this.modals.find(be=>be.id===ge);pe&&(pe.visible=!pe.visible)}}return q.\u0275fac=function(ge){return new(ge||q)},q.\u0275prov=g.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})()},8549:(jt,He,L)=>{L.d(He,{w:()=>ye});var g=L(4650),W=L(6895);const q=["*"];let ye=(()=>{class ge{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}}return ge.\u0275fac=function(be){return new(be||ge)},ge.\u0275cmp=g.Xpm({type:ge,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:q,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(be,F){1&be&&(g.F$t(),g.TgZ(0,"div",0),g.Hsn(1),g.qZA()),2&be&&g.Q6J("ngClass",F.bgColor)},dependencies:[W.mk]}),ge})()},235:(jt,He,L)=>{L.d(He,{a:()=>ht});var g=L(4006),W=L(4650),q=L(6895),ye=L(1094);function ge(Te,ot){1&Te&&(W.TgZ(0,"p",3),W._uU(1," Password must be at least 8 characters long "),W._UZ(2,"br"),W._uU(3," Have uppercase and lowercase letters and one number "),W.qZA())}function pe(Te,ot){1&Te&&(W.TgZ(0,"p",3),W._uU(1," Field is required "),W.qZA())}function be(Te,ot){1&Te&&(W.TgZ(0,"p",3),W._uU(1," Length must be greater than 2 "),W.qZA())}function F(Te,ot){1&Te&&(W.TgZ(0,"p",3),W._uU(1," You must enter a valid email "),W.qZA())}function Pe(Te,ot){1&Te&&(W.TgZ(0,"p",3),W._uU(1," You must be 18 or older to register "),W.qZA())}function le(Te,ot){1&Te&&(W.TgZ(0,"p",3),W._uU(1," Passwords do not match "),W.qZA())}function ie(Te,ot){1&Te&&(W.TgZ(0,"p",3),W._uU(1," Email already exist. Please try with another email. "),W.qZA())}function _e(Te,ot){if(1&Te&&(W.ynx(0),W.YNc(1,ge,4,0,"p",2),W.YNc(2,pe,2,0,"p",2),W.YNc(3,be,2,0,"p",2),W.YNc(4,F,2,0,"p",2),W.YNc(5,Pe,2,0,"p",2),W.YNc(6,le,2,0,"p",2),W.YNc(7,ie,2,0,"p",2),W.BQk()),2&Te){const rt=W.oxw();W.xp6(1),W.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.pattern),W.xp6(1),W.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.required),W.xp6(1),W.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.minlength),W.xp6(1),W.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.email),W.xp6(1),W.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.min),W.xp6(1),W.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.noMatch),W.xp6(1),W.Q6J("ngIf",null==rt.control.errors?null:rt.control.errors.emailTaken)}}let ht=(()=>{class Te{constructor(){this.control=new g.NI,this.type="text",this.placeholder="",this.format=""}}return Te.\u0275fac=function(rt){return new(rt||Te)},Te.\u0275cmp=W.Xpm({type:Te,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeholder:"placeholder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-blue-400",3,"formControl","type","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(rt,Le){1&rt&&(W._UZ(0,"input",0),W.YNc(1,_e,8,7,"ng-container",1)),2&rt&&(W.Q6J("formControl",Le.control)("type",Le.type)("placeholder",Le.placeholder)("mask",Le.format)("dropSpecialCharacters",!1),W.xp6(1),W.Q6J("ngIf",Le.control.touched||Le.control.dirty))},dependencies:[q.O5,ye.hx,g.Fj,g.JJ,g.oH]}),Te})()},3446:(jt,He,L)=>{L.d(He,{z:()=>be});var g=L(4650),W=L(1609),q=L(6895);const ye=[[["","heading",""]],"*"],ge=function(F){return{hidden:F}},pe=["[heading]","*"];let be=(()=>{class F{constructor(le,ie){this.modal=le,this.el=ie,this.modalID=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}closeModal(){this.modal.toggleModal(this.modalID)}}return F.\u0275fac=function(le){return new(le||F)(g.Y36(W.Z),g.Y36(g.SBq))},F.\u0275cmp=g.Xpm({type:F,selectors:[["app-modal"]],inputs:{modalID:"modalID"},ngContentSelectors:pe,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(le,ie){1&le&&(g.F$t(ye),g.TgZ(0,"div",0)(1,"div",1)(2,"div",2),g.NdJ("click",function(){return ie.closeModal()}),g._UZ(3,"div",3),g.qZA(),g.TgZ(4,"span",4),g._uU(5,"\u200b"),g.qZA(),g.TgZ(6,"div",5)(7,"div",6)(8,"div",7),g.Hsn(9),g.TgZ(10,"div",8),g.NdJ("click",function(){return ie.closeModal()}),g._uU(11," \u2715 "),g.qZA()(),g.Hsn(12,1),g.qZA()()()()),2&le&&g.Q6J("ngClass",g.VKq(1,ge,!ie.modal.isModalVisible(ie.modalID)))},dependencies:[q.mk]}),F})()},4466:(jt,He,L)=>{L.d(He,{m:()=>ge});var g=L(6895),W=L(4006),q=L(1094),ye=L(4650);let ge=(()=>{class pe{}return pe.\u0275fac=function(F){return new(F||pe)},pe.\u0275mod=ye.oAB({type:pe}),pe.\u0275inj=ye.cJS({imports:[g.ez,q.yI.forRoot(),W.UX]}),pe})()},2950:(jt,He,L)=>{var g=L(1481),W=L(2011),q=L(1205),ye=L(2255),ge=L(377),pe=L(5861),be=L(9062),F=L(4650),Pe=L(6895),le=L(4411);let ie=(()=>{class Oe{constructor(Me){this.datePipe=Me}transform(Me){if(!Me)return"";const Ct=Me.toDate();return this.datePipe.transform(Ct,"mediumDate")}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.Y36(Pe.uU,16))},Oe.\u0275pipe=F.Yjl({name:"fbTimestamp",type:Oe,pure:!0}),Oe})();const _e=function(Oe){return["/","clip",Oe]};function ht(Oe,Mt){if(1&Oe&&(F.TgZ(0,"a",2),F._UZ(1,"img",3),F.TgZ(2,"div",4)(3,"div",5)(4,"div",6),F.O4$(),F.TgZ(5,"svg",7),F._UZ(6,"path",8),F.qZA()()()(),F.kcU(),F.TgZ(7,"div",9)(8,"h2",10),F._uU(9),F.qZA(),F.TgZ(10,"p",11),F._uU(11),F.TgZ(12,"span",12),F._uU(13),F.ALo(14,"fbTimestamp"),F.qZA()()()()),2&Oe){const Me=Mt.$implicit;F.Q6J("routerLink",F.VKq(7,_e,Me.docID)),F.xp6(1),F.Q6J("src",Me.screenshotURL,F.LSH),F.xp6(8),F.hij(" ",Me.title," "),F.xp6(2),F.hij(" ",Me.displayName," \xb7 "),F.xp6(2),F.hij(" ",F.lcZ(14,5,Me.timestamp)," ")}}let Te=(()=>{class Oe{constructor(Me){this.clipService=Me,this.scrollable=!0,this.handleScroll=()=>{const{scrollTop:Ct,offsetHeight:wn}=document.documentElement,{innerHeight:Xt}=window;Math.round(Ct)+Xt<wn-100&&this.clipService.getClips()},this.clipService.getClips()}ngOnInit(){this.scrollable&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){this.scrollable&&window.removeEventListener("scroll",this.handleScroll),this.clipService.pageClips=[]}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.Y36(le.Y))},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-clips-list"]],inputs:{scrollable:"scrollable"},features:[F._Bn([Pe.uU])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl \n\t\tshadow-xl bg-secondary transform \n\t\thover:-translate-y-2 hover:shadow-2xl \n\t\ttransition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(Me,Ct){1&Me&&(F.TgZ(0,"div",0),F.YNc(1,ht,15,9,"a",1),F.qZA()),2&Me&&(F.xp6(1),F.Q6J("ngForOf",Ct.clipService.pageClips))},dependencies:[Pe.sg,be.rH,ie]}),Oe})(),ot=(()=>{class Oe{}return Oe.\u0275fac=function(Me){return new(Me||Oe)},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(Me,Ct){1&Me&&(F.TgZ(0,"section",0)(1,"video",1),F._UZ(2,"source",2),F.qZA(),F._UZ(3,"div",3),F.TgZ(4,"div",4),F._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),F.qZA(),F.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),F._uU(13,"Clip it and ship it!"),F.qZA(),F.TgZ(14,"p"),F._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),F.qZA()()()(),F.TgZ(16,"section",9)(17,"h1",10),F._uU(18,"Latest"),F.qZA(),F._UZ(19,"app-clips-list"),F.qZA())},dependencies:[Te]}),Oe})();function rt(Oe,Mt){if(1&Oe&&(F.TgZ(0,"section",4)(1,"div",5)(2,"h1",6),F._uU(3),F.qZA(),F.TgZ(4,"div",7),F._uU(5),F.TgZ(6,"span"),F._uU(7),F.ALo(8,"fbTimestamp"),F.qZA()(),F.TgZ(9,"div",8)(10,"video",9),F._UZ(11,"source",10),F.qZA()()()()),2&Oe){const Me=F.oxw();F.xp6(3),F.hij(" ",Me.clip.title," "),F.xp6(2),F.hij(" Uploaded By ",Me.clip.displayName," on "),F.xp6(2),F.Oqu(F.lcZ(8,4,Me.clip.timestamp)),F.xp6(4),F.Q6J("src",Me.clip.url||"",F.LSH)}}let Le=(()=>{class Oe{constructor(Me,Ct){this.route=Me,this.router=Ct}ngOnInit(){this.route.data.subscribe(Me=>{this.clip=Me.clip})}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.Y36(be.gz),F.Y36(be.F0))},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-clip"]],features:[F._Bn([Pe.uU])],decls:5,vars:2,consts:[["class","container mx-auto my-8 bg-secondary p-6",4,"ngIf"],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"],[3,"scrollable"],[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col","aspect-video"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative"],["controls","","crossorigin","",1,"mx-auto"],["type","video/mp4",3,"src"]],template:function(Me,Ct){1&Me&&(F.YNc(0,rt,12,6,"section",0),F.TgZ(1,"div",1)(2,"h2",2),F._uU(3,"More Clips"),F.qZA(),F._UZ(4,"app-clips-list",3),F.qZA()),2&Me&&(F.Q6J("ngIf",Ct.clip),F.xp6(4),F.Q6J("scrollable",!1))},dependencies:[Pe.O5,Te,ie]}),Oe})(),ke=(()=>{class Oe{}return Oe.\u0275fac=function(Me){return new(Me||Oe)},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-not-found"]],decls:20,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-blue-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-blue-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-blue-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-blue-400"],[1,"corner","border-blue-400","border-4"],[1,"corner","two","border-blue-400","border-4"],[1,"corner","three","border-blue-400","border-4"],[1,"corner","four","border-blue-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-blue-400","left-0","right-0","absolute"],[1,"container","mx-auto","text-center","mt-60"],[1,"text-4xl","font-bold","mb-4"]],template:function(Me,Ct){1&Me&&(F.TgZ(0,"div",0)(1,"span",1),F._uU(2,"404"),F.qZA(),F._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),F.qZA(),F.TgZ(15,"div",14)(16,"h2",15),F._uU(17,"Page not found"),F.qZA(),F.TgZ(18,"p"),F._uU(19," Looks like the page you're looking for is gone or doesn't exist. "),F.qZA()())}}),Oe})();const st=[{path:"",component:ot},{path:"clip/:id",component:Le,resolve:{clip:le.Y}},{path:"",loadChildren:(Oe=(0,pe.Z)(function*(){return(yield L.e(829).then(L.bind(L,1829))).VideoModule}),function(){return Oe.apply(this,arguments)})},{path:"**",component:ke}];var Oe;let z=(()=>{class Oe{}return Oe.\u0275fac=function(Me){return new(Me||Oe)},Oe.\u0275mod=F.oAB({type:Oe}),Oe.\u0275inj=F.cJS({imports:[be.Bz.forRoot(st),be.Bz]}),Oe})();var O=L(4006),se=L(4466);let he=(()=>{class Oe{}return Oe.\u0275fac=function(Me){return new(Me||Oe)},Oe.\u0275mod=F.oAB({type:Oe}),Oe.\u0275inj=F.cJS({imports:[Pe.ez,se.m,O.UX,O.u5]}),Oe})();var Ve=L(4004),Ge=L(4986),Ae=L(7272),me=L(5698),Be=L(4482),pt=L(5403),ft=L(5032),Rn=L(9718),Qe=L(5577),qe=L(8421);function Je(Oe,Mt){return Mt?Me=>(0,Ae.z)(Mt.pipe((0,me.q)(1),function Dt(){return(0,Be.e)((Oe,Mt)=>{Oe.subscribe((0,pt.x)(Mt,ft.Z))})}()),Me.pipe(Je(Oe))):(0,Qe.z)((Me,Ct)=>(0,qe.Xf)(Oe(Me,Ct)).pipe((0,me.q)(1),(0,Rn.h)(Me)))}var at=L(9751),yt=L(3532);var Rt=L(9300),Pt=L(3900),vt=L(9646);let tn=(()=>{class Oe{constructor(Me,Ct,wn,Xt){this.auth=Me,this.db=Ct,this.router=wn,this.route=Xt,this.redirect=!1,this.usersCollection=Ct.collection("users"),this.isAuthenticated$=Me.user.pipe((0,Ve.U)(ue=>!!ue)),this.isAuthenticatedWithDelay$=this.isAuthenticated$.pipe(function xt(Oe,Mt=Ge.z){const Me=function Xe(Oe=0,Mt,Me=Ge.P){let Ct=-1;return null!=Mt&&((0,yt.K)(Mt)?Me=Mt:Ct=Mt),new at.y(wn=>{let Xt=function tt(Oe){return Oe instanceof Date&&!isNaN(Oe)}(Oe)?+Oe-Me.now():Oe;Xt<0&&(Xt=0);let ue=0;return Me.schedule(function(){wn.closed||(wn.next(ue++),0<=Ct?this.schedule(void 0,Ct):wn.complete())},Xt)})}(Oe,Mt);return Je(()=>Me)}(1e3)),this.router.events.pipe((0,Rt.h)(ue=>ue instanceof be.m2),(0,Ve.U)(ue=>this.route.firstChild),(0,Pt.w)(ue=>ue?.data??(0,vt.of)({authOnly:!1}))).subscribe(ue=>{this.redirect=ue.authOnly})}createUser(Me){var Ct=this;return(0,pe.Z)(function*(){if(!Me.password)throw new Error("Password not provided!");const{user:wn}=yield Ct.auth.createUserWithEmailAndPassword(Me.email,Me.password);if(!wn)throw new Error("User cannot be found");yield Ct.usersCollection.doc(wn.uid).set({name:Me.name,email:Me.email,age:Me.age,phoneNumber:Me.phoneNumber}),yield wn.updateProfile({displayName:Me.name})})()}logout(Me){var Ct=this;return(0,pe.Z)(function*(){Me&&Me.preventDefault(),yield Ct.auth.signOut(),Ct.redirect&&(yield Ct.router.navigateByUrl("/"))})()}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.LFG(q.zQ),F.LFG(ye.ST),F.LFG(be.F0),F.LFG(be.gz))},Oe.\u0275prov=F.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})();var nn=L(1609),gn=L(3446);const $n=["*"];let Nr=(()=>{class Oe{constructor(){this.tabTitle="",this.active=!1}}return Oe.\u0275fac=function(Me){return new(Me||Oe)},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:$n,decls:2,vars:2,template:function(Me,Ct){1&Me&&(F.F$t(),F.TgZ(0,"div"),F.Hsn(1),F.qZA()),2&Me&&F.ekj("hidden",!Ct.active)}}),Oe})();const _n=function(Oe,Mt){return{"hover:text-blue-400":Oe,"hover:text-white text-white bg-blue-400":Mt}};function Jn(Oe,Mt){if(1&Oe){const Me=F.EpF();F.TgZ(0,"li",2)(1,"a",3),F.NdJ("click",function(){const Xt=F.CHM(Me).$implicit,ue=F.oxw();return F.KtG(ue.selectTab(Xt))}),F._uU(2),F.qZA()()}if(2&Oe){const Me=Mt.$implicit;F.xp6(1),F.Q6J("ngClass",F.WLB(2,_n,!Me.active,Me.active)),F.xp6(1),F.Oqu(Me.tabTitle)}}const br=["*"];let Xr=(()=>{class Oe{constructor(){this.tabs=new F.n_E}ngAfterContentInit(){const Me=this.tabs?.filter(Ct=>Ct.active);(!Me||0===Me.length)&&this.selectTab(this.tabs.first)}selectTab(Me){return this.tabs?.forEach(Ct=>{Ct.active=!1}),Me.active=!0,!1}}return Oe.\u0275fac=function(Me){return new(Me||Oe)},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-tabs-container"]],contentQueries:function(Me,Ct,wn){if(1&Me&&F.Suo(wn,Nr,4),2&Me){let Xt;F.iGM(Xt=F.CRH())&&(Ct.tabs=Xt)}},ngContentSelectors:br,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-blue-400",3,"ngClass","click"]],template:function(Me,Ct){1&Me&&(F.F$t(),F.TgZ(0,"ul",0),F.YNc(1,Jn,3,5,"li",1),F.qZA(),F.Hsn(2)),2&Me&&(F.xp6(1),F.Q6J("ngForOf",Ct.tabs))},dependencies:[Pe.mk,Pe.sg]}),Oe})();var ar=L(8549);function on(Oe,Mt){if(1&Oe&&(F.TgZ(0,"app-alert",11),F._uU(1),F.qZA()),2&Oe){const Me=F.oxw();F.Q6J("color",Me.alertColor),F.xp6(1),F.hij(" ",Me.alertMsg,"\n")}}function Ut(Oe,Mt){1&Oe&&(F.TgZ(0,"p",12),F._uU(1," Invalid Email "),F.qZA())}function Xn(Oe,Mt){1&Oe&&(F.TgZ(0,"p",12),F._uU(1," Invalid password "),F.qZA())}let kr=(()=>{class Oe{constructor(Me){this.auth=Me,this.showAlert=!1,this.alertColor="blue",this.alertMsg="",this.inSubmission=!1,this.credentials={email:"",password:""}}login(){var Me=this;return(0,pe.Z)(function*(){Me.showAlert=!0,Me.inSubmission=!0,Me.alertColor="blue",Me.alertMsg="Logging in please wait ...";const{email:Ct,password:wn}=Me.credentials;try{yield Me.auth.signInWithEmailAndPassword(Ct,wn)}catch(Xt){return console.error(Xt),Me.inSubmission=!1,Me.alertMsg="An unexpected error ocurred, please try again later",void(Me.alertColor="red")}Me.alertMsg="Logged in with success!",Me.alertColor="green"})()}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.Y36(q.zQ))},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["name","email","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?","placeholder","Enter Email","required","","type","email",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-blue-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["minlength","8","name","password","placeholder","Password","required","","type","password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-blue-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-blue-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-blue-500","disabled:opacity-50","disabled:bg-blue-400",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(Me,Ct){if(1&Me&&(F.YNc(0,on,2,2,"app-alert",0),F.TgZ(1,"form",1,2),F.NdJ("ngSubmit",function(){return Ct.login()}),F.TgZ(3,"div",3)(4,"label",4),F._uU(5,"Email"),F.qZA(),F.TgZ(6,"input",5,6),F.NdJ("ngModelChange",function(Xt){return Ct.credentials.email=Xt}),F.qZA(),F.YNc(8,Ut,2,0,"p",7),F.qZA(),F.TgZ(9,"div",3)(10,"label",4),F._uU(11,"Password"),F.qZA(),F.TgZ(12,"input",8,9),F.NdJ("ngModelChange",function(Xt){return Ct.credentials.password=Xt}),F.qZA(),F.YNc(14,Xn,2,0,"p",7),F.qZA(),F.TgZ(15,"button",10),F._uU(16," Submit "),F.qZA()()),2&Me){const wn=F.MAs(2),Xt=F.MAs(7),ue=F.MAs(13);F.Q6J("ngIf",Ct.showAlert),F.xp6(6),F.Q6J("ngModel",Ct.credentials.email),F.xp6(2),F.Q6J("ngIf",Xt.errors&&Xt.touched&&Xt.dirty),F.xp6(4),F.Q6J("ngModel",Ct.credentials.password),F.xp6(2),F.Q6J("ngIf",ue.errors&&ue.touched&&ue.dirty),F.xp6(1),F.Q6J("disabled",wn.invalid||Ct.inSubmission)}},dependencies:[Pe.O5,ar.w,O._Y,O.Fj,O.JJ,O.JL,O.Q7,O.wO,O.c5,O.On,O.F]}),Oe})();class Br{static match(Mt,Me){return Ct=>{const wn=Ct.get(Mt),Xt=Ct.get(Me);if(!wn||!Xt)return console.error("Form controls cannot be found in the form group."),{controlNotFound:!0};const ue=wn.value===Xt.value?null:{noMatch:!0};return Xt.setErrors(ue),ue}}}let ur=(()=>{class Oe{constructor(Me){var Ct=this;this.auth=Me,this.validate=function(){var wn=(0,pe.Z)(function*(Xt){return Ct.auth.fetchSignInMethodsForEmail(Xt.value).then(ue=>ue.length?{emailTaken:!0}:null)});return function(Xt){return wn.apply(this,arguments)}}()}registerOnValidatorChange(Me){throw new Error("Method not implemented.")}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.LFG(q.zQ))},Oe.\u0275prov=F.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})();var mi=L(235);function zn(Oe,Mt){if(1&Oe&&(F.TgZ(0,"app-alert",11),F._uU(1),F.qZA()),2&Oe){const Me=F.oxw();F.Q6J("color",Me.alertColor),F.xp6(1),F.hij(" ",Me.alertMsg,"\n")}}let Nn=(()=>{class Oe{constructor(Me,Ct){this.auth=Me,this.emailTaken=Ct,this.showAlert=!1,this.alertMsg="",this.alertColor="blue",this.inSubmission=!1,this.name=new O.NI("",[O.kI.required,O.kI.minLength(2)]),this.email=new O.NI("",[O.kI.required,O.kI.email],[this.emailTaken.validate]),this.age=new O.NI(null,[O.kI.required,O.kI.min(18)]),this.password=new O.NI("",[O.kI.required,O.kI.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new O.NI("",[O.kI.required]),this.phoneNumber=new O.NI("",[O.kI.required,O.kI.minLength(14),O.kI.maxLength(14)]),this.registerForm=new O.cw({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[Br.match("password","confirm_password")])}register(){var Me=this;return(0,pe.Z)(function*(){Me.showAlert=!0,Me.alertMsg="Please wait! Your account is being created ...",Me.alertColor="blue",Me.inSubmission=!0;try{yield Me.auth.createUser(Me.registerForm.value)}catch(Ct){return console.error(Ct),Me.alertMsg="An unexpected error ocurred, please try again later",Me.alertColor="red",void(Me.inSubmission=!1)}Me.alertMsg="Success! Your account has been created.",Me.alertColor="green"})()}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.Y36(tn),F.Y36(ur))},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-register"]],decls:28,vars:9,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeholder","Enter name",3,"control"],["type","email","placeholder","Enter Email",3,"control"],["type","number","placeholder","Enter Age",3,"control"],["type","password","placeholder","Password",3,"control"],["type","password","placeholder","Confirm Password",3,"control"],["type","text","placeholder","Phone Number","format","(000)-000-0000",3,"control"],["type","submit",1,"block","w-full","bg-blue-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-blue-500","disabled:opacity-50","disabled:bg-blue-400",3,"disabled"],[3,"color"]],template:function(Me,Ct){1&Me&&(F.YNc(0,zn,2,2,"app-alert",0),F.TgZ(1,"form",1),F.NdJ("ngSubmit",function(){return Ct.register()}),F.TgZ(2,"div",2)(3,"label",3),F._uU(4,"Name"),F.qZA(),F._UZ(5,"app-input",4),F.qZA(),F.TgZ(6,"div",2)(7,"label",3),F._uU(8,"Email"),F.qZA(),F._UZ(9,"app-input",5),F.qZA(),F.TgZ(10,"div",2)(11,"label",3),F._uU(12,"Age"),F.qZA(),F._UZ(13,"app-input",6),F.qZA(),F.TgZ(14,"div",2)(15,"label",3),F._uU(16,"Password"),F.qZA(),F._UZ(17,"app-input",7),F.qZA(),F.TgZ(18,"div",2)(19,"label",3),F._uU(20,"Confirm Password"),F.qZA(),F._UZ(21,"app-input",8),F.qZA(),F.TgZ(22,"div",2)(23,"label",3),F._uU(24,"Phone Number"),F.qZA(),F._UZ(25,"app-input",9),F.qZA(),F.TgZ(26,"button",10),F._uU(27," Submit "),F.qZA()()),2&Me&&(F.Q6J("ngIf",Ct.showAlert),F.xp6(1),F.Q6J("formGroup",Ct.registerForm),F.xp6(4),F.Q6J("control",Ct.name),F.xp6(4),F.Q6J("control",Ct.email),F.xp6(4),F.Q6J("control",Ct.age),F.xp6(4),F.Q6J("control",Ct.password),F.xp6(4),F.Q6J("control",Ct.confirm_password),F.xp6(4),F.Q6J("control",Ct.phoneNumber),F.xp6(1),F.Q6J("disabled",Ct.registerForm.invalid||Ct.inSubmission))},dependencies:[Pe.O5,ar.w,mi.a,O._Y,O.JL,O.sg]}),Oe})(),zt=(()=>{class Oe{constructor(Me){this.modal=Me}ngOnInit(){this.modal.register("auth")}ngOnDestroy(){this.modal.unregister("auth")}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.Y36(nn.Z))},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-auth-modal"]],decls:8,vars:0,consts:[["modalID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","Login"],["tabTitle","Register"]],template:function(Me,Ct){1&Me&&(F.TgZ(0,"app-modal",0)(1,"p",1),F._uU(2,"Your Account"),F.qZA(),F.TgZ(3,"app-tabs-container")(4,"app-tab",2),F._UZ(5,"app-login"),F.qZA(),F.TgZ(6,"app-tab",3),F._UZ(7,"app-register"),F.qZA()()())},dependencies:[gn.z,Nr,Xr,kr,Nn]}),Oe})();function rn(Oe,Mt){if(1&Oe){const Me=F.EpF();F.TgZ(0,"li")(1,"a",8),F.NdJ("click",function(wn){F.CHM(Me);const Xt=F.oxw();return F.KtG(Xt.openModal(wn))}),F._uU(2,"Login / Register"),F.qZA()()}}const $r=function(){return{exact:!0}},fr=function(){return{sort:"1"}};function an(Oe,Mt){1&Oe&&(F.TgZ(0,"li")(1,"a",9),F._uU(2,"Manage"),F.qZA()(),F.TgZ(3,"li")(4,"a",10),F._uU(5,"Upload"),F.qZA()()),2&Oe&&(F.xp6(1),F.Q6J("routerLinkActiveOptions",F.DdM(3,$r))("queryParams",F.DdM(4,fr)),F.xp6(3),F.Q6J("routerLinkActiveOptions",F.DdM(5,$r)))}function Tr(Oe,Mt){if(1&Oe){const Me=F.EpF();F.TgZ(0,"ul",11)(1,"li")(2,"a",12),F.NdJ("click",function(wn){F.CHM(Me);const Xt=F.oxw();return F.KtG(Xt.auth.logout(wn))}),F._uU(3," Logout "),F.TgZ(4,"span",13),F._uU(5," logout "),F.qZA()()()()}}let lr=(()=>{class Oe{constructor(Me,Ct){this.modal=Me,this.auth=Ct}openModal(Me){Me.preventDefault(),this.modal.toggleModal("auth")}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.Y36(nn.Z),F.Y36(tn))},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-nav"]],decls:12,vars:7,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4","font-medium"],["routerLink","/",1,"text-3xl","text-blue-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["class","flex flex-row ml-auto",4,"ngIf"],["href","#",1,"px-2",3,"click"],["routerLink","manage","routerLinkActive","text-blue-400",1,"px-2",3,"routerLinkActiveOptions","queryParams"],["routerLink","upload","routerLinkActive","text-blue-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"flex","flex-row","ml-auto"],[1,"px-2",3,"click"],[1,"material-symbols-outlined","logout"]],template:function(Me,Ct){if(1&Me&&(F.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),F._uU(3,"Clipz"),F.qZA(),F.TgZ(4,"div",3)(5,"ul",4),F.YNc(6,rn,3,0,"li",5),F.ALo(7,"async"),F.YNc(8,an,6,6,"ng-template",null,6,F.W1O),F.qZA(),F.YNc(10,Tr,6,0,"ul",7),F.ALo(11,"async"),F.qZA()()()),2&Me){const wn=F.MAs(9);F.xp6(6),F.Q6J("ngIf",!F.lcZ(7,3,Ct.auth.isAuthenticated$))("ngIfElse",wn),F.xp6(4),F.Q6J("ngIf",F.lcZ(11,5,Ct.auth.isAuthenticated$))}},dependencies:[Pe.O5,be.rH,be.Od,Pe.Ov],styles:["a[_ngcontent-%COMP%]{cursor:pointer}.logout[_ngcontent-%COMP%]{margin-left:7px;position:relative;top:.45rem}"]}),Oe})();function Fr(Oe,Mt){1&Oe&&F._UZ(0,"app-auth-modal")}let nr=(()=>{class Oe{constructor(Me){this.auth=Me}}return Oe.\u0275fac=function(Me){return new(Me||Oe)(F.Y36(tn))},Oe.\u0275cmp=F.Xpm({type:Oe,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(Me,Ct){1&Me&&(F._UZ(0,"app-nav")(1,"router-outlet"),F.YNc(2,Fr,1,0,"app-auth-modal",0),F.ALo(3,"async")),2&Me&&(F.xp6(2),F.Q6J("ngIf",!F.lcZ(3,1,Ct.auth.isAuthenticatedWithDelay$)))},dependencies:[Pe.O5,zt,be.lC,lr,Pe.Ov]}),Oe})();const qn_firebase={apiKey:"AIzaSyAM-euUiietLJJjm3UWKe5W6xvc0boCfKw",authDomain:"clips-52510.firebaseapp.com",projectId:"clips-52510",storageBucket:"clips-52510.appspot.com",appId:"1:398047698165:web:f8d7932805a0180e1979bc"};let An=(()=>{class Oe{}return Oe.\u0275fac=function(Me){return new(Me||Oe)},Oe.\u0275mod=F.oAB({type:Oe,bootstrap:[nr]}),Oe.\u0275inj=F.cJS({imports:[W.hO.initializeApp(qn_firebase),q.ww,ye.yb,ge.TE,g.b2,he,z]}),Oe})();var _r=L(9260);L(2644),_r.Z.initializeApp(qn_firebase);let Sr=!1;_r.Z.auth().onAuthStateChanged(()=>{Sr||g.q6().bootstrapModule(An).catch(Oe=>console.error(Oe)),Sr=!0})},1135:(jt,He,L)=>{L.d(He,{X:()=>W});var g=L(7579);class W extends g.x{constructor(ye){super(),this._value=ye}get value(){return this.getValue()}_subscribe(ye){const ge=super._subscribe(ye);return!ge.closed&&ye.next(this._value),ge}getValue(){const{hasError:ye,thrownError:ge,_value:pe}=this;if(ye)throw ge;return this._throwIfClosed(),pe}next(ye){super.next(this._value=ye)}}},9751:(jt,He,L)=>{L.d(He,{y:()=>F});var g=L(930),W=L(727),q=L(8822),ye=L(9635),ge=L(2416),pe=L(576),be=L(2806);let F=(()=>{class _e{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const ot=new _e;return ot.source=this,ot.operator=Te,ot}subscribe(Te,ot,rt){const Le=function ie(_e){return _e&&_e instanceof g.Lv||function le(_e){return _e&&(0,pe.m)(_e.next)&&(0,pe.m)(_e.error)&&(0,pe.m)(_e.complete)}(_e)&&(0,W.Nn)(_e)}(Te)?Te:new g.Hp(Te,ot,rt);return(0,be.x)(()=>{const{operator:ke,source:st}=this;Le.add(ke?ke.call(Le,st):st?this._subscribe(Le):this._trySubscribe(Le))}),Le}_trySubscribe(Te){try{return this._subscribe(Te)}catch(ot){Te.error(ot)}}forEach(Te,ot){return new(ot=Pe(ot))((rt,Le)=>{const ke=new g.Hp({next:st=>{try{Te(st)}catch(z){Le(z),ke.unsubscribe()}},error:Le,complete:rt});this.subscribe(ke)})}_subscribe(Te){var ot;return null===(ot=this.source)||void 0===ot?void 0:ot.subscribe(Te)}[q.L](){return this}pipe(...Te){return(0,ye.U)(Te)(this)}toPromise(Te){return new(Te=Pe(Te))((ot,rt)=>{let Le;this.subscribe(ke=>Le=ke,ke=>rt(ke),()=>ot(Le))})}}return _e.create=ht=>new _e(ht),_e})();function Pe(_e){var ht;return null!==(ht=_e??ge.v.Promise)&&void 0!==ht?ht:Promise}},7579:(jt,He,L)=>{L.d(He,{x:()=>be});var g=L(9751),W=L(727);const ye=(0,L(3888).d)(Pe=>function(){Pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=L(8737),pe=L(2806);let be=(()=>{class Pe extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const _e=new F(this,this);return _e.operator=ie,_e}_throwIfClosed(){if(this.closed)throw new ye}next(ie){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const _e of this.currentObservers)_e.next(ie)}})}error(ie){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:_e}=this;for(;_e.length;)_e.shift().error(ie)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:_e,isStopped:ht,observers:Te}=this;return _e||ht?W.Lc:(this.currentObservers=null,Te.push(ie),new W.w0(()=>{this.currentObservers=null,(0,ge.P)(Te,ie)}))}_checkFinalizedStatuses(ie){const{hasError:_e,thrownError:ht,isStopped:Te}=this;_e?ie.error(ht):Te&&ie.complete()}asObservable(){const ie=new g.y;return ie.source=this,ie}}return Pe.create=(le,ie)=>new F(le,ie),Pe})();class F extends be{constructor(le,ie){super(),this.destination=le,this.source=ie}next(le){var ie,_e;null===(_e=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===_e||_e.call(ie,le)}error(le){var ie,_e;null===(_e=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===_e||_e.call(ie,le)}complete(){var le,ie;null===(ie=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===ie||ie.call(le)}_subscribe(le){var ie,_e;return null!==(_e=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(le))&&void 0!==_e?_e:W.Lc}}},930:(jt,He,L)=>{L.d(He,{Hp:()=>rt,Lv:()=>_e});var g=L(576),W=L(727),q=L(2416),ye=L(7849),ge=L(5032);const pe=Pe("C",void 0,void 0);function Pe(O,se,he){return{kind:O,value:se,error:he}}var le=L(3410),ie=L(2806);class _e extends W.w0{constructor(se){super(),this.isStopped=!1,se?(this.destination=se,(0,W.Nn)(se)&&se.add(this)):this.destination=z}static create(se,he,Ve){return new rt(se,he,Ve)}next(se){this.isStopped?st(function F(O){return Pe("N",O,void 0)}(se),this):this._next(se)}error(se){this.isStopped?st(function be(O){return Pe("E",void 0,O)}(se),this):(this.isStopped=!0,this._error(se))}complete(){this.isStopped?st(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(se){this.destination.next(se)}_error(se){try{this.destination.error(se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ht=Function.prototype.bind;function Te(O,se){return ht.call(O,se)}class ot{constructor(se){this.partialObserver=se}next(se){const{partialObserver:he}=this;if(he.next)try{he.next(se)}catch(Ve){Le(Ve)}}error(se){const{partialObserver:he}=this;if(he.error)try{he.error(se)}catch(Ve){Le(Ve)}else Le(se)}complete(){const{partialObserver:se}=this;if(se.complete)try{se.complete()}catch(he){Le(he)}}}class rt extends _e{constructor(se,he,Ve){let Ge;if(super(),(0,g.m)(se)||!se)Ge={next:se??void 0,error:he??void 0,complete:Ve??void 0};else{let Ae;this&&q.v.useDeprecatedNextContext?(Ae=Object.create(se),Ae.unsubscribe=()=>this.unsubscribe(),Ge={next:se.next&&Te(se.next,Ae),error:se.error&&Te(se.error,Ae),complete:se.complete&&Te(se.complete,Ae)}):Ge=se}this.destination=new ot(Ge)}}function Le(O){q.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(O):(0,ye.h)(O)}function st(O,se){const{onStoppedNotification:he}=q.v;he&&le.z.setTimeout(()=>he(O,se))}const z={closed:!0,next:ge.Z,error:function ke(O){throw O},complete:ge.Z}},727:(jt,He,L)=>{L.d(He,{Lc:()=>pe,w0:()=>ge,Nn:()=>be});var g=L(576);const q=(0,L(3888).d)(Pe=>function(ie){Pe(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((_e,ht)=>`${ht+1}) ${_e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var ye=L(8737);class ge{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const Te of ie)Te.remove(this);else ie.remove(this);const{initialTeardown:_e}=this;if((0,g.m)(_e))try{_e()}catch(Te){le=Te instanceof q?Te.errors:[Te]}const{_finalizers:ht}=this;if(ht){this._finalizers=null;for(const Te of ht)try{F(Te)}catch(ot){le=le??[],ot instanceof q?le=[...le,...ot.errors]:le.push(ot)}}if(le)throw new q(le)}}add(le){var ie;if(le&&le!==this)if(this.closed)F(le);else{if(le instanceof ge){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(le)}}_hasParent(le){const{_parentage:ie}=this;return ie===le||Array.isArray(ie)&&ie.includes(le)}_addParent(le){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(le),ie):ie?[ie,le]:le}_removeParent(le){const{_parentage:ie}=this;ie===le?this._parentage=null:Array.isArray(ie)&&(0,ye.P)(ie,le)}remove(le){const{_finalizers:ie}=this;ie&&(0,ye.P)(ie,le),le instanceof ge&&le._removeParent(this)}}ge.EMPTY=(()=>{const Pe=new ge;return Pe.closed=!0,Pe})();const pe=ge.EMPTY;function be(Pe){return Pe instanceof ge||Pe&&"closed"in Pe&&(0,g.m)(Pe.remove)&&(0,g.m)(Pe.add)&&(0,g.m)(Pe.unsubscribe)}function F(Pe){(0,g.m)(Pe)?Pe():Pe.unsubscribe()}},2416:(jt,He,L)=>{L.d(He,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(jt,He,L)=>{L.d(He,{a:()=>le});var g=L(9751),W=L(4742),q=L(8996),ye=L(4671),ge=L(3268),pe=L(3269),be=L(1810),F=L(5403),Pe=L(9672);function le(...ht){const Te=(0,pe.yG)(ht),ot=(0,pe.jO)(ht),{args:rt,keys:Le}=(0,W.D)(ht);if(0===rt.length)return(0,q.D)([],Te);const ke=new g.y(function ie(ht,Te,ot=ye.y){return rt=>{_e(Te,()=>{const{length:Le}=ht,ke=new Array(Le);let st=Le,z=Le;for(let O=0;O<Le;O++)_e(Te,()=>{const se=(0,q.D)(ht[O],Te);let he=!1;se.subscribe((0,F.x)(rt,Ve=>{ke[O]=Ve,he||(he=!0,z--),z||rt.next(ot(ke.slice()))},()=>{--st||rt.complete()}))},rt)},rt)}}(rt,Te,Le?st=>(0,be.n)(Le,st):ye.y));return ot?ke.pipe((0,ge.Z)(ot)):ke}function _e(ht,Te,ot){ht?(0,Pe.f)(ot,ht,Te):Te()}},7272:(jt,He,L)=>{L.d(He,{z:()=>ge});var g=L(8189),q=L(3269),ye=L(8996);function ge(...pe){return function W(){return(0,g.J)(1)}()((0,ye.D)(pe,(0,q.yG)(pe)))}},515:(jt,He,L)=>{L.d(He,{E:()=>W});const W=new(L(9751).y)(ge=>ge.complete())},4128:(jt,He,L)=>{L.d(He,{D:()=>F});var g=L(9751),W=L(4742),q=L(8421),ye=L(3269),ge=L(5403),pe=L(3268),be=L(1810);function F(...Pe){const le=(0,ye.jO)(Pe),{args:ie,keys:_e}=(0,W.D)(Pe),ht=new g.y(Te=>{const{length:ot}=ie;if(!ot)return void Te.complete();const rt=new Array(ot);let Le=ot,ke=ot;for(let st=0;st<ot;st++){let z=!1;(0,q.Xf)(ie[st]).subscribe((0,ge.x)(Te,O=>{z||(z=!0,ke--),rt[st]=O},()=>Le--,void 0,()=>{(!Le||!z)&&(ke||Te.next(_e?(0,be.n)(_e,rt):rt),Te.complete())}))}});return le?ht.pipe((0,pe.Z)(le)):ht}},8996:(jt,He,L)=>{L.d(He,{D:()=>se});var g=L(8421),W=L(5363),q=L(9468),pe=L(9751),F=L(2202),Pe=L(576),le=L(9672);function _e(he,Ve){if(!he)throw new Error("Iterable cannot be null");return new pe.y(Ge=>{(0,le.f)(Ge,Ve,()=>{const Ae=he[Symbol.asyncIterator]();(0,le.f)(Ge,Ve,()=>{Ae.next().then(me=>{me.done?Ge.complete():Ge.next(me.value)})},0,!0)})})}var ht=L(3670),Te=L(8239),ot=L(1144),rt=L(6495),Le=L(2206),ke=L(4532),st=L(3260);function se(he,Ve){return Ve?function O(he,Ve){if(null!=he){if((0,ht.c)(he))return function ye(he,Ve){return(0,g.Xf)(he).pipe((0,q.R)(Ve),(0,W.Q)(Ve))}(he,Ve);if((0,ot.z)(he))return function be(he,Ve){return new pe.y(Ge=>{let Ae=0;return Ve.schedule(function(){Ae===he.length?Ge.complete():(Ge.next(he[Ae++]),Ge.closed||this.schedule())})})}(he,Ve);if((0,Te.t)(he))return function ge(he,Ve){return(0,g.Xf)(he).pipe((0,q.R)(Ve),(0,W.Q)(Ve))}(he,Ve);if((0,Le.D)(he))return _e(he,Ve);if((0,rt.T)(he))return function ie(he,Ve){return new pe.y(Ge=>{let Ae;return(0,le.f)(Ge,Ve,()=>{Ae=he[F.h](),(0,le.f)(Ge,Ve,()=>{let me,Be;try{({value:me,done:Be}=Ae.next())}catch(pt){return void Ge.error(pt)}Be?Ge.complete():Ge.next(me)},0,!0)}),()=>(0,Pe.m)(Ae?.return)&&Ae.return()})}(he,Ve);if((0,st.L)(he))return function z(he,Ve){return _e((0,st.Q)(he),Ve)}(he,Ve)}throw(0,ke.z)(he)}(he,Ve):(0,g.Xf)(he)}},8421:(jt,He,L)=>{L.d(He,{Xf:()=>ht});var g=L(655),W=L(1144),q=L(8239),ye=L(9751),ge=L(3670),pe=L(2206),be=L(4532),F=L(6495),Pe=L(3260),le=L(576),ie=L(7849),_e=L(8822);function ht(O){if(O instanceof ye.y)return O;if(null!=O){if((0,ge.c)(O))return function Te(O){return new ye.y(se=>{const he=O[_e.L]();if((0,le.m)(he.subscribe))return he.subscribe(se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(O);if((0,W.z)(O))return function ot(O){return new ye.y(se=>{for(let he=0;he<O.length&&!se.closed;he++)se.next(O[he]);se.complete()})}(O);if((0,q.t)(O))return function rt(O){return new ye.y(se=>{O.then(he=>{se.closed||(se.next(he),se.complete())},he=>se.error(he)).then(null,ie.h)})}(O);if((0,pe.D)(O))return ke(O);if((0,F.T)(O))return function Le(O){return new ye.y(se=>{for(const he of O)if(se.next(he),se.closed)return;se.complete()})}(O);if((0,Pe.L)(O))return function st(O){return ke((0,Pe.Q)(O))}(O)}throw(0,be.z)(O)}function ke(O){return new ye.y(se=>{(function z(O,se){var he,Ve,Ge,Ae;return(0,g.mG)(this,void 0,void 0,function*(){try{for(he=(0,g.KL)(O);!(Ve=yield he.next()).done;)if(se.next(Ve.value),se.closed)return}catch(me){Ge={error:me}}finally{try{Ve&&!Ve.done&&(Ae=he.return)&&(yield Ae.call(he))}finally{if(Ge)throw Ge.error}}se.complete()})})(O,se).catch(he=>se.error(he))})}},6451:(jt,He,L)=>{L.d(He,{T:()=>pe});var g=L(8189),W=L(8421),q=L(515),ye=L(3269),ge=L(8996);function pe(...be){const F=(0,ye.yG)(be),Pe=(0,ye._6)(be,1/0),le=be;return le.length?1===le.length?(0,W.Xf)(le[0]):(0,g.J)(Pe)((0,ge.D)(le,F)):q.E}},9646:(jt,He,L)=>{L.d(He,{of:()=>q});var g=L(3269),W=L(8996);function q(...ye){const ge=(0,g.yG)(ye);return(0,W.D)(ye,ge)}},5403:(jt,He,L)=>{L.d(He,{x:()=>W});var g=L(930);function W(ye,ge,pe,be,F){return new q(ye,ge,pe,be,F)}class q extends g.Lv{constructor(ge,pe,be,F,Pe,le){super(ge),this.onFinalize=Pe,this.shouldUnsubscribe=le,this._next=pe?function(ie){try{pe(ie)}catch(_e){ge.error(_e)}}:super._next,this._error=F?function(ie){try{F(ie)}catch(_e){ge.error(_e)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(ie){ge.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},6590:(jt,He,L)=>{L.d(He,{d:()=>q});var g=L(4482),W=L(5403);function q(ye){return(0,g.e)((ge,pe)=>{let be=!1;ge.subscribe((0,W.x)(pe,F=>{be=!0,pe.next(F)},()=>{be||pe.next(ye),pe.complete()}))})}},9300:(jt,He,L)=>{L.d(He,{h:()=>q});var g=L(4482),W=L(5403);function q(ye,ge){return(0,g.e)((pe,be)=>{let F=0;pe.subscribe((0,W.x)(be,Pe=>ye.call(ge,Pe,F++)&&be.next(Pe)))})}},590:(jt,He,L)=>{L.d(He,{P:()=>be});var g=L(6805),W=L(9300),q=L(5698),ye=L(6590),ge=L(8068),pe=L(4671);function be(F,Pe){const le=arguments.length>=2;return ie=>ie.pipe(F?(0,W.h)((_e,ht)=>F(_e,ht,ie)):pe.y,(0,q.q)(1),le?(0,ye.d)(Pe):(0,ge.T)(()=>new g.K))}},4004:(jt,He,L)=>{L.d(He,{U:()=>q});var g=L(4482),W=L(5403);function q(ye,ge){return(0,g.e)((pe,be)=>{let F=0;pe.subscribe((0,W.x)(be,Pe=>{be.next(ye.call(ge,Pe,F++))}))})}},9718:(jt,He,L)=>{L.d(He,{h:()=>W});var g=L(4004);function W(q){return(0,g.U)(()=>q)}},8189:(jt,He,L)=>{L.d(He,{J:()=>q});var g=L(5577),W=L(4671);function q(ye=1/0){return(0,g.z)(W.y,ye)}},5577:(jt,He,L)=>{L.d(He,{z:()=>F});var g=L(4004),W=L(8421),q=L(4482),ye=L(9672),ge=L(5403),be=L(576);function F(Pe,le,ie=1/0){return(0,be.m)(le)?F((_e,ht)=>(0,g.U)((Te,ot)=>le(_e,Te,ht,ot))((0,W.Xf)(Pe(_e,ht))),ie):("number"==typeof le&&(ie=le),(0,q.e)((_e,ht)=>function pe(Pe,le,ie,_e,ht,Te,ot,rt){const Le=[];let ke=0,st=0,z=!1;const O=()=>{z&&!Le.length&&!ke&&le.complete()},se=Ve=>ke<_e?he(Ve):Le.push(Ve),he=Ve=>{Te&&le.next(Ve),ke++;let Ge=!1;(0,W.Xf)(ie(Ve,st++)).subscribe((0,ge.x)(le,Ae=>{ht?.(Ae),Te?se(Ae):le.next(Ae)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(ke--;Le.length&&ke<_e;){const Ae=Le.shift();ot?(0,ye.f)(le,ot,()=>he(Ae)):he(Ae)}O()}catch(Ae){le.error(Ae)}}))};return Pe.subscribe((0,ge.x)(le,se,()=>{z=!0,O()})),()=>{rt?.()}}(_e,ht,Pe,ie)))}},5363:(jt,He,L)=>{L.d(He,{Q:()=>ye});var g=L(9672),W=L(4482),q=L(5403);function ye(ge,pe=0){return(0,W.e)((be,F)=>{be.subscribe((0,q.x)(F,Pe=>(0,g.f)(F,ge,()=>F.next(Pe),pe),()=>(0,g.f)(F,ge,()=>F.complete(),pe),Pe=>(0,g.f)(F,ge,()=>F.error(Pe),pe)))})}},5026:(jt,He,L)=>{L.d(He,{R:()=>ye});var g=L(4482),W=L(5403);function ye(ge,pe){return(0,g.e)(function q(ge,pe,be,F,Pe){return(le,ie)=>{let _e=be,ht=pe,Te=0;le.subscribe((0,W.x)(ie,ot=>{const rt=Te++;ht=_e?ge(ht,ot,rt):(_e=!0,ot),F&&ie.next(ht)},Pe&&(()=>{_e&&ie.next(ht),ie.complete()})))}}(ge,pe,arguments.length>=2,!0))}},3099:(jt,He,L)=>{L.d(He,{B:()=>ge});var g=L(8421),W=L(7579),q=L(930),ye=L(4482);function ge(be={}){const{connector:F=(()=>new W.x),resetOnError:Pe=!0,resetOnComplete:le=!0,resetOnRefCountZero:ie=!0}=be;return _e=>{let ht,Te,ot,rt=0,Le=!1,ke=!1;const st=()=>{Te?.unsubscribe(),Te=void 0},z=()=>{st(),ht=ot=void 0,Le=ke=!1},O=()=>{const se=ht;z(),se?.unsubscribe()};return(0,ye.e)((se,he)=>{rt++,!ke&&!Le&&st();const Ve=ot=ot??F();he.add(()=>{rt--,0===rt&&!ke&&!Le&&(Te=pe(O,ie))}),Ve.subscribe(he),!ht&&rt>0&&(ht=new q.Hp({next:Ge=>Ve.next(Ge),error:Ge=>{ke=!0,st(),Te=pe(z,Pe,Ge),Ve.error(Ge)},complete:()=>{Le=!0,st(),Te=pe(z,le),Ve.complete()}}),(0,g.Xf)(se).subscribe(ht))})(_e)}}function pe(be,F,...Pe){if(!0===F)return void be();if(!1===F)return;const le=new q.Hp({next:()=>{le.unsubscribe(),be()}});return(0,g.Xf)(F(...Pe)).subscribe(le)}},8675:(jt,He,L)=>{L.d(He,{O:()=>ye});var g=L(7272),W=L(3269),q=L(4482);function ye(...ge){const pe=(0,W.yG)(ge);return(0,q.e)((be,F)=>{(pe?(0,g.z)(ge,be,pe):(0,g.z)(ge,be)).subscribe(F)})}},9468:(jt,He,L)=>{L.d(He,{R:()=>W});var g=L(4482);function W(q,ye=0){return(0,g.e)((ge,pe)=>{pe.add(q.schedule(()=>ge.subscribe(pe),ye))})}},3900:(jt,He,L)=>{L.d(He,{w:()=>ye});var g=L(8421),W=L(4482),q=L(5403);function ye(ge,pe){return(0,W.e)((be,F)=>{let Pe=null,le=0,ie=!1;const _e=()=>ie&&!Pe&&F.complete();be.subscribe((0,q.x)(F,ht=>{Pe?.unsubscribe();let Te=0;const ot=le++;(0,g.Xf)(ge(ht,ot)).subscribe(Pe=(0,q.x)(F,rt=>F.next(pe?pe(ht,rt,ot,Te++):rt),()=>{Pe=null,_e()}))},()=>{ie=!0,_e()}))})}},5698:(jt,He,L)=>{L.d(He,{q:()=>ye});var g=L(515),W=L(4482),q=L(5403);function ye(ge){return ge<=0?()=>g.E:(0,W.e)((pe,be)=>{let F=0;pe.subscribe((0,q.x)(be,Pe=>{++F<=ge&&(be.next(Pe),ge<=F&&be.complete())}))})}},8505:(jt,He,L)=>{L.d(He,{b:()=>ge});var g=L(576),W=L(4482),q=L(5403),ye=L(4671);function ge(pe,be,F){const Pe=(0,g.m)(pe)||be||F?{next:pe,error:be,complete:F}:pe;return Pe?(0,W.e)((le,ie)=>{var _e;null===(_e=Pe.subscribe)||void 0===_e||_e.call(Pe);let ht=!0;le.subscribe((0,q.x)(ie,Te=>{var ot;null===(ot=Pe.next)||void 0===ot||ot.call(Pe,Te),ie.next(Te)},()=>{var Te;ht=!1,null===(Te=Pe.complete)||void 0===Te||Te.call(Pe),ie.complete()},Te=>{var ot;ht=!1,null===(ot=Pe.error)||void 0===ot||ot.call(Pe,Te),ie.error(Te)},()=>{var Te,ot;ht&&(null===(Te=Pe.unsubscribe)||void 0===Te||Te.call(Pe)),null===(ot=Pe.finalize)||void 0===ot||ot.call(Pe)}))}):ye.y}},8068:(jt,He,L)=>{L.d(He,{T:()=>ye});var g=L(6805),W=L(4482),q=L(5403);function ye(pe=ge){return(0,W.e)((be,F)=>{let Pe=!1;be.subscribe((0,q.x)(F,le=>{Pe=!0,F.next(le)},()=>Pe?F.complete():F.error(pe())))})}function ge(){return new g.K}},4408:(jt,He,L)=>{L.d(He,{o:()=>ge});var g=L(727);class W extends g.w0{constructor(be,F){super()}schedule(be,F=0){return this}}const q={setInterval(pe,be,...F){const{delegate:Pe}=q;return Pe?.setInterval?Pe.setInterval(pe,be,...F):setInterval(pe,be,...F)},clearInterval(pe){const{delegate:be}=q;return(be?.clearInterval||clearInterval)(pe)},delegate:void 0};var ye=L(8737);class ge extends W{constructor(be,F){super(be,F),this.scheduler=be,this.work=F,this.pending=!1}schedule(be,F=0){var Pe;if(this.closed)return this;this.state=be;const le=this.id,ie=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(ie,le,F)),this.pending=!0,this.delay=F,this.id=null!==(Pe=this.id)&&void 0!==Pe?Pe:this.requestAsyncId(ie,this.id,F),this}requestAsyncId(be,F,Pe=0){return q.setInterval(be.flush.bind(be,this),Pe)}recycleAsyncId(be,F,Pe=0){if(null!=Pe&&this.delay===Pe&&!1===this.pending)return F;null!=F&&q.clearInterval(F)}execute(be,F){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Pe=this._execute(be,F);if(Pe)return Pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,F){let le,Pe=!1;try{this.work(be)}catch(ie){Pe=!0,le=ie||new Error("Scheduled action threw falsy error")}if(Pe)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:be,scheduler:F}=this,{actions:Pe}=F;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ye.P)(Pe,this),null!=be&&(this.id=this.recycleAsyncId(F,be,null)),this.delay=null,super.unsubscribe()}}}},7565:(jt,He,L)=>{L.d(He,{v:()=>q});var g=L(6063);class W{constructor(ge,pe=W.now){this.schedulerActionCtor=ge,this.now=pe}schedule(ge,pe=0,be){return new this.schedulerActionCtor(this,ge).schedule(be,pe)}}W.now=g.l.now;class q extends W{constructor(ge,pe=W.now){super(ge,pe),this.actions=[],this._active=!1}flush(ge){const{actions:pe}=this;if(this._active)return void pe.push(ge);let be;this._active=!0;do{if(be=ge.execute(ge.state,ge.delay))break}while(ge=pe.shift());if(this._active=!1,be){for(;ge=pe.shift();)ge.unsubscribe();throw be}}}},4986:(jt,He,L)=>{L.d(He,{P:()=>ye,z:()=>q});var g=L(4408);const q=new(L(7565).v)(g.o),ye=q},6063:(jt,He,L)=>{L.d(He,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(jt,He,L)=>{L.d(He,{z:()=>g});const g={setTimeout(W,q,...ye){const{delegate:ge}=g;return ge?.setTimeout?ge.setTimeout(W,q,...ye):setTimeout(W,q,...ye)},clearTimeout(W){const{delegate:q}=g;return(q?.clearTimeout||clearTimeout)(W)},delegate:void 0}},2202:(jt,He,L)=>{L.d(He,{h:()=>W});const W=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(jt,He,L)=>{L.d(He,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(jt,He,L)=>{L.d(He,{K:()=>W});const W=(0,L(3888).d)(q=>function(){q(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(jt,He,L)=>{L.d(He,{_6:()=>pe,jO:()=>ye,yG:()=>ge});var g=L(576),W=L(3532);function q(be){return be[be.length-1]}function ye(be){return(0,g.m)(q(be))?be.pop():void 0}function ge(be){return(0,W.K)(q(be))?be.pop():void 0}function pe(be,F){return"number"==typeof q(be)?be.pop():F}},4742:(jt,He,L)=>{L.d(He,{D:()=>ge});const{isArray:g}=Array,{getPrototypeOf:W,prototype:q,keys:ye}=Object;function ge(be){if(1===be.length){const F=be[0];if(g(F))return{args:F,keys:null};if(function pe(be){return be&&"object"==typeof be&&W(be)===q}(F)){const Pe=ye(F);return{args:Pe.map(le=>F[le]),keys:Pe}}}return{args:be,keys:null}}},8737:(jt,He,L)=>{function g(W,q){if(W){const ye=W.indexOf(q);0<=ye&&W.splice(ye,1)}}L.d(He,{P:()=>g})},3888:(jt,He,L)=>{function g(W){const ye=W(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ye.prototype=Object.create(Error.prototype),ye.prototype.constructor=ye,ye}L.d(He,{d:()=>g})},1810:(jt,He,L)=>{function g(W,q){return W.reduce((ye,ge,pe)=>(ye[ge]=q[pe],ye),{})}L.d(He,{n:()=>g})},2806:(jt,He,L)=>{L.d(He,{O:()=>ye,x:()=>q});var g=L(2416);let W=null;function q(ge){if(g.v.useDeprecatedSynchronousErrorHandling){const pe=!W;if(pe&&(W={errorThrown:!1,error:null}),ge(),pe){const{errorThrown:be,error:F}=W;if(W=null,be)throw F}}else ge()}function ye(ge){g.v.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=ge)}},9672:(jt,He,L)=>{function g(W,q,ye,ge=0,pe=!1){const be=q.schedule(function(){ye(),pe?W.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(W.add(be),!pe)return be}L.d(He,{f:()=>g})},4671:(jt,He,L)=>{function g(W){return W}L.d(He,{y:()=>g})},1144:(jt,He,L)=>{L.d(He,{z:()=>g});const g=W=>W&&"number"==typeof W.length&&"function"!=typeof W},2206:(jt,He,L)=>{L.d(He,{D:()=>W});var g=L(576);function W(q){return Symbol.asyncIterator&&(0,g.m)(q?.[Symbol.asyncIterator])}},576:(jt,He,L)=>{function g(W){return"function"==typeof W}L.d(He,{m:()=>g})},3670:(jt,He,L)=>{L.d(He,{c:()=>q});var g=L(8822),W=L(576);function q(ye){return(0,W.m)(ye[g.L])}},6495:(jt,He,L)=>{L.d(He,{T:()=>q});var g=L(2202),W=L(576);function q(ye){return(0,W.m)(ye?.[g.h])}},8239:(jt,He,L)=>{L.d(He,{t:()=>W});var g=L(576);function W(q){return(0,g.m)(q?.then)}},3260:(jt,He,L)=>{L.d(He,{L:()=>ye,Q:()=>q});var g=L(655),W=L(576);function q(ge){return(0,g.FC)(this,arguments,function*(){const be=ge.getReader();try{for(;;){const{value:F,done:Pe}=yield(0,g.qq)(be.read());if(Pe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(F)}}finally{be.releaseLock()}})}function ye(ge){return(0,W.m)(ge?.getReader)}},3532:(jt,He,L)=>{L.d(He,{K:()=>W});var g=L(576);function W(q){return q&&(0,g.m)(q.schedule)}},4482:(jt,He,L)=>{L.d(He,{A:()=>W,e:()=>q});var g=L(576);function W(ye){return(0,g.m)(ye?.lift)}function q(ye){return ge=>{if(W(ge))return ge.lift(function(pe){try{return ye(pe,this)}catch(be){this.error(be)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(jt,He,L)=>{L.d(He,{Z:()=>ye});var g=L(4004);const{isArray:W}=Array;function ye(ge){return(0,g.U)(pe=>function q(ge,pe){return W(pe)?ge(...pe):ge(pe)}(ge,pe))}},5032:(jt,He,L)=>{function g(){}L.d(He,{Z:()=>g})},9635:(jt,He,L)=>{L.d(He,{U:()=>q,z:()=>W});var g=L(4671);function W(...ye){return q(ye)}function q(ye){return 0===ye.length?g.y:1===ye.length?ye[0]:function(pe){return ye.reduce((be,F)=>F(be),pe)}}},7849:(jt,He,L)=>{L.d(He,{h:()=>q});var g=L(2416),W=L(3410);function q(ye){W.z.setTimeout(()=>{const{onUnhandledError:ge}=g.v;if(!ge)throw ye;ge(ye)})}},4532:(jt,He,L)=>{function g(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(He,{z:()=>g})},655:(jt,He,L)=>{function ye(Qe,qe){var Je={};for(var at in Qe)Object.prototype.hasOwnProperty.call(Qe,at)&&qe.indexOf(at)<0&&(Je[at]=Qe[at]);if(null!=Qe&&"function"==typeof Object.getOwnPropertySymbols){var yt=0;for(at=Object.getOwnPropertySymbols(Qe);yt<at.length;yt++)qe.indexOf(at[yt])<0&&Object.prototype.propertyIsEnumerable.call(Qe,at[yt])&&(Je[at[yt]]=Qe[at[yt]])}return Je}function _e(Qe,qe,Je,at){return new(Je||(Je=Promise))(function(tt,Xe){function xt(vt){try{Pt(at.next(vt))}catch(tn){Xe(tn)}}function Rt(vt){try{Pt(at.throw(vt))}catch(tn){Xe(tn)}}function Pt(vt){vt.done?tt(vt.value):function yt(tt){return tt instanceof Je?tt:new Je(function(Xe){Xe(tt)})}(vt.value).then(xt,Rt)}Pt((at=at.apply(Qe,qe||[])).next())})}function O(Qe){return this instanceof O?(this.v=Qe,this):new O(Qe)}function se(Qe,qe,Je){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt,at=Je.apply(Qe,qe||[]),tt=[];return yt={},Xe("next"),Xe("throw"),Xe("return"),yt[Symbol.asyncIterator]=function(){return this},yt;function Xe(nn){at[nn]&&(yt[nn]=function(gn){return new Promise(function($n,Nr){tt.push([nn,gn,$n,Nr])>1||xt(nn,gn)})})}function xt(nn,gn){try{!function Rt(nn){nn.value instanceof O?Promise.resolve(nn.value.v).then(Pt,vt):tn(tt[0][2],nn)}(at[nn](gn))}catch($n){tn(tt[0][3],$n)}}function Pt(nn){xt("next",nn)}function vt(nn){xt("throw",nn)}function tn(nn,gn){nn(gn),tt.shift(),tt.length&&xt(tt[0][0],tt[0][1])}}function Ve(Qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,qe=Qe[Symbol.asyncIterator];return qe?qe.call(Qe):(Qe=function rt(Qe){var qe="function"==typeof Symbol&&Symbol.iterator,Je=qe&&Qe[qe],at=0;if(Je)return Je.call(Qe);if(Qe&&"number"==typeof Qe.length)return{next:function(){return Qe&&at>=Qe.length&&(Qe=void 0),{value:Qe&&Qe[at++],done:!Qe}}};throw new TypeError(qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Qe),Je={},at("next"),at("throw"),at("return"),Je[Symbol.asyncIterator]=function(){return this},Je);function at(tt){Je[tt]=Qe[tt]&&function(Xe){return new Promise(function(xt,Rt){!function yt(tt,Xe,xt,Rt){Promise.resolve(Rt).then(function(Pt){tt({value:Pt,done:xt})},Xe)}(xt,Rt,(Xe=Qe[tt](Xe)).done,Xe.value)})}}}L.d(He,{FC:()=>se,KL:()=>Ve,_T:()=>ye,mG:()=>_e,qq:()=>O})},6895:(jt,He,L)=>{L.d(He,{Do:()=>st,EM:()=>Fs,HT:()=>ye,JF:()=>Qo,K0:()=>pe,Mx:()=>Zs,O5:()=>Ni,Ov:()=>dt,PM:()=>Ei,S$:()=>rt,V_:()=>Pe,Ye:()=>z,Zx:()=>Ns,b0:()=>ke,bD:()=>Yo,ez:()=>ds,mk:()=>Mn,q:()=>q,sg:()=>Pi,uU:()=>Er,w_:()=>ge});var g=L(4650);let W=null;function q(){return W}function ye(S){W||(W=S)}class ge{}const pe=new g.OlP("DocumentToken");let be=(()=>{class S{historyGo(R){throw new Error("Not implemented")}}return S.\u0275fac=function(R){return new(R||S)},S.\u0275prov=g.Yz7({token:S,factory:function(){return function F(){return(0,g.LFG)(le)}()},providedIn:"platform"}),S})();const Pe=new g.OlP("Location Initialized");let le=(()=>{class S extends be{constructor(R){super(),this._doc=R,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return q().getBaseHref(this._doc)}onPopState(R){const Y=q().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("popstate",R,!1),()=>Y.removeEventListener("popstate",R)}onHashChange(R){const Y=q().getGlobalEventTarget(this._doc,"window");return Y.addEventListener("hashchange",R,!1),()=>Y.removeEventListener("hashchange",R)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(R){this._location.pathname=R}pushState(R,Y,de){ie()?this._history.pushState(R,Y,de):this._location.hash=de}replaceState(R,Y,de){ie()?this._history.replaceState(R,Y,de):this._location.hash=de}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}}return S.\u0275fac=function(R){return new(R||S)(g.LFG(pe))},S.\u0275prov=g.Yz7({token:S,factory:function(){return function _e(){return new le((0,g.LFG)(pe))}()},providedIn:"platform"}),S})();function ie(){return!!window.history.pushState}function ht(S,G){if(0==S.length)return G;if(0==G.length)return S;let R=0;return S.endsWith("/")&&R++,G.startsWith("/")&&R++,2==R?S+G.substring(1):1==R?S+G:S+"/"+G}function Te(S){const G=S.match(/#|\?|$/),R=G&&G.index||S.length;return S.slice(0,R-("/"===S[R-1]?1:0))+S.slice(R)}function ot(S){return S&&"?"!==S[0]?"?"+S:S}let rt=(()=>{class S{historyGo(R){throw new Error("Not implemented")}}return S.\u0275fac=function(R){return new(R||S)},S.\u0275prov=g.Yz7({token:S,factory:function(){return(0,g.f3M)(ke)},providedIn:"root"}),S})();const Le=new g.OlP("appBaseHref");let ke=(()=>{class S extends rt{constructor(R,Y){super(),this._platformLocation=R,this._removeListenerFns=[],this._baseHref=Y??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return ht(this._baseHref,R)}path(R=!1){const Y=this._platformLocation.pathname+ot(this._platformLocation.search),de=this._platformLocation.hash;return de&&R?`${Y}${de}`:Y}pushState(R,Y,de,it){const _t=this.prepareExternalUrl(de+ot(it));this._platformLocation.pushState(R,Y,_t)}replaceState(R,Y,de,it){const _t=this.prepareExternalUrl(de+ot(it));this._platformLocation.replaceState(R,Y,_t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}}return S.\u0275fac=function(R){return new(R||S)(g.LFG(be),g.LFG(Le,8))},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),st=(()=>{class S extends rt{constructor(R,Y){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=Y&&(this._baseHref=Y)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let Y=this._platformLocation.hash;return null==Y&&(Y="#"),Y.length>0?Y.substring(1):Y}prepareExternalUrl(R){const Y=ht(this._baseHref,R);return Y.length>0?"#"+Y:Y}pushState(R,Y,de,it){let _t=this.prepareExternalUrl(de+ot(it));0==_t.length&&(_t=this._platformLocation.pathname),this._platformLocation.pushState(R,Y,_t)}replaceState(R,Y,de,it){let _t=this.prepareExternalUrl(de+ot(it));0==_t.length&&(_t=this._platformLocation.pathname),this._platformLocation.replaceState(R,Y,_t)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(R=0){this._platformLocation.historyGo?.(R)}}return S.\u0275fac=function(R){return new(R||S)(g.LFG(be),g.LFG(Le,8))},S.\u0275prov=g.Yz7({token:S,factory:S.\u0275fac}),S})(),z=(()=>{class S{constructor(R){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=R;const Y=this._locationStrategy.getBaseHref();this._basePath=function Ve(S){if(new RegExp("^(https?:)?//").test(S)){const[,R]=S.split(/\/\/[^\/]+/);return R}return S}(Te(he(Y))),this._locationStrategy.onPopState(de=>{this._subject.emit({url:this.path(!0),pop:!0,state:de.state,type:de.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(R=!1){return this.normalize(this._locationStrategy.path(R))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(R,Y=""){return this.path()==this.normalize(R+ot(Y))}normalize(R){return S.stripTrailingSlash(function se(S,G){if(!S||!G.startsWith(S))return G;const R=G.substring(S.length);return""===R||["/",";","?","#"].includes(R[0])?R:G}(this._basePath,he(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._locationStrategy.prepareExternalUrl(R)}go(R,Y="",de=null){this._locationStrategy.pushState(de,"",R,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ot(Y)),de)}replaceState(R,Y="",de=null){this._locationStrategy.replaceState(de,"",R,Y),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+ot(Y)),de)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(R=0){this._locationStrategy.historyGo?.(R)}onUrlChange(R){return this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Y=>{this._notifyUrlChangeListeners(Y.url,Y.state)})),()=>{const Y=this._urlChangeListeners.indexOf(R);this._urlChangeListeners.splice(Y,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(R="",Y){this._urlChangeListeners.forEach(de=>de(R,Y))}subscribe(R,Y,de){return this._subject.subscribe({next:R,error:Y,complete:de})}}return S.normalizeQueryParams=ot,S.joinWithSlash=ht,S.stripTrailingSlash=Te,S.\u0275fac=function(R){return new(R||S)(g.LFG(rt))},S.\u0275prov=g.Yz7({token:S,factory:function(){return function O(){return new z((0,g.LFG)(rt))}()},providedIn:"root"}),S})();function he(S){return S.replace(/\/index.html$/,"")}var Ae=(()=>((Ae=Ae||{})[Ae.Decimal=0]="Decimal",Ae[Ae.Percent=1]="Percent",Ae[Ae.Currency=2]="Currency",Ae[Ae.Scientific=3]="Scientific",Ae))(),Be=(()=>((Be=Be||{})[Be.Format=0]="Format",Be[Be.Standalone=1]="Standalone",Be))(),pt=(()=>((pt=pt||{})[pt.Narrow=0]="Narrow",pt[pt.Abbreviated=1]="Abbreviated",pt[pt.Wide=2]="Wide",pt[pt.Short=3]="Short",pt))(),ft=(()=>((ft=ft||{})[ft.Short=0]="Short",ft[ft.Medium=1]="Medium",ft[ft.Long=2]="Long",ft[ft.Full=3]="Full",ft))(),Dt=(()=>((Dt=Dt||{})[Dt.Decimal=0]="Decimal",Dt[Dt.Group=1]="Group",Dt[Dt.List=2]="List",Dt[Dt.PercentSign=3]="PercentSign",Dt[Dt.PlusSign=4]="PlusSign",Dt[Dt.MinusSign=5]="MinusSign",Dt[Dt.Exponential=6]="Exponential",Dt[Dt.SuperscriptingExponent=7]="SuperscriptingExponent",Dt[Dt.PerMille=8]="PerMille",Dt[Dt.Infinity=9]="Infinity",Dt[Dt.NaN=10]="NaN",Dt[Dt.TimeSeparator=11]="TimeSeparator",Dt[Dt.CurrencyDecimal=12]="CurrencyDecimal",Dt[Dt.CurrencyGroup=13]="CurrencyGroup",Dt))();function xt(S,G){return on((0,g.cg1)(S)[g.wAp.DateFormat],G)}function Rt(S,G){return on((0,g.cg1)(S)[g.wAp.TimeFormat],G)}function Pt(S,G){return on((0,g.cg1)(S)[g.wAp.DateTimeFormat],G)}function vt(S,G){const R=(0,g.cg1)(S),Y=R[g.wAp.NumberSymbols][G];if(typeof Y>"u"){if(G===Dt.CurrencyDecimal)return R[g.wAp.NumberSymbols][Dt.Decimal];if(G===Dt.CurrencyGroup)return R[g.wAp.NumberSymbols][Dt.Group]}return Y}function Jn(S){if(!S[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${S[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function on(S,G){for(let R=G;R>-1;R--)if(typeof S[R]<"u")return S[R];throw new Error("Locale data API: locale data undefined")}function Ut(S){const[G,R]=S.split(":");return{hours:+G,minutes:+R}}const ur=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,mi={},zn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Nn=(()=>((Nn=Nn||{})[Nn.Short=0]="Short",Nn[Nn.ShortGMT=1]="ShortGMT",Nn[Nn.Long=2]="Long",Nn[Nn.Extended=3]="Extended",Nn))(),zt=(()=>((zt=zt||{})[zt.FullYear=0]="FullYear",zt[zt.Month=1]="Month",zt[zt.Date=2]="Date",zt[zt.Hours=3]="Hours",zt[zt.Minutes=4]="Minutes",zt[zt.Seconds=5]="Seconds",zt[zt.FractionalSeconds=6]="FractionalSeconds",zt[zt.Day=7]="Day",zt))(),rn=(()=>((rn=rn||{})[rn.DayPeriods=0]="DayPeriods",rn[rn.Days=1]="Days",rn[rn.Months=2]="Months",rn[rn.Eras=3]="Eras",rn))();function $r(S,G,R,Y){let de=function $e(S){if(we(S))return S;if("number"==typeof S&&!isNaN(S))return new Date(S);if("string"==typeof S){if(S=S.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(S)){const[de,it=1,_t=1]=S.split("-").map(dn=>+dn);return fr(de,it-1,_t)}const R=parseFloat(S);if(!isNaN(S-R))return new Date(R);let Y;if(Y=S.match(ur))return function Et(S){const G=new Date(0);let R=0,Y=0;const de=S[8]?G.setUTCFullYear:G.setFullYear,it=S[8]?G.setUTCHours:G.setHours;S[9]&&(R=Number(S[9]+S[10]),Y=Number(S[9]+S[11])),de.call(G,Number(S[1]),Number(S[2])-1,Number(S[3]));const _t=Number(S[4]||0)-R,dn=Number(S[5]||0)-Y,yr=Number(S[6]||0),Zn=Math.floor(1e3*parseFloat("0."+(S[7]||0)));return it.call(G,_t,dn,yr,Zn),G}(Y)}const G=new Date(S);if(!we(G))throw new Error(`Unable to convert "${S}" into a date`);return G}(S);G=an(R,G)||G;let dn,_t=[];for(;G;){if(dn=zn.exec(G),!dn){_t.push(G);break}{_t=_t.concat(dn.slice(1));const Sn=_t.pop();if(!Sn)break;G=Sn}}let yr=de.getTimezoneOffset();Y&&(yr=ce(Y,yr),de=function lt(S,G,R){const Y=R?-1:1,de=S.getTimezoneOffset();return function Ce(S,G){return(S=new Date(S.getTime())).setMinutes(S.getMinutes()+G),S}(S,Y*(ce(G,de)-de))}(de,Y,!0));let Zn="";return _t.forEach(Sn=>{const Un=function ue(S){if(Xt[S])return Xt[S];let G;switch(S){case"G":case"GG":case"GGG":G=An(rn.Eras,pt.Abbreviated);break;case"GGGG":G=An(rn.Eras,pt.Wide);break;case"GGGGG":G=An(rn.Eras,pt.Narrow);break;case"y":G=nr(zt.FullYear,1,0,!1,!0);break;case"yy":G=nr(zt.FullYear,2,0,!0,!0);break;case"yyy":G=nr(zt.FullYear,3,0,!1,!0);break;case"yyyy":G=nr(zt.FullYear,4,0,!1,!0);break;case"Y":G=wn(1);break;case"YY":G=wn(2,!0);break;case"YYY":G=wn(3);break;case"YYYY":G=wn(4);break;case"M":case"L":G=nr(zt.Month,1,1);break;case"MM":case"LL":G=nr(zt.Month,2,1);break;case"MMM":G=An(rn.Months,pt.Abbreviated);break;case"MMMM":G=An(rn.Months,pt.Wide);break;case"MMMMM":G=An(rn.Months,pt.Narrow);break;case"LLL":G=An(rn.Months,pt.Abbreviated,Be.Standalone);break;case"LLLL":G=An(rn.Months,pt.Wide,Be.Standalone);break;case"LLLLL":G=An(rn.Months,pt.Narrow,Be.Standalone);break;case"w":G=Ct(1);break;case"ww":G=Ct(2);break;case"W":G=Ct(1,!0);break;case"d":G=nr(zt.Date,1);break;case"dd":G=nr(zt.Date,2);break;case"c":case"cc":G=nr(zt.Day,1);break;case"ccc":G=An(rn.Days,pt.Abbreviated,Be.Standalone);break;case"cccc":G=An(rn.Days,pt.Wide,Be.Standalone);break;case"ccccc":G=An(rn.Days,pt.Narrow,Be.Standalone);break;case"cccccc":G=An(rn.Days,pt.Short,Be.Standalone);break;case"E":case"EE":case"EEE":G=An(rn.Days,pt.Abbreviated);break;case"EEEE":G=An(rn.Days,pt.Wide);break;case"EEEEE":G=An(rn.Days,pt.Narrow);break;case"EEEEEE":G=An(rn.Days,pt.Short);break;case"a":case"aa":case"aaa":G=An(rn.DayPeriods,pt.Abbreviated);break;case"aaaa":G=An(rn.DayPeriods,pt.Wide);break;case"aaaaa":G=An(rn.DayPeriods,pt.Narrow);break;case"b":case"bb":case"bbb":G=An(rn.DayPeriods,pt.Abbreviated,Be.Standalone,!0);break;case"bbbb":G=An(rn.DayPeriods,pt.Wide,Be.Standalone,!0);break;case"bbbbb":G=An(rn.DayPeriods,pt.Narrow,Be.Standalone,!0);break;case"B":case"BB":case"BBB":G=An(rn.DayPeriods,pt.Abbreviated,Be.Format,!0);break;case"BBBB":G=An(rn.DayPeriods,pt.Wide,Be.Format,!0);break;case"BBBBB":G=An(rn.DayPeriods,pt.Narrow,Be.Format,!0);break;case"h":G=nr(zt.Hours,1,-12);break;case"hh":G=nr(zt.Hours,2,-12);break;case"H":G=nr(zt.Hours,1);break;case"HH":G=nr(zt.Hours,2);break;case"m":G=nr(zt.Minutes,1);break;case"mm":G=nr(zt.Minutes,2);break;case"s":G=nr(zt.Seconds,1);break;case"ss":G=nr(zt.Seconds,2);break;case"S":G=nr(zt.FractionalSeconds,1);break;case"SS":G=nr(zt.FractionalSeconds,2);break;case"SSS":G=nr(zt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":G=Fn(Nn.Short);break;case"ZZZZZ":G=Fn(Nn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":G=Fn(Nn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":G=Fn(Nn.Long);break;default:return null}return Xt[S]=G,G}(Sn);Zn+=Un?Un(de,R,yr):"''"===Sn?"'":Sn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Zn}function fr(S,G,R){const Y=new Date(0);return Y.setFullYear(S,G,R),Y.setHours(0,0,0),Y}function an(S,G){const R=function Qe(S){return(0,g.cg1)(S)[g.wAp.LocaleId]}(S);if(mi[R]=mi[R]||{},mi[R][G])return mi[R][G];let Y="";switch(G){case"shortDate":Y=xt(S,ft.Short);break;case"mediumDate":Y=xt(S,ft.Medium);break;case"longDate":Y=xt(S,ft.Long);break;case"fullDate":Y=xt(S,ft.Full);break;case"shortTime":Y=Rt(S,ft.Short);break;case"mediumTime":Y=Rt(S,ft.Medium);break;case"longTime":Y=Rt(S,ft.Long);break;case"fullTime":Y=Rt(S,ft.Full);break;case"short":const de=an(S,"shortTime"),it=an(S,"shortDate");Y=Tr(Pt(S,ft.Short),[de,it]);break;case"medium":const _t=an(S,"mediumTime"),dn=an(S,"mediumDate");Y=Tr(Pt(S,ft.Medium),[_t,dn]);break;case"long":const yr=an(S,"longTime"),Zn=an(S,"longDate");Y=Tr(Pt(S,ft.Long),[yr,Zn]);break;case"full":const Sn=an(S,"fullTime"),Un=an(S,"fullDate");Y=Tr(Pt(S,ft.Full),[Sn,Un])}return Y&&(mi[R][G]=Y),Y}function Tr(S,G){return G&&(S=S.replace(/\{([^}]+)}/g,function(R,Y){return null!=G&&Y in G?G[Y]:R})),S}function lr(S,G,R="-",Y,de){let it="";(S<0||de&&S<=0)&&(de?S=1-S:(S=-S,it=R));let _t=String(S);for(;_t.length<G;)_t="0"+_t;return Y&&(_t=_t.slice(_t.length-G)),it+_t}function nr(S,G,R=0,Y=!1,de=!1){return function(it,_t){let dn=function qn(S,G){switch(S){case zt.FullYear:return G.getFullYear();case zt.Month:return G.getMonth();case zt.Date:return G.getDate();case zt.Hours:return G.getHours();case zt.Minutes:return G.getMinutes();case zt.Seconds:return G.getSeconds();case zt.FractionalSeconds:return G.getMilliseconds();case zt.Day:return G.getDay();default:throw new Error(`Unknown DateType value "${S}".`)}}(S,it);if((R>0||dn>-R)&&(dn+=R),S===zt.Hours)0===dn&&-12===R&&(dn=12);else if(S===zt.FractionalSeconds)return function Fr(S,G){return lr(S,3).substring(0,G)}(dn,G);const yr=vt(_t,Dt.MinusSign);return lr(dn,G,yr,Y,de)}}function An(S,G,R=Be.Format,Y=!1){return function(de,it){return function _r(S,G,R,Y,de,it){switch(R){case rn.Months:return function at(S,G,R){const Y=(0,g.cg1)(S),it=on([Y[g.wAp.MonthsFormat],Y[g.wAp.MonthsStandalone]],G);return on(it,R)}(G,de,Y)[S.getMonth()];case rn.Days:return function Je(S,G,R){const Y=(0,g.cg1)(S),it=on([Y[g.wAp.DaysFormat],Y[g.wAp.DaysStandalone]],G);return on(it,R)}(G,de,Y)[S.getDay()];case rn.DayPeriods:const _t=S.getHours(),dn=S.getMinutes();if(it){const Zn=function br(S){const G=(0,g.cg1)(S);return Jn(G),(G[g.wAp.ExtraData][2]||[]).map(Y=>"string"==typeof Y?Ut(Y):[Ut(Y[0]),Ut(Y[1])])}(G),Sn=function Xr(S,G,R){const Y=(0,g.cg1)(S);Jn(Y);const it=on([Y[g.wAp.ExtraData][0],Y[g.wAp.ExtraData][1]],G)||[];return on(it,R)||[]}(G,de,Y),Un=Zn.findIndex(Qr=>{if(Array.isArray(Qr)){const[er,ii]=Qr,ro=_t>=er.hours&&dn>=er.minutes,Fi=_t<ii.hours||_t===ii.hours&&dn<ii.minutes;if(er.hours<ii.hours){if(ro&&Fi)return!0}else if(ro||Fi)return!0}else if(Qr.hours===_t&&Qr.minutes===dn)return!0;return!1});if(-1!==Un)return Sn[Un]}return function qe(S,G,R){const Y=(0,g.cg1)(S),it=on([Y[g.wAp.DayPeriodsFormat],Y[g.wAp.DayPeriodsStandalone]],G);return on(it,R)}(G,de,Y)[_t<12?0:1];case rn.Eras:return function yt(S,G){return on((0,g.cg1)(S)[g.wAp.Eras],G)}(G,Y)[S.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${R}`)}}(de,it,S,G,R,Y)}}function Fn(S){return function(G,R,Y){const de=-1*Y,it=vt(R,Dt.MinusSign),_t=de>0?Math.floor(de/60):Math.ceil(de/60);switch(S){case Nn.Short:return(de>=0?"+":"")+lr(_t,2,it)+lr(Math.abs(de%60),2,it);case Nn.ShortGMT:return"GMT"+(de>=0?"+":"")+lr(_t,1,it);case Nn.Long:return"GMT"+(de>=0?"+":"")+lr(_t,2,it)+":"+lr(Math.abs(de%60),2,it);case Nn.Extended:return 0===Y?"Z":(de>=0?"+":"")+lr(_t,2,it)+":"+lr(Math.abs(de%60),2,it);default:throw new Error(`Unknown zone width "${S}"`)}}}const Sr=0,Oe=4;function Me(S){return fr(S.getFullYear(),S.getMonth(),S.getDate()+(Oe-S.getDay()))}function Ct(S,G=!1){return function(R,Y){let de;if(G){const it=new Date(R.getFullYear(),R.getMonth(),1).getDay()-1,_t=R.getDate();de=1+Math.floor((_t+it)/7)}else{const it=Me(R),_t=function Mt(S){const G=fr(S,Sr,1).getDay();return fr(S,0,1+(G<=Oe?Oe:Oe+7)-G)}(it.getFullYear()),dn=it.getTime()-_t.getTime();de=1+Math.round(dn/6048e5)}return lr(de,S,vt(Y,Dt.MinusSign))}}function wn(S,G=!1){return function(R,Y){return lr(Me(R).getFullYear(),S,vt(Y,Dt.MinusSign),G)}}const Xt={};function ce(S,G){S=S.replace(/:/g,"");const R=Date.parse("Jan 01, 1970 00:00:00 "+S)/6e4;return isNaN(R)?G:R}function we(S){return S instanceof Date&&!isNaN(S.valueOf())}const ve=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ne=22,Se=".",ut="0",bt=";",hn=",",On="#";function kn(S){const G=parseInt(S);if(isNaN(G))throw new Error("Invalid integer literal when parsing "+S);return G}function Zs(S,G){G=encodeURIComponent(G);for(const R of S.split(";")){const Y=R.indexOf("="),[de,it]=-1==Y?[R,""]:[R.slice(0,Y),R.slice(Y+1)];if(de.trim()===G)return decodeURIComponent(it)}return null}const ai=/\s+/,Ft=[];let Mn=(()=>{class S{constructor(R,Y,de,it){this._iterableDiffers=R,this._keyValueDiffers=Y,this._ngEl=de,this._renderer=it,this.initialClasses=Ft,this.stateMap=new Map}set klass(R){this.initialClasses=null!=R?R.trim().split(ai):Ft}set ngClass(R){this.rawClass="string"==typeof R?R.trim().split(ai):R}ngDoCheck(){for(const Y of this.initialClasses)this._updateState(Y,!0);const R=this.rawClass;if(Array.isArray(R)||R instanceof Set)for(const Y of R)this._updateState(Y,!0);else if(null!=R)for(const Y of Object.keys(R))this._updateState(Y,Boolean(R[Y]));this._applyStateDiff()}_updateState(R,Y){const de=this.stateMap.get(R);void 0!==de?(de.enabled!==Y&&(de.changed=!0,de.enabled=Y),de.touched=!0):this.stateMap.set(R,{enabled:Y,changed:!0,touched:!0})}_applyStateDiff(){for(const R of this.stateMap){const Y=R[0],de=R[1];de.changed?(this._toggleClass(Y,de.enabled),de.changed=!1):de.touched||(de.enabled&&this._toggleClass(Y,!1),this.stateMap.delete(Y)),de.touched=!1}}_toggleClass(R,Y){(R=R.trim()).length>0&&R.split(ai).forEach(de=>{Y?this._renderer.addClass(this._ngEl.nativeElement,de):this._renderer.removeClass(this._ngEl.nativeElement,de)})}}return S.\u0275fac=function(R){return new(R||S)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},S.\u0275dir=g.lG2({type:S,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),S})();class Pr{constructor(G,R,Y,de){this.$implicit=G,this.ngForOf=R,this.index=Y,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pi=(()=>{class S{set ngForOf(R){this._ngForOf=R,this._ngForOfDirty=!0}set ngForTrackBy(R){this._trackByFn=R}get ngForTrackBy(){return this._trackByFn}constructor(R,Y,de){this._viewContainer=R,this._template=Y,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(R){R&&(this._template=R)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const R=this._ngForOf;!this._differ&&R&&(this._differ=this._differs.find(R).create(this.ngForTrackBy))}if(this._differ){const R=this._differ.diff(this._ngForOf);R&&this._applyChanges(R)}}_applyChanges(R){const Y=this._viewContainer;R.forEachOperation((de,it,_t)=>{if(null==de.previousIndex)Y.createEmbeddedView(this._template,new Pr(de.item,this._ngForOf,-1,-1),null===_t?void 0:_t);else if(null==_t)Y.remove(null===it?void 0:it);else if(null!==it){const dn=Y.get(it);Y.move(dn,_t),Yn(dn,de)}});for(let de=0,it=Y.length;de<it;de++){const dn=Y.get(de).context;dn.index=de,dn.count=it,dn.ngForOf=this._ngForOf}R.forEachIdentityChange(de=>{Yn(Y.get(de.currentIndex),de)})}static ngTemplateContextGuard(R,Y){return!0}}return S.\u0275fac=function(R){return new(R||S)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},S.\u0275dir=g.lG2({type:S,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),S})();function Yn(S,G){S.context.$implicit=G.item}let Ni=(()=>{class S{constructor(R,Y){this._viewContainer=R,this._context=new ln,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(R){this._context.$implicit=this._context.ngIf=R,this._updateView()}set ngIfThen(R){_i("ngIfThen",R),this._thenTemplateRef=R,this._thenViewRef=null,this._updateView()}set ngIfElse(R){_i("ngIfElse",R),this._elseTemplateRef=R,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(R,Y){return!0}}return S.\u0275fac=function(R){return new(R||S)(g.Y36(g.s_b),g.Y36(g.Rgc))},S.\u0275dir=g.lG2({type:S,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),S})();class ln{constructor(){this.$implicit=null,this.ngIf=null}}function _i(S,G){if(G&&!G.createEmbeddedView)throw new Error(`${S} must be a TemplateRef, but received '${(0,g.AaK)(G)}'.`)}function ui(S,G){return new g.vHH(2100,!1)}class Mi{createSubscription(G,R){return G.subscribe({next:R,error:Y=>{throw Y}})}dispose(G){G.unsubscribe()}}class xe{createSubscription(G,R){return G.then(R,Y=>{throw Y})}dispose(G){}}const Ie=new xe,je=new Mi;let dt=(()=>{class S{constructor(R){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=R}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(R){return this._obj?R!==this._obj?(this._dispose(),this.transform(R)):this._latestValue:(R&&this._subscribe(R),this._latestValue)}_subscribe(R){this._obj=R,this._strategy=this._selectStrategy(R),this._subscription=this._strategy.createSubscription(R,Y=>this._updateLatestValue(R,Y))}_selectStrategy(R){if((0,g.QGY)(R))return Ie;if((0,g.F4k)(R))return je;throw ui()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(R,Y){R===this._obj&&(this._latestValue=Y,this._ref.markForCheck())}}return S.\u0275fac=function(R){return new(R||S)(g.Y36(g.sBO,16))},S.\u0275pipe=g.Yjl({name:"async",type:S,pure:!1,standalone:!0}),S})();const Or=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),is=new g.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Er=(()=>{class S{constructor(R,Y,de){this.locale=R,this.defaultTimezone=Y,this.defaultOptions=de}transform(R,Y,de,it){if(null==R||""===R||R!=R)return null;try{return $r(R,Y??this.defaultOptions?.dateFormat??"mediumDate",it||this.locale,de??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(_t){throw ui()}}}return S.\u0275fac=function(R){return new(R||S)(g.Y36(g.soG,16),g.Y36(Or,24),g.Y36(is,24))},S.\u0275pipe=g.Yjl({name:"date",type:S,pure:!0,standalone:!0}),S})(),Ns=(()=>{class S{constructor(R){this._locale=R}transform(R,Y,de){if(!function Qi(S){return!(null==S||""===S||S!=S)}(R))return null;de=de||this._locale;try{return function wt(S,G,R){return function Ke(S,G,R,Y,de,it,_t=!1){let dn="",yr=!1;if(isFinite(S)){let Zn=function un(S){let Y,de,it,_t,dn,G=Math.abs(S)+"",R=0;for((de=G.indexOf(Se))>-1&&(G=G.replace(Se,"")),(it=G.search(/e/i))>0?(de<0&&(de=it),de+=+G.slice(it+1),G=G.substring(0,it)):de<0&&(de=G.length),it=0;G.charAt(it)===ut;it++);if(it===(dn=G.length))Y=[0],de=1;else{for(dn--;G.charAt(dn)===ut;)dn--;for(de-=it,Y=[],_t=0;it<=dn;it++,_t++)Y[_t]=Number(G.charAt(it))}return de>ne&&(Y=Y.splice(0,ne-1),R=de-1,de=1),{digits:Y,exponent:R,integerLen:de}}(S);_t&&(Zn=function Tn(S){if(0===S.digits[0])return S;const G=S.digits.length-S.integerLen;return S.exponent?S.exponent+=2:(0===G?S.digits.push(0,0):1===G&&S.digits.push(0),S.integerLen+=2),S}(Zn));let Sn=G.minInt,Un=G.minFrac,Qr=G.maxFrac;if(it){const Li=it.match(ve);if(null===Li)throw new Error(`${it} is not a valid digit info`);const os=Li[1],To=Li[3],Bs=Li[5];null!=os&&(Sn=kn(os)),null!=To&&(Un=kn(To)),null!=Bs?Qr=kn(Bs):null!=To&&Un>Qr&&(Qr=Un)}!function Gn(S,G,R){if(G>R)throw new Error(`The minimum number of digits after fraction (${G}) is higher than the maximum (${R}).`);let Y=S.digits,de=Y.length-S.integerLen;const it=Math.min(Math.max(G,de),R);let _t=it+S.integerLen,dn=Y[_t];if(_t>0){Y.splice(Math.max(S.integerLen,_t));for(let Un=_t;Un<Y.length;Un++)Y[Un]=0}else{de=Math.max(0,de),S.integerLen=1,Y.length=Math.max(1,_t=it+1),Y[0]=0;for(let Un=1;Un<_t;Un++)Y[Un]=0}if(dn>=5)if(_t-1<0){for(let Un=0;Un>_t;Un--)Y.unshift(0),S.integerLen++;Y.unshift(1),S.integerLen++}else Y[_t-1]++;for(;de<Math.max(0,it);de++)Y.push(0);let yr=0!==it;const Zn=G+S.integerLen,Sn=Y.reduceRight(function(Un,Qr,er,ii){return ii[er]=(Qr+=Un)<10?Qr:Qr-10,yr&&(0===ii[er]&&er>=Zn?ii.pop():yr=!1),Qr>=10?1:0},0);Sn&&(Y.unshift(Sn),S.integerLen++)}(Zn,Un,Qr);let er=Zn.digits,ii=Zn.integerLen;const ro=Zn.exponent;let Fi=[];for(yr=er.every(Li=>!Li);ii<Sn;ii++)er.unshift(0);for(;ii<0;ii++)er.unshift(0);ii>0?Fi=er.splice(ii,er.length):(Fi=er,er=[0]);const fo=[];for(er.length>=G.lgSize&&fo.unshift(er.splice(-G.lgSize,er.length).join(""));er.length>G.gSize;)fo.unshift(er.splice(-G.gSize,er.length).join(""));er.length&&fo.unshift(er.join("")),dn=fo.join(vt(R,Y)),Fi.length&&(dn+=vt(R,de)+Fi.join("")),ro&&(dn+=vt(R,Dt.Exponential)+"+"+ro)}else dn=vt(R,Dt.Infinity);return dn=S<0&&!yr?G.negPre+dn+G.negSuf:G.posPre+dn+G.posSuf,dn}(S,function fn(S,G="-"){const R={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},Y=S.split(bt),de=Y[0],it=Y[1],_t=-1!==de.indexOf(Se)?de.split(Se):[de.substring(0,de.lastIndexOf(ut)+1),de.substring(de.lastIndexOf(ut)+1)],dn=_t[0],yr=_t[1]||"";R.posPre=dn.substring(0,dn.indexOf(On));for(let Sn=0;Sn<yr.length;Sn++){const Un=yr.charAt(Sn);Un===ut?R.minFrac=R.maxFrac=Sn+1:Un===On?R.maxFrac=Sn+1:R.posSuf+=Un}const Zn=dn.split(hn);if(R.gSize=Zn[1]?Zn[1].length:0,R.lgSize=Zn[2]||Zn[1]?(Zn[2]||Zn[1]).length:0,it){const Sn=de.length-R.posPre.length-R.posSuf.length,Un=it.indexOf(On);R.negPre=it.substring(0,Un).replace(/'/g,""),R.negSuf=it.slice(Un+Sn).replace(/'/g,"")}else R.negPre=G+R.posPre,R.negSuf=R.posSuf;return R}(function tn(S,G){return(0,g.cg1)(S)[g.wAp.NumberFormats][G]}(G,Ae.Percent),vt(G,Dt.MinusSign)),G,Dt.Group,Dt.Decimal,R,!0).replace(new RegExp("%","g"),vt(G,Dt.PercentSign))}(function Es(S){if("string"==typeof S&&!isNaN(Number(S)-parseFloat(S)))return Number(S);if("number"!=typeof S)throw new Error(`${S} is not a number`);return S}(R),de,Y)}catch(it){throw ui()}}}return S.\u0275fac=function(R){return new(R||S)(g.Y36(g.soG,16))},S.\u0275pipe=g.Yjl({name:"percent",type:S,pure:!0,standalone:!0}),S})();let ds=(()=>{class S{}return S.\u0275fac=function(R){return new(R||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({}),S})();const Yo="browser",ho="server";function Ei(S){return S===ho}let Fs=(()=>{class S{}return S.\u0275prov=(0,g.Yz7)({token:S,providedIn:"root",factory:()=>new Js((0,g.LFG)(pe),window)}),S})();class Js{constructor(G,R){this.document=G,this.window=R,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const R=function fs(S,G){const R=S.getElementById(G)||S.getElementsByName(G)[0];if(R)return R;if("function"==typeof S.createTreeWalker&&S.body&&(S.body.createShadowRoot||S.body.attachShadow)){const Y=S.createTreeWalker(S.body,NodeFilter.SHOW_ELEMENT);let de=Y.currentNode;for(;de;){const it=de.shadowRoot;if(it){const _t=it.getElementById(G)||it.querySelector(`[name="${G}"]`);if(_t)return _t}de=Y.nextNode()}}return null}(this.document,G);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const R=this.window.history;R&&R.scrollRestoration&&(R.scrollRestoration=G)}}scrollToElement(G){const R=G.getBoundingClientRect(),Y=R.left+this.window.pageXOffset,de=R.top+this.window.pageYOffset,it=this.offset();this.window.scrollTo(Y-it[0],de-it[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=Ls(this.window.history)||Ls(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ls(S){return Object.getOwnPropertyDescriptor(S,"scrollRestoration")}class Qo{}},4650:(jt,He,L)=>{L.d(He,{$8M:()=>nu,$WT:()=>gr,$Z:()=>yd,AFp:()=>VE,ALo:()=>e,AaK:()=>F,BQk:()=>Od,CHM:()=>It,CRH:()=>mE,CZH:()=>D_,CqO:()=>Ey,D6c:()=>RI,DdM:()=>bm,EJc:()=>Ww,EiD:()=>Go,EpF:()=>up,F$t:()=>Cy,F4k:()=>lp,FYo:()=>Bl,FiY:()=>Ua,G48:()=>fI,GfV:()=>Cf,Gpc:()=>ie,Hsn:()=>hp,JOm:()=>go,JVY:()=>kl,JZr:()=>rt,KtG:()=>Vt,L6k:()=>yf,LAX:()=>zs,LFG:()=>Fn,LSH:()=>cl,Lbi:()=>Hw,Lck:()=>$c,MAs:()=>ap,MMx:()=>jc,NdJ:()=>Uh,O4$:()=>Vo,OlP:()=>Mr,Oqu:()=>Cp,P3R:()=>fc,PXZ:()=>aI,Q6J:()=>Wg,QGY:()=>yu,Qsj:()=>vc,R0b:()=>$u,RDi:()=>pf,Rgc:()=>Jt,SBq:()=>Vl,Sil:()=>Kw,Suo:()=>gE,TTD:()=>wr,TgZ:()=>xd,VKq:()=>f_,W1O:()=>EE,WLB:()=>Bp,X6Q:()=>hI,XFs:()=>Ut,Xpm:()=>On,Xts:()=>vf,Y36:()=>Gl,YKP:()=>Im,YNc:()=>op,Yjl:()=>Tn,Yz7:()=>vt,Z0I:()=>$n,ZZ4:()=>G0,_Bn:()=>l_,_UZ:()=>Fh,_Vd:()=>hd,_c5:()=>MI,_uU:()=>Hh,aQg:()=>z0,c2e:()=>Gw,cJS:()=>nn,cg1:()=>Kh,dDg:()=>rI,dqk:()=>zn,eBb:()=>rh,eFA:()=>JE,eJc:()=>A0,ekj:()=>Dp,eoX:()=>KE,f3M:()=>Oe,g9A:()=>$E,h0i:()=>Bc,hGG:()=>xI,hij:()=>kd,iGM:()=>pE,ifc:()=>lt,ip1:()=>UE,jDz:()=>Zo,kL8:()=>Kl,kcU:()=>bo,lG2:()=>fn,lcZ:()=>a,lqb:()=>gu,lri:()=>WE,mCW:()=>dc,n5z:()=>ju,n_E:()=>$t,oAB:()=>ze,oxw:()=>Dy,pB0:()=>ih,q3G:()=>ns,q4F:()=>bf,qLn:()=>fd,qOj:()=>Mh,qZA:()=>Rd,qzn:()=>ia,rWj:()=>qE,sBO:()=>pI,s_b:()=>Zi,soG:()=>C_,tb:()=>YE,tp0:()=>Wu,uIk:()=>Xf,vHH:()=>Le,vpe:()=>We,wAp:()=>Bn,xp6:()=>lg,ynx:()=>Lh,z2F:()=>b_,z3N:()=>oo,zSh:()=>wf,zs3:()=>Dc});var g=L(7579),W=L(727),q=L(9751),ye=L(6451),ge=L(3099);function pe(n){for(let i in n)if(n[i]===pe)return i;throw Error("Could not find renamed property on target object.")}function be(n,i){for(const o in i)i.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=i[o])}function F(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(F).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const i=n.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Pe(n,i){return null==n||""===n?null===i?"":i:null==i||""===i?n:n+" "+i}const le=pe({__forward_ref__:pe});function ie(n){return n.__forward_ref__=ie,n.toString=function(){return F(this())},n}function _e(n){return ht(n)?n():n}function ht(n){return"function"==typeof n&&n.hasOwnProperty(le)&&n.__forward_ref__===ie}function Te(n){return n&&!!n.\u0275providers}const rt="https://g.co/ng/security#xss";class Le extends Error{constructor(i,o){super(ke(i,o)),this.code=i}}function ke(n,i){return`NG0${Math.abs(n)}${i?": "+i.trim():""}`}function st(n){return"string"==typeof n?n:null==n?"":String(n)}function Ve(n,i){throw new Le(-201,!1)}function tt(n,i){null==n&&function Xe(n,i,o,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,n,null,"!=")}function vt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nn(n){return{providers:n.providers||[],imports:n.imports||[]}}function gn(n){return Nr(n,br)||Nr(n,ar)}function $n(n){return null!==gn(n)}function Nr(n,i){return n.hasOwnProperty(i)?n[i]:null}function Jn(n){return n&&(n.hasOwnProperty(Xr)||n.hasOwnProperty(on))?n[Xr]:null}const br=pe({\u0275prov:pe}),Xr=pe({\u0275inj:pe}),ar=pe({ngInjectableDef:pe}),on=pe({ngInjectorDef:pe});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let Xn;function Br(n){const i=Xn;return Xn=n,i}function ur(n,i,o){const u=gn(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Ut.Optional?null:void 0!==i?i:void Ve(F(n))}const zn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),$r={},fr="__NG_DI_FLAG__",an="ngTempTokenPath",Tr="ngTokenPath",lr=/\n/gm,Fr="\u0275",nr="__source";let qn;function An(n){const i=qn;return qn=n,i}function _r(n,i=Ut.Default){if(void 0===qn)throw new Le(-203,!1);return null===qn?ur(n,void 0,i):qn.get(n,i&Ut.Optional?null:void 0,i)}function Fn(n,i=Ut.Default){return(function kr(){return Xn}()||_r)(_e(n),i)}function Oe(n,i=Ut.Default){return Fn(n,Mt(i))}function Mt(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Me(n){const i=[];for(let o=0;o<n.length;o++){const u=_e(n[o]);if(Array.isArray(u)){if(0===u.length)throw new Le(900,!1);let l,p=Ut.Default;for(let v=0;v<u.length;v++){const b=u[v],x=wn(b);"number"==typeof x?-1===x?l=b.token:p|=x:l=b}i.push(Fn(l,p))}else i.push(Fn(u))}return i}function Ct(n,i){return n[fr]=i,n.prototype[fr]=i,n}function wn(n){return n[fr]}function ce(n){return{toString:n}.toString()}var Ce=(()=>((Ce=Ce||{})[Ce.OnPush=0]="OnPush",Ce[Ce.Default=1]="Default",Ce))(),lt=(()=>{return(n=lt||(lt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",lt;var n})();const $e={},Et=[],we=pe({\u0275cmp:pe}),ve=pe({\u0275dir:pe}),ne=pe({\u0275pipe:pe}),Se=pe({\u0275mod:pe}),ut=pe({\u0275fac:pe}),bt=pe({__NG_ELEMENT_ID__:pe});let hn=0;function On(n){return ce(()=>{const i=qs(n),o={...i,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ce.OnPush,directiveDefs:null,pipeDefs:null,dependencies:i.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||lt.Emulated,id:"c"+hn++,styles:n.styles||Et,_:null,schemas:n.schemas||null,tView:null};Ks(o);const u=n.dependencies;return o.directiveDefs=Zs(u,!1),o.pipeDefs=Zs(u,!0),o})}function cr(n){return un(n)||Gn(n)}function Ke(n){return null!==n}function ze(n){return ce(()=>({type:n.type,bootstrap:n.bootstrap||Et,declarations:n.declarations||Et,imports:n.imports||Et,exports:n.exports||Et,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Kt(n,i){if(null==n)return $e;const o={};for(const u in n)if(n.hasOwnProperty(u)){let l=n[u],p=l;Array.isArray(l)&&(p=l[1],l=l[0]),o[l]=u,i&&(i[l]=p)}return o}function fn(n){return ce(()=>{const i=qs(n);return Ks(i),i})}function Tn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function un(n){return n[we]||null}function Gn(n){return n[ve]||null}function kn(n){return n[ne]||null}function gr(n){const i=un(n)||Gn(n)||kn(n);return null!==i&&i.standalone}function Zr(n,i){const o=n[Se]||null;if(!o&&!0===i)throw new Error(`Type ${F(n)} does not have '\u0275mod' property.`);return o}function qs(n){const i={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Et,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Kt(n.inputs,i),outputs:Kt(n.outputs)}}function Ks(n){n.features?.forEach(i=>i(n))}function Zs(n,i){if(!n)return null;const o=i?kn:cr;return()=>("function"==typeof n?n():n).map(u=>o(u)).filter(Ke)}const ai=0,Ft=1,Mn=2,vr=3,yi=4,Ln=5,Pr=6,Pi=7,Yn=8,Oi=9,Ni=10,ln=11,_i=12,ys=13,$i=14,ki=15,Wr=16,_s=17,qr=18,Ai=19,As=20,ir=21,mr=22,Mi=1,xe=2,Ie=7,je=8,dt=9,Tt=10;function bn(n){return Array.isArray(n)&&"object"==typeof n[Mi]}function Dn(n){return Array.isArray(n)&&!0===n[Mi]}function Wn(n){return 0!=(4&n.flags)}function Or(n){return n.componentOffset>-1}function is(n){return 1==(1&n.flags)}function Er(n){return!!n.template}function Ys(n){return 0!=(256&n[Mn])}function wi(n,i){return n.hasOwnProperty(ut)?n[ut]:null}class Ji{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function wr(){return Fs}function Fs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ls),Js}function Js(){const n=oa(this),i=n?.current;if(i){const o=n.previous;if(o===$e)n.previous=i;else for(let u in i)o[u]=i[u];n.current=null,this.ngOnChanges(i)}}function Ls(n,i,o,u){const l=this.declaredInputs[o],p=oa(n)||function Qo(n,i){return n[fs]=i}(n,{previous:$e,current:null}),v=p.current||(p.current={}),b=p.previous,x=b[l];v[l]=new Ji(x&&x.currentValue,i,b===$e),n[u]=i}wr.ngInherit=!0;const fs="__ngSimpleChanges__";function oa(n){return n[fs]||null}const li=function(n,i,o){},Ar="svg";function ci(n){for(;Array.isArray(n);)n=n[ai];return n}function ei(n,i){return ci(i[n])}function Kr(n,i){return ci(i[n.index])}function Jo(n,i){return n.data[i]}function xi(n,i){return n[i]}function pi(n,i){const o=i[n];return bn(o)?o:o[ai]}function ws(n){return 64==(64&n[Mn])}function Hi(n,i){return null==i?null:n[i]}function Is(n){n[qr]=0}function wo(n,i){n[Ln]+=i;let o=n,u=n[vr];for(;null!==u&&(1===i&&1===o[Ln]||-1===i&&0===o[Ln]);)u[Ln]+=i,o=u,u=u[vr]}const xn={lFrame:Uo(null),bindingsEnabled:!0};function A(){return xn.bindingsEnabled}function ee(){return xn.lFrame.lView}function Re(){return xn.lFrame.tView}function It(n){return xn.lFrame.contextLView=n,n[Yn]}function Vt(n){return xn.lFrame.contextLView=null,n}function Bt(){let n=En();for(;null!==n&&64===n.type;)n=n.parent;return n}function En(){return xn.lFrame.currentTNode}function dr(n,i){const o=xn.lFrame;o.currentTNode=n,o.isParent=i}function Hr(){return xn.lFrame.isParent}function Lr(){xn.lFrame.isParent=!1}function sr(){const n=xn.lFrame;let i=n.bindingRootIndex;return-1===i&&(i=n.bindingRootIndex=n.tView.bindingStartIndex),i}function Ur(){return xn.lFrame.bindingIndex++}function Ms(n,i){const o=xn.lFrame;o.bindingIndex=o.bindingRootIndex=n,gi(i)}function gi(n){xn.lFrame.currentDirectiveIndex=n}function Xo(){return xn.lFrame.currentQueryIndex}function Io(n){xn.lFrame.currentQueryIndex=n}function Na(n){const i=n[Ft];return 2===i.type?i.declTNode:1===i.type?n[Pr]:null}function Fo(n,i,o){if(o&Ut.SkipSelf){let l=i,p=n;for(;!(l=l.parent,null!==l||o&Ut.Host||(l=Na(p),null===l||(p=p[ki],10&l.type))););if(null===l)return!1;i=l,n=p}const u=xn.lFrame=Lo();return u.currentTNode=i,u.lView=n,!0}function Do(n){const i=Lo(),o=n[Ft];xn.lFrame=i,i.currentTNode=o.firstChild,i.lView=n,i.tView=o,i.contextLView=n,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Lo(){const n=xn.lFrame,i=null===n?null:n.child;return null===i?Uo(n):i}function Uo(n){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=i),i}function Co(){const n=xn.lFrame;return xn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Xa=Co;function va(){const n=Co();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Xi(){return xn.lFrame.selectedIndex}function no(n){xn.lFrame.selectedIndex=n}function ri(){const n=xn.lFrame;return Jo(n.tView,n.selectedIndex)}function Vo(){xn.lFrame.currentNamespace=Ar}function bo(){!function Iu(){xn.lFrame.currentNamespace=null}()}function gs(n,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const p=n.data[o].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:b,ngAfterViewInit:x,ngAfterViewChecked:H,ngOnDestroy:J}=p;v&&(n.contentHooks??(n.contentHooks=[])).push(-o,v),b&&((n.contentHooks??(n.contentHooks=[])).push(o,b),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(o,b)),x&&(n.viewHooks??(n.viewHooks=[])).push(-o,x),H&&((n.viewHooks??(n.viewHooks=[])).push(o,H),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(o,H)),null!=J&&(n.destroyHooks??(n.destroyHooks=[])).push(o,J)}}function wa(n,i,o){G(n,i,3,o)}function Ir(n,i,o,u){(3&n[Mn])===o&&G(n,i,o,u)}function S(n,i){let o=n[Mn];(3&o)===i&&(o&=2047,o+=1,n[Mn]=o)}function G(n,i,o,u){const p=u??-1,v=i.length-1;let b=0;for(let x=void 0!==u?65535&n[qr]:0;x<v;x++)if("number"==typeof i[x+1]){if(b=i[x],null!=u&&b>=u)break}else i[x]<0&&(n[qr]+=65536),(b<p||-1==p)&&(R(n,o,i,x),n[qr]=(4294901760&n[qr])+x+2),x++}function R(n,i,o,u){const l=o[u]<0,p=o[u+1],b=n[l?-o[u]:o[u]];if(l){if(n[Mn]>>11<n[qr]>>16&&(3&n[Mn])===i){n[Mn]+=2048,li(4,b,p);try{p.call(b)}finally{li(5,b,p)}}}else{li(4,b,p);try{p.call(b)}finally{li(5,b,p)}}}const Y=-1;class de{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function er(n,i,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const p=o[u++],v=o[u++],b=o[u++];n.setAttribute(i,v,b,p)}else{const p=l,v=o[++u];ro(p)?n.setProperty(i,p,v):n.setAttribute(i,p,v),u++}}return u}function ii(n){return 3===n||4===n||6===n}function ro(n){return 64===n.charCodeAt(0)}function Fi(n,i){if(null!==i&&0!==i.length)if(null===n||0===n.length)n=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const l=i[u];"number"==typeof l?o=l:0===o||fo(n,o,l,null,-1===o||2===o?i[++u]:null)}}return n}function fo(n,i,o,u,l){let p=0,v=n.length;if(-1===i)v=-1;else for(;p<n.length;){const b=n[p++];if("number"==typeof b){if(b===i){v=-1;break}if(b>i){v=p-1;break}}}for(;p<n.length;){const b=n[p];if("number"==typeof b)break;if(b===o){if(null===u)return void(null!==l&&(n[p+1]=l));if(u===n[p+1])return void(n[p+2]=l)}p++,null!==u&&p++,null!==l&&p++}-1!==v&&(n.splice(v,0,i),p=v+1),n.splice(p++,0,o),null!==u&&n.splice(p++,0,u),null!==l&&n.splice(p++,0,l)}function Li(n){return n!==Y}function os(n){return 32767&n}function Bs(n,i){let o=function To(n){return n>>16}(n),u=i;for(;o>0;)u=u[ki],o--;return u}let eu=!0;function Du(n){const i=eu;return eu=n,i}const bu=255,Tu=5;let So=0;const Bo={};function ua(n,i){const o=Ia(n,i);if(-1!==o)return o;const u=i[Ft];u.firstCreatePass&&(n.injectorIndex=i.length,po(u.data,n),po(i,null),po(u.blueprint,null));const l=Dl(n,i),p=n.injectorIndex;if(Li(l)){const v=os(l),b=Bs(l,i),x=b[Ft].data;for(let H=0;H<8;H++)i[p+H]=b[v+H]|x[v+H]}return i[p+8]=l,p}function po(n,i){n.push(0,0,0,0,0,0,0,0,i)}function Ia(n,i){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===i[n.injectorIndex+8]?-1:n.injectorIndex}function Dl(n,i){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,u=null,l=i;for(;null!==l;){if(u=Ca(l),null===u)return Y;if(o++,l=l[ki],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return Y}function ct(n,i,o){!function si(n,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(bt)&&(u=o[bt]),null==u&&(u=o[bt]=So++);const l=u&bu;i.data[n+(l>>Tu)]|=1<<l}(n,i,o)}function as(n,i,o){if(o&Ut.Optional||void 0!==n)return n;Ve()}function tu(n,i,o,u){if(o&Ut.Optional&&void 0===u&&(u=null),!(o&(Ut.Self|Ut.Host))){const l=n[Oi],p=Br(void 0);try{return l?l.get(i,u,o&Ut.Optional):ur(i,u,o&Ut.Optional)}finally{Br(p)}}return as(u,0,o)}function en(n,i,o,u=Ut.Default,l){if(null!==n){if(1024&i[Mn]){const v=function $o(n,i,o,u,l){let p=n,v=i;for(;null!==p&&null!==v&&1024&v[Mn]&&!(256&v[Mn]);){const b=mn(p,v,o,u|Ut.Self,Bo);if(b!==Bo)return b;let x=p.parent;if(!x){const H=v[ir];if(H){const J=H.get(o,Bo,u);if(J!==Bo)return J}x=Ca(v),v=v[ki]}p=x}return l}(n,i,o,u,Bo);if(v!==Bo)return v}const p=mn(n,i,o,u,Bo);if(p!==Bo)return p}return tu(i,o,u,l)}function mn(n,i,o,u,l){const p=function St(n){if("string"==typeof n)return n.charCodeAt(0)||0;const i=n.hasOwnProperty(bt)?n[bt]:void 0;return"number"==typeof i?i>=0?i&bu:ka:i}(o);if("function"==typeof p){if(!Fo(i,n,u))return u&Ut.Host?as(l,0,u):tu(i,o,u,l);try{const v=p(u);if(null!=v||u&Ut.Optional)return v;Ve()}finally{Xa()}}else if("number"==typeof p){let v=null,b=Ia(n,i),x=Y,H=u&Ut.Host?i[Wr][Pr]:null;for((-1===b||u&Ut.SkipSelf)&&(x=-1===b?Dl(n,i):i[b+8],x!==Y&&es(u,!1)?(v=i[Ft],b=os(x),i=Bs(x,i)):b=-1);-1!==b;){const J=i[Ft];if(Ii(p,b,J.data)){const ae=ms(b,i,o,v,u,H);if(ae!==Bo)return ae}x=i[b+8],x!==Y&&es(u,i[Ft].data[b+8]===H)&&Ii(p,b,i)?(v=J,b=os(x),i=Bs(x,i)):b=-1}}return l}function ms(n,i,o,u,l,p){const v=i[Ft],b=v.data[n+8],J=Yt(b,v,o,null==u?Or(b)&&eu:u!=v&&0!=(3&b.type),l&Ut.Host&&p===b);return null!==J?Ze(i,v,J,b):Bo}function Yt(n,i,o,u,l){const p=n.providerIndexes,v=i.data,b=1048575&p,x=n.directiveStart,J=p>>20,Ne=l?b+J:n.directiveEnd;for(let et=u?b:b+J;et<Ne;et++){const At=v[et];if(et<x&&o===At||et>=x&&At.type===o)return et}if(l){const et=v[x];if(et&&Er(et)&&et.type===o)return x}return null}function Ze(n,i,o,u){let l=n[o];const p=i.data;if(function it(n){return n instanceof de}(l)){const v=l;v.resolving&&function O(n,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${n}`:"";throw new Le(-200,`Circular dependency in DI detected for ${n}${o}`)}(function z(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():st(n)}(p[o]));const b=Du(v.canSeeViewProviders);v.resolving=!0;const x=v.injectImpl?Br(v.injectImpl):null;Fo(n,u,Ut.Default);try{l=n[o]=v.factory(void 0,p,n,u),i.firstCreatePass&&o>=u.directiveStart&&function Il(n,i,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:p}=i.type.prototype;if(u){const v=Fs(i);(o.preOrderHooks??(o.preOrderHooks=[])).push(n,v),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,v)}l&&(o.preOrderHooks??(o.preOrderHooks=[])).push(0-n,l),p&&((o.preOrderHooks??(o.preOrderHooks=[])).push(n,p),(o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(n,p))}(o,p[o],i)}finally{null!==x&&Br(x),Du(b),v.resolving=!1,Xa()}}return l}function Ii(n,i,o){return!!(o[i+(n>>Tu)]&1<<n)}function es(n,i){return!(n&Ut.Self||n&Ut.Host&&i)}class na{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return en(this._tNode,this._lView,i,Mt(u),o)}}function ka(){return new na(Bt(),ee())}function ju(n){return ce(()=>{const i=n.prototype.constructor,o=i[ut]||Da(i),u=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==u;){const p=l[ut]||Da(l);if(p&&p!==o)return p;l=Object.getPrototypeOf(l)}return p=>new p})}function Da(n){return ht(n)?()=>{const i=Da(_e(n));return i&&i()}:wi(n)}function Ca(n){const i=n[Ft],o=i.type;return 2===o?i.declTNode:1===o?n[Pr]:null}function nu(n){return function Ui(n,i){if("class"===i)return n.classes;if("style"===i)return n.styles;const o=n.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const p=o[l];if(ii(p))break;if(0===p)l+=2;else if("number"==typeof p)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(p===i)return o[l+1];l+=2}}}return null}(Bt(),n)}const iu="__parameters__";function ca(n,i,o){return ce(()=>{const u=function Rs(n){return function(...o){if(n){const u=n(...o);for(const l in u)this[l]=u[l]}}}(i);function l(...p){if(this instanceof l)return u.apply(this,p),this;const v=new l(...p);return b.annotation=v,b;function b(x,H,J){const ae=x.hasOwnProperty(iu)?x[iu]:Object.defineProperty(x,iu,{value:[]})[iu];for(;ae.length<=J;)ae.push(null);return(ae[J]=ae[J]||[]).push(v),x}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Mr{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=vt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function io(n,i){n.forEach(o=>Array.isArray(o)?io(o,i):i(o))}function zu(n,i,o){i>=n.length?n.push(o):n.splice(i,0,o)}function js(n,i){return i>=n.length-1?n.pop():n.splice(i,1)[0]}function E(n,i){const o=[];for(let u=0;u<n;u++)o.push(i);return o}function K(n,i,o){let u=Fe(n,i);return u>=0?n[1|u]=o:(u=~u,function T(n,i,o,u){let l=n.length;if(l==i)n.push(o,u);else if(1===l)n.push(u,n[0]),n[0]=o;else{for(l--,n.push(n[l-1],n[l]);l>i;)n[l]=n[l-2],l--;n[i]=o,n[i+1]=u}}(n,u,i,o)),u}function te(n,i){const o=Fe(n,i);if(o>=0)return n[1|o]}function Fe(n,i){return function Zt(n,i,o){let u=0,l=n.length>>o;for(;l!==u;){const p=u+(l-u>>1),v=n[p<<o];if(i===v)return p<<o;v>i?l=p:u=p+1}return~(l<<o)}(n,i,1)}const Ua=Ct(ca("Optional"),8),Wu=Ct(ca("SkipSelf"),4);var go=(()=>((go=go||{})[go.Important=1]="Important",go[go.DashCase=2]="DashCase",go))();const xa=new Map;let Qu=0;const Ue="__ngContext__";function nt(n,i){bn(i)?(n[Ue]=i[As],function pa(n){xa.set(n[As],n)}(i)):n[Ue]=i}let jo;function oi(n,i){return jo(n,i)}function Al(n){const i=n[vr];return Dn(i)?i[vr]:i}function Xc(n){return Dr(n[ys])}function el(n){return Dr(n[yi])}function Dr(n){for(;null!==n&&!Dn(n);)n=n[yi];return n}function Vr(n,i,o,u,l){if(null!=u){let p,v=!1;Dn(u)?p=u:bn(u)&&(v=!0,u=u[ai]);const b=ci(u);0===n&&null!==o?null==l?Ou(i,o,b):ra(i,o,b,l||null,!0):1===n&&null!==o?ra(i,o,b,l||null,!0):2===n?function Rl(n,i,o){const u=ac(n,i);u&&function id(n,i,o,u){n.removeChild(i,o,u)}(n,u,i,o)}(i,b,v):3===n&&i.destroyNode(b),null!=p&&function lf(n,i,o,u,l){const p=o[Ie];p!==ci(o)&&Vr(i,n,u,p,l);for(let b=Tt;b<o.length;b++){const x=o[b];Pl(x[Ft],x,n,i,u,p)}}(i,n,p,o,l)}}function td(n,i,o){return n.createElement(i,o)}function af(n,i){const o=n[dt],u=o.indexOf(i),l=i[vr];512&i[Mn]&&(i[Mn]&=-513,wo(l,-1)),o.splice(u,1)}function Ml(n,i){if(n.length<=Tt)return;const o=Tt+i,u=n[o];if(u){const l=u[_s];null!==l&&l!==n&&af(l,u),i>0&&(n[o-1][yi]=u[yi]);const p=js(n,Tt+i);!function Jd(n,i){Pl(n,i,i[ln],2,null,null),i[ai]=null,i[Pr]=null}(u[Ft],u);const v=p[Ai];null!==v&&v.detachView(p[Ft]),u[vr]=null,u[yi]=null,u[Mn]&=-65}return u}function uf(n,i){if(!(128&i[Mn])){const o=i[ln];o.destroyNode&&Pl(n,i,o,3,null,null),function zp(n){let i=n[ys];if(!i)return xl(n[Ft],n);for(;i;){let o=null;if(bn(i))o=i[ys];else{const u=i[Tt];u&&(o=u)}if(!o){for(;i&&!i[yi]&&i!==n;)bn(i)&&xl(i[Ft],i),i=i[vr];null===i&&(i=n),bn(i)&&xl(i[Ft],i),o=i&&i[yi]}i=o}}(i)}}function xl(n,i){if(!(128&i[Mn])){i[Mn]&=-65,i[Mn]|=128,function Kp(n,i){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let u=0;u<o.length;u+=2){const l=i[o[u]];if(!(l instanceof de)){const p=o[u+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const b=l[p[v]],x=p[v+1];li(4,b,x);try{x.call(b)}finally{li(5,b,x)}}else{li(4,l,p);try{p.call(l)}finally{li(5,l,p)}}}}}(n,i),function qp(n,i){const o=n.cleanup,u=i[Pi];let l=-1;if(null!==o)for(let p=0;p<o.length-1;p+=2)if("string"==typeof o[p]){const v=o[p+3];v>=0?u[l=v]():u[l=-v].unsubscribe(),p+=2}else{const v=u[l=o[p+1]];o[p].call(v)}if(null!==u){for(let p=l+1;p<u.length;p++)(0,u[p])();i[Pi]=null}}(n,i),1===i[Ft].type&&i[ln].destroy();const o=i[_s];if(null!==o&&Dn(i[vr])){o!==i[vr]&&af(o,i);const u=i[Ai];null!==u&&u.detachView(n)}!function D(n){xa.delete(n[As])}(i)}}function nd(n,i,o){return function rd(n,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[ai];{const{componentOffset:l}=u;if(l>-1){const{encapsulation:p}=n.data[u.directiveStart+l];if(p===lt.None||p===lt.Emulated)return null}return Kr(u,o)}}(n,i.parent,o)}function ra(n,i,o,u,l){n.insertBefore(i,o,u,l)}function Ou(n,i,o){n.appendChild(i,o)}function oc(n,i,o,u,l){null!==u?ra(n,i,o,u,l):Ou(n,i,o)}function ac(n,i){return n.parentNode(i)}function sd(n,i,o){return eh(n,i,o)}let uc,Gs,lc,Nl,eh=function hu(n,i,o){return 40&n.type?Kr(n,o):null};function Nu(n,i,o,u){const l=nd(n,u,i),p=i[ln],b=sd(u.parent||i[Pr],u,i);if(null!=l)if(Array.isArray(o))for(let x=0;x<o.length;x++)oc(p,l,o[x],b,!1);else oc(p,l,o,b,!1);void 0!==uc&&uc(p,u,i,o,l)}function Ha(n,i){if(null!==i){const o=i.type;if(3&o)return Kr(i,n);if(4&o)return ku(-1,n[i.index]);if(8&o){const u=i.child;if(null!==u)return Ha(n,u);{const l=n[i.index];return Dn(l)?ku(-1,l):ci(l)}}if(32&o)return oi(i,n)()||ci(n[i.index]);{const u=mo(n,i);return null!==u?Array.isArray(u)?u[0]:Ha(Al(n[Wr]),u):Ha(n,i.next)}}return null}function mo(n,i){return null!==i?n[Wr][Pr].projection[i.projection]:null}function ku(n,i){const o=Tt+n+1;if(o<i.length){const u=i[o],l=u[Ft].firstChild;if(null!==l)return Ha(u,l)}return i[Ie]}function rl(n,i,o,u,l,p,v){for(;null!=o;){const b=u[o.index],x=o.type;if(v&&0===i&&(b&&nt(ci(b),u),o.flags|=2),32!=(32&o.flags))if(8&x)rl(n,i,o.child,u,l,p,!1),Vr(i,n,l,b,p);else if(32&x){const H=oi(o,u);let J;for(;J=H();)Vr(i,n,l,J,p);Vr(i,n,l,b,p)}else 16&x?Ol(n,i,u,o,l,p):Vr(i,n,l,b,p);o=v?o.projectionNext:o.next}}function Pl(n,i,o,u,l,p){rl(o,u,n.firstChild,i,l,p,!1)}function Ol(n,i,o,u,l,p){const v=o[Wr],x=v[Pr].projection[u.projection];if(Array.isArray(x))for(let H=0;H<x.length;H++)Vr(i,n,l,x[H],p);else rl(n,i,x,v[vr],l,p,!0)}function Ho(n,i,o){""===o?n.removeAttribute(i,"class"):n.setAttribute(i,"class",o)}function df(n,i,o){const{mergedAttrs:u,classes:l,styles:p}=o;null!==u&&er(n,i,u),null!==l&&Ho(n,i,l),null!==p&&function Yp(n,i,o){n.setAttribute(i,"style",o)}(n,i,p)}function Ga(n){return function ad(){if(void 0===Gs&&(Gs=null,zn.trustedTypes))try{Gs=zn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gs}()?.createHTML(n)||n}function pf(n){lc=n}function ud(n){return function cc(){if(void 0===Nl&&(Nl=null,zn.trustedTypes))try{Nl=zn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nl}()?.createScriptURL(n)||n}class Wa{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rt})`}}class th extends Wa{getTypeName(){return"HTML"}}class nh extends Wa{getTypeName(){return"Style"}}class gf extends Wa{getTypeName(){return"Script"}}class ol extends Wa{getTypeName(){return"URL"}}class al extends Wa{getTypeName(){return"ResourceURL"}}function oo(n){return n instanceof Wa?n.changingThisBreaksApplicationSecurity:n}function ia(n,i){const o=function mf(n){return n instanceof Wa&&n.getTypeName()||null}(n);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see ${rt})`)}return o===i}function kl(n){return new th(n)}function yf(n){return new nh(n)}function rh(n){return new gf(n)}function zs(n){return new ol(n)}function ih(n){return new al(n)}class Wi{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(Ga(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch{return null}}}class ga{constructor(i){this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(i){const o=this.inertDocument.createElement("template");return o.innerHTML=Ga(i),o}}const sh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function dc(n){return(n=String(n)).match(sh)?n:"unsafe:"+n}function sa(n){const i={};for(const o of n.split(","))i[o]=!0;return i}function ul(...n){const i={};for(const o of n)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const oh=sa("area,br,col,hr,img,wbr"),ll=sa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qa=sa("rp,rt"),h=ul(oh,ul(ll,sa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ul(qa,sa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ul(qa,ll)),w=sa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ee=ul(w,sa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ye=sa("script,style,template");class Ot{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let l=this.checkClobberedElement(o,o.nextSibling);if(l){o=l;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!h.hasOwnProperty(o))return this.sanitizedSomething=!0,!Ye.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let l=0;l<u.length;l++){const p=u.item(l),v=p.name,b=v.toLowerCase();if(!Ee.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let x=p.value;w[b]&&(x=dc(x)),this.buf.push(" ",v,'="',pn(x),'"')}return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();h.hasOwnProperty(o)&&!oh.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(pn(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const Nt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kt=/([^\#-~ |!])/g;function pn(n){return n.replace(/&/g,"&amp;").replace(Nt,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(kt,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Si;function Go(n,i){let o=null;try{Si=Si||function ld(n){const i=new ga(n);return function Fu(){try{return!!(new window.DOMParser).parseFromString(Ga(""),"text/html")}catch{return!1}}()?new Wi(i):i}(n);let u=i?String(i):"";o=Si.getInertBodyElement(u);let l=5,p=u;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,u=p,p=o.innerHTML,o=Si.getInertBodyElement(u)}while(u!==p);return Ga((new Ot).sanitizeChildren(fu(o)||o))}finally{if(o){const u=fu(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function fu(n){return"content"in n&&function ah(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ns=(()=>((ns=ns||{})[ns.NONE=0]="NONE",ns[ns.HTML=1]="HTML",ns[ns.STYLE=2]="STYLE",ns[ns.SCRIPT=3]="SCRIPT",ns[ns.URL=4]="URL",ns[ns.RESOURCE_URL=5]="RESOURCE_URL",ns))();function cl(n){const i=cd();return i?i.sanitize(ns.URL,n)||"":ia(n,"URL")?oo(n):dc(st(n))}function dl(n){const i=cd();if(i)return ud(i.sanitize(ns.RESOURCE_URL,n)||"");if(ia(n,"ResourceURL"))return ud(oo(n));throw new Le(904,!1)}function fc(n,i,o){return function _f(n,i){return"src"===i&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===i&&("base"===n||"link"===n)?dl:cl}(i,o)(n)}function cd(){const n=ee();return n&&n[_i]}const vf=new Mr("ENVIRONMENT_INITIALIZER"),Mm=new Mr("INJECTOR",-1),xm=new Mr("INJECTOR_DEF_TYPES");class Rm{get(i,o=$r){if(o===$r){const u=new Error(`NullInjectorError: No provider for ${F(i)}!`);throw u.name="NullInjectorError",u}return o}}function Xp(...n){return{\u0275providers:pc(0,n),\u0275fromNgModule:!0}}function pc(n,...i){const o=[],u=new Set;let l;return io(i,p=>{const v=p;tg(v,o,[],u)&&(l||(l=[]),l.push(v))}),void 0!==l&&eg(l,o),o}function eg(n,i){for(let o=0;o<n.length;o++){const{providers:l}=n[o];ch(l,p=>{i.push(p)})}}function tg(n,i,o,u){if(!(n=_e(n)))return!1;let l=null,p=Jn(n);const v=!p&&un(n);if(p||v){if(v&&!v.standalone)return!1;l=n}else{const x=n.ngModule;if(p=Jn(x),!p)return!1;l=x}const b=u.has(l);if(v){if(b)return!1;if(u.add(l),v.dependencies){const x="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const H of x)tg(H,i,o,u)}}else{if(!p)return!1;{if(null!=p.imports&&!b){let H;u.add(l);try{io(p.imports,J=>{tg(J,i,o,u)&&(H||(H=[]),H.push(J))})}finally{}void 0!==H&&eg(H,i)}if(!b){const H=wi(l)||(()=>new l);i.push({provide:l,useFactory:H,deps:Et},{provide:xm,useValue:l,multi:!0},{provide:vf,useValue:()=>Fn(l),multi:!0})}const x=p.providers;null==x||b||ch(x,J=>{i.push(J)})}}return l!==n&&void 0!==n.providers}function ch(n,i){for(let o of n)Te(o)&&(o=o.\u0275providers),Array.isArray(o)?ch(o,i):i(o)}const Pm=pe({provide:String,useValue:pe});function gc(n){return null!==n&&"object"==typeof n&&Pm in n}function Ll(n){return"function"==typeof n}const wf=new Mr("Set Injector scope."),hh={},Om={};let ng;function If(){return void 0===ng&&(ng=new Rm),ng}class gu{}class Df extends gu{get destroyed(){return this._destroyed}constructor(i,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,og(i,v=>this.processProvider(v)),this.records.set(Mm,dd(void 0,this)),l.has("environment")&&this.records.set(gu,dd(void 0,this));const p=this.records.get(wf);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(xm.multi,Et,Ut.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const o=An(this),u=Br(void 0);try{return i()}finally{An(o),Br(u)}}get(i,o=$r,u=Ut.Default){this.assertNotDestroyed(),u=Mt(u);const l=An(this),p=Br(void 0);try{if(!(u&Ut.SkipSelf)){let b=this.records.get(i);if(void 0===b){const x=function x_(n){return"function"==typeof n||"object"==typeof n&&n instanceof Mr}(i)&&gn(i);b=x&&this.injectableDefInScope(x)?dd(rg(i),hh):null,this.records.set(i,b)}if(null!=b)return this.hydrate(i,b)}return(u&Ut.Self?If():this.parent).get(i,o=u&Ut.Optional&&o===$r?null:o)}catch(v){if("NullInjectorError"===v.name){if((v[an]=v[an]||[]).unshift(F(i)),l)throw v;return function Xt(n,i,o,u){const l=n[an];throw i[nr]&&l.unshift(i[nr]),n.message=function ue(n,i,o,u=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Fr?n.slice(2):n;let l=F(i);if(Array.isArray(i))l=i.map(F).join(" -> ");else if("object"==typeof i){let p=[];for(let v in i)if(i.hasOwnProperty(v)){let b=i[v];p.push(v+":"+("string"==typeof b?JSON.stringify(b):F(b)))}l=`{${p.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${n.replace(lr,"\n  ")}`}("\n"+n.message,l,o,u),n[Tr]=l,n[an]=null,n}(v,i,"R3InjectorError",this.source)}throw v}finally{Br(p),An(l)}}resolveInjectorInitializers(){const i=An(this),o=Br(void 0);try{const u=this.get(vf.multi,Et,Ut.Self);for(const l of u)l()}finally{An(i),Br(o)}}toString(){const i=[],o=this.records;for(const u of o.keys())i.push(F(u));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processProvider(i){let o=Ll(i=_e(i))?i:_e(i&&i.provide);const u=function ig(n){return gc(n)?dd(void 0,n.useValue):dd(sg(n),hh)}(i);if(Ll(i)||!0!==i.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=dd(void 0,hh,!0),l.factory=()=>Me(l.multi),this.records.set(o,l)),o=i,l.multi.push(i)}this.records.set(o,u)}hydrate(i,o){return o.value===hh&&(o.value=Om,o.value=o.factory()),"object"==typeof o.value&&o.value&&function M_(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=_e(i.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function rg(n){const i=gn(n),o=null!==i?i.factory:wi(n);if(null!==o)return o;if(n instanceof Mr)throw new Le(204,!1);if(n instanceof Function)return function Nm(n){const i=n.length;if(i>0)throw E(i,"?"),new Le(204,!1);const o=function _n(n){return n&&(n[br]||n[ar])||null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Le(204,!1)}function sg(n,i,o){let u;if(Ll(n)){const l=_e(n);return wi(l)||rg(l)}if(gc(n))u=()=>_e(n.useValue);else if(function Ef(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...Me(n.deps||[]));else if(function pu(n){return!(!n||!n.useExisting)}(n))u=()=>Fn(_e(n.useExisting));else{const l=_e(n&&(n.useClass||n.provide));if(!function km(n){return!!n.deps}(n))return wi(l)||rg(l);u=()=>new l(...Me(n.deps))}return u}function dd(n,i,o=!1){return{factory:n,value:i,multi:o?[]:void 0}}function og(n,i){for(const o of n)Array.isArray(o)?og(o,i):o&&Te(o)?og(o.\u0275providers,i):i(o)}class Ul{}class mc{}class fl{resolveComponentFactory(i){throw function Fm(n){const i=Error(`No component factory found for ${F(n)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=n,i}(i)}}let hd=(()=>{class n{}return n.NULL=new fl,n})();function P_(){return yc(Bt(),ee())}function yc(n,i){return new Vl(Kr(n,i))}let Vl=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=P_,n})();function _c(n){return n instanceof Vl?n.nativeElement:n}class Bl{}let vc=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function fh(){const n=ee(),o=pi(Bt().index,n);return(bn(o)?o:n)[ln]}(),n})(),Um=(()=>{class n{}return n.\u0275prov=vt({token:n,providedIn:"root",factory:()=>null}),n})();class Cf{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const bf=new Cf("15.2.9"),Tf={},Sf="ngOriginalError";function Af(n){return n[Sf]}class fd{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i);this._console.error("ERROR",i),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Af(i);for(;o&&Af(o);)o=Af(o);return o||null}}function Ra(n){return n instanceof Function?n():n}function xf(n,i,o){let u=n.length;for(;;){const l=n.indexOf(i,o);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const p=i.length;if(l+p===u||n.charCodeAt(l+p)<=32)return l}o=l+1}}const Rf="ng-template";function Bm(n,i,o){let u=0,l=!0;for(;u<n.length;){let p=n[u++];if("string"==typeof p&&l){const v=n[u++];if(o&&"class"===p&&-1!==xf(v.toLowerCase(),i,0))return!0}else{if(1===p){for(;u<n.length&&"string"==typeof(p=n[u++]);)if(p.toLowerCase()===i)return!0;return!1}"number"==typeof p&&(l=!1)}}return!1}function Pf(n){return 4===n.type&&n.value!==Rf}function ug(n,i,o){return i===(4!==n.type||o?n.value:Rf)}function $m(n,i,o){let u=4;const l=n.attrs||[],p=function V_(n){for(let i=0;i<n.length;i++)if(ii(n[i]))return i;return n.length}(l);let v=!1;for(let b=0;b<i.length;b++){const x=i[b];if("number"!=typeof x){if(!v)if(4&u){if(u=2|1&u,""!==x&&!ug(n,x,o)||""===x&&1===i.length){if(ma(u))return!1;v=!0}}else{const H=8&u?x:i[++b];if(8&u&&null!==n.attrs){if(!Bm(n.attrs,H,o)){if(ma(u))return!1;v=!0}continue}const ae=U_(8&u?"class":x,l,Pf(n),o);if(-1===ae){if(ma(u))return!1;v=!0;continue}if(""!==H){let Ne;Ne=ae>p?"":l[ae+1].toLowerCase();const et=8&u?Ne:null;if(et&&-1!==xf(et,H,0)||2&u&&H!==Ne){if(ma(u))return!1;v=!0}}}}else{if(!v&&!ma(u)&&!ma(x))return!1;if(v&&ma(x))continue;v=!1,u=x|1&u}}return ma(u)||v}function ma(n){return 0==(1&n)}function U_(n,i,o,u){if(null===i)return-1;let l=0;if(u||!o){let p=!1;for(;l<i.length;){const v=i[l];if(v===n)return l;if(3===v||6===v)p=!0;else{if(1===v||2===v){let b=i[++l];for(;"string"==typeof b;)b=i[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=p?1:2}return-1}return function jm(n,i){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const u=n[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,n)}function Of(n,i,o=!1){for(let u=0;u<i.length;u++)if($m(n,i[u],o))return!0;return!1}function gh(n,i){e:for(let o=0;o<i.length;o++){const u=i[o];if(n.length===u.length){for(let l=0;l<n.length;l++)if(n[l]!==u[l])continue e;return!0}}return!1}function mh(n,i){return n?":not("+i.trim()+")":i}function yh(n){let i=n[0],o=1,u=2,l="",p=!1;for(;o<n.length;){let v=n[o];if("string"==typeof v)if(2&u){const b=n[++o];l+="["+v+(b.length>0?'="'+b+'"':"")+"]"}else 8&u?l+="."+v:4&u&&(l+=" "+v);else""!==l&&!ma(v)&&(i+=mh(p,l),l=""),u=v,p=p||!ma(u);o++}return""!==l&&(i+=mh(p,l)),i}const Pn={};function lg(n){_h(Re(),ee(),Xi()+n,!1)}function _h(n,i,o,u){if(!u)if(3==(3&i[Mn])){const p=n.preOrderCheckHooks;null!==p&&wa(i,p,o)}else{const p=n.preOrderHooks;null!==p&&Ir(i,p,0,o)}no(o)}function pl(n,i=null,o=null,u){const l=cg(n,i,o,u);return l.resolveInjectorInitializers(),l}function cg(n,i=null,o=null,u,l=new Set){const p=[o||Et,Xp(n)];return u=u||("object"==typeof n?void 0:F(n)),new Df(p,i||If(),u||null,l)}let Dc=(()=>{class n{static create(o,u){if(Array.isArray(o))return pl({name:""},u,o,"");{const l=o.name??"";return pl({name:l},o.parent,o.providers,l)}}}return n.THROW_IF_NOT_FOUND=$r,n.NULL=new Rm,n.\u0275prov=vt({token:n,providedIn:"any",factory:()=>Fn(Mm)}),n.__NG_ELEMENT_ID__=-1,n})();function Gl(n,i=Ut.Default){const o=ee();return null===o?Fn(n,i):en(Bt(),o,_e(n),i)}function yd(){throw new Error("invalid")}function Vf(n,i){const o=n.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const p=o[u+1];if(-1!==p){const v=n.data[p];Io(o[u]),v.contentQueries(2,i[p],p)}}}function Bf(n,i,o,u,l,p,v,b,x,H,J){const ae=i.blueprint.slice();return ae[ai]=l,ae[Mn]=76|u,(null!==J||n&&1024&n[Mn])&&(ae[Mn]|=1024),Is(ae),ae[vr]=ae[ki]=n,ae[Yn]=o,ae[Ni]=v||n&&n[Ni],ae[ln]=b||n&&n[ln],ae[_i]=x||n&&n[_i]||null,ae[Oi]=H||n&&n[Oi]||null,ae[Pr]=p,ae[As]=function Ba(){return Qu++}(),ae[ir]=J,ae[Wr]=2==i.type?n[Wr]:ae,ae}function bc(n,i,o,u,l){let p=n.data[i];if(null===p)p=function $f(n,i,o,u,l){const p=En(),v=Hr(),x=n.data[i]=function oy(n,i,o,u,l,p){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,o,i,u,l);return null===n.firstChild&&(n.firstChild=x),null!==p&&(v?null==p.child&&null!==x.parent&&(p.child=x):null===p.next&&(p.next=x,x.prev=p)),x}(n,i,o,u,l),function Vs(){return xn.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=o,p.value=u,p.attrs=l;const v=function Kn(){const n=xn.lFrame,i=n.currentTNode;return n.isParent?i:i.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return dr(p,!0),p}function Tc(n,i,o,u){if(0===o)return-1;const l=i.length;for(let p=0;p<o;p++)i.push(u),n.blueprint.push(u),n.data.push(null);return l}function _g(n,i,o){Do(i);try{const u=n.viewQuery;null!==u&&bh(1,u,o);const l=n.template;null!==l&&iy(n,i,l,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Vf(n,i),n.staticViewQueries&&bh(2,n.viewQuery,o);const p=n.components;null!==p&&function ry(n,i){for(let o=0;o<i.length;o++)Pg(n,i[o])}(i,p)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{i[Mn]&=-5,va()}}function Eh(n,i,o,u){const l=i[Mn];if(128!=(128&l)){Do(i);try{Is(i),function jr(n){return xn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&iy(n,i,o,2,u);const v=3==(3&l);if(v){const H=n.preOrderCheckHooks;null!==H&&wa(i,H,null)}else{const H=n.preOrderHooks;null!==H&&Ir(i,H,0,null),S(i,0)}if(function tv(n){for(let i=Xc(n);null!==i;i=el(i)){if(!i[xe])continue;const o=i[dt];for(let u=0;u<o.length;u++){const l=o[u];512&l[Mn]||wo(l[vr],1),l[Mn]|=512}}}(i),function ev(n){for(let i=Xc(n);null!==i;i=el(i))for(let o=Tt;o<i.length;o++){const u=i[o],l=u[Ft];ws(u)&&Eh(l,u,l.template,u[Yn])}}(i),null!==n.contentQueries&&Vf(n,i),v){const H=n.contentCheckHooks;null!==H&&wa(i,H)}else{const H=n.contentHooks;null!==H&&Ir(i,H,1),S(i,1)}!function Uf(n,i){const o=n.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)no(~l);else{const p=l,v=o[++u],b=o[++u];Ms(v,p),b(2,i[p])}}}finally{no(-1)}}(n,i);const b=n.components;null!==b&&function yg(n,i){for(let o=0;o<i.length;o++)nv(n,i[o])}(i,b);const x=n.viewQuery;if(null!==x&&bh(2,x,u),v){const H=n.viewCheckHooks;null!==H&&wa(i,H)}else{const H=n.viewHooks;null!==H&&Ir(i,H,2),S(i,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),i[Mn]&=-41,512&i[Mn]&&(i[Mn]&=-513,wo(i[vr],-1))}finally{va()}}}function iy(n,i,o,u,l){const p=Xi(),v=2&u;try{no(-1),v&&i.length>mr&&_h(n,i,mr,!1),li(v?2:0,l),o(u,l)}finally{no(p),li(v?3:1,l)}}function jf(n,i,o){if(Wn(i)){const l=i.directiveEnd;for(let p=i.directiveStart;p<l;p++){const v=n.data[p];v.contentQueries&&v.contentQueries(1,o[p],p)}}}function vg(n,i,o){A()&&(function Tg(n,i,o,u){const l=o.directiveStart,p=o.directiveEnd;Or(o)&&function X_(n,i,o){const u=Kr(i,n),l=Sc(o),p=n[Ni],v=zf(n,Bf(n,l,null,o.onPush?32:16,u,i,p,p.createRenderer(u,o),null,null,null));n[i.index]=v}(i,o,n.data[l+o.componentOffset]),n.firstCreatePass||ua(o,i),nt(u,i);const v=o.initialInputs;for(let b=l;b<p;b++){const x=n.data[b],H=Ze(i,n,b,o);nt(H,i),null!==v&&Dh(0,b-l,H,x,0,v),Er(x)&&(pi(o.index,i)[Yn]=Ze(i,n,b,o))}}(n,i,o,Kr(o,i)),64==(64&o.flags)&&Sg(n,i,o))}function zl(n,i,o=Kr){const u=i.localNames;if(null!==u){let l=i.index+1;for(let p=0;p<u.length;p+=2){const v=u[p+1],b=-1===v?o(i,n):n[v];n[l++]=b}}}function Sc(n){const i=n.tView;return null===i||i.incompleteFirstPass?n.tView=wh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):i}function wh(n,i,o,u,l,p,v,b,x,H){const J=mr+u,ae=J+l,Ne=function Hf(n,i){const o=[];for(let u=0;u<i;u++)o.push(u<n?null:Pn);return o}(J,ae),et="function"==typeof H?H():H;return Ne[Ft]={type:n,blueprint:Ne,template:o,queries:null,viewQuery:b,declTNode:i,data:Ne.slice().fill(null,J),bindingStartIndex:J,expandoStartIndex:ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:x,consts:et,incompleteFirstPass:!1}}function Eg(n,i,o,u){const l=wd(i);null===o?l.push(u):(l.push(o),n.firstCreatePass&&Wf(n).push(u,l.length-1))}function ay(n,i,o,u){for(let l in n)if(n.hasOwnProperty(l)){o=null===o?{}:o;const p=n[l];null===u?Gf(o,i,l,p):u.hasOwnProperty(l)&&Gf(o,i,u[l],p)}return o}function Gf(n,i,o,u){n.hasOwnProperty(o)?n[o].push(i,u):n[o]=[i,u]}function Ac(n,i,o,u){if(A()){const l=null===u?null:{"":-1},p=function ly(n,i){const o=n.directiveRegistry;let u=null,l=null;if(o)for(let p=0;p<o.length;p++){const v=o[p];if(Of(i,v.selectors,!1))if(u||(u=[]),Er(v))if(null!==v.findHostDirectiveDefs){const b=[];l=l||new Map,v.findHostDirectiveDefs(v,b,l),u.unshift(...b,v),_d(n,i,b.length)}else u.unshift(v),_d(n,i,0);else l=l||new Map,v.findHostDirectiveDefs?.(v,u,l),u.push(v)}return null===u?null:[u,l]}(n,o);let v,b;null===p?v=b=null:[v,b]=p,null!==v&&Ih(n,i,o,v,l,b),l&&function Ag(n,i,o){if(i){const u=n.localNames=[];for(let l=0;l<i.length;l+=2){const p=o[i[l+1]];if(null==p)throw new Le(-301,!1);u.push(i[l],p)}}}(o,u,l)}o.mergedAttrs=Fi(o.mergedAttrs,o.attrs)}function Ih(n,i,o,u,l,p){for(let H=0;H<u.length;H++)ct(ua(o,i),n,u[H].type);!function J_(n,i,o){n.flags|=1,n.directiveStart=i,n.directiveEnd=i+o,n.providerIndexes=i}(o,n.data.length,u.length);for(let H=0;H<u.length;H++){const J=u[H];J.providersResolver&&J.providersResolver(J)}let v=!1,b=!1,x=Tc(n,i,u.length,null);for(let H=0;H<u.length;H++){const J=u[H];o.mergedAttrs=Fi(o.mergedAttrs,J.hostAttrs),zo(n,o,i,x,J),Q_(x,J,l),null!==J.contentQueries&&(o.flags|=4),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(o.flags|=64);const ae=J.type.prototype;!v&&(ae.ngOnChanges||ae.ngOnInit||ae.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(o.index),v=!0),!b&&(ae.ngOnChanges||ae.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(o.index),b=!0),x++}!function Z_(n,i,o){const l=i.directiveEnd,p=n.data,v=i.attrs,b=[];let x=null,H=null;for(let J=i.directiveStart;J<l;J++){const ae=p[J],Ne=o?o.get(ae):null,At=Ne?Ne.outputs:null;x=ay(ae.inputs,J,x,Ne?Ne.inputs:null),H=ay(ae.outputs,J,H,At);const Gt=null===x||null===v||Pf(i)?null:Mg(x,J,v);b.push(Gt)}null!==x&&(x.hasOwnProperty("class")&&(i.flags|=8),x.hasOwnProperty("style")&&(i.flags|=16)),i.initialInputs=b,i.inputs=x,i.outputs=H}(n,o,p)}function Sg(n,i,o){const u=o.directiveStart,l=o.directiveEnd,p=o.index,v=function _a(){return xn.lFrame.currentDirectiveIndex}();try{no(p);for(let b=u;b<l;b++){const x=n.data[b],H=i[b];gi(b),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&Y_(x,H)}}finally{no(-1),gi(v)}}function Y_(n,i){null!==n.hostBindings&&n.hostBindings(1,i)}function _d(n,i,o){i.componentOffset=o,(n.components??(n.components=[])).push(i.index)}function Q_(n,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=n;Er(i)&&(o[""]=n)}}function zo(n,i,o,u,l){n.data[u]=l;const p=l.factory||(l.factory=wi(l.type)),v=new de(p,Er(l),Gl);n.blueprint[u]=v,o[u]=v,function Cg(n,i,o,u,l){const p=l.hostBindings;if(p){let v=n.hostBindingOpCodes;null===v&&(v=n.hostBindingOpCodes=[]);const b=~i.index;(function bg(n){let i=n.length;for(;i>0;){const o=n[--i];if("number"==typeof o&&o<0)return o}return 0})(v)!=b&&v.push(b),v.push(o,u,p)}}(n,i,u,Tc(n,o,l.hostVars,Pn),l)}function mu(n,i,o,u,l,p){const v=Kr(n,i);!function vd(n,i,o,u,l,p,v){if(null==p)n.removeAttribute(i,l,o);else{const b=null==v?st(p):v(p,u||"",l);n.setAttribute(i,l,b,o)}}(i[ln],v,p,n.value,o,u,l)}function Dh(n,i,o,u,l,p){const v=p[i];if(null!==v){const b=u.setInput;for(let x=0;x<v.length;){const H=v[x++],J=v[x++],ae=v[x++];null!==b?u.setInput(o,ae,H,J):o[J]=ae}}}function Mg(n,i,o){let u=null,l=0;for(;l<o.length;){const p=o[l];if(0!==p)if(5!==p){if("number"==typeof p)break;if(n.hasOwnProperty(p)){null===u&&(u=[]);const v=n[p];for(let b=0;b<v.length;b+=2)if(v[b]===i){u.push(p,v[b+1],o[l+1]);break}}l+=2}else l+=2;else l+=4}return u}function xg(n,i,o,u){return[n,!0,!1,i,null,0,u,o,null,null]}function nv(n,i){const o=pi(i,n);if(ws(o)){const u=o[Ft];48&o[Mn]?Eh(u,o,u.template,o[Yn]):o[Ln]>0&&Rg(o)}}function Rg(n){for(let u=Xc(n);null!==u;u=el(u))for(let l=Tt;l<u.length;l++){const p=u[l];if(ws(p))if(512&p[Mn]){const v=p[Ft];Eh(v,p,v.template,p[Yn])}else p[Ln]>0&&Rg(p)}const o=n[Ft].components;if(null!==o)for(let u=0;u<o.length;u++){const l=pi(o[u],n);ws(l)&&l[Ln]>0&&Rg(l)}}function Pg(n,i){const o=pi(i,n),u=o[Ft];(function rv(n,i){for(let o=i.length;o<n.blueprint.length;o++)i.push(n.blueprint[o])})(u,o),_g(u,o,o[Yn])}function zf(n,i){return n[ys]?n[$i][yi]=i:n[ys]=i,n[$i]=i,i}function Wl(n){for(;n;){n[Mn]|=32;const i=Al(n);if(Ys(n)&&!i)return n;n=i}return null}function Ed(n,i,o,u=!0){const l=i[Ni];l.begin&&l.begin();try{Eh(n,i,n.template,o)}catch(v){throw u&&qf(i,v),v}finally{l.end&&l.end()}}function bh(n,i,o){Io(0),i(n,o)}function wd(n){return n[Pi]||(n[Pi]=[])}function Wf(n){return n.cleanup||(n.cleanup=[])}function qf(n,i){const o=n[Oi],u=o?o.get(fd,null):null;u&&u.handleError(i)}function Th(n,i,o,u,l){for(let p=0;p<o.length;){const v=o[p++],b=o[p++],x=i[v],H=n.data[v];null!==H.setInput?H.setInput(x,l,u,b):x[b]=l}}function Sh(n,i,o){let u=o?n.styles:null,l=o?n.classes:null,p=0;if(null!==i)for(let v=0;v<i.length;v++){const b=i[v];"number"==typeof b?p=b:1==p?l=Pe(l,b):2==p&&(u=Pe(u,b+": "+i[++v]+";"))}o?n.styles=u:n.stylesWithoutHost=u,o?n.classes=l:n.classesWithoutHost=l}function Kf(n,i,o,u,l=!1){for(;null!==o;){const p=i[o.index];if(null!==p&&u.push(ci(p)),Dn(p))for(let b=Tt;b<p.length;b++){const x=p[b],H=x[Ft].firstChild;null!==H&&Kf(x[Ft],x,H,u)}const v=o.type;if(8&v)Kf(n,i,o.child,u);else if(32&v){const b=oi(o,i);let x;for(;x=b();)u.push(x)}else if(16&v){const b=mo(i,o);if(Array.isArray(b))u.push(...b);else{const x=Al(i[Wr]);Kf(x[Ft],x,b,u,!0)}}o=l?o.projectionNext:o.next}return u}class Mc{get rootNodes(){const i=this._lView,o=i[Ft];return Kf(o,i,o.firstChild,[])}constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yn]}set context(i){this._lView[Yn]=i}get destroyed(){return 128==(128&this._lView[Mn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[vr];if(Dn(i)){const o=i[je],u=o?o.indexOf(this):-1;u>-1&&(Ml(i,u),js(o,u))}this._attachedToViewContainer=!1}uf(this._lView[Ft],this._lView)}onDestroy(i){Eg(this._lView[Ft],this._lView,null,i)}markForCheck(){Wl(this._cdRefInjectingView||this._lView)}detach(){this._lView[Mn]&=-65}reattach(){this._lView[Mn]|=64}detectChanges(){Ed(this._lView[Ft],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sf(n,i){Pl(n,i,i[ln],2,null,null)}(this._lView[Ft],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Le(902,!1);this._appRef=i}}class iv extends Mc{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;Ed(i[Ft],i,i[Yn],!1)}checkNoChanges(){}get context(){return null}}class Zf extends hd{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=un(i);return new xc(o,this.ngModule)}}function cy(n){const i=[];for(let o in n)n.hasOwnProperty(o)&&i.push({propName:n[o],templateName:o});return i}class Yf{constructor(i,o){this.injector=i,this.parentInjector=o}get(i,o,u){u=Mt(u);const l=this.injector.get(i,Tf,u);return l!==Tf||o===Tf?l:this.parentInjector.get(i,o,u)}}class xc extends mc{get inputs(){return cy(this.componentDef.inputs)}get outputs(){return cy(this.componentDef.outputs)}constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function Hm(n){return n.map(yh).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}create(i,o,u,l){let p=(l=l||this.ngModule)instanceof gu?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new Yf(i,p):i,b=v.get(Bl,null);if(null===b)throw new Le(407,!1);const x=v.get(Um,null),H=b.createRenderer(null,this.componentDef),J=this.componentDef.selectors[0][0]||"div",ae=u?function sy(n,i,o){return n.selectRootElement(i,o===lt.ShadowDom)}(H,u,this.componentDef.encapsulation):td(H,J,function kg(n){const i=n.toLowerCase();return"svg"===i?Ar:"math"===i?"math":null}(J)),Ne=this.componentDef.onPush?288:272,et=wh(0,null,null,1,0,null,null,null,null,null),At=Bf(null,et,null,Ne,null,null,b,H,x,v,null);let Gt,sn;Do(At);try{const Cn=this.componentDef;let Qn,Lt=null;Cn.findHostDirectiveDefs?(Qn=[],Lt=new Map,Cn.findHostDirectiveDefs(Cn,Qn,Lt),Qn.push(Cn)):Qn=[Cn];const pr=function Fg(n,i){const o=n[Ft],u=mr;return n[u]=i,bc(o,u,2,"#host",null)}(At,ae),Ss=function sv(n,i,o,u,l,p,v,b){const x=l[Ft];!function ov(n,i,o,u){for(const l of n)i.mergedAttrs=Fi(i.mergedAttrs,l.hostAttrs);null!==i.mergedAttrs&&(Sh(i,i.mergedAttrs,!0),null!==o&&df(u,o,i))}(u,n,i,v);const H=p.createRenderer(i,o),J=Bf(l,Sc(o),null,o.onPush?32:16,l[n.index],n,p,H,b||null,null,null);return x.firstCreatePass&&_d(x,n,u.length-1),zf(l,J),l[n.index]=J}(pr,ae,Cn,Qn,At,b,H);sn=Jo(et,mr),ae&&function fy(n,i,o,u){if(u)er(n,o,["ng-version",bf.full]);else{const{attrs:l,classes:p}=function Gm(n){const i=[],o=[];let u=1,l=2;for(;u<n.length;){let p=n[u];if("string"==typeof p)2===l?""!==p&&i.push(p,n[++u]):8===l&&o.push(p);else{if(!ma(l))break;l=p}u++}return{attrs:i,classes:o}}(i.selectors[0]);l&&er(n,o,l),p&&p.length>0&&Ho(n,o,p.join(" "))}}(H,Cn,ae,u),void 0!==o&&function av(n,i,o){const u=n.projection=[];for(let l=0;l<i.length;l++){const p=o[l];u.push(null!=p?Array.from(p):null)}}(sn,this.ngContentSelectors,o),Gt=function hy(n,i,o,u,l,p){const v=Bt(),b=l[Ft],x=Kr(v,l);Ih(b,l,v,o,null,u);for(let J=0;J<o.length;J++)nt(Ze(l,b,v.directiveStart+J,v),l);Sg(b,l,v),x&&nt(x,l);const H=Ze(l,b,v.directiveStart+v.componentOffset,v);if(n[Yn]=l[Yn]=H,null!==p)for(const J of p)J(H,i);return jf(b,v,n),H}(Ss,Cn,Qn,Lt,At,[Lg]),_g(et,At,null)}finally{va()}return new dy(this.componentType,Gt,yc(sn,At),At,sn)}}class dy extends Ul{constructor(i,o,u,l,p){super(),this.location=u,this._rootLView=l,this._tNode=p,this.instance=o,this.hostView=this.changeDetectorRef=new iv(l),this.componentType=i}setInput(i,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[i])){const p=this._rootLView;Th(p[Ft],p,l,i,o),Wl(pi(this._tNode.index,p))}}get injector(){return new na(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function Lg(){const n=Bt();gs(ee()[Ft],n)}function Mh(n){let i=function py(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const u=[n];for(;i;){let l;if(Er(n))l=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Le(903,!1);l=i.\u0275dir}if(l){if(o){u.push(l);const v=n;v.inputs=xh(n.inputs),v.declaredInputs=xh(n.declaredInputs),v.outputs=xh(n.outputs);const b=l.hostBindings;b&&gy(n,b);const x=l.viewQuery,H=l.contentQueries;if(x&&lv(n,x),H&&Ug(n,H),be(n.inputs,l.inputs),be(n.declaredInputs,l.declaredInputs),be(n.outputs,l.outputs),Er(l)&&l.data.animation){const J=n.data;J.animation=(J.animation||[]).concat(l.data.animation)}}const p=l.features;if(p)for(let v=0;v<p.length;v++){const b=p[v];b&&b.ngInherit&&b(n),b===Mh&&(o=!1)}}i=Object.getPrototypeOf(i)}!function uv(n){let i=0,o=null;for(let u=n.length-1;u>=0;u--){const l=n[u];l.hostVars=i+=l.hostVars,l.hostAttrs=Fi(l.hostAttrs,o=Fi(o,l.hostAttrs))}}(u)}function xh(n){return n===$e?{}:n===Et?[]:n}function lv(n,i){const o=n.viewQuery;n.viewQuery=o?(u,l)=>{i(u,l),o(u,l)}:i}function Ug(n,i){const o=n.contentQueries;n.contentQueries=o?(u,l,p)=>{i(u,l,p),o(u,l,p)}:i}function gy(n,i){const o=n.hostBindings;n.hostBindings=o?(u,l)=>{i(u,l),o(u,l)}:i}function Jf(n){return!!Oh(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Oh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ka(n,i,o){return n[i]=o}function qo(n,i,o){return!Object.is(n[i],o)&&(n[i]=o,!0)}function Xf(n,i,o,u){const l=ee();return qo(l,Ur(),i)&&(Re(),mu(ri(),l,n,i,o,u)),Xf}function op(n,i,o,u,l,p,v,b){const x=ee(),H=Re(),J=n+mr,ae=H.firstCreatePass?function dv(n,i,o,u,l,p,v,b,x){const H=i.consts,J=bc(i,n,4,v||null,Hi(H,b));Ac(i,o,J,Hi(H,x)),gs(i,J);const ae=J.tView=wh(2,J,u,l,p,i.directiveRegistry,i.pipeRegistry,null,i.schemas,H);return null!==i.queries&&(i.queries.template(i,J),ae.queries=i.queries.embeddedTView(J)),J}(J,H,x,i,o,u,l,p,v):H.data[J];dr(ae,!1);const Ne=x[ln].createComment("");Nu(H,x,Ne,ae),nt(Ne,x),zf(x,x[J]=xg(Ne,x,Ne,ae)),is(ae)&&vg(H,x,ae),null!=v&&zl(x,ae,b)}function ap(n){return xi(function di(){return xn.lFrame.contextLView}(),mr+n)}function Wg(n,i,o){const u=ee();return qo(u,Ur(),i)&&function ya(n,i,o,u,l,p,v,b){const x=Kr(i,o);let J,H=i.inputs;!b&&null!=H&&(J=H[u])?(Th(n,o,J,u,l),Or(i)&&function uy(n,i){const o=pi(i,n);16&o[Mn]||(o[Mn]|=32)}(o,i.index)):3&i.type&&(u=function wg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),l=null!=v?v(l,i.value||"",u):l,p.setProperty(x,u,l))}(Re(),ri(),u,n,i,u[ln],o,!1),Wg}function kh(n,i,o,u,l){const v=l?"class":"style";Th(n,o,i.inputs[v],v,u)}function xd(n,i,o,u){const l=ee(),p=Re(),v=mr+n,b=l[ln],x=p.firstCreatePass?function fv(n,i,o,u,l,p){const v=i.consts,x=bc(i,n,2,u,Hi(v,l));return Ac(i,o,x,Hi(v,p)),null!==x.attrs&&Sh(x,x.attrs,!1),null!==x.mergedAttrs&&Sh(x,x.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,x),x}(v,p,l,i,o,u):p.data[v],H=l[v]=td(b,i,function ta(){return xn.lFrame.currentNamespace}()),J=is(x);return dr(x,!0),df(b,H,x),32!=(32&x.flags)&&Nu(p,l,H,x),0===function N(){return xn.lFrame.elementDepthCount}()&&nt(H,l),function P(){xn.lFrame.elementDepthCount++}(),J&&(vg(p,l,x),jf(p,x,l)),null!==u&&zl(l,x),xd}function Rd(){let n=Bt();Hr()?Lr():(n=n.parent,dr(n,!1));const i=n;!function I(){xn.lFrame.elementDepthCount--}();const o=Re();return o.firstCreatePass&&(gs(o,n),Wn(n)&&o.queries.elementEnd(n)),null!=i.classesWithoutHost&&function Zn(n){return 0!=(8&n.flags)}(i)&&kh(o,i,ee(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Sn(n){return 0!=(16&n.flags)}(i)&&kh(o,i,ee(),i.stylesWithoutHost,!1),Rd}function Fh(n,i,o,u){return xd(n,i,o,u),Rd(),Fh}function Lh(n,i,o){const u=ee(),l=Re(),p=n+mr,v=l.firstCreatePass?function Pd(n,i,o,u,l){const p=i.consts,v=Hi(p,u),b=bc(i,n,8,"ng-container",v);return null!==v&&Sh(b,v,!0),Ac(i,o,b,Hi(p,l)),null!==i.queries&&i.queries.elementStart(i,b),b}(p,l,u,i,o):l.data[p];dr(v,!0);const b=u[p]=u[ln].createComment("");return Nu(l,u,b,v),nt(b,u),is(v)&&(vg(l,u,v),jf(l,v,u)),null!=o&&zl(u,v),Lh}function Od(){let n=Bt();const i=Re();return Hr()?Lr():(n=n.parent,dr(n,!1)),i.firstCreatePass&&(gs(i,n),Wn(n)&&i.queries.elementEnd(n)),Od}function up(){return ee()}function yu(n){return!!n&&"function"==typeof n.then}function lp(n){return!!n&&"function"==typeof n.subscribe}const Ey=lp;function Uh(n,i,o,u){const l=ee(),p=Re(),v=Bt();return function cp(n,i,o,u,l,p,v){const b=is(u),H=n.firstCreatePass&&Wf(n),J=i[Yn],ae=wd(i);let Ne=!0;if(3&u.type||v){const Gt=Kr(u,i),sn=v?v(Gt):Gt,Cn=ae.length,Qn=v?pr=>v(ci(pr[u.index])):u.index;let Lt=null;if(!v&&b&&(Lt=function pv(n,i,o,u){const l=n.cleanup;if(null!=l)for(let p=0;p<l.length-1;p+=2){const v=l[p];if(v===o&&l[p+1]===u){const b=i[Pi],x=l[p+2];return b.length>x?b[x]:null}"string"==typeof v&&(p+=2)}return null}(n,i,l,u.index)),null!==Lt)(Lt.__ngLastListenerFn__||Lt).__ngNextListenerFn__=p,Lt.__ngLastListenerFn__=p,Ne=!1;else{p=dp(u,i,J,p,!1);const pr=o.listen(sn,l,p);ae.push(p,pr),H&&H.push(l,Qn,Cn,Cn+1)}}else p=dp(u,i,J,p,!1);const et=u.outputs;let At;if(Ne&&null!==et&&(At=et[l])){const Gt=At.length;if(Gt)for(let sn=0;sn<Gt;sn+=2){const Ss=i[At[sn]][At[sn+1]].subscribe(p),ao=ae.length;ae.push(p,Ss),H&&H.push(l,u.index,ao,-(ao+1))}}}(p,l,l[ln],v,n,i,u),Uh}function Iy(n,i,o,u){try{return li(6,i,o),!1!==o(u)}catch(l){return qf(n,l),!1}finally{li(7,i,o)}}function dp(n,i,o,u,l){return function p(v){if(v===Function)return u;Wl(n.componentOffset>-1?pi(n.index,i):i);let x=Iy(i,o,u,v),H=p.__ngNextListenerFn__;for(;H;)x=Iy(i,o,H,v)&&x,H=H.__ngNextListenerFn__;return l&&!1===x&&(v.preventDefault(),v.returnValue=!1),x}}function Dy(n=1){return function ea(n){return(xn.lFrame.contextLView=function Ea(n,i){for(;n>0;)i=i[ki],n--;return i}(n,xn.lFrame.contextLView))[Yn]}(n)}function qg(n,i){let o=null;const u=function Nf(n){const i=n.attrs;if(null!=i){const o=i.indexOf(5);if(!(1&o))return i[o+1]}return null}(n);for(let l=0;l<i.length;l++){const p=i[l];if("*"!==p){if(null===u?Of(n,p,!0):gh(u,p))return l}else o=l}return o}function Cy(n){const i=ee()[Wr][Pr];if(!i.projection){const u=i.projection=E(n?n.length:1,null),l=u.slice();let p=i.child;for(;null!==p;){const v=n?qg(p,n):0;null!==v&&(l[v]?l[v].projectionNext=p:u[v]=p,l[v]=p),p=p.next}}}function hp(n,i=0,o){const u=ee(),l=Re(),p=bc(l,mr+n,16,null,o||null);null===p.projection&&(p.projection=i),Lr(),32!=(32&p.flags)&&function od(n,i,o){Ol(i[ln],0,i,o,nd(n,o,i),sd(o.parent||i[Pr],o,i))}(l,u,p)}function yp(n,i){return n<<17|i<<2}function Ya(n){return n>>17&32767}function _p(n){return 2|n}function Qa(n){return(131068&n)>>2}function vp(n,i){return-131069&n|i<<2}function Qg(n){return 1|n}function Ip(n,i,o,u,l){const p=n[o+1],v=null===i;let b=u?Ya(p):Qa(p),x=!1;for(;0!==b&&(!1===x||v);){const J=n[b+1];Jg(n[b],i)&&(x=!0,n[b+1]=u?Qg(J):_p(J)),b=u?Ya(J):Qa(J)}x&&(n[o+1]=u?_p(p):Qg(p))}function Jg(n,i){return null===n||null==i||(Array.isArray(n)?n[1]:n)===i||!(!Array.isArray(n)||"string"!=typeof i)&&Fe(n,i)>=0}function Dp(n,i){return function _u(n,i,o,u){const l=ee(),p=Re(),v=function ni(n){const i=xn.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+n,o}(2);p.firstUpdatePass&&function am(n,i,o,u){const l=n.data;if(null===l[o+1]){const p=l[Xi()],v=function om(n,i){return i>=n.expandoStartIndex}(n,o);(function Uy(n,i){return 0!=(n.flags&(i?8:16))})(p,u)&&null===i&&!v&&(i=!1),i=function um(n,i,o,u){const l=function aa(n){const i=xn.lFrame.currentDirectiveIndex;return-1===i?null:n[i]}(n);let p=u?i.residualClasses:i.residualStyles;if(null===l)0===(u?i.classBindings:i.styleBindings)&&(o=Cr(o=Nd(null,n,i,o,u),i.attrs,u),p=null);else{const v=i.directiveStylingLast;if(-1===v||n[v]!==l)if(o=Nd(l,n,i,o,u),null===p){let x=function Py(n,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==Qa(u))return n[Ya(u)]}(n,i,u);void 0!==x&&Array.isArray(x)&&(x=Nd(null,n,i,x[1],u),x=Cr(x,i.attrs,u),function Oy(n,i,o,u){n[Ya(o?i.classBindings:i.styleBindings)]=u}(n,i,u,x))}else p=function Ny(n,i,o){let u;const l=i.directiveEnd;for(let p=1+i.directiveStylingLast;p<l;p++)u=Cr(u,n[p].hostAttrs,o);return Cr(u,i.attrs,o)}(n,i,u)}return void 0!==p&&(u?i.residualClasses=p:i.residualStyles=p),o}(l,p,i,u),function mv(n,i,o,u,l,p){let v=p?i.classBindings:i.styleBindings,b=Ya(v),x=Qa(v);n[u]=o;let J,H=!1;if(Array.isArray(o)?(J=o[1],(null===J||Fe(o,J)>0)&&(H=!0)):J=o,l)if(0!==x){const Ne=Ya(n[b+1]);n[u+1]=yp(Ne,b),0!==Ne&&(n[Ne+1]=vp(n[Ne+1],u)),n[b+1]=function Yg(n,i){return 131071&n|i<<17}(n[b+1],u)}else n[u+1]=yp(b,0),0!==b&&(n[b+1]=vp(n[b+1],u)),b=u;else n[u+1]=yp(x,0),0===b?b=u:n[x+1]=vp(n[x+1],u),x=u;H&&(n[u+1]=_p(n[u+1])),Ip(n,J,u,!0),Ip(n,J,u,!1),function wp(n,i,o,u,l){const p=l?n.residualClasses:n.residualStyles;null!=p&&"string"==typeof i&&Fe(p,i)>=0&&(o[u+1]=Qg(o[u+1]))}(i,J,n,u,p),v=yp(b,x),p?i.classBindings=v:i.styleBindings=v}(l,p,i,o,v,u)}}(p,n,v,u),i!==Pn&&qo(l,v,i)&&function qi(n,i,o,u,l,p,v,b){if(!(3&i.type))return;const x=n.data,H=x[b+1],J=function Ep(n){return 1==(1&n)}(H)?_o(x,i,o,l,Qa(H),v):void 0;Pa(J)||(Pa(p)||function gv(n){return 2==(2&n)}(H)&&(p=_o(x,null,o,l,b,v)),function cf(n,i,o,u,l){if(i)l?n.addClass(o,u):n.removeClass(o,u);else{let p=-1===u.indexOf("-")?void 0:go.DashCase;null==l?n.removeStyle(o,u,p):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),p|=go.Important),n.setStyle(o,u,l,p))}}(u,v,ei(Xi(),o),l,p))}(p,p.data[Xi()],l,l[ln],n,l[v+1]=function Ly(n,i){return null==n||""===n||("string"==typeof i?n+=i:"object"==typeof n&&(n=F(oo(n)))),n}(i,o),u,v)}(n,i,null,!0),Dp}function Nd(n,i,o,u,l){let p=null;const v=o.directiveEnd;let b=o.directiveStylingLast;for(-1===b?b=o.directiveStart:b++;b<v&&(p=i[b],u=Cr(u,p.hostAttrs,l),p!==n);)b++;return null!==n&&(o.directiveStylingLast=b),u}function Cr(n,i,o){const u=o?1:2;let l=-1;if(null!==i)for(let p=0;p<i.length;p++){const v=i[p];"number"==typeof v?l=v:l===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),K(n,v,!!o||i[++p]))}return void 0===n?null:n}function _o(n,i,o,u,l,p){const v=null===i;let b;for(;l>0;){const x=n[l],H=Array.isArray(x),J=H?x[1]:x,ae=null===J;let Ne=o[l+1];Ne===Pn&&(Ne=ae?Et:void 0);let et=ae?te(Ne,u):J===u?Ne:void 0;if(H&&!Pa(et)&&(et=te(x,u)),Pa(et)&&(b=et,v))return b;const At=n[l+1];l=v?Ya(At):Qa(At)}if(null!==i){let x=p?i.residualClasses:i.residualStyles;null!=x&&(b=te(x,u))}return b}function Pa(n){return void 0!==n}function Hh(n,i=""){const o=ee(),u=Re(),l=n+mr,p=u.firstCreatePass?bc(u,l,1,i,null):u.data[l],v=o[l]=function Pu(n,i){return n.createText(i)}(o[ln],i);Nu(u,o,v,p),dr(p,!1)}function Cp(n){return kd("",n,""),Cp}function kd(n,i,o){const u=ee(),l=function Rc(n,i,o,u){return qo(n,Ur(),o)?i+st(o)+u:Pn}(u,n,i,o);return l!==Pn&&function Wo(n,i,o){const u=ei(i,n);!function ed(n,i,o){n.setValue(i,o)}(n[ln],u,o)}(u,Xi(),l),kd}const _l=void 0;var xv=["en",[["a","p"],["AM","PM"],_l],[["AM","PM"],_l,_l],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_l,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_l,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_l,"{1} 'at' {0}",_l],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Mv(n){const o=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Ld={};function Kh(n){const i=function Zh(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=fm(i);if(o)return o;const u=i.split("-")[0];if(o=fm(u),o)return o;if("en"===u)return xv;throw new Le(701,!1)}function Kl(n){return Kh(n)[Bn.PluralCase]}function fm(n){return n in Ld||(Ld[n]=zn.ng&&zn.ng.common&&zn.ng.common.locales&&zn.ng.common.locales[n]),Ld[n]}var Bn=(()=>((Bn=Bn||{})[Bn.LocaleId=0]="LocaleId",Bn[Bn.DayPeriodsFormat=1]="DayPeriodsFormat",Bn[Bn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Bn[Bn.DaysFormat=3]="DaysFormat",Bn[Bn.DaysStandalone=4]="DaysStandalone",Bn[Bn.MonthsFormat=5]="MonthsFormat",Bn[Bn.MonthsStandalone=6]="MonthsStandalone",Bn[Bn.Eras=7]="Eras",Bn[Bn.FirstDayOfWeek=8]="FirstDayOfWeek",Bn[Bn.WeekendRange=9]="WeekendRange",Bn[Bn.DateFormat=10]="DateFormat",Bn[Bn.TimeFormat=11]="TimeFormat",Bn[Bn.DateTimeFormat=12]="DateTimeFormat",Bn[Bn.NumberSymbols=13]="NumberSymbols",Bn[Bn.NumberFormats=14]="NumberFormats",Bn[Bn.CurrencyCode=15]="CurrencyCode",Bn[Bn.CurrencySymbol=16]="CurrencySymbol",Bn[Bn.CurrencyName=17]="CurrencyName",Bn[Bn.Currencies=18]="Currencies",Bn[Bn.Directionality=19]="Directionality",Bn[Bn.PluralCase=20]="PluralCase",Bn[Bn.ExtraData=21]="ExtraData",Bn))();const vl="en-US";let Ap=vl;function Pp(n,i,o,u,l){if(n=_e(n),Array.isArray(n))for(let p=0;p<n.length;p++)Pp(n[p],i,o,u,l);else{const p=Re(),v=ee();let b=Ll(n)?n:_e(n.provide),x=sg(n);const H=Bt(),J=1048575&H.providerIndexes,ae=H.directiveStart,Ne=H.providerIndexes>>20;if(Ll(n)||!n.multi){const et=new de(x,l,Gl),At=Jh(b,i,l?J:J+Ne,ae);-1===At?(ct(ua(H,v),p,b),Op(p,n,i.length),i.push(b),H.directiveStart++,H.directiveEnd++,l&&(H.providerIndexes+=1048576),o.push(et),v.push(et)):(o[At]=et,v[At]=et)}else{const et=Jh(b,i,J+Ne,ae),At=Jh(b,i,J,J+Ne),sn=At>=0&&o[At];if(l&&!sn||!l&&!(et>=0&&o[et])){ct(ua(H,v),p,b);const Cn=function kp(n,i,o,u,l){const p=new de(n,o,Gl);return p.multi=[],p.index=i,p.componentProviders=0,zd(p,l,u&&!o),p}(l?m0:g0,o.length,l,u,x);!l&&sn&&(o[At].providerFactory=Cn),Op(p,n,i.length,0),i.push(b),H.directiveStart++,H.directiveEnd++,l&&(H.providerIndexes+=1048576),o.push(Cn),v.push(Cn)}else Op(p,n,et>-1?et:At,zd(o[l?At:et],x,!l&&u));!l&&u&&sn&&o[At].componentProviders++}}}function Op(n,i,o,u){const l=Ll(i),p=function dh(n){return!!n.useClass}(i);if(l||p){const x=(p?_e(i.useClass):i).prototype.ngOnDestroy;if(x){const H=n.destroyHooks||(n.destroyHooks=[]);if(!l&&i.multi){const J=H.indexOf(o);-1===J?H.push(o,[u,x]):H[J+1].push(u,x)}else H.push(o,x)}}}function zd(n,i,o){return o&&n.componentProviders++,n.multi.push(i)-1}function Jh(n,i,o,u){for(let l=o;l<u;l++)if(i[l]===n)return l;return-1}function g0(n,i,o,u){return Np(this.multi,[])}function m0(n,i,o,u){const l=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,b=Ze(o,o[Ft],this.providerFactory.index,u);p=b.slice(0,v),Np(l,p);for(let x=v;x<b.length;x++)p.push(b[x])}else p=[],Np(l,p);return p}function Np(n,i){for(let o=0;o<n.length;o++)i.push((0,n[o])());return i}function l_(n,i=[]){return o=>{o.providersResolver=(u,l)=>function wm(n,i,o){const u=Re();if(u.firstCreatePass){const l=Er(n);Pp(o,u.data,u.blueprint,l,!0),Pp(i,u.data,u.blueprint,l,!1)}}(u,l?l(n):n,i)}}class Bc{}class Im{}function $c(n,i){return new Ko(n,i??null)}class Ko extends Bc{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zf(this);const u=Zr(i);this._bootstrapComponents=Ra(u.bootstrap),this._r3Injector=cg(i,o,[{provide:Bc,useValue:this},{provide:hd,useValue:this.componentFactoryResolver}],F(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Fp extends Im{constructor(i){super(),this.moduleType=i}create(i){return new Ko(this.moduleType,i)}}class c_ extends Bc{constructor(i,o,u){super(),this.componentFactoryResolver=new Zf(this),this.instance=null;const l=new Df([...i,{provide:Bc,useValue:this},{provide:hd,useValue:this.componentFactoryResolver}],o||If(),u,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function jc(n,i,o=null){return new c_(n,i,o).injector}let Xh=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const u=pc(0,o.type),l=u.length>0?jc([u],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,l)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=vt({token:n,providedIn:"environment",factory:()=>new n(Fn(gu))}),n})();function Zo(n){n.getStandaloneInjector=i=>i.get(Xh).getOrCreateStandaloneInjector(n)}function bm(n,i,o){const u=sr()+n,l=ee();return l[u]===Pn?Ka(l,u,o?i.call(o):i()):function Nh(n,i){return n[i]}(l,u)}function f_(n,i,o,u){return v_(ee(),sr(),n,i,o,u)}function Bp(n,i,o,u,l){return function Tm(n,i,o,u,l,p,v){const b=i+o;return function ml(n,i,o,u){const l=qo(n,i,o);return qo(n,i+1,u)||l}(n,b,l,p)?Ka(n,b+2,v?u.call(v,l,p):u(l,p)):ef(n,b+2)}(ee(),sr(),n,i,o,u,l)}function ef(n,i){const o=n[i];return o===Pn?void 0:o}function v_(n,i,o,u,l,p){const v=i+o;return qo(n,v,l)?Ka(n,v+1,p?u.call(p,l):u(l)):ef(n,v+1)}function e(n,i){const o=Re();let u;const l=n+mr;o.firstCreatePass?(u=function t(n,i){if(i)for(let o=i.length-1;o>=0;o--){const u=i[o];if(n===u.name)return u}}(i,o.pipeRegistry),o.data[l]=u,u.onDestroy&&(o.destroyHooks??(o.destroyHooks=[])).push(l,u.onDestroy)):u=o.data[l];const p=u.factory||(u.factory=wi(u.type)),v=Br(Gl);try{const b=Du(!1),x=p();return Du(b),function hv(n,i,o,u){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),i[o]=u}(o,ee(),l,x),x}finally{Br(v)}}function a(n,i,o){const u=n+mr,l=ee(),p=xi(l,u);return function j(n,i){return n[Ft].data[i].pure}(l,u)?v_(l,sr(),i,p.transform,o,p):p.transform(o)}function fe(n){return i=>{setTimeout(n,void 0,i)}}const We=class X extends g.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){let l=i,p=o||(()=>null),v=u;if(i&&"object"==typeof i){const x=i;l=x.next?.bind(x),p=x.error?.bind(x),v=x.complete?.bind(x)}this.__isAsync&&(p=fe(p),l&&(l=fe(l)),v&&(v=fe(v)));const b=super.subscribe({next:l,error:p,complete:v});return i instanceof W.w0&&i.add(b),b}};function gt(){return this._results[Symbol.iterator]()}class $t{get changes(){return this._changes||(this._changes=new We)}constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=$t.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=gt)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const l=function $s(n){return n.flat(Number.POSITIVE_INFINITY)}(i);(this._changesDetected=!function Ps(n,i,o){if(n.length!==i.length)return!1;for(let u=0;u<n.length;u++){let l=n[u],p=i[u];if(o&&(l=o(l),p=o(p)),p!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Jt=(()=>{class n{}return n.__NG_ELEMENT_ID__=zr,n})();const cn=Jt,hr=class extends cn{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i,o){const u=this._declarationTContainer.tView,l=Bf(this._declarationLView,u,i,16,null,u.declTNode,null,null,null,null,o||null);l[_s]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Ai];return null!==v&&(l[Ai]=v.createEmbeddedView(u)),_g(u,l,i),new Mc(l)}};function zr(){return tr(Bt(),ee())}function tr(n,i){return 4&n.type?new hr(i,n,yc(n,i)):null}let Zi=(()=>{class n{}return n.__NG_ELEMENT_ID__=Yi,n})();function Yi(){return dE(Bt(),ee())}const Bi=Zi,Po=class extends Bi{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return yc(this._hostTNode,this._hostLView)}get injector(){return new na(this._hostTNode,this._hostLView)}get parentInjector(){const i=Dl(this._hostTNode,this._hostLView);if(Li(i)){const o=Bs(i,this._hostLView),u=os(i);return new na(o[Ft].data[u+8],o)}return new na(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=tc(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-Tt}createEmbeddedView(i,o,u){let l,p;"number"==typeof u?l=u:null!=u&&(l=u.index,p=u.injector);const v=i.createEmbeddedView(o||{},p);return this.insert(v,l),v}createComponent(i,o,u,l,p){const v=i&&!function Fa(n){return"function"==typeof n}(i);let b;if(v)b=o;else{const ae=o||{};b=ae.index,u=ae.injector,l=ae.projectableNodes,p=ae.environmentInjector||ae.ngModuleRef}const x=v?i:new xc(un(i)),H=u||this.parentInjector;if(!p&&null==x.ngModule){const Ne=(v?H:this.parentInjector).get(gu,null);Ne&&(p=Ne)}const J=x.create(H,l,void 0,p);return this.insert(J.hostView,b),J}insert(i,o){const u=i._lView,l=u[Ft];if(function to(n){return Dn(n[vr])}(u)){const J=this.indexOf(i);if(-1!==J)this.detach(J);else{const ae=u[vr],Ne=new Po(ae,ae[Pr],ae[vr]);Ne.detach(Ne.indexOf(i))}}const p=this._adjustIndex(o),v=this._lContainer;!function tl(n,i,o,u){const l=Tt+u,p=o.length;u>0&&(o[l-1][yi]=i),u<p-Tt?(i[yi]=o[l],zu(o,Tt+u,i)):(o.push(i),i[yi]=null),i[vr]=o;const v=i[_s];null!==v&&o!==v&&function Wp(n,i){const o=n[dt];i[Wr]!==i[vr][vr][Wr]&&(n[xe]=!0),null===o?n[dt]=[i]:o.push(i)}(v,i);const b=i[Ai];null!==b&&b.insertView(n),i[Mn]|=64}(l,u,v,p);const b=ku(p,v),x=u[ln],H=ac(x,v[Ie]);return null!==H&&function Xd(n,i,o,u,l,p){u[ai]=l,u[Pr]=i,Pl(n,u,o,1,l,p)}(l,v[Pr],x,u,H,b),i.attachToViewContainerRef(),zu($p(v),p,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=tc(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=Ml(this._lContainer,o);u&&(js($p(this._lContainer),o),uf(u[Ft],u))}detach(i){const o=this._adjustIndex(i,-1),u=Ml(this._lContainer,o);return u&&null!=js($p(this._lContainer),o)?new Mc(u):null}_adjustIndex(i,o=0){return i??this.length+o}};function tc(n){return n[je]}function $p(n){return n[je]||(n[je]=[])}function dE(n,i){let o;const u=i[n.index];if(Dn(u))o=u;else{let l;if(8&n.type)l=ci(u);else{const p=i[ln];l=p.createComment("");const v=Kr(n,i);ra(p,ac(p,v),l,function du(n,i){return n.nextSibling(i)}(p,v),!1)}i[n.index]=o=xg(u,i,l,n),zf(i,o)}return new Po(o,n,i)}class D0{constructor(i){this.queryList=i,this.matches=null}clone(){return new D0(this.queryList)}setDirty(){this.queryList.setDirty()}}class C0{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,l=[];for(let p=0;p<u;p++){const v=o.getByIndex(p);l.push(this.queries[v.indexInDeclarationView].clone())}return new C0(l)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==vE(i,o).matches&&this.queries[o].setDirty()}}class hE{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class b0{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,p=this.getByIndex(u).embeddedTView(i,l);p&&(p.indexInDeclarationView=u,null!==o?o.push(p):o=[p])}return null!==o?new b0(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class T0{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new T0(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const p=u[l];this.matchTNodeWithReadOption(i,o,yw(o,p)),this.matchTNodeWithReadOption(i,o,Yt(o,i,p,!1,!1))}else u===Jt?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,Yt(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===Vl||l===Zi||l===Jt&&4&o.type)this.addMatch(o.index,-2);else{const p=Yt(o,i,l,!1,!1);null!==p&&this.addMatch(o.index,p)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function yw(n,i){const o=n.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function vw(n,i,o,u){return-1===o?function _w(n,i){return 11&n.type?yc(n,i):4&n.type?tr(n,i):null}(i,n):-2===o?function Ew(n,i,o){return o===Vl?yc(i,n):o===Jt?tr(i,n):o===Zi?dE(i,n):void 0}(n,i,u):Ze(n,n[Ft],o,i)}function fE(n,i,o,u){const l=i[Ai].queries[u];if(null===l.matches){const p=n.data,v=o.matches,b=[];for(let x=0;x<v.length;x+=2){const H=v[x];b.push(H<0?null:vw(i,p[H],v[x+1],o.metadata.read))}l.matches=b}return l.matches}function S0(n,i,o,u){const l=n.queries.getByIndex(o),p=l.matches;if(null!==p){const v=fE(n,i,l,o);for(let b=0;b<p.length;b+=2){const x=p[b];if(x>0)u.push(v[b/2]);else{const H=p[b+1],J=i[-x];for(let ae=Tt;ae<J.length;ae++){const Ne=J[ae];Ne[_s]===Ne[vr]&&S0(Ne[Ft],Ne,H,u)}if(null!==J[dt]){const ae=J[dt];for(let Ne=0;Ne<ae.length;Ne++){const et=ae[Ne];S0(et[Ft],et,H,u)}}}}}return u}function pE(n){const i=ee(),o=Re(),u=Xo();Io(u+1);const l=vE(o,u);if(n.dirty&&function eo(n){return 4==(4&n[Mn])}(i)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const p=l.crossesNgTemplate?S0(o,i,u,[]):fE(o,i,l,u);n.reset(p,_c),n.notifyOnChanges()}return!0}return!1}function gE(n,i,o,u){const l=Re();if(l.firstCreatePass){const p=Bt();(function _E(n,i,o){null===n.queries&&(n.queries=new b0),n.queries.track(new T0(i,o))})(l,new hE(i,o,u),p.index),function Dw(n,i){const o=n.contentQueries||(n.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,i)}(l,n),2==(2&o)&&(l.staticContentQueries=!0)}!function yE(n,i,o){const u=new $t(4==(4&o));Eg(n,i,u,u.destroy),null===i[Ai]&&(i[Ai]=new C0),i[Ai].queries.push(new D0(u))}(l,ee(),o)}function mE(){return function Iw(n,i){return n[Ai].queries[i].queryList}(ee(),Xo())}function vE(n,i){return n.queries.getByIndex(i)}function EE(n,i){return tr(n,i)}function A0(n){return!!Zr(n)}function I_(...n){}const UE=new Mr("Application Initializer");let D_=(()=>{class n{constructor(o){this.appInits=o,this.resolve=I_,this.reject=I_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const p=this.appInits[l]();if(yu(p))o.push(p);else if(Ey(p)){const v=new Promise((b,x)=>{p.subscribe({complete:b,error:x})});o.push(v)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Fn(UE,8))},n.\u0275prov=vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const VE=new Mr("AppId",{providedIn:"root",factory:function BE(){return`${O0()}${O0()}${O0()}`}});function O0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $E=new Mr("Platform Initializer"),Hw=new Mr("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let Gw=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const C_=new Mr("LocaleId",{providedIn:"root",factory:()=>Oe(C_,Ut.Optional|Ut.SkipSelf)||function zw(){return typeof $localize<"u"&&$localize.locale||vl}()}),Ww=new Mr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class qw{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let Kw=(()=>{class n{compileModuleSync(o){return new Fp(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),p=Ra(Zr(o).declarations).reduce((v,b)=>{const x=un(b);return x&&v.push(new xc(x)),v},[]);return new qw(u,p)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qw=(()=>Promise.resolve(0))();function N0(n){typeof Zone>"u"?Qw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class $u{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new We(!1),this.onMicrotaskEmpty=new We(!1),this.onStable=new We(!1),this.onError=new We(!1),typeof Zone>"u")throw new Le(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Jw(){let n=zn.requestAnimationFrame,i=zn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function tI(n){const i=()=>{!function eI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(zn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,F0(n),n.isCheckStableRunning=!0,k0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),F0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,p,v,b)=>{try{return GE(n),o.invokeTask(l,p,v,b)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||n.shouldCoalesceRunChangeDetection)&&i(),zE(n)}},onInvoke:(o,u,l,p,v,b,x)=>{try{return GE(n),o.invoke(l,p,v,b,x)}finally{n.shouldCoalesceRunChangeDetection&&i(),zE(n)}},onHasTask:(o,u,l,p)=>{o.hasTask(l,p),u===l&&("microTask"==p.change?(n._hasPendingMicrotasks=p.microTask,F0(n),k0(n)):"macroTask"==p.change&&(n.hasPendingMacrotasks=p.macroTask))},onHandleError:(o,u,l,p)=>(o.handleError(l,p),n.runOutsideAngular(()=>n.onError.emit(p)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$u.isInAngularZone())throw new Le(909,!1)}static assertNotInAngularZone(){if($u.isInAngularZone())throw new Le(909,!1)}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,l){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+l,i,Xw,I_,I_);try{return p.runTask(v,o,u)}finally{p.cancelTask(v)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const Xw={};function k0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function F0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function GE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function zE(n){n._nesting--,k0(n)}class nI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new We,this.onMicrotaskEmpty=new We,this.onStable=new We,this.onError=new We}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,l){return i.apply(o,u)}}const WE=new Mr(""),qE=new Mr("");let L0,rI=(()=>{class n{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,L0||(function iI(n){L0=n}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$u.assertNotInAngularZone(),N0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())N0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:p,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return n.\u0275fac=function(o){return new(o||n)(Fn($u),Fn(KE),Fn(qE))},n.\u0275prov=vt({token:n,factory:n.\u0275fac}),n})(),KE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return L0?.findTestabilityInTree(this,o,u)??null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const zc=!1;let Wd=null;const ZE=new Mr("AllowMultipleToken"),U0=new Mr("PlatformDestroyListeners"),YE=new Mr("appBootstrapListener");class aI{constructor(i,o){this.name=i,this.token=o}}function JE(n,i,o=[]){const u=`Platform: ${i}`,l=new Mr(u);return(p=[])=>{let v=V0();if(!v||v.injector.get(ZE,!1)){const b=[...o,...p,{provide:l,useValue:!0}];n?n(b):function uI(n){if(Wd&&!Wd.get(ZE,!1))throw new Le(400,!1);Wd=n;const i=n.get(ew);(function QE(n){const i=n.get($E,null);i&&i.forEach(o=>o())})(n)}(function XE(n=[],i){return Dc.create({name:i,providers:[{provide:wf,useValue:"platform"},{provide:U0,useValue:new Set([()=>Wd=null])},...n]})}(b,u))}return function cI(n){const i=V0();if(!i)throw new Le(401,!1);return i}()}}function V0(){return Wd?.get(ew)??null}let ew=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function nw(n,i){let o;return o="noop"===n?new nI:("zone.js"===n?void 0:n)||new $u(i),o}(u?.ngZone,function tw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),p=[{provide:$u,useValue:l}];return l.run(()=>{const v=Dc.create({providers:p,parent:this.injector,name:o.moduleType.name}),b=o.create(v),x=b.injector.get(fd,null);if(!x)throw new Le(402,!1);return l.runOutsideAngular(()=>{const H=l.onError.subscribe({next:J=>{x.handleError(J)}});b.onDestroy(()=>{T_(this._modules,b),H.unsubscribe()})}),function rw(n,i,o){try{const u=o();return yu(u)?u.catch(l=>{throw i.runOutsideAngular(()=>n.handleError(l)),l}):u}catch(u){throw i.runOutsideAngular(()=>n.handleError(u)),u}}(x,l,()=>{const H=b.injector.get(D_);return H.runInitializers(),H.donePromise.then(()=>(function Ud(n){tt(n,"Expected localeId to be defined"),"string"==typeof n&&(Ap=n.toLowerCase().replace(/_/g,"-"))}(b.injector.get(C_,vl)||vl),this._moduleDoBootstrap(b),b))})})}bootstrapModule(o,u=[]){const l=iw({},u);return function sI(n,i,o){const u=new Fp(o);return Promise.resolve(u)}(0,0,o).then(p=>this.bootstrapModuleFactory(p,l))}_moduleDoBootstrap(o){const u=o.injector.get(b_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Le(-403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(U0,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Fn(Dc))},n.\u0275prov=vt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function iw(n,i){return Array.isArray(i)?i.reduce(iw,n):{...n,...i}}let b_=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new q.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),v=new q.y(b=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{$u.assertNotInAngularZone(),N0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const H=this._zone.onUnstable.subscribe(()=>{$u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{x.unsubscribe(),H.unsubscribe()}});this.isStable=(0,ye.T)(p,v.pipe((0,ge.B)()))}bootstrap(o,u){const l=o instanceof mc;if(!this._injector.get(D_).done){!l&&gr(o);throw new Le(405,zc)}let v;v=l?o:this._injector.get(hd).resolveComponentFactory(o),this.componentTypes.push(v.componentType);const b=function oI(n){return n.isBoundToModule}(v)?void 0:this._injector.get(Bc),H=v.create(Dc.NULL,[],u||v.selector,b),J=H.location.nativeElement,ae=H.injector.get(WE,null);return ae?.registerApplication(J),H.onDestroy(()=>{this.detachView(H.hostView),T_(this.components,H),ae?.unregisterApplication(J)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new Le(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;T_(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const u=this._injector.get(YE,[]);u.push(...this._bootstrapListeners),u.forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>T_(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Le(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(Fn($u),Fn(gu),Fn(fd))},n.\u0275prov=vt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function T_(n,i){const o=n.indexOf(i);o>-1&&n.splice(o,1)}function hI(){return!1}function fI(){}let pI=(()=>{class n{}return n.__NG_ELEMENT_ID__=gI,n})();function gI(n){return function mI(n,i,o){if(Or(n)&&!o){const u=pi(n.index,i);return new Mc(u,u)}return 47&n.type?new Mc(i[Wr],i):null}(Bt(),ee(),16==(16&n))}class lw{constructor(){}supports(i){return Jf(i)}create(i){return new II(i)}}const wI=(n,i)=>i;class II{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||wI}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,l=0,p=null;for(;o||u;){const v=!u||o&&o.currentIndex<dw(u,l,p)?o:u,b=dw(v,l,p),x=v.currentIndex;if(v===u)l--,u=u._nextRemoved;else if(o=o._next,null==v.previousIndex)l++;else{p||(p=[]);const H=b-l,J=x-l;if(H!=J){for(let Ne=0;Ne<H;Ne++){const et=Ne<p.length?p[Ne]:p[Ne]=0,At=et+Ne;J<=At&&At<H&&(p[Ne]=et+1)}p[v.previousIndex]=J-H}}b!==x&&i(v,b,x)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Jf(i))throw new Le(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let l,p,v,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let b=0;b<this.length;b++)p=i[b],v=this._trackByFn(b,p),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,p,v,b)),Object.is(o.item,p)||this._addIdentityChange(o,p)):(o=this._mismatch(o,p,v,b),u=!0),o=o._next}else l=0,function Hg(n,i){if(Array.isArray(n))for(let o=0;o<n.length;o++)i(n[o]);else{const o=n[Symbol.iterator]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,b=>{v=this._trackByFn(l,b),null!==o&&Object.is(o.trackById,v)?(u&&(o=this._verifyReinsertion(o,b,v,l)),Object.is(o.item,b)||this._addIdentityChange(o,b)):(o=this._mismatch(o,b,v,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,l){let p;return null===i?p=this._itTail:(p=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,p,l)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,p,l)):i=this._addAfter(new DI(o,u),p,l),i}_verifyReinsertion(i,o,u,l){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?i=this._reinsertAfter(p,i._prev,l):i.currentIndex!=l&&(i.currentIndex=l,this._addToMoves(i,l)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const l=i._prevRemoved,p=i._nextRemoved;return null===l?this._removalsHead=p:l._nextRemoved=p,null===p?this._removalsTail=l:p._prevRemoved=l,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const l=null===o?this._itHead:o._next;return i._next=l,i._prev=o,null===l?this._itTail=i:l._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new cw),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class DI{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CI{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class cw{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new CI,this.map.set(o,u)),u.add(i)}get(i,o){const l=this.map.get(i);return l?l.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dw(n,i,o){const u=n.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+i+l}class hw{constructor(){}supports(i){return i instanceof Map||Oh(i)}create(){return new bI}}class bI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||Oh(i)))throw new Le(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const p=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,p)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const l=this._records.get(i);this._maybeAddToChanges(l,o);const p=l._prev,v=l._next;return p&&(p._next=v),v&&(v._prev=p),l._next=null,l._prev=null,l}const u=new TI(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class TI{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fw(){return new G0([new lw])}let G0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||fw()),deps:[[n,new Wu,new Ua]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Le(901,!1)}}return n.\u0275prov=vt({token:n,providedIn:"root",factory:fw}),n})();function pw(){return new z0([new hw])}let z0=(()=>{class n{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new n(o)}static extend(o){return{provide:n,useFactory:u=>n.create(o,u||pw()),deps:[[n,new Wu,new Ua]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Le(901,!1)}}return n.\u0275prov=vt({token:n,providedIn:"root",factory:pw}),n})();const MI=JE(null,"core",[]);let xI=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Fn(b_))},n.\u0275mod=ze({type:n}),n.\u0275inj=nn({}),n})();function RI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4006:(jt,He,L)=>{L.d(He,{Cf:()=>ke,F:()=>Pr,Fj:()=>Te,JJ:()=>on,JL:()=>Ut,JU:()=>F,Kr:()=>ks,NI:()=>Oi,On:()=>ir,Q7:()=>fs,UX:()=>Ds,YN:()=>Es,_Y:()=>mr,c5:()=>ps,cw:()=>lt,kI:()=>O,oH:()=>Or,sg:()=>Er,u5:()=>xn,wO:()=>li});var g=L(4650),W=L(6895),q=L(8996),ye=L(4128),ge=L(4004);let pe=(()=>{class V{constructor(P,I){this._renderer=P,this._elementRef=I,this.onChange=A=>{},this.onTouched=()=>{}}setProperty(P,I){this._renderer.setProperty(this._elementRef.nativeElement,P,I)}registerOnTouched(P){this.onTouched=P}registerOnChange(P){this.onChange=P}setDisabledState(P){this.setProperty("disabled",P)}}return V.\u0275fac=function(P){return new(P||V)(g.Y36(g.Qsj),g.Y36(g.SBq))},V.\u0275dir=g.lG2({type:V}),V})(),be=(()=>{class V extends pe{}return V.\u0275fac=function(){let N;return function(I){return(N||(N=g.n5z(V)))(I||V)}}(),V.\u0275dir=g.lG2({type:V,features:[g.qOj]}),V})();const F=new g.OlP("NgValueAccessor"),ie={provide:F,useExisting:(0,g.Gpc)(()=>Te),multi:!0},ht=new g.OlP("CompositionEventMode");let Te=(()=>{class V extends pe{constructor(P,I,A){super(P,I),this._compositionMode=A,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _e(){const V=(0,W.q)()?(0,W.q)().getUserAgent():"";return/android (\d+)/.test(V.toLowerCase())}())}writeValue(P){this.setProperty("value",P??"")}_handleInput(P){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(P)}_compositionStart(){this._composing=!0}_compositionEnd(P){this._composing=!1,this._compositionMode&&this.onChange(P)}}return V.\u0275fac=function(P){return new(P||V)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ht,8))},V.\u0275dir=g.lG2({type:V,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(P,I){1&P&&g.NdJ("input",function(Q){return I._handleInput(Q.target.value)})("blur",function(){return I.onTouched()})("compositionstart",function(){return I._compositionStart()})("compositionend",function(Q){return I._compositionEnd(Q.target.value)})},features:[g._Bn([ie]),g.qOj]}),V})();const ot=!1;function rt(V){return null==V||("string"==typeof V||Array.isArray(V))&&0===V.length}function Le(V){return null!=V&&"number"==typeof V.length}const ke=new g.OlP("NgValidators"),st=new g.OlP("NgAsyncValidators"),z=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class O{static min(N){return function se(V){return N=>{if(rt(N.value)||rt(V))return null;const P=parseFloat(N.value);return!isNaN(P)&&P<V?{min:{min:V,actual:N.value}}:null}}(N)}static max(N){return function he(V){return N=>{if(rt(N.value)||rt(V))return null;const P=parseFloat(N.value);return!isNaN(P)&&P>V?{max:{max:V,actual:N.value}}:null}}(N)}static required(N){return Ve(N)}static requiredTrue(N){return function Ge(V){return!0===V.value?null:{required:!0}}(N)}static email(N){return function Ae(V){return rt(V.value)||z.test(V.value)?null:{email:!0}}(N)}static minLength(N){return me(N)}static maxLength(N){return function Be(V){return N=>Le(N.value)&&N.value.length>V?{maxlength:{requiredLength:V,actualLength:N.value.length}}:null}(N)}static pattern(N){return pt(N)}static nullValidator(N){return null}static compose(N){return yt(N)}static composeAsync(N){return Xe(N)}}function Ve(V){return rt(V.value)?{required:!0}:null}function me(V){return N=>rt(N.value)||!Le(N.value)?null:N.value.length<V?{minlength:{requiredLength:V,actualLength:N.value.length}}:null}function pt(V){if(!V)return ft;let N,P;return"string"==typeof V?(P="","^"!==V.charAt(0)&&(P+="^"),P+=V,"$"!==V.charAt(V.length-1)&&(P+="$"),N=new RegExp(P)):(P=V.toString(),N=V),I=>{if(rt(I.value))return null;const A=I.value;return N.test(A)?null:{pattern:{requiredPattern:P,actualValue:A}}}}function ft(V){return null}function Dt(V){return null!=V}function Rn(V){const N=(0,g.QGY)(V)?(0,q.D)(V):V;if(ot&&!(0,g.CqO)(N)){let P="Expected async validator to return Promise or Observable.";throw"object"==typeof V&&(P+=" Are you using a synchronous validator where an async validator is expected?"),new g.vHH(-1101,P)}return N}function Qe(V){let N={};return V.forEach(P=>{N=null!=P?{...N,...P}:N}),0===Object.keys(N).length?null:N}function qe(V,N){return N.map(P=>P(V))}function at(V){return V.map(N=>function Je(V){return!V.validate}(N)?N:P=>N.validate(P))}function yt(V){if(!V)return null;const N=V.filter(Dt);return 0==N.length?null:function(P){return Qe(qe(P,N))}}function tt(V){return null!=V?yt(at(V)):null}function Xe(V){if(!V)return null;const N=V.filter(Dt);return 0==N.length?null:function(P){const I=qe(P,N).map(Rn);return(0,ye.D)(I).pipe((0,ge.U)(Qe))}}function xt(V){return null!=V?Xe(at(V)):null}function Rt(V,N){return null===V?[N]:Array.isArray(V)?[...V,N]:[V,N]}function Pt(V){return V._rawValidators}function vt(V){return V._rawAsyncValidators}function tn(V){return V?Array.isArray(V)?V:[V]:[]}function nn(V,N){return Array.isArray(V)?V.includes(N):V===N}function gn(V,N){const P=tn(N);return tn(V).forEach(A=>{nn(P,A)||P.push(A)}),P}function $n(V,N){return tn(N).filter(P=>!nn(V,P))}class Nr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(N){this._rawValidators=N||[],this._composedValidatorFn=tt(this._rawValidators)}_setAsyncValidators(N){this._rawAsyncValidators=N||[],this._composedAsyncValidatorFn=xt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(N){this._onDestroyCallbacks.push(N)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(N=>N()),this._onDestroyCallbacks=[]}reset(N){this.control&&this.control.reset(N)}hasError(N,P){return!!this.control&&this.control.hasError(N,P)}getError(N,P){return this.control?this.control.getError(N,P):null}}class _n extends Nr{get formDirective(){return null}get path(){return null}}class Jn extends Nr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class br{constructor(N){this._cd=N}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let on=(()=>{class V extends br{constructor(P){super(P)}}return V.\u0275fac=function(P){return new(P||V)(g.Y36(Jn,2))},V.\u0275dir=g.lG2({type:V,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(P,I){2&P&&g.ekj("ng-untouched",I.isUntouched)("ng-touched",I.isTouched)("ng-pristine",I.isPristine)("ng-dirty",I.isDirty)("ng-valid",I.isValid)("ng-invalid",I.isInvalid)("ng-pending",I.isPending)},features:[g.qOj]}),V})(),Ut=(()=>{class V extends br{constructor(P){super(P)}}return V.\u0275fac=function(P){return new(P||V)(g.Y36(_n,10))},V.\u0275dir=g.lG2({type:V,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(P,I){2&P&&g.ekj("ng-untouched",I.isUntouched)("ng-touched",I.isTouched)("ng-pristine",I.isPristine)("ng-dirty",I.isDirty)("ng-valid",I.isValid)("ng-invalid",I.isInvalid)("ng-pending",I.isPending)("ng-submitted",I.isSubmitted)},features:[g.qOj]}),V})();function lr(V,N){return V?`with name: '${N}'`:`at index: ${N}`}const An=!1,_r="VALID",Fn="INVALID",Sr="PENDING",Oe="DISABLED";function Mt(V){return(Xt(V)?V.validators:V)||null}function Ct(V,N){return(Xt(N)?N.asyncValidators:V)||null}function Xt(V){return null!=V&&!Array.isArray(V)&&"object"==typeof V}class Ce{constructor(N,P){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(N),this._assignAsyncValidators(P)}get validator(){return this._composedValidatorFn}set validator(N){this._rawValidators=this._composedValidatorFn=N}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(N){this._rawAsyncValidators=this._composedAsyncValidatorFn=N}get parent(){return this._parent}get valid(){return this.status===_r}get invalid(){return this.status===Fn}get pending(){return this.status==Sr}get disabled(){return this.status===Oe}get enabled(){return this.status!==Oe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(N){this._assignValidators(N)}setAsyncValidators(N){this._assignAsyncValidators(N)}addValidators(N){this.setValidators(gn(N,this._rawValidators))}addAsyncValidators(N){this.setAsyncValidators(gn(N,this._rawAsyncValidators))}removeValidators(N){this.setValidators($n(N,this._rawValidators))}removeAsyncValidators(N){this.setAsyncValidators($n(N,this._rawAsyncValidators))}hasValidator(N){return nn(this._rawValidators,N)}hasAsyncValidator(N){return nn(this._rawAsyncValidators,N)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(N={}){this.touched=!0,this._parent&&!N.onlySelf&&this._parent.markAsTouched(N)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(N=>N.markAllAsTouched())}markAsUntouched(N={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(P=>{P.markAsUntouched({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}markAsDirty(N={}){this.pristine=!1,this._parent&&!N.onlySelf&&this._parent.markAsDirty(N)}markAsPristine(N={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(P=>{P.markAsPristine({onlySelf:!0})}),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}markAsPending(N={}){this.status=Sr,!1!==N.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!N.onlySelf&&this._parent.markAsPending(N)}disable(N={}){const P=this._parentMarkedDirty(N.onlySelf);this.status=Oe,this.errors=null,this._forEachChild(I=>{I.disable({...N,onlySelf:!0})}),this._updateValue(),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...N,skipPristineCheck:P}),this._onDisabledChange.forEach(I=>I(!0))}enable(N={}){const P=this._parentMarkedDirty(N.onlySelf);this.status=_r,this._forEachChild(I=>{I.enable({...N,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent}),this._updateAncestors({...N,skipPristineCheck:P}),this._onDisabledChange.forEach(I=>I(!1))}_updateAncestors(N){this._parent&&!N.onlySelf&&(this._parent.updateValueAndValidity(N),N.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(N){this._parent=N}getRawValue(){return this.value}updateValueAndValidity(N={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_r||this.status===Sr)&&this._runAsyncValidator(N.emitEvent)),!1!==N.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!N.onlySelf&&this._parent.updateValueAndValidity(N)}_updateTreeValidity(N={emitEvent:!0}){this._forEachChild(P=>P._updateTreeValidity(N)),this.updateValueAndValidity({onlySelf:!0,emitEvent:N.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oe:_r}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(N){if(this.asyncValidator){this.status=Sr,this._hasOwnPendingAsyncValidator=!0;const P=Rn(this.asyncValidator(this));this._asyncValidationSubscription=P.subscribe(I=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(I,{emitEvent:N})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(N,P={}){this.errors=N,this._updateControlsErrors(!1!==P.emitEvent)}get(N){let P=N;return null==P||(Array.isArray(P)||(P=P.split(".")),0===P.length)?null:P.reduce((I,A)=>I&&I._find(A),this)}getError(N,P){const I=P?this.get(P):this;return I&&I.errors?I.errors[N]:null}hasError(N,P){return!!this.getError(N,P)}get root(){let N=this;for(;N._parent;)N=N._parent;return N}_updateControlsErrors(N){this.status=this._calculateStatus(),N&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(N)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Oe:this.errors?Fn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sr)?Sr:this._anyControlsHaveStatus(Fn)?Fn:_r}_anyControlsHaveStatus(N){return this._anyControls(P=>P.status===N)}_anyControlsDirty(){return this._anyControls(N=>N.dirty)}_anyControlsTouched(){return this._anyControls(N=>N.touched)}_updatePristine(N={}){this.pristine=!this._anyControlsDirty(),this._parent&&!N.onlySelf&&this._parent._updatePristine(N)}_updateTouched(N={}){this.touched=this._anyControlsTouched(),this._parent&&!N.onlySelf&&this._parent._updateTouched(N)}_registerOnCollectionChange(N){this._onCollectionChange=N}_setUpdateStrategy(N){Xt(N)&&null!=N.updateOn&&(this._updateOn=N.updateOn)}_parentMarkedDirty(N){return!N&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(N){return null}_assignValidators(N){this._rawValidators=Array.isArray(N)?N.slice():N,this._composedValidatorFn=function Me(V){return Array.isArray(V)?tt(V):V||null}(this._rawValidators)}_assignAsyncValidators(N){this._rawAsyncValidators=Array.isArray(N)?N.slice():N,this._composedAsyncValidatorFn=function wn(V){return Array.isArray(V)?xt(V):V||null}(this._rawAsyncValidators)}}class lt extends Ce{constructor(N,P,I){super(Mt(P),Ct(I,P)),this.controls=N,this._initObservables(),this._setUpdateStrategy(P),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(N,P){return this.controls[N]?this.controls[N]:(this.controls[N]=P,P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange),P)}addControl(N,P,I={}){this.registerControl(N,P),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}removeControl(N,P={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],this.updateValueAndValidity({emitEvent:P.emitEvent}),this._onCollectionChange()}setControl(N,P,I={}){this.controls[N]&&this.controls[N]._registerOnCollectionChange(()=>{}),delete this.controls[N],P&&this.registerControl(N,P),this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}contains(N){return this.controls.hasOwnProperty(N)&&this.controls[N].enabled}setValue(N,P={}){(function ce(V,N,P){V._forEachChild((I,A)=>{if(void 0===P[A])throw new g.vHH(1002,An?function qn(V,N){return`Must supply a value for form control ${lr(V,N)}`}(N,A):"")})})(this,!0,N),Object.keys(N).forEach(I=>{(function ue(V,N,P){const I=V.controls;if(!(N?Object.keys(I):I).length)throw new g.vHH(1e3,An?function Fr(V){return`\n    There are no form controls registered with this ${V?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(N):"");if(!I[P])throw new g.vHH(1001,An?function nr(V,N){return`Cannot find form control ${lr(V,N)}`}(N,P):"")})(this,!0,I),this.controls[I].setValue(N[I],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P)}patchValue(N,P={}){null!=N&&(Object.keys(N).forEach(I=>{const A=this.controls[I];A&&A.patchValue(N[I],{onlySelf:!0,emitEvent:P.emitEvent})}),this.updateValueAndValidity(P))}reset(N={},P={}){this._forEachChild((I,A)=>{I.reset(N[A],{onlySelf:!0,emitEvent:P.emitEvent})}),this._updatePristine(P),this._updateTouched(P),this.updateValueAndValidity(P)}getRawValue(){return this._reduceChildren({},(N,P,I)=>(N[I]=P.getRawValue(),N))}_syncPendingControls(){let N=this._reduceChildren(!1,(P,I)=>!!I._syncPendingControls()||P);return N&&this.updateValueAndValidity({onlySelf:!0}),N}_forEachChild(N){Object.keys(this.controls).forEach(P=>{const I=this.controls[P];I&&N(I,P)})}_setUpControls(){this._forEachChild(N=>{N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(N){for(const[P,I]of Object.entries(this.controls))if(this.contains(P)&&N(I))return!0;return!1}_reduceValue(){return this._reduceChildren({},(P,I,A)=>((I.enabled||this.disabled)&&(P[A]=I.value),P))}_reduceChildren(N,P){let I=N;return this._forEachChild((A,Q)=>{I=P(I,A,Q)}),I}_allControlsDisabled(){for(const N of Object.keys(this.controls))if(this.controls[N].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(N){return this.controls.hasOwnProperty(N)?this.controls[N]:null}}const ne=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Se}),Se="always";function bt(V,N,P=Se){cr(V,N),N.valueAccessor.writeValue(V.value),(V.disabled||"always"===P)&&N.valueAccessor.setDisabledState?.(V.disabled),function ze(V,N){N.valueAccessor.registerOnChange(P=>{V._pendingValue=P,V._pendingChange=!0,V._pendingDirty=!0,"change"===V.updateOn&&Kt(V,N)})}(V,N),function fn(V,N){const P=(I,A)=>{N.valueAccessor.writeValue(I),A&&N.viewToModelUpdate(I)};V.registerOnChange(P),N._registerOnDestroy(()=>{V._unregisterOnChange(P)})}(V,N),function wt(V,N){N.valueAccessor.registerOnTouched(()=>{V._pendingTouched=!0,"blur"===V.updateOn&&V._pendingChange&&Kt(V,N),"submit"!==V.updateOn&&V.markAsTouched()})}(V,N),function rr(V,N){if(N.valueAccessor.setDisabledState){const P=I=>{N.valueAccessor.setDisabledState(I)};V.registerOnDisabledChange(P),N._registerOnDestroy(()=>{V._unregisterOnDisabledChange(P)})}}(V,N)}function hn(V,N,P=!0){const I=()=>{};N.valueAccessor&&(N.valueAccessor.registerOnChange(I),N.valueAccessor.registerOnTouched(I)),Ke(V,N),V&&(N._invokeOnDestroyCallbacks(),V._registerOnCollectionChange(()=>{}))}function On(V,N){V.forEach(P=>{P.registerOnValidatorChange&&P.registerOnValidatorChange(N)})}function cr(V,N){const P=Pt(V);null!==N.validator?V.setValidators(Rt(P,N.validator)):"function"==typeof P&&V.setValidators([P]);const I=vt(V);null!==N.asyncValidator?V.setAsyncValidators(Rt(I,N.asyncValidator)):"function"==typeof I&&V.setAsyncValidators([I]);const A=()=>V.updateValueAndValidity();On(N._rawValidators,A),On(N._rawAsyncValidators,A)}function Ke(V,N){let P=!1;if(null!==V){if(null!==N.validator){const A=Pt(V);if(Array.isArray(A)&&A.length>0){const Q=A.filter(oe=>oe!==N.validator);Q.length!==A.length&&(P=!0,V.setValidators(Q))}}if(null!==N.asyncValidator){const A=vt(V);if(Array.isArray(A)&&A.length>0){const Q=A.filter(oe=>oe!==N.asyncValidator);Q.length!==A.length&&(P=!0,V.setAsyncValidators(Q))}}}const I=()=>{};return On(N._rawValidators,I),On(N._rawAsyncValidators,I),P}function Kt(V,N){V._pendingDirty&&V.markAsDirty(),V.setValue(V._pendingValue,{emitModelToViewChange:!1}),N.viewToModelUpdate(V._pendingValue),V._pendingChange=!1}function Tn(V,N){cr(V,N)}function Ks(V,N){if(!V.hasOwnProperty("model"))return!1;const P=V.model;return!!P.isFirstChange()||!Object.is(N,P.currentValue)}function ai(V,N){V._syncPendingControls(),N.forEach(P=>{const I=P.control;"submit"===I.updateOn&&I._pendingChange&&(P.viewToModelUpdate(I._pendingValue),I._pendingChange=!1)})}function Ft(V,N){if(!N)return null;let P,I,A;return Array.isArray(N),N.forEach(Q=>{Q.constructor===Te?P=Q:function Zs(V){return Object.getPrototypeOf(V.constructor)===be}(Q)?I=Q:A=Q}),A||I||P||null}const yi={provide:_n,useExisting:(0,g.Gpc)(()=>Pr)},Ln=(()=>Promise.resolve())();let Pr=(()=>{class V extends _n{constructor(P,I,A){super(),this.callSetDisabledState=A,this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new lt({},tt(P),xt(I))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(P){Ln.then(()=>{const I=this._findContainer(P.path);P.control=I.registerControl(P.name,P.control),bt(P.control,P,this.callSetDisabledState),P.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(P)})}getControl(P){return this.form.get(P.path)}removeControl(P){Ln.then(()=>{const I=this._findContainer(P.path);I&&I.removeControl(P.name),this._directives.delete(P)})}addFormGroup(P){Ln.then(()=>{const I=this._findContainer(P.path),A=new lt({});Tn(A,P),I.registerControl(P.name,A),A.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(P){Ln.then(()=>{const I=this._findContainer(P.path);I&&I.removeControl(P.name)})}getFormGroup(P){return this.form.get(P.path)}updateModel(P,I){Ln.then(()=>{this.form.get(P.path).setValue(I)})}setValue(P){this.control.setValue(P)}onSubmit(P){return this.submitted=!0,ai(this.form,this._directives),this.ngSubmit.emit(P),"dialog"===P?.target?.method}onReset(){this.resetForm()}resetForm(P){this.form.reset(P),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(P){return P.pop(),P.length?this.form.get(P):this.form}}return V.\u0275fac=function(P){return new(P||V)(g.Y36(ke,10),g.Y36(st,10),g.Y36(ne,8))},V.\u0275dir=g.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(P,I){1&P&&g.NdJ("submit",function(Q){return I.onSubmit(Q)})("reset",function(){return I.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([yi]),g.qOj]}),V})();function Pi(V,N){const P=V.indexOf(N);P>-1&&V.splice(P,1)}function Yn(V){return"object"==typeof V&&null!==V&&2===Object.keys(V).length&&"value"in V&&"disabled"in V}const Oi=class extends Ce{constructor(N=null,P,I){super(Mt(P),Ct(I,P)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(N),this._setUpdateStrategy(P),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xt(P)&&(P.nonNullable||P.initialValueIsDefault)&&(this.defaultValue=Yn(N)?N.value:N)}setValue(N,P={}){this.value=this._pendingValue=N,this._onChange.length&&!1!==P.emitModelToViewChange&&this._onChange.forEach(I=>I(this.value,!1!==P.emitViewToModelChange)),this.updateValueAndValidity(P)}patchValue(N,P={}){this.setValue(N,P)}reset(N=this.defaultValue,P={}){this._applyFormState(N),this.markAsPristine(P),this.markAsUntouched(P),this.setValue(this.value,P),this._pendingChange=!1}_updateValue(){}_anyControls(N){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(N){this._onChange.push(N)}_unregisterOnChange(N){Pi(this._onChange,N)}registerOnDisabledChange(N){this._onDisabledChange.push(N)}_unregisterOnDisabledChange(N){Pi(this._onDisabledChange,N)}_forEachChild(N){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(N){Yn(N)?(this.value=this._pendingValue=N.value,N.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=N}},Ai={provide:Jn,useExisting:(0,g.Gpc)(()=>ir)},As=(()=>Promise.resolve())();let ir=(()=>{class V extends Jn{constructor(P,I,A,Q,oe,ee){super(),this._changeDetectorRef=oe,this.callSetDisabledState=ee,this.control=new Oi,this._registered=!1,this.update=new g.vpe,this._parent=P,this._setValidators(I),this._setAsyncValidators(A),this.valueAccessor=Ft(0,Q)}ngOnChanges(P){if(this._checkForErrors(),!this._registered||"name"in P){if(this._registered&&(this._checkName(),this.formDirective)){const I=P.name.previousValue;this.formDirective.removeControl({name:I,path:this._getPath(I)})}this._setUpControl()}"isDisabled"in P&&this._updateDisabled(P),Ks(P,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(P){this.viewModel=P,this.update.emit(P)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(P){As.then(()=>{this.control.setValue(P,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(P){const I=P.isDisabled.currentValue,A=0!==I&&(0,g.D6c)(I);As.then(()=>{A&&!this.control.disabled?this.control.disable():!A&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(P){return this._parent?function ut(V,N){return[...N.path,V]}(P,this._parent):[P]}}return V.\u0275fac=function(P){return new(P||V)(g.Y36(_n,9),g.Y36(ke,10),g.Y36(st,10),g.Y36(F,10),g.Y36(g.sBO,8),g.Y36(ne,8))},V.\u0275dir=g.lG2({type:V,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Ai]),g.qOj,g.TTD]}),V})(),mr=(()=>{class V{}return V.\u0275fac=function(P){return new(P||V)},V.\u0275dir=g.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),V})(),je=(()=>{class V{}return V.\u0275fac=function(P){return new(P||V)},V.\u0275mod=g.oAB({type:V}),V.\u0275inj=g.cJS({}),V})();const Dn=new g.OlP("NgModelWithFormControlWarning"),Wn={provide:Jn,useExisting:(0,g.Gpc)(()=>Or)};let Or=(()=>{class V extends Jn{set isDisabled(P){}constructor(P,I,A,Q,oe){super(),this._ngModelWarningConfig=Q,this.callSetDisabledState=oe,this.update=new g.vpe,this._ngModelWarningSent=!1,this._setValidators(P),this._setAsyncValidators(I),this.valueAccessor=Ft(0,A)}ngOnChanges(P){if(this._isControlChanged(P)){const I=P.form.previousValue;I&&hn(I,this,!1),bt(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Ks(P,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&hn(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(P){this.viewModel=P,this.update.emit(P)}_isControlChanged(P){return P.hasOwnProperty("form")}}return V._ngModelWarningSentOnce=!1,V.\u0275fac=function(P){return new(P||V)(g.Y36(ke,10),g.Y36(st,10),g.Y36(F,10),g.Y36(Dn,8),g.Y36(ne,8))},V.\u0275dir=g.lG2({type:V,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[g._Bn([Wn]),g.qOj,g.TTD]}),V})();const is={provide:_n,useExisting:(0,g.Gpc)(()=>Er)};let Er=(()=>{class V extends _n{constructor(P,I,A){super(),this.callSetDisabledState=A,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(P),this._setAsyncValidators(I)}ngOnChanges(P){this._checkFormPresent(),P.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ke(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(P){const I=this.form.get(P.path);return bt(I,P,this.callSetDisabledState),I.updateValueAndValidity({emitEvent:!1}),this.directives.push(P),I}getControl(P){return this.form.get(P.path)}removeControl(P){hn(P.control||null,P,!1),function Mn(V,N){const P=V.indexOf(N);P>-1&&V.splice(P,1)}(this.directives,P)}addFormGroup(P){this._setUpFormContainer(P)}removeFormGroup(P){this._cleanUpFormContainer(P)}getFormGroup(P){return this.form.get(P.path)}addFormArray(P){this._setUpFormContainer(P)}removeFormArray(P){this._cleanUpFormContainer(P)}getFormArray(P){return this.form.get(P.path)}updateModel(P,I){this.form.get(P.path).setValue(I)}onSubmit(P){return this.submitted=!0,ai(this.form,this.directives),this.ngSubmit.emit(P),"dialog"===P?.target?.method}onReset(){this.resetForm()}resetForm(P){this.form.reset(P),this.submitted=!1}_updateDomValue(){this.directives.forEach(P=>{const I=P.control,A=this.form.get(P.path);I!==A&&(hn(I||null,P),(V=>V instanceof Oi)(A)&&(bt(A,P,this.callSetDisabledState),P.control=A))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(P){const I=this.form.get(P.path);Tn(I,P),I.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(P){if(this.form){const I=this.form.get(P.path);I&&function un(V,N){return Ke(V,N)}(I,P)&&I.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){cr(this.form,this),this._oldForm&&Ke(this._oldForm,this)}_checkFormPresent(){}}return V.\u0275fac=function(P){return new(P||V)(g.Y36(ke,10),g.Y36(st,10),g.Y36(ne,8))},V.\u0275dir=g.lG2({type:V,selectors:[["","formGroup",""]],hostBindings:function(P,I){1&P&&g.NdJ("submit",function(Q){return I.onSubmit(Q)})("reset",function(){return I.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([is]),g.qOj,g.TTD]}),V})();const lo={provide:F,useExisting:(0,g.Gpc)(()=>Qi),multi:!0};function Ns(V,N){return null==V?`${N}`:(N&&"object"==typeof N&&(N="Object"),`${V}: ${N}`.slice(0,50))}let Qi=(()=>{class V extends be{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(P){this._compareWith=P}writeValue(P){this.value=P;const A=Ns(this._getOptionId(P),P);this.setProperty("value",A)}registerOnChange(P){this.onChange=I=>{this.value=this._getOptionValue(I),P(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(P){for(const I of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(I),P))return I;return null}_getOptionValue(P){const I=function co(V){return V.split(":")[0]}(P);return this._optionMap.has(I)?this._optionMap.get(I):P}}return V.\u0275fac=function(){let N;return function(I){return(N||(N=g.n5z(V)))(I||V)}}(),V.\u0275dir=g.lG2({type:V,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(P,I){1&P&&g.NdJ("change",function(Q){return I.onChange(Q.target.value)})("blur",function(){return I.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([lo]),g.qOj]}),V})(),Es=(()=>{class V{constructor(P,I,A){this._element=P,this._renderer=I,this._select=A,this._select&&(this.id=this._select._registerOption())}set ngValue(P){null!=this._select&&(this._select._optionMap.set(this.id,P),this._setElementValue(Ns(this.id,P)),this._select.writeValue(this._select.value))}set value(P){this._setElementValue(P),this._select&&this._select.writeValue(this._select.value)}_setElementValue(P){this._renderer.setProperty(this._element.nativeElement,"value",P)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return V.\u0275fac=function(P){return new(P||V)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(Qi,9))},V.\u0275dir=g.lG2({type:V,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),V})();const No={provide:F,useExisting:(0,g.Gpc)(()=>ho),multi:!0};function ko(V,N){return null==V?`${N}`:("string"==typeof N&&(N=`'${N}'`),N&&"object"==typeof N&&(N="Object"),`${V}: ${N}`.slice(0,50))}let ho=(()=>{class V extends be{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(P){this._compareWith=P}writeValue(P){let I;if(this.value=P,Array.isArray(P)){const A=P.map(Q=>this._getOptionId(Q));I=(Q,oe)=>{Q._setSelected(A.indexOf(oe.toString())>-1)}}else I=(A,Q)=>{A._setSelected(!1)};this._optionMap.forEach(I)}registerOnChange(P){this.onChange=I=>{const A=[],Q=I.selectedOptions;if(void 0!==Q){const oe=Q;for(let ee=0;ee<oe.length;ee++){const It=this._getOptionValue(oe[ee].value);A.push(It)}}else{const oe=I.options;for(let ee=0;ee<oe.length;ee++){const Re=oe[ee];if(Re.selected){const It=this._getOptionValue(Re.value);A.push(It)}}}this.value=A,P(A)}}_registerOption(P){const I=(this._idCounter++).toString();return this._optionMap.set(I,P),I}_getOptionId(P){for(const I of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(I)._value,P))return I;return null}_getOptionValue(P){const I=function ds(V){return V.split(":")[0]}(P);return this._optionMap.has(I)?this._optionMap.get(I)._value:P}}return V.\u0275fac=function(){let N;return function(I){return(N||(N=g.n5z(V)))(I||V)}}(),V.\u0275dir=g.lG2({type:V,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(P,I){1&P&&g.NdJ("change",function(Q){return I.onChange(Q.target)})("blur",function(){return I.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([No]),g.qOj]}),V})(),ks=(()=>{class V{constructor(P,I,A){this._element=P,this._renderer=I,this._select=A,this._select&&(this.id=this._select._registerOption(this))}set ngValue(P){null!=this._select&&(this._value=P,this._setElementValue(ko(this.id,P)),this._select.writeValue(this._select.value))}set value(P){this._select?(this._value=P,this._setElementValue(ko(this.id,P)),this._select.writeValue(this._select.value)):this._setElementValue(P)}_setElementValue(P){this._renderer.setProperty(this._element.nativeElement,"value",P)}_setSelected(P){this._renderer.setProperty(this._element.nativeElement,"selected",P)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return V.\u0275fac=function(P){return new(P||V)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(ho,9))},V.\u0275dir=g.lG2({type:V,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),V})();let Ei=(()=>{class V{constructor(){this._validator=ft}ngOnChanges(P){if(this.inputName in P){const I=this.normalizeInput(P[this.inputName].currentValue);this._enabled=this.enabled(I),this._validator=this._enabled?this.createValidator(I):ft,this._onChange&&this._onChange()}}validate(P){return this._validator(P)}registerOnValidatorChange(P){this._onChange=P}enabled(P){return null!=P}}return V.\u0275fac=function(P){return new(P||V)},V.\u0275dir=g.lG2({type:V,features:[g.TTD]}),V})();const Js={provide:ke,useExisting:(0,g.Gpc)(()=>fs),multi:!0};let fs=(()=>{class V extends Ei{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=g.D6c,this.createValidator=P=>Ve}enabled(P){return P}}return V.\u0275fac=function(){let N;return function(I){return(N||(N=g.n5z(V)))(I||V)}}(),V.\u0275dir=g.lG2({type:V,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(P,I){2&P&&g.uIk("required",I._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([Js]),g.qOj]}),V})();const Us={provide:ke,useExisting:(0,g.Gpc)(()=>li),multi:!0};let li=(()=>{class V extends Ei{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=P=>function Qs(V){return"number"==typeof V?V:parseInt(V,10)}(P),this.createValidator=P=>me(P)}}return V.\u0275fac=function(){let N;return function(I){return(N||(N=g.n5z(V)))(I||V)}}(),V.\u0275dir=g.lG2({type:V,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(P,I){2&P&&g.uIk("minlength",I._enabled?I.minlength:null)},inputs:{minlength:"minlength"},features:[g._Bn([Us]),g.qOj]}),V})();const ci={provide:ke,useExisting:(0,g.Gpc)(()=>ps),multi:!0};let ps=(()=>{class V extends Ei{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=P=>P,this.createValidator=P=>pt(P)}}return V.\u0275fac=function(){let N;return function(I){return(N||(N=g.n5z(V)))(I||V)}}(),V.\u0275dir=g.lG2({type:V,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(P,I){2&P&&g.uIk("pattern",I._enabled?I.pattern:null)},inputs:{pattern:"pattern"},features:[g._Bn([ci]),g.qOj]}),V})(),Jo=(()=>{class V{}return V.\u0275fac=function(P){return new(P||V)},V.\u0275mod=g.oAB({type:V}),V.\u0275inj=g.cJS({imports:[je]}),V})(),xn=(()=>{class V{static withConfig(P){return{ngModule:V,providers:[{provide:ne,useValue:P.callSetDisabledState??Se}]}}}return V.\u0275fac=function(P){return new(P||V)},V.\u0275mod=g.oAB({type:V}),V.\u0275inj=g.cJS({imports:[Jo]}),V})(),Ds=(()=>{class V{static withConfig(P){return{ngModule:V,providers:[{provide:Dn,useValue:P.warnOnNgModelWithFormControl??"always"},{provide:ne,useValue:P.callSetDisabledState??Se}]}}}return V.\u0275fac=function(P){return new(P||V)},V.\u0275mod=g.oAB({type:V}),V.\u0275inj=g.cJS({imports:[Jo]}),V})()},1481:(jt,He,L)=>{L.d(He,{Dx:()=>Nn,H7:()=>Ce,b2:()=>kr,q6:()=>ar});var g=L(6895),W=L(4650);class q extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ye extends q{static makeCurrent(){(0,g.HT)(new ye)}onAndCancel(ve,ne,Se){return ve.addEventListener(ne,Se,!1),()=>{ve.removeEventListener(ne,Se,!1)}}dispatchEvent(ve,ne){ve.dispatchEvent(ne)}remove(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}createElement(ve,ne){return(ne=ne||this.getDefaultDocument()).createElement(ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ve){return ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(ve){return ve instanceof DocumentFragment}getGlobalEventTarget(ve,ne){return"window"===ne?window:"document"===ne?ve:"body"===ne?ve.body:null}getBaseHref(ve){const ne=function pe(){return ge=ge||document.querySelector("base"),ge?ge.getAttribute("href"):null}();return null==ne?null:function F(we){be=be||document.createElement("a"),be.setAttribute("href",we);const ve=be.pathname;return"/"===ve.charAt(0)?ve:`/${ve}`}(ne)}resetBaseElement(){ge=null}getUserAgent(){return window.navigator.userAgent}getCookie(ve){return(0,g.Mx)(document.cookie,ve)}}let be,ge=null;const Pe=new W.OlP("TRANSITION_ID"),ie=[{provide:W.ip1,useFactory:function le(we,ve,ne){return()=>{ne.get(W.CZH).donePromise.then(()=>{const Se=(0,g.q)(),ut=ve.querySelectorAll(`style[ng-transition="${we}"]`);for(let bt=0;bt<ut.length;bt++)Se.remove(ut[bt])})}},deps:[Pe,g.K0,W.zs3],multi:!0}];let ht=(()=>{class we{build(){return new XMLHttpRequest}}return we.\u0275fac=function(ne){return new(ne||we)},we.\u0275prov=W.Yz7({token:we,factory:we.\u0275fac}),we})();const Te=new W.OlP("EventManagerPlugins");let ot=(()=>{class we{constructor(ne,Se){this._zone=Se,this._eventNameToPlugin=new Map,ne.forEach(ut=>{ut.manager=this}),this._plugins=ne.slice().reverse()}addEventListener(ne,Se,ut){return this._findPluginFor(Se).addEventListener(ne,Se,ut)}addGlobalEventListener(ne,Se,ut){return this._findPluginFor(Se).addGlobalEventListener(ne,Se,ut)}getZone(){return this._zone}_findPluginFor(ne){const Se=this._eventNameToPlugin.get(ne);if(Se)return Se;const ut=this._plugins;for(let bt=0;bt<ut.length;bt++){const hn=ut[bt];if(hn.supports(ne))return this._eventNameToPlugin.set(ne,hn),hn}throw new Error(`No event manager plugin found for event ${ne}`)}}return we.\u0275fac=function(ne){return new(ne||we)(W.LFG(Te),W.LFG(W.R0b))},we.\u0275prov=W.Yz7({token:we,factory:we.\u0275fac}),we})();class rt{constructor(ve){this._doc=ve}addGlobalEventListener(ve,ne,Se){const ut=(0,g.q)().getGlobalEventTarget(this._doc,ve);if(!ut)throw new Error(`Unsupported event target ${ut} for event ${ne}`);return this.addEventListener(ut,ne,Se)}}let Le=(()=>{class we{constructor(){this.usageCount=new Map}addStyles(ne){for(const Se of ne)1===this.changeUsageCount(Se,1)&&this.onStyleAdded(Se)}removeStyles(ne){for(const Se of ne)0===this.changeUsageCount(Se,-1)&&this.onStyleRemoved(Se)}onStyleRemoved(ne){}onStyleAdded(ne){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ne,Se){const ut=this.usageCount;let bt=ut.get(ne)??0;return bt+=Se,bt>0?ut.set(ne,bt):ut.delete(ne),bt}ngOnDestroy(){for(const ne of this.getAllStyles())this.onStyleRemoved(ne);this.usageCount.clear()}}return we.\u0275fac=function(ne){return new(ne||we)},we.\u0275prov=W.Yz7({token:we,factory:we.\u0275fac}),we})(),ke=(()=>{class we extends Le{constructor(ne){super(),this.doc=ne,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ne){for(const Se of this.hostNodes)this.addStyleToHost(Se,ne)}onStyleRemoved(ne){const Se=this.styleRef;Se.get(ne)?.forEach(bt=>bt.remove()),Se.delete(ne)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ne){this.hostNodes.add(ne);for(const Se of this.getAllStyles())this.addStyleToHost(ne,Se)}removeHost(ne){this.hostNodes.delete(ne)}addStyleToHost(ne,Se){const ut=this.doc.createElement("style");ut.textContent=Se,ne.appendChild(ut);const bt=this.styleRef.get(Se);bt?bt.push(ut):this.styleRef.set(Se,[ut])}resetHostNodes(){const ne=this.hostNodes;ne.clear(),ne.add(this.doc.head)}}return we.\u0275fac=function(ne){return new(ne||we)(W.LFG(g.K0))},we.\u0275prov=W.Yz7({token:we,factory:we.\u0275fac}),we})();const st={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},z=/%COMP%/g,Ae=new W.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function pt(we,ve){return ve.flat(100).map(ne=>ne.replace(z,we))}function ft(we){return ve=>{if("__ngUnwrap__"===ve)return we;!1===we(ve)&&(ve.preventDefault(),ve.returnValue=!1)}}let Dt=(()=>{class we{constructor(ne,Se,ut,bt){this.eventManager=ne,this.sharedStylesHost=Se,this.appId=ut,this.removeStylesOnCompDestory=bt,this.rendererByCompId=new Map,this.defaultRenderer=new Rn(ne)}createRenderer(ne,Se){if(!ne||!Se)return this.defaultRenderer;const ut=this.getOrCreateRenderer(ne,Se);return ut instanceof tt?ut.applyToHost(ne):ut instanceof yt&&ut.applyStyles(),ut}getOrCreateRenderer(ne,Se){const ut=this.rendererByCompId;let bt=ut.get(Se.id);if(!bt){const hn=this.eventManager,On=this.sharedStylesHost,rr=this.removeStylesOnCompDestory;switch(Se.encapsulation){case W.ifc.Emulated:bt=new tt(hn,On,Se,this.appId,rr);break;case W.ifc.ShadowDom:return new at(hn,On,ne,Se);default:bt=new yt(hn,On,Se,rr)}bt.onDestroy=()=>ut.delete(Se.id),ut.set(Se.id,bt)}return bt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return we.\u0275fac=function(ne){return new(ne||we)(W.LFG(ot),W.LFG(ke),W.LFG(W.AFp),W.LFG(Ae))},we.\u0275prov=W.Yz7({token:we,factory:we.\u0275fac}),we})();class Rn{constructor(ve){this.eventManager=ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ve,ne){return ne?document.createElementNS(st[ne]||ne,ve):document.createElement(ve)}createComment(ve){return document.createComment(ve)}createText(ve){return document.createTextNode(ve)}appendChild(ve,ne){(Je(ve)?ve.content:ve).appendChild(ne)}insertBefore(ve,ne,Se){ve&&(Je(ve)?ve.content:ve).insertBefore(ne,Se)}removeChild(ve,ne){ve&&ve.removeChild(ne)}selectRootElement(ve,ne){let Se="string"==typeof ve?document.querySelector(ve):ve;if(!Se)throw new Error(`The selector "${ve}" did not match any elements`);return ne||(Se.textContent=""),Se}parentNode(ve){return ve.parentNode}nextSibling(ve){return ve.nextSibling}setAttribute(ve,ne,Se,ut){if(ut){ne=ut+":"+ne;const bt=st[ut];bt?ve.setAttributeNS(bt,ne,Se):ve.setAttribute(ne,Se)}else ve.setAttribute(ne,Se)}removeAttribute(ve,ne,Se){if(Se){const ut=st[Se];ut?ve.removeAttributeNS(ut,ne):ve.removeAttribute(`${Se}:${ne}`)}else ve.removeAttribute(ne)}addClass(ve,ne){ve.classList.add(ne)}removeClass(ve,ne){ve.classList.remove(ne)}setStyle(ve,ne,Se,ut){ut&(W.JOm.DashCase|W.JOm.Important)?ve.style.setProperty(ne,Se,ut&W.JOm.Important?"important":""):ve.style[ne]=Se}removeStyle(ve,ne,Se){Se&W.JOm.DashCase?ve.style.removeProperty(ne):ve.style[ne]=""}setProperty(ve,ne,Se){ve[ne]=Se}setValue(ve,ne){ve.nodeValue=ne}listen(ve,ne,Se){return"string"==typeof ve?this.eventManager.addGlobalEventListener(ve,ne,ft(Se)):this.eventManager.addEventListener(ve,ne,ft(Se))}}function Je(we){return"TEMPLATE"===we.tagName&&void 0!==we.content}class at extends Rn{constructor(ve,ne,Se,ut){super(ve),this.sharedStylesHost=ne,this.hostEl=Se,this.shadowRoot=Se.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const bt=pt(ut.id,ut.styles);for(const hn of bt){const On=document.createElement("style");On.textContent=hn,this.shadowRoot.appendChild(On)}}nodeOrShadowRoot(ve){return ve===this.hostEl?this.shadowRoot:ve}appendChild(ve,ne){return super.appendChild(this.nodeOrShadowRoot(ve),ne)}insertBefore(ve,ne,Se){return super.insertBefore(this.nodeOrShadowRoot(ve),ne,Se)}removeChild(ve,ne){return super.removeChild(this.nodeOrShadowRoot(ve),ne)}parentNode(ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ve)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class yt extends Rn{constructor(ve,ne,Se,ut,bt=Se.id){super(ve),this.sharedStylesHost=ne,this.removeStylesOnCompDestory=ut,this.rendererUsageCount=0,this.styles=pt(bt,Se.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class tt extends yt{constructor(ve,ne,Se,ut,bt){const hn=ut+"-"+Se.id;super(ve,ne,Se,bt,hn),this.contentAttr=function me(we){return"_ngcontent-%COMP%".replace(z,we)}(hn),this.hostAttr=function Be(we){return"_nghost-%COMP%".replace(z,we)}(hn)}applyToHost(ve){this.applyStyles(),this.setAttribute(ve,this.hostAttr,"")}createElement(ve,ne){const Se=super.createElement(ve,ne);return super.setAttribute(Se,this.contentAttr,""),Se}}let Xe=(()=>{class we extends rt{constructor(ne){super(ne)}supports(ne){return!0}addEventListener(ne,Se,ut){return ne.addEventListener(Se,ut,!1),()=>this.removeEventListener(ne,Se,ut)}removeEventListener(ne,Se,ut){return ne.removeEventListener(Se,ut)}}return we.\u0275fac=function(ne){return new(ne||we)(W.LFG(g.K0))},we.\u0275prov=W.Yz7({token:we,factory:we.\u0275fac}),we})();const xt=["alt","control","meta","shift"],Rt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pt={alt:we=>we.altKey,control:we=>we.ctrlKey,meta:we=>we.metaKey,shift:we=>we.shiftKey};let vt=(()=>{class we extends rt{constructor(ne){super(ne)}supports(ne){return null!=we.parseEventName(ne)}addEventListener(ne,Se,ut){const bt=we.parseEventName(Se),hn=we.eventCallback(bt.fullKey,ut,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(ne,bt.domEventName,hn))}static parseEventName(ne){const Se=ne.toLowerCase().split("."),ut=Se.shift();if(0===Se.length||"keydown"!==ut&&"keyup"!==ut)return null;const bt=we._normalizeKey(Se.pop());let hn="",On=Se.indexOf("code");if(On>-1&&(Se.splice(On,1),hn="code."),xt.forEach(cr=>{const Ke=Se.indexOf(cr);Ke>-1&&(Se.splice(Ke,1),hn+=cr+".")}),hn+=bt,0!=Se.length||0===bt.length)return null;const rr={};return rr.domEventName=ut,rr.fullKey=hn,rr}static matchEventFullKeyCode(ne,Se){let ut=Rt[ne.key]||ne.key,bt="";return Se.indexOf("code.")>-1&&(ut=ne.code,bt="code."),!(null==ut||!ut)&&(ut=ut.toLowerCase()," "===ut?ut="space":"."===ut&&(ut="dot"),xt.forEach(hn=>{hn!==ut&&(0,Pt[hn])(ne)&&(bt+=hn+".")}),bt+=ut,bt===Se)}static eventCallback(ne,Se,ut){return bt=>{we.matchEventFullKeyCode(bt,ne)&&ut.runGuarded(()=>Se(bt))}}static _normalizeKey(ne){return"esc"===ne?"escape":ne}}return we.\u0275fac=function(ne){return new(ne||we)(W.LFG(g.K0))},we.\u0275prov=W.Yz7({token:we,factory:we.\u0275fac}),we})();const ar=(0,W.eFA)(W._c5,"browser",[{provide:W.Lbi,useValue:g.bD},{provide:W.g9A,useValue:function _n(){ye.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function br(){return(0,W.RDi)(document),document},deps:[]}]),on=new W.OlP(""),Ut=[{provide:W.rWj,useClass:class _e{addToWindow(ve){W.dqk.getAngularTestability=(Se,ut=!0)=>{const bt=ve.findTestabilityInTree(Se,ut);if(null==bt)throw new Error("Could not find testability for element.");return bt},W.dqk.getAllAngularTestabilities=()=>ve.getAllTestabilities(),W.dqk.getAllAngularRootElements=()=>ve.getAllRootElements(),W.dqk.frameworkStabilizers||(W.dqk.frameworkStabilizers=[]),W.dqk.frameworkStabilizers.push(Se=>{const ut=W.dqk.getAllAngularTestabilities();let bt=ut.length,hn=!1;const On=function(rr){hn=hn||rr,bt--,0==bt&&Se(hn)};ut.forEach(function(rr){rr.whenStable(On)})})}findTestabilityInTree(ve,ne,Se){return null==ne?null:ve.getTestability(ne)??(Se?(0,g.q)().isShadowRoot(ne)?this.findTestabilityInTree(ve,ne.host,!0):this.findTestabilityInTree(ve,ne.parentElement,!0):null)}},deps:[]},{provide:W.lri,useClass:W.dDg,deps:[W.R0b,W.eoX,W.rWj]},{provide:W.dDg,useClass:W.dDg,deps:[W.R0b,W.eoX,W.rWj]}],Xn=[{provide:W.zSh,useValue:"root"},{provide:W.qLn,useFactory:function Jn(){return new W.qLn},deps:[]},{provide:Te,useClass:Xe,multi:!0,deps:[g.K0,W.R0b,W.Lbi]},{provide:Te,useClass:vt,multi:!0,deps:[g.K0]},{provide:Dt,useClass:Dt,deps:[ot,ke,W.AFp,Ae]},{provide:W.FYo,useExisting:Dt},{provide:Le,useExisting:ke},{provide:ke,useClass:ke,deps:[g.K0]},{provide:ot,useClass:ot,deps:[Te,W.R0b]},{provide:g.JF,useClass:ht,deps:[]},[]];let kr=(()=>{class we{constructor(ne){}static withServerTransition(ne){return{ngModule:we,providers:[{provide:W.AFp,useValue:ne.appId},{provide:Pe,useExisting:W.AFp},ie]}}}return we.\u0275fac=function(ne){return new(ne||we)(W.LFG(on,12))},we.\u0275mod=W.oAB({type:we}),we.\u0275inj=W.cJS({providers:[...Xn,...Ut],imports:[g.ez,W.hGG]}),we})(),Nn=(()=>{class we{constructor(ne){this._doc=ne}getTitle(){return this._doc.title}setTitle(ne){this._doc.title=ne||""}}return we.\u0275fac=function(ne){return new(ne||we)(W.LFG(g.K0))},we.\u0275prov=W.Yz7({token:we,factory:function(ne){let Se=null;return Se=ne?new ne:function zn(){return new Nn((0,W.LFG)(g.K0))}(),Se},providedIn:"root"}),we})();typeof window<"u"&&window;let Ce=(()=>{class we{}return we.\u0275fac=function(ne){return new(ne||we)},we.\u0275prov=W.Yz7({token:we,factory:function(ne){let Se=null;return Se=ne?new(ne||we):W.LFG($e),Se},providedIn:"root"}),we})(),$e=(()=>{class we extends Ce{constructor(ne){super(),this._doc=ne}sanitize(ne,Se){if(null==Se)return null;switch(ne){case W.q3G.NONE:return Se;case W.q3G.HTML:return(0,W.qzn)(Se,"HTML")?(0,W.z3N)(Se):(0,W.EiD)(this._doc,String(Se)).toString();case W.q3G.STYLE:return(0,W.qzn)(Se,"Style")?(0,W.z3N)(Se):Se;case W.q3G.SCRIPT:if((0,W.qzn)(Se,"Script"))return(0,W.z3N)(Se);throw new Error("unsafe value used in a script context");case W.q3G.URL:return(0,W.qzn)(Se,"URL")?(0,W.z3N)(Se):(0,W.mCW)(String(Se));case W.q3G.RESOURCE_URL:if((0,W.qzn)(Se,"ResourceURL"))return(0,W.z3N)(Se);throw new Error(`unsafe value used in a resource URL context (see ${W.JZr})`);default:throw new Error(`Unexpected SecurityContext ${ne} (see ${W.JZr})`)}}bypassSecurityTrustHtml(ne){return(0,W.JVY)(ne)}bypassSecurityTrustStyle(ne){return(0,W.L6k)(ne)}bypassSecurityTrustScript(ne){return(0,W.eBb)(ne)}bypassSecurityTrustUrl(ne){return(0,W.LAX)(ne)}bypassSecurityTrustResourceUrl(ne){return(0,W.pB0)(ne)}}return we.\u0275fac=function(ne){return new(ne||we)(W.LFG(g.K0))},we.\u0275prov=W.Yz7({token:we,factory:function(ne){let Se=null;return Se=ne?new ne:function lt(we){return new $e(we.get(g.K0))}(W.LFG(W.zs3)),Se},providedIn:"root"}),we})()},9062:(jt,He,L)=>{L.d(He,{gz:()=>vs,m2:()=>Ni,F0:()=>ct,rH:()=>as,Od:()=>tu,Bz:()=>Cl,lC:()=>wr});var g=L(4650),W=L(8996),q=L(9646),ye=L(1135),ge=L(6805),pe=L(9841),be=L(7272),F=L(9751),Pe=L(8421);function le(E){return new F.y(_=>{(0,Pe.Xf)(E()).subscribe(_)})}var ie=L(9635),_e=L(576);function ht(E,_){const m=(0,_e.m)(E)?E:()=>E,T=U=>U.error(m());return new F.y(_?U=>_.schedule(T,0,U):T)}var Te=L(515),ot=L(727),rt=L(4482),Le=L(5403);function ke(){return(0,rt.e)((E,_)=>{let m=null;E._refCount++;const T=(0,Le.x)(_,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(m=null);const U=E._connection,K=m;m=null,U&&(!K||U===K)&&U.unsubscribe(),_.unsubscribe()});E.subscribe(T),T.closed||(m=E.connect())})}class st extends F.y{constructor(_,m){super(),this.source=_,this.subjectFactory=m,this._subject=null,this._refCount=0,this._connection=null,(0,rt.A)(_)&&(this.lift=_.lift)}_subscribe(_){return this.getSubject().subscribe(_)}getSubject(){const _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:_}=this;this._subject=this._connection=null,_?.unsubscribe()}connect(){let _=this._connection;if(!_){_=this._connection=new ot.w0;const m=this.getSubject();_.add(this.source.subscribe((0,Le.x)(m,void 0,()=>{this._teardown(),m.complete()},T=>{this._teardown(),m.error(T)},()=>this._teardown()))),_.closed&&(this._connection=null,_=ot.w0.EMPTY)}return _}refCount(){return ke()(this)}}var z=L(7579),O=L(6895),se=L(4004),he=L(3900),Ve=L(5698),Ge=L(8675),Ae=L(9300),me=L(5577),Be=L(590);function pt(E,_){return(0,_e.m)(_)?(0,me.z)(E,_,1):(0,me.z)(E,1)}var ft=L(8505);function Dt(E){return(0,rt.e)((_,m)=>{let K,T=null,U=!1;T=_.subscribe((0,Le.x)(m,void 0,void 0,te=>{K=(0,Pe.Xf)(E(te,Dt(E)(_))),T?(T.unsubscribe(),T=null,K.subscribe(m)):U=!0})),U&&(T.unsubscribe(),T=null,K.subscribe(m))})}var Rn=L(5026);function Qe(E){return E<=0?()=>Te.E:(0,rt.e)((_,m)=>{let T=[];_.subscribe((0,Le.x)(m,U=>{T.push(U),E<T.length&&T.shift()},()=>{for(const U of T)m.next(U);m.complete()},void 0,()=>{T=null}))})}var qe=L(8068),Je=L(6590),at=L(4671);function yt(E,_){const m=arguments.length>=2;return T=>T.pipe(E?(0,Ae.h)((U,K)=>E(U,K,T)):at.y,Qe(1),m?(0,Je.d)(_):(0,qe.T)(()=>new ge.K))}var Xe=L(9718);function xt(E){return(0,rt.e)((_,m)=>{try{_.subscribe(m)}finally{m.add(E)}})}var Rt=L(8189),Pt=L(1481);const vt="primary",tn=Symbol("RouteTitle");class nn{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const m=this.params[_];return Array.isArray(m)?m[0]:m}return null}getAll(_){if(this.has(_)){const m=this.params[_];return Array.isArray(m)?m:[m]}return[]}get keys(){return Object.keys(this.params)}}function gn(E){return new nn(E)}function $n(E,_,m){const T=m.path.split("/");if(T.length>E.length||"full"===m.pathMatch&&(_.hasChildren()||T.length<E.length))return null;const U={};for(let K=0;K<T.length;K++){const te=T[K],Fe=E[K];if(te.startsWith(":"))U[te.substring(1)]=Fe;else if(te!==Fe.path)return null}return{consumed:E.slice(0,T.length),posParams:U}}function _n(E,_){const m=E?Object.keys(E):void 0,T=_?Object.keys(_):void 0;if(!m||!T||m.length!=T.length)return!1;let U;for(let K=0;K<m.length;K++)if(U=m[K],!Jn(E[U],_[U]))return!1;return!0}function Jn(E,_){if(Array.isArray(E)&&Array.isArray(_)){if(E.length!==_.length)return!1;const m=[...E].sort(),T=[..._].sort();return m.every((U,K)=>T[K]===U)}return E===_}function br(E){return Array.prototype.concat.apply([],E)}function Xr(E){return E.length>0?E[E.length-1]:null}function on(E,_){for(const m in E)E.hasOwnProperty(m)&&_(E[m],m)}function Ut(E){return(0,g.CqO)(E)?E:(0,g.QGY)(E)?(0,W.D)(Promise.resolve(E)):(0,q.of)(E)}const Xn=!1,kr={exact:function zn(E,_,m){if(!Fr(E.segments,_.segments)||!$r(E.segments,_.segments,m)||E.numberOfChildren!==_.numberOfChildren)return!1;for(const T in _.children)if(!E.children[T]||!zn(E.children[T],_.children[T],m))return!1;return!0},subset:zt},Br={exact:function mi(E,_){return _n(E,_)},subset:function Nn(E,_){return Object.keys(_).length<=Object.keys(E).length&&Object.keys(_).every(m=>Jn(E[m],_[m]))},ignored:()=>!0};function ur(E,_,m){return kr[m.paths](E.root,_.root,m.matrixParams)&&Br[m.queryParams](E.queryParams,_.queryParams)&&!("exact"===m.fragment&&E.fragment!==_.fragment)}function zt(E,_,m){return rn(E,_,_.segments,m)}function rn(E,_,m,T){if(E.segments.length>m.length){const U=E.segments.slice(0,m.length);return!(!Fr(U,m)||_.hasChildren()||!$r(U,m,T))}if(E.segments.length===m.length){if(!Fr(E.segments,m)||!$r(E.segments,m,T))return!1;for(const U in _.children)if(!E.children[U]||!zt(E.children[U],_.children[U],T))return!1;return!0}{const U=m.slice(0,E.segments.length),K=m.slice(E.segments.length);return!!(Fr(E.segments,U)&&$r(E.segments,U,T)&&E.children[vt])&&rn(E.children[vt],_,K,T)}}function $r(E,_,m){return _.every((T,U)=>Br[m](E[U].parameters,T.parameters))}class fr{constructor(_=new an([],{}),m={},T=null){this.root=_,this.queryParams=m,this.fragment=T}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return _r.serialize(this)}}class an{constructor(_,m){this.segments=_,this.children=m,this.parent=null,on(m,(T,U)=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fn(this)}}class Tr{constructor(_,m){this.path=_,this.parameters=m}get parameterMap(){return this._parameterMap||(this._parameterMap=gn(this.parameters)),this._parameterMap}toString(){return ue(this)}}function Fr(E,_){return E.length===_.length&&E.every((m,T)=>m.path===_[T].path)}let qn=(()=>{class E{}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:function(){return new An},providedIn:"root"}),E})();class An{parse(_){const m=new Se(_);return new fr(m.parseRootSegment(),m.parseQueryParams(),m.parseFragment())}serialize(_){const m=`/${Sr(_.root,!0)}`,T=function Ce(E){const _=Object.keys(E).map(m=>{const T=E[m];return Array.isArray(T)?T.map(U=>`${Mt(m)}=${Mt(U)}`).join("&"):`${Mt(m)}=${Mt(T)}`}).filter(m=>!!m);return _.length?`?${_.join("&")}`:""}(_.queryParams);return`${m}${T}${"string"==typeof _.fragment?`#${function Me(E){return encodeURI(E)}(_.fragment)}`:""}`}}const _r=new An;function Fn(E){return E.segments.map(_=>ue(_)).join("/")}function Sr(E,_){if(!E.hasChildren())return Fn(E);if(_){const m=E.children[vt]?Sr(E.children[vt],!1):"",T=[];return on(E.children,(U,K)=>{K!==vt&&T.push(`${K}:${Sr(U,!1)}`)}),T.length>0?`${m}(${T.join("//")})`:m}{const m=function nr(E,_){let m=[];return on(E.children,(T,U)=>{U===vt&&(m=m.concat(_(T,U)))}),on(E.children,(T,U)=>{U!==vt&&(m=m.concat(_(T,U)))}),m}(E,(T,U)=>U===vt?[Sr(E.children[vt],!1)]:[`${U}:${Sr(T,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[vt]?`${Fn(E)}/${m[0]}`:`${Fn(E)}/(${m.join("//")})`}}function Oe(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mt(E){return Oe(E).replace(/%3B/gi,";")}function Ct(E){return Oe(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wn(E){return decodeURIComponent(E)}function Xt(E){return wn(E.replace(/\+/g,"%20"))}function ue(E){return`${Ct(E.path)}${function ce(E){return Object.keys(E).map(_=>`;${Ct(_)}=${Ct(E[_])}`).join("")}(E.parameters)}`}const lt=/^[^\/()?;=#]+/;function $e(E){const _=E.match(lt);return _?_[0]:""}const Et=/^[^=?&#]+/,ve=/^[^&#]+/;class Se{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new an([],{}):new an([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let m={};this.peekStartsWith("/(")&&(this.capture("/"),m=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(_.length>0||Object.keys(m).length>0)&&(T[vt]=new an(_,m)),T}parseSegment(){const _=$e(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new g.vHH(4009,Xn);return this.capture(_),new Tr(wn(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const m=$e(this.remaining);if(!m)return;this.capture(m);let T="";if(this.consumeOptional("=")){const U=$e(this.remaining);U&&(T=U,this.capture(T))}_[wn(m)]=wn(T)}parseQueryParam(_){const m=function we(E){const _=E.match(Et);return _?_[0]:""}(this.remaining);if(!m)return;this.capture(m);let T="";if(this.consumeOptional("=")){const te=function ne(E){const _=E.match(ve);return _?_[0]:""}(this.remaining);te&&(T=te,this.capture(T))}const U=Xt(m),K=Xt(T);if(_.hasOwnProperty(U)){let te=_[U];Array.isArray(te)||(te=[te],_[U]=te),te.push(K)}else _[U]=K}parseParens(_){const m={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=$e(this.remaining),U=this.remaining[T.length];if("/"!==U&&")"!==U&&";"!==U)throw new g.vHH(4010,Xn);let K;T.indexOf(":")>-1?(K=T.slice(0,T.indexOf(":")),this.capture(K),this.capture(":")):_&&(K=vt);const te=this.parseChildren();m[K]=1===Object.keys(te).length?te[vt]:new an([],te),this.consumeOptional("//")}return m}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new g.vHH(4011,Xn)}}function ut(E){return E.segments.length>0?new an([],{[vt]:E}):E}function bt(E){const _={};for(const T of Object.keys(E.children)){const K=bt(E.children[T]);(K.segments.length>0||K.hasChildren())&&(_[T]=K)}return function hn(E){if(1===E.numberOfChildren&&E.children[vt]){const _=E.children[vt];return new an(E.segments.concat(_.segments),_.children)}return E}(new an(E.segments,_))}function On(E){return E instanceof fr}const rr=!1;function wt(E,_,m,T,U){if(0===m.length)return Tn(_.root,_.root,_.root,T,U);const K=function kn(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new Gn(!0,0,E);let _=0,m=!1;const T=E.reduce((U,K,te)=>{if("object"==typeof K&&null!=K){if(K.outlets){const Fe={};return on(K.outlets,(mt,Zt)=>{Fe[Zt]="string"==typeof mt?mt.split("/"):mt}),[...U,{outlets:Fe}]}if(K.segmentPath)return[...U,K.segmentPath]}return"string"!=typeof K?[...U,K]:0===te?(K.split("/").forEach((Fe,mt)=>{0==mt&&"."===Fe||(0==mt&&""===Fe?m=!0:".."===Fe?_++:""!=Fe&&U.push(Fe))}),U):[...U,K]},[]);return new Gn(m,_,T)}(m);return K.toRoot()?Tn(_.root,_.root,new an([],{}),T,U):function te(mt){const Zt=function qs(E,_,m,T){if(E.isAbsolute)return new gr(_.root,!0,0);if(-1===T)return new gr(m,m===_.root,0);return function Ks(E,_,m){let T=E,U=_,K=m;for(;K>U;){if(K-=U,T=T.parent,!T)throw new g.vHH(4005,rr&&"Invalid number of '../'");U=T.segments.length}return new gr(T,!1,U-K)}(m,T+(Kt(E.commands[0])?0:1),E.numberOfDoubleDots)}(K,_,E.snapshot?._urlSegment,mt),qt=Zt.processChildren?Ft(Zt.segmentGroup,Zt.index,K.commands):ai(Zt.segmentGroup,Zt.index,K.commands);return Tn(_.root,Zt.segmentGroup,qt,T,U)}(E.snapshot?._lastPathIndex)}function Kt(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function fn(E){return"object"==typeof E&&null!=E&&E.outlets}function Tn(E,_,m,T,U){let te,K={};T&&on(T,(mt,Zt)=>{K[Zt]=Array.isArray(mt)?mt.map(qt=>`${qt}`):`${mt}`}),te=E===_?m:un(E,_,m);const Fe=ut(bt(te));return new fr(Fe,K,U)}function un(E,_,m){const T={};return on(E.children,(U,K)=>{T[K]=U===_?m:un(U,_,m)}),new an(E.segments,T)}class Gn{constructor(_,m,T){if(this.isAbsolute=_,this.numberOfDoubleDots=m,this.commands=T,_&&T.length>0&&Kt(T[0]))throw new g.vHH(4003,rr&&"Root segment cannot have matrix parameters");const U=T.find(fn);if(U&&U!==Xr(T))throw new g.vHH(4004,rr&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gr{constructor(_,m,T){this.segmentGroup=_,this.processChildren=m,this.index=T}}function ai(E,_,m){if(E||(E=new an([],{})),0===E.segments.length&&E.hasChildren())return Ft(E,_,m);const T=function Mn(E,_,m){let T=0,U=_;const K={match:!1,pathIndex:0,commandIndex:0};for(;U<E.segments.length;){if(T>=m.length)return K;const te=E.segments[U],Fe=m[T];if(fn(Fe))break;const mt=`${Fe}`,Zt=T<m.length-1?m[T+1]:null;if(U>0&&void 0===mt)break;if(mt&&Zt&&"object"==typeof Zt&&void 0===Zt.outlets){if(!Pr(mt,Zt,te))return K;T+=2}else{if(!Pr(mt,{},te))return K;T++}U++}return{match:!0,pathIndex:U,commandIndex:T}}(E,_,m),U=m.slice(T.commandIndex);if(T.match&&T.pathIndex<E.segments.length){const K=new an(E.segments.slice(0,T.pathIndex),{});return K.children[vt]=new an(E.segments.slice(T.pathIndex),E.children),Ft(K,0,U)}return T.match&&0===U.length?new an(E.segments,{}):T.match&&!E.hasChildren()?vr(E,_,m):T.match?Ft(E,0,U):vr(E,_,m)}function Ft(E,_,m){if(0===m.length)return new an(E.segments,{});{const T=function Zs(E){return fn(E[0])?E[0].outlets:{[vt]:E}}(m),U={};if(!T[vt]&&E.children[vt]&&1===E.numberOfChildren&&0===E.children[vt].segments.length){const K=Ft(E.children[vt],_,m);return new an(E.segments,K.children)}return on(T,(K,te)=>{"string"==typeof K&&(K=[K]),null!==K&&(U[te]=ai(E.children[te],_,K))}),on(E.children,(K,te)=>{void 0===T[te]&&(U[te]=K)}),new an(E.segments,U)}}function vr(E,_,m){const T=E.segments.slice(0,_);let U=0;for(;U<m.length;){const K=m[U];if(fn(K)){const mt=yi(K.outlets);return new an(T,mt)}if(0===U&&Kt(m[0])){T.push(new Tr(E.segments[_].path,Ln(m[0]))),U++;continue}const te=fn(K)?K.outlets[vt]:`${K}`,Fe=U<m.length-1?m[U+1]:null;te&&Fe&&Kt(Fe)?(T.push(new Tr(te,Ln(Fe))),U+=2):(T.push(new Tr(te,{})),U++)}return new an(T,{})}function yi(E){const _={};return on(E,(m,T)=>{"string"==typeof m&&(m=[m]),null!==m&&(_[T]=vr(new an([],{}),0,m))}),_}function Ln(E){const _={};return on(E,(m,T)=>_[T]=`${m}`),_}function Pr(E,_,m){return E==m.path&&_n(_,m.parameters)}const Pi="imperative";class Yn{constructor(_,m){this.id=_,this.url=m}}class Oi extends Yn{constructor(_,m,T="imperative",U=null){super(_,m),this.type=0,this.navigationTrigger=T,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ni extends Yn{constructor(_,m,T){super(_,m),this.urlAfterRedirects=T,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ln extends Yn{constructor(_,m,T,U){super(_,m),this.reason=T,this.code=U,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _i extends Yn{constructor(_,m,T,U){super(_,m),this.reason=T,this.code=U,this.type=16}}class ys extends Yn{constructor(_,m,T,U){super(_,m),this.error=T,this.target=U,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $i extends Yn{constructor(_,m,T,U){super(_,m),this.urlAfterRedirects=T,this.state=U,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ki extends Yn{constructor(_,m,T,U){super(_,m),this.urlAfterRedirects=T,this.state=U,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wr extends Yn{constructor(_,m,T,U,K){super(_,m),this.urlAfterRedirects=T,this.state=U,this.shouldActivate=K,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _s extends Yn{constructor(_,m,T,U){super(_,m),this.urlAfterRedirects=T,this.state=U,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qr extends Yn{constructor(_,m,T,U){super(_,m),this.urlAfterRedirects=T,this.state=U,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ai{constructor(_){this.route=_,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class As{constructor(_){this.route=_,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ir{constructor(_){this.snapshot=_,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mr{constructor(_){this.snapshot=_,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ui{constructor(_){this.snapshot=_,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mi{constructor(_){this.snapshot=_,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xe{constructor(_,m,T){this.routerEvent=_,this.position=m,this.anchor=T,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let dt=(()=>{class E{createUrlTree(m,T,U,K,te,Fe){return wt(m||T.root,U,K,te,Fe)}}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac}),E})(),vn=(()=>{class E{}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:function(_){return dt.\u0275fac(_)},providedIn:"root"}),E})();class bn{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const m=this.pathFromRoot(_);return m.length>1?m[m.length-2]:null}children(_){const m=Dn(_,this._root);return m?m.children.map(T=>T.value):[]}firstChild(_){const m=Dn(_,this._root);return m&&m.children.length>0?m.children[0].value:null}siblings(_){const m=Wn(_,this._root);return m.length<2?[]:m[m.length-2].children.map(U=>U.value).filter(U=>U!==_)}pathFromRoot(_){return Wn(_,this._root).map(m=>m.value)}}function Dn(E,_){if(E===_.value)return _;for(const m of _.children){const T=Dn(E,m);if(T)return T}return null}function Wn(E,_){if(E===_.value)return[_];for(const m of _.children){const T=Wn(E,m);if(T.length)return T.unshift(_),T}return[]}class Or{constructor(_,m){this.value=_,this.children=m}toString(){return`TreeNode(${this.value})`}}function is(E){const _={};return E&&E.children.forEach(m=>_[m.value.outlet]=m),_}class Er extends bn{constructor(_,m){super(_),this.snapshot=m,lo(this,_)}toString(){return this.snapshot.toString()}}function Ys(E,_){const m=function vi(E,_){const te=new Oo([],{},{},"",{},vt,_,null,E.root,-1,{});return new uo("",new Or(te,[]))}(E,_),T=new ye.X([new Tr("",{})]),U=new ye.X({}),K=new ye.X({}),te=new ye.X({}),Fe=new ye.X(""),mt=new vs(T,U,te,Fe,K,vt,_,m.root);return mt.snapshot=m.root,new Er(new Or(mt,[]),m)}class vs{constructor(_,m,T,U,K,te,Fe,mt){this.url=_,this.params=m,this.queryParams=T,this.fragment=U,this.data=K,this.outlet=te,this.component=Fe,this.title=this.data?.pipe((0,se.U)(Zt=>Zt[tn]))??(0,q.of)(void 0),this._futureSnapshot=mt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,se.U)(_=>gn(_)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,se.U)(_=>gn(_)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vo(E,_="emptyOnly"){const m=E.pathFromRoot;let T=0;if("always"!==_)for(T=m.length-1;T>=1;){const U=m[T],K=m[T-1];if(U.routeConfig&&""===U.routeConfig.path)T--;else{if(K.component)break;T--}}return function ss(E){return E.reduce((_,m)=>({params:{..._.params,...m.params},data:{..._.data,...m.data},resolve:{...m.data,..._.resolve,...m.routeConfig?.data,...m._resolvedData}}),{params:{},data:{},resolve:{}})}(m.slice(T))}class Oo{get title(){return this.data?.[tn]}constructor(_,m,T,U,K,te,Fe,mt,Zt,qt,Rr){this.url=_,this.params=m,this.queryParams=T,this.fragment=U,this.data=K,this.outlet=te,this.component=Fe,this.routeConfig=mt,this._urlSegment=Zt,this._lastPathIndex=qt,this._resolve=Rr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class uo extends bn{constructor(_,m){super(m),this.url=_,lo(this,m)}toString(){return Ns(this._root)}}function lo(E,_){_.value._routerState=E,_.children.forEach(m=>lo(E,m))}function Ns(E){const _=E.children.length>0?` { ${E.children.map(Ns).join(", ")} } `:"";return`${E.value}${_}`}function co(E){if(E.snapshot){const _=E.snapshot,m=E._futureSnapshot;E.snapshot=m,_n(_.queryParams,m.queryParams)||E.queryParams.next(m.queryParams),_.fragment!==m.fragment&&E.fragment.next(m.fragment),_n(_.params,m.params)||E.params.next(m.params),function Nr(E,_){if(E.length!==_.length)return!1;for(let m=0;m<E.length;++m)if(!_n(E[m],_[m]))return!1;return!0}(_.url,m.url)||E.url.next(m.url),_n(_.data,m.data)||E.data.next(m.data)}else E.snapshot=E._futureSnapshot,E.data.next(E._futureSnapshot.data)}function Qi(E,_){const m=_n(E.params,_.params)&&function lr(E,_){return Fr(E,_)&&E.every((m,T)=>_n(m.parameters,_[T].parameters))}(E.url,_.url);return m&&!(!E.parent!=!_.parent)&&(!E.parent||Qi(E.parent,_.parent))}function No(E,_,m){if(m&&E.shouldReuseRoute(_.value,m.value.snapshot)){const T=m.value;T._futureSnapshot=_.value;const U=function ko(E,_,m){return _.children.map(T=>{for(const U of m.children)if(E.shouldReuseRoute(T.value,U.value.snapshot))return No(E,T,U);return No(E,T)})}(E,_,m);return new Or(T,U)}{if(E.shouldAttach(_.value)){const K=E.retrieve(_.value);if(null!==K){const te=K.route;return te.value._futureSnapshot=_.value,te.children=_.children.map(Fe=>No(E,Fe)),te}}const T=function ds(E){return new vs(new ye.X(E.url),new ye.X(E.params),new ye.X(E.queryParams),new ye.X(E.fragment),new ye.X(E.data),E.outlet,E.component,E)}(_.value),U=_.children.map(K=>No(E,K));return new Or(T,U)}}const Yo="ngNavigationCancelingError";function ho(E,_){const{redirectTo:m,navigationBehaviorOptions:T}=On(_)?{redirectTo:_,navigationBehaviorOptions:void 0}:_,U=ks(!1,0,_);return U.url=m,U.navigationBehaviorOptions=T,U}function ks(E,_,m){const T=new Error("NavigationCancelingError: "+(E||""));return T[Yo]=!0,T.cancellationCode=_,m&&(T.url=m),T}function Qs(E){return hs(E)&&On(E.url)}function hs(E){return E&&E[Yo]}class Ei{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new wi,this.attachRef=null}}let wi=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(m,T){const U=this.getOrCreateContext(m);U.outlet=T,this.contexts.set(m,U)}onChildOutletDestroyed(m){const T=this.getContext(m);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const m=this.contexts;return this.contexts=new Map,m}onOutletReAttached(m){this.contexts=m}getOrCreateContext(m){let T=this.getContext(m);return T||(T=new Ei,this.contexts.set(m,T)),T}getContext(m){return this.contexts.get(m)||null}}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const Ji=!1;let wr=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=vt,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)(wi),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb)}ngOnChanges(m){if(m.name){const{firstChange:T,previousValue:U}=m.name;if(T)return;this.isTrackedInParentContexts(U)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(U)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(m){return this.parentContexts.getContext(m)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const m=this.parentContexts.getContext(this.name);m?.route&&(m.attachRef?this.attach(m.attachRef,m.route):this.activateWith(m.route,m.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,Ji);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,Ji);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,Ji);this.location.detach();const m=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(m.instance),m}attach(m,T){this.activated=m,this._activatedRoute=T,this.location.insert(m.hostView),this.attachEvents.emit(m.instance)}deactivate(){if(this.activated){const m=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(m)}}activateWith(m,T){if(this.isActivated)throw new g.vHH(4013,Ji);this._activatedRoute=m;const U=this.location,te=m.snapshot.component,Fe=this.parentContexts.getOrCreateContext(this.name).children,mt=new Fs(m,Fe,U.injector);if(T&&function Js(E){return!!E.resolveComponentFactory}(T)){const Zt=T.resolveComponentFactory(te);this.activated=U.createComponent(Zt,U.length,mt)}else this.activated=U.createComponent(te,{index:U.length,injector:mt,environmentInjector:T??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return E.\u0275fac=function(m){return new(m||E)},E.\u0275dir=g.lG2({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]}),E})();class Fs{constructor(_,m,T){this.route=_,this.childContexts=m,this.parent=T}get(_,m){return _===vs?this.route:_===wi?this.childContexts:this.parent.get(_,m)}}let Ls=(()=>{class E{}return E.\u0275fac=function(m){return new(m||E)},E.\u0275cmp=g.Xpm({type:E,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(m,T){1&m&&g._UZ(0,"router-outlet")},dependencies:[wr],encapsulation:2}),E})();function fs(E,_){return E.providers&&!E._injector&&(E._injector=(0,g.MMx)(E.providers,_,`Route: ${E.path}`)),E._injector??_}function ps(E){const _=E.children&&E.children.map(ps),m=_?{...E,children:_}:{...E};return!m.component&&!m.loadComponent&&(_||m.loadChildren)&&m.outlet&&m.outlet!==vt&&(m.component=Ls),m}function ei(E){return E.outlet||vt}function Kr(E,_){const m=E.filter(T=>ei(T)===_);return m.push(...E.filter(T=>ei(T)!==_)),m}function Eo(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let _=E.parent;_;_=_.parent){const m=_.routeConfig;if(m?._loadedInjector)return m._loadedInjector;if(m?._injector)return m._injector}return null}class xi{constructor(_,m,T,U){this.routeReuseStrategy=_,this.futureState=m,this.currState=T,this.forwardEvent=U}activate(_){const m=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(m,T,_),co(this.futureState.root),this.activateChildRoutes(m,T,_)}deactivateChildRoutes(_,m,T){const U=is(m);_.children.forEach(K=>{const te=K.value.outlet;this.deactivateRoutes(K,U[te],T),delete U[te]}),on(U,(K,te)=>{this.deactivateRouteAndItsChildren(K,T)})}deactivateRoutes(_,m,T){const U=_.value,K=m?m.value:null;if(U===K)if(U.component){const te=T.getContext(U.outlet);te&&this.deactivateChildRoutes(_,m,te.children)}else this.deactivateChildRoutes(_,m,T);else K&&this.deactivateRouteAndItsChildren(m,T)}deactivateRouteAndItsChildren(_,m){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,m):this.deactivateRouteAndOutlet(_,m)}detachAndStoreRouteSubtree(_,m){const T=m.getContext(_.value.outlet),U=T&&_.value.component?T.children:m,K=is(_);for(const te of Object.keys(K))this.deactivateRouteAndItsChildren(K[te],U);if(T&&T.outlet){const te=T.outlet.detach(),Fe=T.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:te,route:_,contexts:Fe})}}deactivateRouteAndOutlet(_,m){const T=m.getContext(_.value.outlet),U=T&&_.value.component?T.children:m,K=is(_);for(const te of Object.keys(K))this.deactivateRouteAndItsChildren(K[te],U);T&&(T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated()),T.attachRef=null,T.resolver=null,T.route=null)}activateChildRoutes(_,m,T){const U=is(m);_.children.forEach(K=>{this.activateRoutes(K,U[K.value.outlet],T),this.forwardEvent(new Mi(K.value.snapshot))}),_.children.length&&this.forwardEvent(new mr(_.value.snapshot))}activateRoutes(_,m,T){const U=_.value,K=m?m.value:null;if(co(U),U===K)if(U.component){const te=T.getOrCreateContext(U.outlet);this.activateChildRoutes(_,m,te.children)}else this.activateChildRoutes(_,m,T);else if(U.component){const te=T.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const Fe=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),te.children.onOutletReAttached(Fe.contexts),te.attachRef=Fe.componentRef,te.route=Fe.route.value,te.outlet&&te.outlet.attach(Fe.componentRef,Fe.route.value),co(Fe.route.value),this.activateChildRoutes(_,null,te.children)}else{const Fe=Eo(U.snapshot),mt=Fe?.get(g._Vd)??null;te.attachRef=null,te.route=U,te.resolver=mt,te.injector=Fe,te.outlet&&te.outlet.activateWith(U,te.injector),this.activateChildRoutes(_,null,te.children)}}else this.activateChildRoutes(_,null,T)}}class pi{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class eo{constructor(_,m){this.component=_,this.route=m}}function ws(E,_,m){const T=E._root;return Is(T,_?_._root:null,m,[T.value])}function Hi(E,_){const m=Symbol(),T=_.get(E,m);return T===m?"function"!=typeof E||(0,g.Z0I)(E)?_.get(E):E:T}function Is(E,_,m,T,U={canDeactivateChecks:[],canActivateChecks:[]}){const K=is(_);return E.children.forEach(te=>{(function wo(E,_,m,T,U={canDeactivateChecks:[],canActivateChecks:[]}){const K=E.value,te=_?_.value:null,Fe=m?m.getContext(E.value.outlet):null;if(te&&K.routeConfig===te.routeConfig){const mt=function xn(E,_,m){if("function"==typeof m)return m(E,_);switch(m){case"pathParamsChange":return!Fr(E.url,_.url);case"pathParamsOrQueryParamsChange":return!Fr(E.url,_.url)||!_n(E.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qi(E,_)||!_n(E.queryParams,_.queryParams);default:return!Qi(E,_)}}(te,K,K.routeConfig.runGuardsAndResolvers);mt?U.canActivateChecks.push(new pi(T)):(K.data=te.data,K._resolvedData=te._resolvedData),Is(E,_,K.component?Fe?Fe.children:null:m,T,U),mt&&Fe&&Fe.outlet&&Fe.outlet.isActivated&&U.canDeactivateChecks.push(new eo(Fe.outlet.component,te))}else te&&Ds(_,Fe,U),U.canActivateChecks.push(new pi(T)),Is(E,null,K.component?Fe?Fe.children:null:m,T,U)})(te,K[te.value.outlet],m,T.concat([te.value]),U),delete K[te.value.outlet]}),on(K,(te,Fe)=>Ds(te,m.getContext(Fe),U)),U}function Ds(E,_,m){const T=is(E),U=E.value;on(T,(K,te)=>{Ds(K,U.component?_?_.children.getContext(te):null:_,m)}),m.canDeactivateChecks.push(new eo(U.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,U))}function V(E){return"function"==typeof E}function It(E){return E instanceof ge.K||"EmptyError"===E?.name}const Vt=Symbol("INITIAL_VALUE");function Bt(){return(0,he.w)(E=>(0,pe.a)(E.map(_=>_.pipe((0,Ve.q)(1),(0,Ge.O)(Vt)))).pipe((0,se.U)(_=>{for(const m of _)if(!0!==m){if(m===Vt)return Vt;if(!1===m||m instanceof fr)return m}return!0}),(0,Ae.h)(_=>_!==Vt),(0,Ve.q)(1)))}function ti(E){return(0,ie.z)((0,ft.b)(_=>{if(On(_))throw ho(0,_)}),(0,se.U)(_=>!0===_))}const Ur={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ni(E,_,m,T,U){const K=Vs(E,_,m);return K.matched?function jr(E,_,m,T){const U=_.canMatch;if(!U||0===U.length)return(0,q.of)(!0);const K=U.map(te=>{const Fe=Hi(te,E);return Ut(function oe(E){return E&&V(E.canMatch)}(Fe)?Fe.canMatch(_,m):E.runInContext(()=>Fe(_,m)))});return(0,q.of)(K).pipe(Bt(),ti())}(T=fs(_,T),_,m).pipe((0,se.U)(te=>!0===te?K:{...Ur})):(0,q.of)(K)}function Vs(E,_,m){if(""===_.path)return"full"===_.pathMatch&&(E.hasChildren()||m.length>0)?{...Ur}:{matched:!0,consumedSegments:[],remainingSegments:m,parameters:{},positionalParamSegments:{}};const U=(_.matcher||$n)(m,E,_);if(!U)return{...Ur};const K={};on(U.posParams,(Fe,mt)=>{K[mt]=Fe.path});const te=U.consumed.length>0?{...K,...U.consumed[U.consumed.length-1].parameters}:K;return{matched:!0,consumedSegments:U.consumed,remainingSegments:m.slice(U.consumed.length),parameters:te,positionalParamSegments:U.posParams??{}}}function Cs(E,_,m,T){if(m.length>0&&function gi(E,_,m){return m.some(T=>Xo(E,_,T)&&ei(T)!==vt)}(E,m,T)){const K=new an(_,function _a(E,_,m,T){const U={};U[vt]=T,T._sourceSegment=E,T._segmentIndexShift=_.length;for(const K of m)if(""===K.path&&ei(K)!==vt){const te=new an([],{});te._sourceSegment=E,te._segmentIndexShift=_.length,U[ei(K)]=te}return U}(E,_,T,new an(m,E.children)));return K._sourceSegment=E,K._segmentIndexShift=_.length,{segmentGroup:K,slicedSegments:[]}}if(0===m.length&&function aa(E,_,m){return m.some(T=>Xo(E,_,T))}(E,m,T)){const K=new an(E.segments,function Ms(E,_,m,T,U){const K={};for(const te of T)if(Xo(E,m,te)&&!U[ei(te)]){const Fe=new an([],{});Fe._sourceSegment=E,Fe._segmentIndexShift=_.length,K[ei(te)]=Fe}return{...U,...K}}(E,_,m,T,E.children));return K._sourceSegment=E,K._segmentIndexShift=_.length,{segmentGroup:K,slicedSegments:m}}const U=new an(E.segments,E.children);return U._sourceSegment=E,U._segmentIndexShift=_.length,{segmentGroup:U,slicedSegments:m}}function Xo(E,_,m){return(!(E.hasChildren()||_.length>0)||"full"!==m.pathMatch)&&""===m.path}function Io(E,_,m,T){return!!(ei(E)===T||T!==vt&&Xo(_,m,E))&&("**"===E.path||Vs(_,E,m).matched)}function Na(E,_,m){return 0===_.length&&!E.children[m]}const Fo=!1;class Do{constructor(_){this.segmentGroup=_||null}}class Lo{constructor(_){this.urlTree=_}}function Uo(E){return ht(new Do(E))}function Co(E){return ht(new Lo(E))}class Ea{constructor(_,m,T,U,K){this.injector=_,this.configLoader=m,this.urlSerializer=T,this.urlTree=U,this.config=K,this.allowRedirects=!0}apply(){const _=Cs(this.urlTree.root,[],[],this.config).segmentGroup,m=new an(_.segments,_.children);return this.expandSegmentGroup(this.injector,this.config,m,vt).pipe((0,se.U)(K=>this.createUrlTree(bt(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Dt(K=>{if(K instanceof Lo)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof Do?this.noMatchError(K):K}))}match(_){return this.expandSegmentGroup(this.injector,this.config,_.root,vt).pipe((0,se.U)(U=>this.createUrlTree(bt(U),_.queryParams,_.fragment))).pipe(Dt(U=>{throw U instanceof Do?this.noMatchError(U):U}))}noMatchError(_){return new g.vHH(4002,Fo)}createUrlTree(_,m,T){const U=ut(_);return new fr(U,m,T)}expandSegmentGroup(_,m,T,U){return 0===T.segments.length&&T.hasChildren()?this.expandChildren(_,m,T).pipe((0,se.U)(K=>new an([],K))):this.expandSegment(_,T,m,T.segments,U,!0)}expandChildren(_,m,T){const U=[];for(const K of Object.keys(T.children))"primary"===K?U.unshift(K):U.push(K);return(0,W.D)(U).pipe(pt(K=>{const te=T.children[K],Fe=Kr(m,K);return this.expandSegmentGroup(_,Fe,te,K).pipe((0,se.U)(mt=>({segment:mt,outlet:K})))}),(0,Rn.R)((K,te)=>(K[te.outlet]=te.segment,K),{}),yt())}expandSegment(_,m,T,U,K,te){return(0,W.D)(T).pipe(pt(Fe=>this.expandSegmentAgainstRoute(_,m,T,Fe,U,K,te).pipe(Dt(Zt=>{if(Zt instanceof Do)return(0,q.of)(null);throw Zt}))),(0,Be.P)(Fe=>!!Fe),Dt((Fe,mt)=>{if(It(Fe))return Na(m,U,K)?(0,q.of)(new an([],{})):Uo(m);throw Fe}))}expandSegmentAgainstRoute(_,m,T,U,K,te,Fe){return Io(U,m,K,te)?void 0===U.redirectTo?this.matchSegmentAgainstRoute(_,m,U,K,te):Fe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(_,m,T,U,K,te):Uo(m):Uo(m)}expandSegmentAgainstRouteUsingRedirect(_,m,T,U,K,te){return"**"===U.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(_,T,U,te):this.expandRegularSegmentAgainstRouteUsingRedirect(_,m,T,U,K,te)}expandWildCardWithParamsAgainstRouteUsingRedirect(_,m,T,U){const K=this.applyRedirectCommands([],T.redirectTo,{});return T.redirectTo.startsWith("/")?Co(K):this.lineralizeSegments(T,K).pipe((0,me.z)(te=>{const Fe=new an(te,{});return this.expandSegment(_,Fe,m,te,U,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(_,m,T,U,K,te){const{matched:Fe,consumedSegments:mt,remainingSegments:Zt,positionalParamSegments:qt}=Vs(m,U,K);if(!Fe)return Uo(m);const Rr=this.applyRedirectCommands(mt,U.redirectTo,qt);return U.redirectTo.startsWith("/")?Co(Rr):this.lineralizeSegments(U,Rr).pipe((0,me.z)(ts=>this.expandSegment(_,m,T,ts.concat(Zt),te,!1)))}matchSegmentAgainstRoute(_,m,T,U,K){return"**"===T.path?(_=fs(T,_),T.loadChildren?(T._loadedRoutes?(0,q.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):this.configLoader.loadChildren(_,T)).pipe((0,se.U)(Fe=>(T._loadedRoutes=Fe.routes,T._loadedInjector=Fe.injector,new an(U,{})))):(0,q.of)(new an(U,{}))):ni(m,T,U,_).pipe((0,he.w)(({matched:te,consumedSegments:Fe,remainingSegments:mt})=>te?this.getChildConfig(_=T._injector??_,T,U).pipe((0,me.z)(qt=>{const Rr=qt.injector??_,ts=qt.routes,{segmentGroup:bi,slicedSegments:bs}=Cs(m,Fe,mt,ts),so=new an(bi.segments,bi.children);if(0===bs.length&&so.hasChildren())return this.expandChildren(Rr,ts,so).pipe((0,se.U)(Ua=>new an(Fe,Ua)));if(0===ts.length&&0===bs.length)return(0,q.of)(new an(Fe,{}));const Ti=ei(T)===K;return this.expandSegment(Rr,so,ts,bs,Ti?vt:K,!0).pipe((0,se.U)(La=>new an(Fe.concat(La.segments),La.children)))})):Uo(m)))}getChildConfig(_,m,T){return m.children?(0,q.of)({routes:m.children,injector:_}):m.loadChildren?void 0!==m._loadedRoutes?(0,q.of)({routes:m._loadedRoutes,injector:m._loadedInjector}):function sr(E,_,m,T){const U=_.canLoad;if(void 0===U||0===U.length)return(0,q.of)(!0);const K=U.map(te=>{const Fe=Hi(te,E);return Ut(function P(E){return E&&V(E.canLoad)}(Fe)?Fe.canLoad(_,m):E.runInContext(()=>Fe(_,m)))});return(0,q.of)(K).pipe(Bt(),ti())}(_,m,T).pipe((0,me.z)(U=>U?this.configLoader.loadChildren(_,m).pipe((0,ft.b)(K=>{m._loadedRoutes=K.routes,m._loadedInjector=K.injector})):function va(E){return ht(ks(Fo,3))}())):(0,q.of)({routes:[],injector:_})}lineralizeSegments(_,m){let T=[],U=m.root;for(;;){if(T=T.concat(U.segments),0===U.numberOfChildren)return(0,q.of)(T);if(U.numberOfChildren>1||!U.children[vt])return _.redirectTo,ht(new g.vHH(4e3,Fo));U=U.children[vt]}}applyRedirectCommands(_,m,T){return this.applyRedirectCreateUrlTree(m,this.urlSerializer.parse(m),_,T)}applyRedirectCreateUrlTree(_,m,T,U){const K=this.createSegmentGroup(_,m.root,T,U);return new fr(K,this.createQueryParams(m.queryParams,this.urlTree.queryParams),m.fragment)}createQueryParams(_,m){const T={};return on(_,(U,K)=>{if("string"==typeof U&&U.startsWith(":")){const Fe=U.substring(1);T[K]=m[Fe]}else T[K]=U}),T}createSegmentGroup(_,m,T,U){const K=this.createSegments(_,m.segments,T,U);let te={};return on(m.children,(Fe,mt)=>{te[mt]=this.createSegmentGroup(_,Fe,T,U)}),new an(K,te)}createSegments(_,m,T,U){return m.map(K=>K.path.startsWith(":")?this.findPosParam(_,K,U):this.findOrReturn(K,T))}findPosParam(_,m,T){const U=T[m.path.substring(1)];if(!U)throw new g.vHH(4001,Fo);return U}findOrReturn(_,m){let T=0;for(const U of m){if(U.path===_.path)return m.splice(T),U;T++}return _}}class ri{}class bo{constructor(_,m,T,U,K,te,Fe){this.injector=_,this.rootComponentType=m,this.config=T,this.urlTree=U,this.url=K,this.paramsInheritanceStrategy=te,this.urlSerializer=Fe}recognize(){const _=Cs(this.urlTree.root,[],[],this.config.filter(m=>void 0===m.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,_,vt).pipe((0,se.U)(m=>{if(null===m)return null;const T=new Oo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},vt,this.rootComponentType,null,this.urlTree.root,-1,{}),U=new Or(T,m),K=new uo(this.url,U);return this.inheritParamsAndData(K._root),K}))}inheritParamsAndData(_){const m=_.value,T=vo(m,this.paramsInheritanceStrategy);m.params=Object.freeze(T.params),m.data=Object.freeze(T.data),_.children.forEach(U=>this.inheritParamsAndData(U))}processSegmentGroup(_,m,T,U){return 0===T.segments.length&&T.hasChildren()?this.processChildren(_,m,T):this.processSegment(_,m,T,T.segments,U)}processChildren(_,m,T){return(0,W.D)(Object.keys(T.children)).pipe(pt(U=>{const K=T.children[U],te=Kr(m,U);return this.processSegmentGroup(_,te,K,U)}),(0,Rn.R)((U,K)=>U&&K?(U.push(...K),U):null),function tt(E,_=!1){return(0,rt.e)((m,T)=>{let U=0;m.subscribe((0,Le.x)(T,K=>{const te=E(K,U++);(te||_)&&T.next(K),!te&&T.complete()}))})}(U=>null!==U),(0,Je.d)(null),yt(),(0,se.U)(U=>{if(null===U)return null;const K=gs(U);return function Iu(E){E.sort((_,m)=>_.value.outlet===vt?-1:m.value.outlet===vt?1:_.value.outlet.localeCompare(m.value.outlet))}(K),K}))}processSegment(_,m,T,U,K){return(0,W.D)(m).pipe(pt(te=>this.processSegmentAgainstRoute(te._injector??_,te,T,U,K)),(0,Be.P)(te=>!!te),Dt(te=>{if(It(te))return Na(T,U,K)?(0,q.of)([]):(0,q.of)(null);throw te}))}processSegmentAgainstRoute(_,m,T,U,K){if(m.redirectTo||!Io(m,T,U,K))return(0,q.of)(null);let te;if("**"===m.path){const Fe=U.length>0?Xr(U).parameters:{},mt=S(T)+U.length,Zt=new Oo(U,Fe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R(m),ei(m),m.component??m._loadedComponent??null,m,Ir(T),mt,Y(m));te=(0,q.of)({snapshot:Zt,consumedSegments:[],remainingSegments:[]})}else te=ni(T,m,U,_).pipe((0,se.U)(({matched:Fe,consumedSegments:mt,remainingSegments:Zt,parameters:qt})=>{if(!Fe)return null;const Rr=S(T)+mt.length;return{snapshot:new Oo(mt,qt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R(m),ei(m),m.component??m._loadedComponent??null,m,Ir(T),Rr,Y(m)),consumedSegments:mt,remainingSegments:Zt}}));return te.pipe((0,he.w)(Fe=>{if(null===Fe)return(0,q.of)(null);const{snapshot:mt,consumedSegments:Zt,remainingSegments:qt}=Fe;_=m._injector??_;const Rr=m._loadedInjector??_,ts=function ta(E){return E.children?E.children:E.loadChildren?E._loadedRoutes:[]}(m),{segmentGroup:bi,slicedSegments:bs}=Cs(T,Zt,qt,ts.filter(Ti=>void 0===Ti.redirectTo));if(0===bs.length&&bi.hasChildren())return this.processChildren(Rr,ts,bi).pipe((0,se.U)(Ti=>null===Ti?null:[new Or(mt,Ti)]));if(0===ts.length&&0===bs.length)return(0,q.of)([new Or(mt,[])]);const so=ei(m)===K;return this.processSegment(Rr,ts,bi,bs,so?vt:K).pipe((0,se.U)(Ti=>null===Ti?null:[new Or(mt,Ti)]))}))}}function Il(E){const _=E.value.routeConfig;return _&&""===_.path&&void 0===_.redirectTo}function gs(E){const _=[],m=new Set;for(const T of E){if(!Il(T)){_.push(T);continue}const U=_.find(K=>T.value.routeConfig===K.value.routeConfig);void 0!==U?(U.children.push(...T.children),m.add(U)):_.push(T)}for(const T of m){const U=gs(T.children);_.push(new Or(T.value,U))}return _.filter(T=>!m.has(T))}function Ir(E){let _=E;for(;_._sourceSegment;)_=_._sourceSegment;return _}function S(E){let _=E,m=_._segmentIndexShift??0;for(;_._sourceSegment;)_=_._sourceSegment,m+=_._segmentIndexShift??0;return m-1}function R(E){return E.data||{}}function Y(E){return E.resolve||{}}function Sn(E){return"string"==typeof E.title||null===E.title}function Un(E){return(0,he.w)(_=>{const m=E(_);return m?(0,W.D)(m).pipe((0,se.U)(()=>_)):(0,q.of)(_)})}const er=new g.OlP("ROUTES");let ii=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,g.f3M)(g.Sil)}loadComponent(m){if(this.componentLoaders.get(m))return this.componentLoaders.get(m);if(m._loadedComponent)return(0,q.of)(m._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(m);const T=Ut(m.loadComponent()).pipe((0,se.U)(Fi),(0,ft.b)(K=>{this.onLoadEndListener&&this.onLoadEndListener(m),m._loadedComponent=K}),xt(()=>{this.componentLoaders.delete(m)})),U=new st(T,()=>new z.x).pipe(ke());return this.componentLoaders.set(m,U),U}loadChildren(m,T){if(this.childrenLoaders.get(T))return this.childrenLoaders.get(T);if(T._loadedRoutes)return(0,q.of)({routes:T._loadedRoutes,injector:T._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(T);const K=this.loadModuleFactoryOrRoutes(T.loadChildren).pipe((0,se.U)(Fe=>{this.onLoadEndListener&&this.onLoadEndListener(T);let mt,Zt,qt=!1;Array.isArray(Fe)?Zt=Fe:(mt=Fe.create(m).injector,Zt=br(mt.get(er,[],g.XFs.Self|g.XFs.Optional)));return{routes:Zt.map(ps),injector:mt}}),xt(()=>{this.childrenLoaders.delete(T)})),te=new st(K,()=>new z.x).pipe(ke());return this.childrenLoaders.set(T,te),te}loadModuleFactoryOrRoutes(m){return Ut(m()).pipe((0,se.U)(Fi),(0,me.z)(T=>T instanceof g.YKP||Array.isArray(T)?(0,q.of)(T):(0,W.D)(this.compiler.compileModuleAsync(T))))}}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Fi(E){return function ro(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let Li=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new z.x,this.configLoader=(0,g.f3M)(ii),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(qn),this.rootContexts=(0,g.f3M)(wi),this.navigationId=0,this.afterPreactivation=()=>(0,q.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=U=>this.events.next(new As(U)),this.configLoader.onLoadStartListener=U=>this.events.next(new Ai(U))}complete(){this.transitions?.complete()}handleNavigationRequest(m){const T=++this.navigationId;this.transitions?.next({...this.transitions.value,...m,id:T})}setupNavigations(m){return this.transitions=new ye.X({id:0,targetPageId:0,currentUrlTree:m.currentUrlTree,currentRawUrl:m.currentUrlTree,extractedUrl:m.urlHandlingStrategy.extract(m.currentUrlTree),urlAfterRedirects:m.urlHandlingStrategy.extract(m.currentUrlTree),rawUrl:m.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Pi,restoredState:null,currentSnapshot:m.routerState.snapshot,targetSnapshot:null,currentRouterState:m.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ae.h)(T=>0!==T.id),(0,se.U)(T=>({...T,extractedUrl:m.urlHandlingStrategy.extract(T.rawUrl)})),(0,he.w)(T=>{let U=!1,K=!1;return(0,q.of)(T).pipe((0,ft.b)(te=>{this.currentNavigation={id:te.id,initialUrl:te.rawUrl,extractedUrl:te.extractedUrl,trigger:te.source,extras:te.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,he.w)(te=>{const Fe=m.browserUrlTree.toString(),mt=!m.navigated||te.extractedUrl.toString()!==Fe||Fe!==m.currentUrlTree.toString();if(!mt&&"reload"!==(te.extras.onSameUrlNavigation??m.onSameUrlNavigation)){const qt="";return this.events.next(new _i(te.id,m.serializeUrl(T.rawUrl),qt,0)),m.rawUrlTree=te.rawUrl,te.resolve(null),Te.E}if(m.urlHandlingStrategy.shouldProcessUrl(te.rawUrl))return os(te.source)&&(m.browserUrlTree=te.extractedUrl),(0,q.of)(te).pipe((0,he.w)(qt=>{const Rr=this.transitions?.getValue();return this.events.next(new Oi(qt.id,this.urlSerializer.serialize(qt.extractedUrl),qt.source,qt.restoredState)),Rr!==this.transitions?.getValue()?Te.E:Promise.resolve(qt)}),function Xi(E,_,m,T){return(0,he.w)(U=>function ea(E,_,m,T,U){return new Ea(E,_,m,T,U).apply()}(E,_,m,U.extractedUrl,T).pipe((0,se.U)(K=>({...U,urlAfterRedirects:K}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,m.config),(0,ft.b)(qt=>{this.currentNavigation={...this.currentNavigation,finalUrl:qt.urlAfterRedirects},T.urlAfterRedirects=qt.urlAfterRedirects}),function de(E,_,m,T,U){return(0,me.z)(K=>function xs(E,_,m,T,U,K,te="emptyOnly"){return new bo(E,_,m,T,U,te,K).recognize().pipe((0,he.w)(Fe=>null===Fe?function Vo(E){return new F.y(_=>_.error(E))}(new ri):(0,q.of)(Fe)))}(E,_,m,K.urlAfterRedirects,T.serialize(K.urlAfterRedirects),T,U).pipe((0,se.U)(te=>({...K,targetSnapshot:te}))))}(this.environmentInjector,this.rootComponentType,m.config,this.urlSerializer,m.paramsInheritanceStrategy),(0,ft.b)(qt=>{if(T.targetSnapshot=qt.targetSnapshot,"eager"===m.urlUpdateStrategy){if(!qt.extras.skipLocationChange){const ts=m.urlHandlingStrategy.merge(qt.urlAfterRedirects,qt.rawUrl);m.setBrowserUrl(ts,qt)}m.browserUrlTree=qt.urlAfterRedirects}const Rr=new $i(qt.id,this.urlSerializer.serialize(qt.extractedUrl),this.urlSerializer.serialize(qt.urlAfterRedirects),qt.targetSnapshot);this.events.next(Rr)}));if(mt&&m.urlHandlingStrategy.shouldProcessUrl(m.rawUrlTree)){const{id:qt,extractedUrl:Rr,source:ts,restoredState:bi,extras:bs}=te,so=new Oi(qt,this.urlSerializer.serialize(Rr),ts,bi);this.events.next(so);const Ti=Ys(Rr,this.rootComponentType).snapshot;return T={...te,targetSnapshot:Ti,urlAfterRedirects:Rr,extras:{...bs,skipLocationChange:!1,replaceUrl:!1}},(0,q.of)(T)}{const qt="";return this.events.next(new _i(te.id,m.serializeUrl(T.extractedUrl),qt,1)),m.rawUrlTree=te.rawUrl,te.resolve(null),Te.E}}),(0,ft.b)(te=>{const Fe=new ki(te.id,this.urlSerializer.serialize(te.extractedUrl),this.urlSerializer.serialize(te.urlAfterRedirects),te.targetSnapshot);this.events.next(Fe)}),(0,se.U)(te=>T={...te,guards:ws(te.targetSnapshot,te.currentSnapshot,this.rootContexts)}),function En(E,_){return(0,me.z)(m=>{const{targetSnapshot:T,currentSnapshot:U,guards:{canActivateChecks:K,canDeactivateChecks:te}}=m;return 0===te.length&&0===K.length?(0,q.of)({...m,guardsResult:!0}):function Kn(E,_,m,T){return(0,W.D)(E).pipe((0,me.z)(U=>function Gr(E,_,m,T,U){const K=_&&_.routeConfig?_.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,q.of)(!0);const te=K.map(Fe=>{const mt=Eo(_)??U,Zt=Hi(Fe,mt);return Ut(function Q(E){return E&&V(E.canDeactivate)}(Zt)?Zt.canDeactivate(E,_,m,T):mt.runInContext(()=>Zt(E,_,m,T))).pipe((0,Be.P)())});return(0,q.of)(te).pipe(Bt())}(U.component,U.route,m,_,T)),(0,Be.P)(U=>!0!==U,!0))}(te,T,U,E).pipe((0,me.z)(Fe=>Fe&&function N(E){return"boolean"==typeof E}(Fe)?function dr(E,_,m,T){return(0,W.D)(_).pipe(pt(U=>(0,be.z)(function Lr(E,_){return null!==E&&_&&_(new ir(E)),(0,q.of)(!0)}(U.route.parent,T),function Hr(E,_){return null!==E&&_&&_(new ui(E)),(0,q.of)(!0)}(U.route,T),function Yr(E,_,m){const T=_[_.length-1],K=_.slice(0,_.length-1).reverse().map(te=>function to(E){const _=E.routeConfig?E.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:E,guards:_}:null}(te)).filter(te=>null!==te).map(te=>le(()=>{const Fe=te.guards.map(mt=>{const Zt=Eo(te.node)??m,qt=Hi(mt,Zt);return Ut(function A(E){return E&&V(E.canActivateChild)}(qt)?qt.canActivateChild(T,E):Zt.runInContext(()=>qt(T,E))).pipe((0,Be.P)())});return(0,q.of)(Fe).pipe(Bt())}));return(0,q.of)(K).pipe(Bt())}(E,U.path,m),function di(E,_,m){const T=_.routeConfig?_.routeConfig.canActivate:null;if(!T||0===T.length)return(0,q.of)(!0);const U=T.map(K=>le(()=>{const te=Eo(_)??m,Fe=Hi(K,te);return Ut(function I(E){return E&&V(E.canActivate)}(Fe)?Fe.canActivate(_,E):te.runInContext(()=>Fe(_,E))).pipe((0,Be.P)())}));return(0,q.of)(U).pipe(Bt())}(E,U.route,m))),(0,Be.P)(U=>!0!==U,!0))}(T,K,E,_):(0,q.of)(Fe)),(0,se.U)(Fe=>({...m,guardsResult:Fe})))})}(this.environmentInjector,te=>this.events.next(te)),(0,ft.b)(te=>{if(T.guardsResult=te.guardsResult,On(te.guardsResult))throw ho(0,te.guardsResult);const Fe=new Wr(te.id,this.urlSerializer.serialize(te.extractedUrl),this.urlSerializer.serialize(te.urlAfterRedirects),te.targetSnapshot,!!te.guardsResult);this.events.next(Fe)}),(0,Ae.h)(te=>!!te.guardsResult||(m.restoreHistory(te),this.cancelNavigationTransition(te,"",3),!1)),Un(te=>{if(te.guards.canActivateChecks.length)return(0,q.of)(te).pipe((0,ft.b)(Fe=>{const mt=new _s(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),this.urlSerializer.serialize(Fe.urlAfterRedirects),Fe.targetSnapshot);this.events.next(mt)}),(0,he.w)(Fe=>{let mt=!1;return(0,q.of)(Fe).pipe(function it(E,_){return(0,me.z)(m=>{const{targetSnapshot:T,guards:{canActivateChecks:U}}=m;if(!U.length)return(0,q.of)(m);let K=0;return(0,W.D)(U).pipe(pt(te=>function _t(E,_,m,T){const U=E.routeConfig,K=E._resolve;return void 0!==U?.title&&!Sn(U)&&(K[tn]=U.title),function dn(E,_,m,T){const U=function yr(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===U.length)return(0,q.of)({});const K={};return(0,W.D)(U).pipe((0,me.z)(te=>function Zn(E,_,m,T){const U=Eo(_)??T,K=Hi(E,U);return Ut(K.resolve?K.resolve(_,m):U.runInContext(()=>K(_,m)))}(E[te],_,m,T).pipe((0,Be.P)(),(0,ft.b)(Fe=>{K[te]=Fe}))),Qe(1),(0,Xe.h)(K),Dt(te=>It(te)?Te.E:ht(te)))}(K,E,_,T).pipe((0,se.U)(te=>(E._resolvedData=te,E.data=vo(E,m).resolve,U&&Sn(U)&&(E.data[tn]=U.title),null)))}(te.route,T,E,_)),(0,ft.b)(()=>K++),Qe(1),(0,me.z)(te=>K===U.length?(0,q.of)(m):Te.E))})}(m.paramsInheritanceStrategy,this.environmentInjector),(0,ft.b)({next:()=>mt=!0,complete:()=>{mt||(m.restoreHistory(Fe),this.cancelNavigationTransition(Fe,"",2))}}))}),(0,ft.b)(Fe=>{const mt=new qr(Fe.id,this.urlSerializer.serialize(Fe.extractedUrl),this.urlSerializer.serialize(Fe.urlAfterRedirects),Fe.targetSnapshot);this.events.next(mt)}))}),Un(te=>{const Fe=mt=>{const Zt=[];mt.routeConfig?.loadComponent&&!mt.routeConfig._loadedComponent&&Zt.push(this.configLoader.loadComponent(mt.routeConfig).pipe((0,ft.b)(qt=>{mt.component=qt}),(0,se.U)(()=>{})));for(const qt of mt.children)Zt.push(...Fe(qt));return Zt};return(0,pe.a)(Fe(te.targetSnapshot.root)).pipe((0,Je.d)(),(0,Ve.q)(1))}),Un(()=>this.afterPreactivation()),(0,se.U)(te=>{const Fe=function Es(E,_,m){const T=No(E,_._root,m?m._root:void 0);return new Er(T,_)}(m.routeReuseStrategy,te.targetSnapshot,te.currentRouterState);return T={...te,targetRouterState:Fe}}),(0,ft.b)(te=>{m.currentUrlTree=te.urlAfterRedirects,m.rawUrlTree=m.urlHandlingStrategy.merge(te.urlAfterRedirects,te.rawUrl),m.routerState=te.targetRouterState,"deferred"===m.urlUpdateStrategy&&(te.extras.skipLocationChange||m.setBrowserUrl(m.rawUrlTree,te),m.browserUrlTree=te.urlAfterRedirects)}),((E,_,m)=>(0,se.U)(T=>(new xi(_,T.targetRouterState,T.currentRouterState,m).activate(E),T)))(this.rootContexts,m.routeReuseStrategy,te=>this.events.next(te)),(0,Ve.q)(1),(0,ft.b)({next:te=>{U=!0,this.lastSuccessfulNavigation=this.currentNavigation,m.navigated=!0,this.events.next(new Ni(te.id,this.urlSerializer.serialize(te.extractedUrl),this.urlSerializer.serialize(m.currentUrlTree))),m.titleStrategy?.updateTitle(te.targetRouterState.snapshot),te.resolve(!0)},complete:()=>{U=!0}}),xt(()=>{U||K||this.cancelNavigationTransition(T,"",1),this.currentNavigation?.id===T.id&&(this.currentNavigation=null)}),Dt(te=>{if(K=!0,hs(te)){Qs(te)||(m.navigated=!0,m.restoreHistory(T,!0));const Fe=new ln(T.id,this.urlSerializer.serialize(T.extractedUrl),te.message,te.cancellationCode);if(this.events.next(Fe),Qs(te)){const mt=m.urlHandlingStrategy.merge(te.url,m.rawUrlTree),Zt={skipLocationChange:T.extras.skipLocationChange,replaceUrl:"eager"===m.urlUpdateStrategy||os(T.source)};m.scheduleNavigation(mt,Pi,null,Zt,{resolve:T.resolve,reject:T.reject,promise:T.promise})}else T.resolve(!1)}else{m.restoreHistory(T,!0);const Fe=new ys(T.id,this.urlSerializer.serialize(T.extractedUrl),te,T.targetSnapshot??void 0);this.events.next(Fe);try{T.resolve(m.errorHandler(te))}catch(mt){T.reject(mt)}}return Te.E}))}))}cancelNavigationTransition(m,T,U){const K=new ln(m.id,this.urlSerializer.serialize(m.extractedUrl),T,U);this.events.next(K),m.resolve(!1)}}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function os(E){return E!==Pi}let To=(()=>{class E{buildTitle(m){let T,U=m.root;for(;void 0!==U;)T=this.getResolvedTitleForRoute(U)??T,U=U.children.find(K=>K.outlet===vt);return T}getResolvedTitleForRoute(m){return m.data[tn]}}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:function(){return(0,g.f3M)(Bs)},providedIn:"root"}),E})(),Bs=(()=>{class E extends To{constructor(m){super(),this.title=m}updateTitle(m){const T=this.buildTitle(m);void 0!==T&&this.title.setTitle(T)}}return E.\u0275fac=function(m){return new(m||E)(g.LFG(Pt.Dx))},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})(),eu=(()=>{class E{}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:function(){return(0,g.f3M)(Cu)},providedIn:"root"}),E})();class Du{shouldDetach(_){return!1}store(_,m){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,m){return _.routeConfig===m.routeConfig}}let Cu=(()=>{class E extends Du{}return E.\u0275fac=function(){let _;return function(T){return(_||(_=g.n5z(E)))(T||E)}}(),E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const Tu=new g.OlP("",{providedIn:"root",factory:()=>({})});let So=(()=>{class E{}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:function(){return(0,g.f3M)(Bo)},providedIn:"root"}),E})(),Bo=(()=>{class E{shouldProcessUrl(m){return!0}extract(m){return m}merge(m,T){return m}}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function ua(E){throw E}function po(E,_,m){return _.parse("/")}const Ia={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Dl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ct=(()=>{class E{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this.options=(0,g.f3M)(Tu,{optional:!0})||{},this.errorHandler=this.options.errorHandler||ua,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||po,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.f3M)(So),this.routeReuseStrategy=(0,g.f3M)(eu),this.urlCreationStrategy=(0,g.f3M)(vn),this.titleStrategy=(0,g.f3M)(To),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=br((0,g.f3M)(er,{optional:!0})??[]),this.navigationTransitions=(0,g.f3M)(Li),this.urlSerializer=(0,g.f3M)(qn),this.location=(0,g.f3M)(O.Ye),this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new fr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ys(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(m=>{this.lastSuccessfulId=m.id,this.currentPageId=this.browserPageId??0},m=>{this.console.warn(`Unhandled Navigation Error: ${m}`)})}resetRootComponentType(m){this.routerState.root.component=m,this.navigationTransitions.rootComponentType=m}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const m=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Pi,m)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(m=>{const T="popstate"===m.type?"popstate":"hashchange";"popstate"===T&&setTimeout(()=>{this.navigateToSyncWithBrowser(m.url,T,m.state)},0)}))}navigateToSyncWithBrowser(m,T,U){const K={replaceUrl:!0},te=U?.navigationId?U:null;if(U){const mt={...U};delete mt.navigationId,delete mt.\u0275routerPageId,0!==Object.keys(mt).length&&(K.state=mt)}const Fe=this.parseUrl(m);this.scheduleNavigation(Fe,T,te,K)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(m){this.config=m.map(ps),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(m,T={}){const{relativeTo:U,queryParams:K,fragment:te,queryParamsHandling:Fe,preserveFragment:mt}=T,Zt=mt?this.currentUrlTree.fragment:te;let qt=null;switch(Fe){case"merge":qt={...this.currentUrlTree.queryParams,...K};break;case"preserve":qt=this.currentUrlTree.queryParams;break;default:qt=K||null}return null!==qt&&(qt=this.removeEmptyProps(qt)),this.urlCreationStrategy.createUrlTree(U,this.routerState,this.currentUrlTree,m,qt,Zt??null)}navigateByUrl(m,T={skipLocationChange:!1}){const U=On(m)?m:this.parseUrl(m),K=this.urlHandlingStrategy.merge(U,this.rawUrlTree);return this.scheduleNavigation(K,Pi,null,T)}navigate(m,T={skipLocationChange:!1}){return function Ui(E){for(let _=0;_<E.length;_++){const m=E[_];if(null==m)throw new g.vHH(4008,false)}}(m),this.navigateByUrl(this.createUrlTree(m,T),T)}serializeUrl(m){return this.urlSerializer.serialize(m)}parseUrl(m){let T;try{T=this.urlSerializer.parse(m)}catch(U){T=this.malformedUriErrorHandler(U,this.urlSerializer,m)}return T}isActive(m,T){let U;if(U=!0===T?{...Ia}:!1===T?{...Dl}:T,On(m))return ur(this.currentUrlTree,m,U);const K=this.parseUrl(m);return ur(this.currentUrlTree,K,U)}removeEmptyProps(m){return Object.keys(m).reduce((T,U)=>{const K=m[U];return null!=K&&(T[U]=K),T},{})}scheduleNavigation(m,T,U,K,te){if(this.disposed)return Promise.resolve(!1);let Fe,mt,Zt,qt;return te?(Fe=te.resolve,mt=te.reject,Zt=te.promise):Zt=new Promise((Rr,ts)=>{Fe=Rr,mt=ts}),qt="computed"===this.canceledNavigationResolution?U&&U.\u0275routerPageId?U.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:qt,source:T,restoredState:U,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:m,extras:K,resolve:Fe,reject:mt,promise:Zt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Zt.catch(Rr=>Promise.reject(Rr))}setBrowserUrl(m,T){const U=this.urlSerializer.serialize(m);if(this.location.isCurrentPathEqualTo(U)||T.extras.replaceUrl){const te={...T.extras.state,...this.generateNgRouterState(T.id,this.browserPageId)};this.location.replaceState(U,"",te)}else{const K={...T.extras.state,...this.generateNgRouterState(T.id,T.targetPageId)};this.location.go(U,"",K)}}restoreHistory(m,T=!1){if("computed"===this.canceledNavigationResolution){const K=this.currentPageId-(this.browserPageId??this.currentPageId);0!==K?this.location.historyGo(K):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===K&&(this.resetState(m),this.browserUrlTree=m.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(m),this.resetUrlToCurrentUrlTree())}resetState(m){this.routerState=m.currentRouterState,this.currentUrlTree=m.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,m.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(m,T){return"computed"===this.canceledNavigationResolution?{navigationId:m,\u0275routerPageId:T}:{navigationId:m}}}return E.\u0275fac=function(m){return new(m||E)},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})(),as=(()=>{class E{constructor(m,T,U,K,te,Fe){this.router=m,this.route=T,this.tabIndexAttribute=U,this.renderer=K,this.el=te,this.locationStrategy=Fe,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new z.x;const mt=te.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===mt||"area"===mt,this.isAnchorElement?this.subscription=m.events.subscribe(Zt=>{Zt instanceof Ni&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(m){this._preserveFragment=(0,g.D6c)(m)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(m){this._skipLocationChange=(0,g.D6c)(m)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(m){this._replaceUrl=(0,g.D6c)(m)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(m){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",m)}ngOnChanges(m){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(m){null!=m?(this.commands=Array.isArray(m)?m:[m],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(m,T,U,K,te){return!!(null===this.urlTree||this.isAnchorElement&&(0!==m||T||U||K||te||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const m=null===this.href?null:(0,g.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",m)}applyAttributeValue(m,T){const U=this.renderer,K=this.el.nativeElement;null!==T?U.setAttribute(K,m,T):U.removeAttribute(K,m)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return E.\u0275fac=function(m){return new(m||E)(g.Y36(ct),g.Y36(vs),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(O.S$))},E.\u0275dir=g.lG2({type:E,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(m,T){1&m&&g.NdJ("click",function(K){return T.onClick(K.button,K.ctrlKey,K.shiftKey,K.altKey,K.metaKey)}),2&m&&g.uIk("target",T.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),E})(),tu=(()=>{class E{get isActive(){return this._isActive}constructor(m,T,U,K,te){this.router=m,this.element=T,this.renderer=U,this.cdr=K,this.link=te,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new g.vpe,this.routerEventsSubscription=m.events.subscribe(Fe=>{Fe instanceof Ni&&this.update()})}ngAfterContentInit(){(0,q.of)(this.links.changes,(0,q.of)(null)).pipe((0,Rt.J)()).subscribe(m=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const m=[...this.links.toArray(),this.link].filter(T=>!!T).map(T=>T.onChanges);this.linkInputChangesSubscription=(0,W.D)(m).pipe((0,Rt.J)()).subscribe(T=>{this._isActive!==this.isLinkActive(this.router)(T)&&this.update()})}set routerLinkActive(m){const T=Array.isArray(m)?m:m.split(" ");this.classes=T.filter(U=>!!U)}ngOnChanges(m){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const m=this.hasActiveLinks();this._isActive!==m&&(this._isActive=m,this.cdr.markForCheck(),this.classes.forEach(T=>{m?this.renderer.addClass(this.element.nativeElement,T):this.renderer.removeClass(this.element.nativeElement,T)}),m&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(m))})}isLinkActive(m){const T=function en(E){return!!E.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return U=>!!U.urlTree&&m.isActive(U.urlTree,T)}hasActiveLinks(){const m=this.isLinkActive(this.router);return this.link&&m(this.link)||this.links.some(m)}}return E.\u0275fac=function(m){return new(m||E)(g.Y36(ct),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(as,8))},E.\u0275dir=g.lG2({type:E,selectors:[["","routerLinkActive",""]],contentQueries:function(m,T,U){if(1&m&&g.Suo(U,as,5),2&m){let K;g.iGM(K=g.CRH())&&(T.links=K)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[g.TTD]}),E})();class mn{}let Ze=(()=>{class E{constructor(m,T,U,K,te){this.router=m,this.injector=U,this.preloadingStrategy=K,this.loader=te}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ae.h)(m=>m instanceof Ni),pt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(m,T){const U=[];for(const K of T){K.providers&&!K._injector&&(K._injector=(0,g.MMx)(K.providers,m,`Route: ${K.path}`));const te=K._injector??m,Fe=K._loadedInjector??te;(K.loadChildren&&!K._loadedRoutes&&void 0===K.canLoad||K.loadComponent&&!K._loadedComponent)&&U.push(this.preloadConfig(te,K)),(K.children||K._loadedRoutes)&&U.push(this.processRoutes(Fe,K.children??K._loadedRoutes))}return(0,W.D)(U).pipe((0,Rt.J)())}preloadConfig(m,T){return this.preloadingStrategy.preload(T,()=>{let U;U=T.loadChildren&&void 0===T.canLoad?this.loader.loadChildren(m,T):(0,q.of)(null);const K=U.pipe((0,me.z)(te=>null===te?(0,q.of)(void 0):(T._loadedRoutes=te.routes,T._loadedInjector=te.injector,this.processRoutes(te.injector??m,te.routes))));if(T.loadComponent&&!T._loadedComponent){const te=this.loader.loadComponent(T);return(0,W.D)([K,te]).pipe((0,Rt.J)())}return K})}}return E.\u0275fac=function(m){return new(m||E)(g.LFG(ct),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(mn),g.LFG(ii))},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const St=new g.OlP("");let Ii=(()=>{class E{constructor(m,T,U,K,te={}){this.urlSerializer=m,this.transitions=T,this.viewportScroller=U,this.zone=K,this.options=te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},te.scrollPositionRestoration=te.scrollPositionRestoration||"disabled",te.anchorScrolling=te.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(m=>{m instanceof Oi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=m.navigationTrigger,this.restoredId=m.restoredState?m.restoredState.navigationId:0):m instanceof Ni&&(this.lastId=m.id,this.scheduleScrollEvent(m,this.urlSerializer.parse(m.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(m=>{m instanceof xe&&(m.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(m.position):m.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(m.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(m,T){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xe(m,"popstate"===this.lastSource?this.store[this.restoredId]:null,T))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return E.\u0275fac=function(m){g.$Z()},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac}),E})();var es=(()=>((es=es||{})[es.COMPLETE=0]="COMPLETE",es[es.FAILED=1]="FAILED",es[es.REDIRECTING=2]="REDIRECTING",es))();const ka=!1;function $o(E,_){return{\u0275kind:E,\u0275providers:_}}const Ca=new g.OlP("",{providedIn:"root",factory:()=>!1});function la(){const E=(0,g.f3M)(g.zs3);return _=>{const m=E.get(g.z2F);if(_!==m.components[0])return;const T=E.get(ct),U=E.get(jn);1===E.get(Rs)&&T.initialNavigation(),E.get(Mr,null,g.XFs.Optional)?.setUpPreloading(),E.get(St,null,g.XFs.Optional)?.init(),T.resetRootComponentType(m.componentTypes[0]),U.closed||(U.next(),U.complete(),U.unsubscribe())}}const jn=new g.OlP(ka?"bootstrap done indicator":"",{factory:()=>new z.x}),Rs=new g.OlP(ka?"initial navigation":"",{providedIn:"root",factory:()=>1});function In(){let E=[];return E=ka?[{provide:g.Xts,multi:!0,useFactory:()=>{const _=(0,g.f3M)(ct);return()=>_.events.subscribe(m=>{console.group?.(`Router Event: ${m.constructor.name}`),console.log(function Ie(E){if(!("type"in E))return`Unknown Router Event: ${E.constructor.name}`;switch(E.type){case 14:return`ActivationEnd(path: '${E.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${E.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${E.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${E.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${E.id}, url: '${E.url}', urlAfterRedirects: '${E.urlAfterRedirects}', state: ${E.state}, shouldActivate: ${E.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${E.id}, url: '${E.url}', urlAfterRedirects: '${E.urlAfterRedirects}', state: ${E.state})`;case 2:return`NavigationCancel(id: ${E.id}, url: '${E.url}')`;case 16:return`NavigationSkipped(id: ${E.id}, url: '${E.url}')`;case 1:return`NavigationEnd(id: ${E.id}, url: '${E.url}', urlAfterRedirects: '${E.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${E.id}, url: '${E.url}', error: ${E.error})`;case 0:return`NavigationStart(id: ${E.id}, url: '${E.url}')`;case 6:return`ResolveEnd(id: ${E.id}, url: '${E.url}', urlAfterRedirects: '${E.urlAfterRedirects}', state: ${E.state})`;case 5:return`ResolveStart(id: ${E.id}, url: '${E.url}', urlAfterRedirects: '${E.urlAfterRedirects}', state: ${E.state})`;case 10:return`RouteConfigLoadEnd(path: ${E.route.path})`;case 9:return`RouteConfigLoadStart(path: ${E.route.path})`;case 4:return`RoutesRecognized(id: ${E.id}, url: '${E.url}', urlAfterRedirects: '${E.urlAfterRedirects}', state: ${E.state})`;case 15:return`Scroll(anchor: '${E.anchor}', position: '${E.position?`${E.position[0]}, ${E.position[1]}`:null}')`}}(m)),console.log(m),console.groupEnd?.()})}}]:[],$o(1,E)}const Mr=new g.OlP(ka?"router preloader":"");function xr(E){return $o(0,[{provide:Mr,useExisting:Ze},{provide:mn,useExisting:E}])}const ba=!1,Ta=new g.OlP(ba?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Sa=[O.Ye,{provide:qn,useClass:An},ct,wi,{provide:vs,useFactory:function Da(E){return E.routerState.root},deps:[ct]},ii,ba?{provide:Ca,useValue:!0}:[]];function Gu(){return new g.PXZ("Router",ct)}let Cl=(()=>{class E{constructor(m){}static forRoot(m,T){return{ngModule:E,providers:[Sa,ba&&T?.enableTracing?In().\u0275providers:[],{provide:er,multi:!0,useValue:m},{provide:Ta,useFactory:Ps,deps:[[ct,new g.FiY,new g.tp0]]},{provide:Tu,useValue:T||{}},T?.useHash?{provide:O.S$,useClass:O.Do}:{provide:O.S$,useClass:O.b0},{provide:St,useFactory:()=>{const E=(0,g.f3M)(O.EM),_=(0,g.f3M)(g.R0b),m=(0,g.f3M)(Tu),T=(0,g.f3M)(Li),U=(0,g.f3M)(qn);return m.scrollOffset&&E.setOffset(m.scrollOffset),new Ii(U,T,E,_,m)}},T?.preloadingStrategy?xr(T.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:Gu},T?.initialNavigation?$s(T):[],[{provide:io,useFactory:la},{provide:g.tb,multi:!0,useExisting:io}]]}}static forChild(m){return{ngModule:E,providers:[{provide:er,multi:!0,useValue:m}]}}}return E.\u0275fac=function(m){return new(m||E)(g.LFG(Ta,8))},E.\u0275mod=g.oAB({type:E}),E.\u0275inj=g.cJS({imports:[Ls]}),E})();function Ps(E){if(ba&&E)throw new g.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function $s(E){return["disabled"===E.initialNavigation?$o(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const _=(0,g.f3M)(ct);return()=>{_.setUpLocationChangeListener()}}},{provide:Rs,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?$o(2,[{provide:Rs,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:_=>{const m=_.get(O.V_,Promise.resolve());return()=>m.then(()=>new Promise(T=>{const U=_.get(ct),K=_.get(jn);(function na(E,_){E.events.pipe((0,Ae.h)(m=>m instanceof Ni||m instanceof ln||m instanceof ys||m instanceof _i),(0,se.U)(m=>m instanceof Ni||m instanceof _i?es.COMPLETE:m instanceof ln&&(0===m.code||1===m.code)?es.REDIRECTING:es.FAILED),(0,Ae.h)(m=>m!==es.REDIRECTING),(0,Ve.q)(1)).subscribe(()=>{_()})})(U,()=>{T(!0)}),_.get(Li).afterPreactivation=()=>(T(!0),K.closed?(0,q.of)(void 0):K),U.initialNavigation()}))}}]).\u0275providers:[]]}const io=new g.OlP(ba?"Router Initializer":"")},3942:(jt,He,L)=>{L.d(He,{Z:()=>ot});var g=L(2090),W=L(4859),q=L(6881),ye=L(1877);class ge{constructor(Le,ke){this._delegate=Le,this.firebase=ke,(0,q._addComponent)(Le,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=Le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this._delegate.automaticDataCollectionEnabled=Le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Le=>{this._delegate.checkDestroyed(),Le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,q.deleteApp)(this._delegate)))}_getService(Le,ke=q._DEFAULT_ENTRY_NAME){var st;this._delegate.checkDestroyed();const z=this._delegate.container.getProvider(Le);return!z.isInitialized()&&"EXPLICIT"===(null===(st=z.getComponent())||void 0===st?void 0:st.instantiationMode)&&z.initialize(),z.getImmediate({identifier:ke})}_removeServiceInstance(Le,ke=q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Le).clearInstance(ke)}_addComponent(Le){(0,q._addComponent)(this._delegate,Le)}_addOrOverwriteComponent(Le){(0,q._addOrOverwriteComponent)(this._delegate,Le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function Pe(){const rt=function F(rt){const Le={},ke={__esModule:!0,initializeApp:function O(Ge,Ae={}){const me=q.initializeApp(Ge,Ae);if((0,g.r3)(Le,me.name))return Le[me.name];const Be=new rt(me,ke);return Le[me.name]=Be,Be},app:z,registerVersion:q.registerVersion,setLogLevel:q.setLogLevel,onLog:q.onLog,apps:null,SDK_VERSION:q.SDK_VERSION,INTERNAL:{registerComponent:function he(Ge){const Ae=Ge.name,me=Ae.replace("-compat","");if(q._registerComponent(Ge)&&"PUBLIC"===Ge.type){const Be=(pt=z())=>{if("function"!=typeof pt[me])throw be.create("invalid-app-argument",{appName:Ae});return pt[me]()};void 0!==Ge.serviceProps&&(0,g.ZB)(Be,Ge.serviceProps),ke[me]=Be,rt.prototype[me]=function(...pt){return this._getService.bind(this,Ae).apply(this,Ge.multipleInstances?pt:[])}}return"PUBLIC"===Ge.type?ke[me]:null},removeApp:function st(Ge){delete Le[Ge]},useAsService:function Ve(Ge,Ae){return"serverAuth"===Ae?null:Ae},modularAPIs:q}};function z(Ge){if(!(0,g.r3)(Le,Ge=Ge||q._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:Ge});return Le[Ge]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function se(){return Object.keys(Le).map(Ge=>Le[Ge])}}),z.App=rt,ke}(ge);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:Pe,extendNamespace:function Le(ke){(0,g.ZB)(rt,ke)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),rt}(),ie=new ye.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ot=le;!function Te(rt){(0,q.registerVersion)("@firebase/app-compat","0.2.10",rt)}()},6881:(jt,He,L)=>{L.r(He),L.d(He,{FirebaseError:()=>ye.ZR,SDK_VERSION:()=>qn,_DEFAULT_ENTRY_NAME:()=>ur,_addComponent:()=>zt,_addOrOverwriteComponent:()=>rn,_apps:()=>zn,_clearComponents:()=>Tr,_components:()=>Nn,_getProvider:()=>fr,_registerComponent:()=>$r,_removeServiceInstance:()=>an,deleteApp:()=>Sr,getApp:()=>_r,getApps:()=>Fn,initializeApp:()=>An,onLog:()=>Me,registerVersion:()=>Mt,setLogLevel:()=>Ct});var g=L(5861),W=L(4859),q=L(1877),ye=L(2090);const ge=(Ke,ze)=>ze.some(wt=>Ke instanceof wt);let pe,be;const le=new WeakMap,ie=new WeakMap,_e=new WeakMap,ht=new WeakMap,Te=new WeakMap;let Le={get(Ke,ze,wt){if(Ke instanceof IDBTransaction){if("done"===ze)return ie.get(Ke);if("objectStoreNames"===ze)return Ke.objectStoreNames||_e.get(Ke);if("store"===ze)return wt.objectStoreNames[1]?void 0:wt.objectStore(wt.objectStoreNames[0])}return O(Ke[ze])},set:(Ke,ze,wt)=>(Ke[ze]=wt,!0),has:(Ke,ze)=>Ke instanceof IDBTransaction&&("done"===ze||"store"===ze)||ze in Ke};function z(Ke){return"function"==typeof Ke?function st(Ke){return Ke!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pe(){return be||(be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ke)?function(...ze){return Ke.apply(se(this),ze),O(le.get(this))}:function(...ze){return O(Ke.apply(se(this),ze))}:function(ze,...wt){const Kt=Ke.call(se(this),ze,...wt);return _e.set(Kt,ze.sort?ze.sort():[ze]),O(Kt)}}(Ke):(Ke instanceof IDBTransaction&&function rt(Ke){if(ie.has(Ke))return;const ze=new Promise((wt,Kt)=>{const fn=()=>{Ke.removeEventListener("complete",Tn),Ke.removeEventListener("error",un),Ke.removeEventListener("abort",un)},Tn=()=>{wt(),fn()},un=()=>{Kt(Ke.error||new DOMException("AbortError","AbortError")),fn()};Ke.addEventListener("complete",Tn),Ke.addEventListener("error",un),Ke.addEventListener("abort",un)});ie.set(Ke,ze)}(Ke),ge(Ke,function F(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ke,Le):Ke)}function O(Ke){if(Ke instanceof IDBRequest)return function ot(Ke){const ze=new Promise((wt,Kt)=>{const fn=()=>{Ke.removeEventListener("success",Tn),Ke.removeEventListener("error",un)},Tn=()=>{wt(O(Ke.result)),fn()},un=()=>{Kt(Ke.error),fn()};Ke.addEventListener("success",Tn),Ke.addEventListener("error",un)});return ze.then(wt=>{wt instanceof IDBCursor&&le.set(wt,Ke)}).catch(()=>{}),Te.set(ze,Ke),ze}(Ke);if(ht.has(Ke))return ht.get(Ke);const ze=z(Ke);return ze!==Ke&&(ht.set(Ke,ze),Te.set(ze,Ke)),ze}const se=Ke=>Te.get(Ke),Ge=["get","getKey","getAll","getAllKeys","count"],Ae=["put","add","delete","clear"],me=new Map;function Be(Ke,ze){if(!(Ke instanceof IDBDatabase)||ze in Ke||"string"!=typeof ze)return;if(me.get(ze))return me.get(ze);const wt=ze.replace(/FromIndex$/,""),Kt=ze!==wt,fn=Ae.includes(wt);if(!(wt in(Kt?IDBIndex:IDBObjectStore).prototype)||!fn&&!Ge.includes(wt))return;const Tn=function(){var un=(0,g.Z)(function*(Gn,...kn){const gr=this.transaction(Gn,fn?"readwrite":"readonly");let Zr=gr.store;return Kt&&(Zr=Zr.index(kn.shift())),(yield Promise.all([Zr[wt](...kn),fn&&gr.done]))[0]});return function(kn){return un.apply(this,arguments)}}();return me.set(ze,Tn),Tn}!function ke(Ke){Le=Ke(Le)}(Ke=>({...Ke,get:(ze,wt,Kt)=>Be(ze,wt)||Ke.get(ze,wt,Kt),has:(ze,wt)=>!!Be(ze,wt)||Ke.has(ze,wt)}));class pt{constructor(ze){this.container=ze}getPlatformInfoString(){return this.container.getProviders().map(wt=>{if(function ft(Ke){return"VERSION"===Ke.getComponent()?.type}(wt)){const Kt=wt.getImmediate();return`${Kt.library}/${Kt.version}`}return null}).filter(wt=>wt).join(" ")}}const Dt="@firebase/app",Qe=new q.Yd("@firebase/app"),ur="[DEFAULT]",mi={[Dt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},zn=new Map,Nn=new Map;function zt(Ke,ze){try{Ke.container.addComponent(ze)}catch(wt){Qe.debug(`Component ${ze.name} failed to register with FirebaseApp ${Ke.name}`,wt)}}function rn(Ke,ze){Ke.container.addOrOverwriteComponent(ze)}function $r(Ke){const ze=Ke.name;if(Nn.has(ze))return Qe.debug(`There were multiple attempts to register component ${ze}.`),!1;Nn.set(ze,Ke);for(const wt of zn.values())zt(wt,Ke);return!0}function fr(Ke,ze){const wt=Ke.container.getProvider("heartbeat").getImmediate({optional:!0});return wt&&wt.triggerHeartbeat(),Ke.container.getProvider(ze)}function an(Ke,ze,wt=ur){fr(Ke,ze).clearInstance(wt)}function Tr(){Nn.clear()}const Fr=new ye.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nr{constructor(ze,wt,Kt){this._isDeleted=!1,this._options=Object.assign({},ze),this._config=Object.assign({},wt),this._name=wt.name,this._automaticDataCollectionEnabled=wt.automaticDataCollectionEnabled,this._container=Kt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ze){this._isDeleted=ze}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}const qn="9.22.0";function An(Ke,ze={}){let wt=Ke;"object"!=typeof ze&&(ze={name:ze});const Kt=Object.assign({name:ur,automaticDataCollectionEnabled:!1},ze),fn=Kt.name;if("string"!=typeof fn||!fn)throw Fr.create("bad-app-name",{appName:String(fn)});if(wt||(wt=(0,ye.aH)()),!wt)throw Fr.create("no-options");const Tn=zn.get(fn);if(Tn){if((0,ye.vZ)(wt,Tn.options)&&(0,ye.vZ)(Kt,Tn.config))return Tn;throw Fr.create("duplicate-app",{appName:fn})}const un=new W.H0(fn);for(const kn of Nn.values())un.addComponent(kn);const Gn=new nr(wt,Kt,un);return zn.set(fn,Gn),Gn}function _r(Ke=ur){const ze=zn.get(Ke);if(!ze&&Ke===ur&&(0,ye.aH)())return An();if(!ze)throw Fr.create("no-app",{appName:Ke});return ze}function Fn(){return Array.from(zn.values())}function Sr(Ke){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,g.Z)(function*(Ke){const ze=Ke.name;zn.has(ze)&&(zn.delete(ze),yield Promise.all(Ke.container.getProviders().map(wt=>wt.delete())),Ke.isDeleted=!0)})).apply(this,arguments)}function Mt(Ke,ze,wt){var Kt;let fn=null!==(Kt=mi[Ke])&&void 0!==Kt?Kt:Ke;wt&&(fn+=`-${wt}`);const Tn=fn.match(/\s|\//),un=ze.match(/\s|\//);if(Tn||un){const Gn=[`Unable to register library "${fn}" with version "${ze}":`];return Tn&&Gn.push(`library name "${fn}" contains illegal characters (whitespace or "/")`),Tn&&un&&Gn.push("and"),un&&Gn.push(`version name "${ze}" contains illegal characters (whitespace or "/")`),void Qe.warn(Gn.join(" "))}$r(new W.wA(`${fn}-version`,()=>({library:fn,version:ze}),"VERSION"))}function Me(Ke,ze){if(null!==Ke&&"function"!=typeof Ke)throw Fr.create("invalid-log-argument");(0,q.Am)(Ke,ze)}function Ct(Ke){(0,q.Ub)(Ke)}const wn="firebase-heartbeat-database",Xt=1,ue="firebase-heartbeat-store";let ce=null;function Ce(){return ce||(ce=function he(Ke,ze,{blocked:wt,upgrade:Kt,blocking:fn,terminated:Tn}={}){const un=indexedDB.open(Ke,ze),Gn=O(un);return Kt&&un.addEventListener("upgradeneeded",kn=>{Kt(O(un.result),kn.oldVersion,kn.newVersion,O(un.transaction),kn)}),wt&&un.addEventListener("blocked",kn=>wt(kn.oldVersion,kn.newVersion,kn)),Gn.then(kn=>{Tn&&kn.addEventListener("close",()=>Tn()),fn&&kn.addEventListener("versionchange",gr=>fn(gr.oldVersion,gr.newVersion,gr))}).catch(()=>{}),Gn}(wn,Xt,{upgrade:(Ke,ze)=>{0===ze&&Ke.createObjectStore(ue)}}).catch(Ke=>{throw Fr.create("idb-open",{originalErrorMessage:Ke.message})})),ce}function $e(){return($e=(0,g.Z)(function*(Ke){try{return yield(yield Ce()).transaction(ue).objectStore(ue).get(ve(Ke))}catch(ze){if(ze instanceof ye.ZR)Qe.warn(ze.message);else{const wt=Fr.create("idb-get",{originalErrorMessage:ze?.message});Qe.warn(wt.message)}}})).apply(this,arguments)}function Et(Ke,ze){return we.apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(Ke,ze){try{const Kt=(yield Ce()).transaction(ue,"readwrite");yield Kt.objectStore(ue).put(ze,ve(Ke)),yield Kt.done}catch(wt){if(wt instanceof ye.ZR)Qe.warn(wt.message);else{const Kt=Fr.create("idb-set",{originalErrorMessage:wt?.message});Qe.warn(Kt.message)}}})).apply(this,arguments)}function ve(Ke){return`${Ke.name}!${Ke.options.appId}`}class ut{constructor(ze){this.container=ze,this._heartbeatsCache=null;const wt=this.container.getProvider("app").getImmediate();this._storage=new On(wt),this._heartbeatsCachePromise=this._storage.read().then(Kt=>(this._heartbeatsCache=Kt,Kt))}triggerHeartbeat(){var ze=this;return(0,g.Z)(function*(){const Kt=ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=bt();if(null===ze._heartbeatsCache&&(ze._heartbeatsCache=yield ze._heartbeatsCachePromise),ze._heartbeatsCache.lastSentHeartbeatDate!==fn&&!ze._heartbeatsCache.heartbeats.some(Tn=>Tn.date===fn))return ze._heartbeatsCache.heartbeats.push({date:fn,agent:Kt}),ze._heartbeatsCache.heartbeats=ze._heartbeatsCache.heartbeats.filter(Tn=>{const un=new Date(Tn.date).valueOf();return Date.now()-un<=2592e6}),ze._storage.overwrite(ze._heartbeatsCache)})()}getHeartbeatsHeader(){var ze=this;return(0,g.Z)(function*(){if(null===ze._heartbeatsCache&&(yield ze._heartbeatsCachePromise),null===ze._heartbeatsCache||0===ze._heartbeatsCache.heartbeats.length)return"";const wt=bt(),{heartbeatsToSend:Kt,unsentEntries:fn}=function hn(Ke,ze=1024){const wt=[];let Kt=Ke.slice();for(const fn of Ke){const Tn=wt.find(un=>un.agent===fn.agent);if(Tn){if(Tn.dates.push(fn.date),rr(wt)>ze){Tn.dates.pop();break}}else if(wt.push({agent:fn.agent,dates:[fn.date]}),rr(wt)>ze){wt.pop();break}Kt=Kt.slice(1)}return{heartbeatsToSend:wt,unsentEntries:Kt}}(ze._heartbeatsCache.heartbeats),Tn=(0,ye.L)(JSON.stringify({version:2,heartbeats:Kt}));return ze._heartbeatsCache.lastSentHeartbeatDate=wt,fn.length>0?(ze._heartbeatsCache.heartbeats=fn,yield ze._storage.overwrite(ze._heartbeatsCache)):(ze._heartbeatsCache.heartbeats=[],ze._storage.overwrite(ze._heartbeatsCache)),Tn})()}}function bt(){return(new Date).toISOString().substring(0,10)}class On{constructor(ze){this.app=ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ye.hl)()&&(0,ye.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ze=this;return(0,g.Z)(function*(){return(yield ze._canUseIndexedDBPromise)&&(yield function lt(Ke){return $e.apply(this,arguments)}(ze.app))||{heartbeats:[]}})()}overwrite(ze){var wt=this;return(0,g.Z)(function*(){var Kt;if(yield wt._canUseIndexedDBPromise){const Tn=yield wt.read();return Et(wt.app,{lastSentHeartbeatDate:null!==(Kt=ze.lastSentHeartbeatDate)&&void 0!==Kt?Kt:Tn.lastSentHeartbeatDate,heartbeats:ze.heartbeats})}})()}add(ze){var wt=this;return(0,g.Z)(function*(){var Kt;if(yield wt._canUseIndexedDBPromise){const Tn=yield wt.read();return Et(wt.app,{lastSentHeartbeatDate:null!==(Kt=ze.lastSentHeartbeatDate)&&void 0!==Kt?Kt:Tn.lastSentHeartbeatDate,heartbeats:[...Tn.heartbeats,...ze.heartbeats]})}})()}}function rr(Ke){return(0,ye.L)(JSON.stringify({version:2,heartbeats:Ke})).length}!function cr(Ke){$r(new W.wA("platform-logger",ze=>new pt(ze),"PRIVATE")),$r(new W.wA("heartbeat",ze=>new ut(ze),"PRIVATE")),Mt(Dt,"0.9.10",Ke),Mt(Dt,"0.9.10","esm2017"),Mt("fire-js","")}("")},4859:(jt,He,L)=>{L.d(He,{H0:()=>F,wA:()=>q});var g=L(5861),W=L(2090);class q{constructor(le,ie,_e){this.name=le,this.instanceFactory=ie,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const ye="[DEFAULT]";class ge{constructor(le,ie){this.name=le,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const ie=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(ie)){const _e=new W.BH;if(this.instancesDeferred.set(ie,_e),this.isInitialized(ie)||this.shouldAutoInitialize())try{const ht=this.getOrInitializeService({instanceIdentifier:ie});ht&&_e.resolve(ht)}catch{}}return this.instancesDeferred.get(ie).promise}getImmediate(le){var ie;const _e=this.normalizeInstanceIdentifier(le?.identifier),ht=null!==(ie=le?.optional)&&void 0!==ie&&ie;if(!this.isInitialized(_e)&&!this.shouldAutoInitialize()){if(ht)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(Te){if(ht)return null;throw Te}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function be(Pe){return"EAGER"===Pe.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:ye})}catch{}for(const[ie,_e]of this.instancesDeferred.entries()){const ht=this.normalizeInstanceIdentifier(ie);try{const Te=this.getOrInitializeService({instanceIdentifier:ht});_e.resolve(Te)}catch{}}}}clearInstance(le=ye){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,g.Z)(function*(){const ie=Array.from(le.instances.values());yield Promise.all([...ie.filter(_e=>"INTERNAL"in _e).map(_e=>_e.INTERNAL.delete()),...ie.filter(_e=>"_delete"in _e).map(_e=>_e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=ye){return this.instances.has(le)}getOptions(le=ye){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:ie={}}=le,_e=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ht=this.getOrInitializeService({instanceIdentifier:_e,options:ie});for(const[Te,ot]of this.instancesDeferred.entries())_e===this.normalizeInstanceIdentifier(Te)&&ot.resolve(ht);return ht}onInit(le,ie){var _e;const ht=this.normalizeInstanceIdentifier(ie),Te=null!==(_e=this.onInitCallbacks.get(ht))&&void 0!==_e?_e:new Set;Te.add(le),this.onInitCallbacks.set(ht,Te);const ot=this.instances.get(ht);return ot&&le(ot,ht),()=>{Te.delete(le)}}invokeOnInitCallbacks(le,ie){const _e=this.onInitCallbacks.get(ie);if(_e)for(const ht of _e)try{ht(le,ie)}catch{}}getOrInitializeService({instanceIdentifier:le,options:ie={}}){let _e=this.instances.get(le);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:(Pe=le,Pe===ye?void 0:Pe),options:ie}),this.instances.set(le,_e),this.instancesOptions.set(le,ie),this.invokeOnInitCallbacks(_e,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,_e)}catch{}var Pe;return _e||null}normalizeInstanceIdentifier(le=ye){return this.component?this.component.multipleInstances?le:ye:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class F{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const ie=this.getProvider(le.name);if(ie.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);ie.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const ie=new ge(le,this);return this.providers.set(le,ie),ie}getProviders(){return Array.from(this.providers.values())}}},1877:(jt,He,L)=>{L.d(He,{Am:()=>Pe,Ub:()=>F,Yd:()=>be,in:()=>W});const g=[];var W=(()=>{return(le=W||(W={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",W;var le})();const q={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},ye=W.INFO,ge={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},pe=(le,ie,..._e)=>{if(ie<le.logLevel)return;const ht=(new Date).toISOString(),Te=ge[ie];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[Te](`[${ht}]  ${le.name}:`,..._e)};class be{constructor(ie){this.name=ie,this._logLevel=ye,this._logHandler=pe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in W))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?q[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...ie),this._logHandler(this,W.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...ie),this._logHandler(this,W.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,W.INFO,...ie),this._logHandler(this,W.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,W.WARN,...ie),this._logHandler(this,W.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...ie),this._logHandler(this,W.ERROR,...ie)}}function F(le){g.forEach(ie=>{ie.setLogLevel(le)})}function Pe(le,ie){for(const _e of g){let ht=null;ie&&ie.level&&(ht=q[ie.level]),_e.userLogHandler=null===le?null:(Te,ot,...rt)=>{const Le=rt.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch{return null}}).filter(ke=>ke).join(" ");ot>=(ht??Te.logLevel)&&le({level:W[ot].toLowerCase(),message:Le,args:rt,type:Te.name})}}}},259:(jt,He,L)=>{L.d(He,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=L(6881);(0,g.registerVersion)("firebase","9.22.0","app")},9260:(jt,He,L)=>{L.d(He,{Z:()=>g.Z});var g=L(3942);g.Z.registerVersion("firebase","9.22.0","app-compat")},2644:(jt,He,L)=>{L.r(He);var g=L(5861),W=L(3942),q=L(2090),ye=L(6881),ge=L(655),pe=L(1877),be=L(4859);const Pe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},_e_EMAIL_SIGNIN="EMAIL_SIGNIN",_e_PASSWORD_RESET="PASSWORD_RESET",_e_RECOVER_EMAIL="RECOVER_EMAIL",_e_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",_e_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",_e_VERIFY_EMAIL="VERIFY_EMAIL";const ot=function ht(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},rt=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Le=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new pe.Yd("@firebase/auth");function O(y,...d){st.logLevel<=pe.in.ERROR&&st.error(`Auth (${ye.SDK_VERSION}): ${y}`,...d)}function se(y,...d){throw Ae(y,...d)}function he(y,...d){return Ae(y,...d)}function Ve(y,d,h){const w=Object.assign(Object.assign({},rt()),{[d]:h});return new q.LL("auth","Firebase",w).create(d,{appName:y.name})}function Ge(y,d,h){if(!(d instanceof h))throw h.name!==d.constructor.name&&se(y,"argument-error"),Ve(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ae(y,...d){if("string"!=typeof y){const h=d[0],w=[...d.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(h,...w)}return Le.create(y,...d)}function me(y,d,...h){if(!y)throw Ae(d,...h)}function Be(y){const d="INTERNAL ASSERTION FAILED: "+y;throw O(d),new Error(d)}function pt(y,d){y||Be(d)}function ft(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Dt(){return"http:"===Rn()||"https:"===Rn()}function Rn(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Je{constructor(d,h){this.shortDelay=d,this.longDelay=h,pt(h>d,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return function Qe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Dt()||(0,q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function at(y,d){pt(y.emulator,"Emulator should always be set here");const{url:h}=y.emulator;return d?`${h}${d.startsWith("/")?d.slice(1):d}`:h}class yt{static initialize(d,h,w){this.fetchImpl=d,h&&(this.headersImpl=h),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Xe=new Je(3e4,6e4);function xt(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function Rt(y,d,h,w){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,g.Z)(function*(y,d,h,w,B={}){return vt(y,B,(0,g.Z)(function*(){let Z={},Ee={};w&&("GET"===d?Ee=w:Z={body:JSON.stringify(w)});const Ye=(0,q.xO)(Object.assign({key:y.config.apiKey},Ee)).slice(1),Ot=yield y._getAdditionalHeaders();return Ot["Content-Type"]="application/json",y.languageCode&&(Ot["X-Firebase-Locale"]=y.languageCode),yt.fetch()($n(y,y.config.apiHost,h,Ye),Object.assign({method:d,headers:Ot,referrerPolicy:"no-referrer"},Z))}))})).apply(this,arguments)}function vt(y,d,h){return tn.apply(this,arguments)}function tn(){return(tn=(0,g.Z)(function*(y,d,h){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},tt),d);try{const B=new Nr(y),Z=yield Promise.race([h(),B.promise]);B.clearNetworkTimeout();const Ee=yield Z.json();if("needConfirmation"in Ee)throw _n(y,"account-exists-with-different-credential",Ee);if(Z.ok&&!("errorMessage"in Ee))return Ee;{const Ye=Z.ok?Ee.errorMessage:Ee.error.message,[Ot,Nt]=Ye.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ot)throw _n(y,"credential-already-in-use",Ee);if("EMAIL_EXISTS"===Ot)throw _n(y,"email-already-in-use",Ee);if("USER_DISABLED"===Ot)throw _n(y,"user-disabled",Ee);const kt=w[Ot]||Ot.toLowerCase().replace(/[_\s]+/g,"-");if(Nt)throw Ve(y,kt,Nt);se(y,kt)}}catch(B){if(B instanceof q.ZR)throw B;se(y,"network-request-failed",{message:String(B)})}})).apply(this,arguments)}function nn(y,d,h,w){return gn.apply(this,arguments)}function gn(){return(gn=(0,g.Z)(function*(y,d,h,w,B={}){const Z=yield Rt(y,d,h,w,B);return"mfaPendingCredential"in Z&&se(y,"multi-factor-auth-required",{_serverResponse:Z}),Z})).apply(this,arguments)}function $n(y,d,h,w){const B=`${d}${h}?${w}`;return y.config.emulator?at(y.config,B):`${y.config.apiScheme}://${B}`}class Nr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((h,w)=>{this.timer=setTimeout(()=>w(he(this.auth,"network-request-failed")),Xe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _n(y,d,h){const w={appName:y.name};h.email&&(w.email=h.email),h.phoneNumber&&(w.phoneNumber=h.phoneNumber);const B=he(y,d,w);return B.customData._tokenResponse=h,B}function br(){return(br=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function ar(){return(ar=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ut(){return(Ut=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Xn(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function ur(){return(ur=(0,g.Z)(function*(y,d=!1){const h=(0,q.m9)(y),w=yield h.getIdToken(d),B=zn(w);me(B&&B.exp&&B.auth_time&&B.iat,h.auth,"internal-error");const Z="object"==typeof B.firebase?B.firebase:void 0,Ee=Z?.sign_in_provider;return{claims:B,token:w,authTime:Xn(mi(B.auth_time)),issuedAtTime:Xn(mi(B.iat)),expirationTime:Xn(mi(B.exp)),signInProvider:Ee||null,signInSecondFactor:Z?.sign_in_second_factor||null}})).apply(this,arguments)}function mi(y){return 1e3*Number(y)}function zn(y){const[d,h,w]=y.split(".");if(void 0===d||void 0===h||void 0===w)return O("JWT malformed, contained fewer than 3 sections"),null;try{const B=(0,q.tV)(h);return B?JSON.parse(B):(O("Failed to decode base64 JWT payload"),null)}catch(B){return O("Caught error parsing JWT payload as JSON",B?.toString()),null}}function zt(y,d){return rn.apply(this,arguments)}function rn(){return(rn=(0,g.Z)(function*(y,d,h=!1){if(h)return d;try{return yield d}catch(w){throw w instanceof q.ZR&&function $r({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}class fr{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var h;if(d){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const B=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,B)}}schedule(d=!1){var h=this;if(!this.isRunning)return;const w=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield h.iteration()}),w)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&d.schedule(!0))}d.schedule()})()}}class an{constructor(d,h){this.createdAt=d,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xn(this.lastLoginAt),this.creationTime=Xn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tr(y){return lr.apply(this,arguments)}function lr(){return lr=(0,g.Z)(function*(y){var d;const h=y.auth,w=yield y.getIdToken(),B=yield zt(y,function on(y,d){return Ut.apply(this,arguments)}(h,{idToken:w}));me(B?.users.length,h,"internal-error");const Z=B.users[0];y._notifyReloadListener(Z);const Ee=null!==(d=Z.providerUserInfo)&&void 0!==d&&d.length?function An(y){return y.map(d=>{var{providerId:h}=d,w=(0,ge._T)(d,["providerId"]);return{providerId:h,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(Z.providerUserInfo):[],Ye=function qn(y,d){return[...y.filter(w=>!d.some(B=>B.providerId===w.providerId)),...d]}(y.providerData,Ee),kt=!!y.isAnonymous&&!(y.email&&Z.passwordHash||Ye?.length),pn={uid:Z.localId,displayName:Z.displayName||null,photoURL:Z.photoUrl||null,email:Z.email||null,emailVerified:Z.emailVerified||!1,phoneNumber:Z.phoneNumber||null,tenantId:Z.tenantId||null,providerData:Ye,metadata:new an(Z.createdAt,Z.lastLoginAt),isAnonymous:kt};Object.assign(y,pn)}),lr.apply(this,arguments)}function nr(){return(nr=(0,g.Z)(function*(y){const d=(0,q.m9)(y);yield Tr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Fn(){return(Fn=(0,g.Z)(function*(y,d){const h=yield vt(y,{},(0,g.Z)(function*(){const w=(0,q.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:B,apiKey:Z}=y.config,Ee=$n(y,B,"/v1/token",`key=${Z}`),Ye=yield y._getAdditionalHeaders();return Ye["Content-Type"]="application/x-www-form-urlencoded",yt.fetch()(Ee,{method:"POST",headers:Ye,body:w})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}class Sr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){me(d.idToken,"internal-error"),me(typeof d.idToken<"u","internal-error"),me(typeof d.refreshToken<"u","internal-error");const h="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Nn(y){const d=zn(y);return me(d,"internal-error"),me(typeof d.exp<"u","internal-error"),me(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,h)}getToken(d,h=!1){var w=this;return(0,g.Z)(function*(){return me(!w.accessToken||w.refreshToken,d,"user-token-expired"),h||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(d,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,h){var w=this;return(0,g.Z)(function*(){const{accessToken:B,refreshToken:Z,expiresIn:Ee}=yield function _r(y,d){return Fn.apply(this,arguments)}(d,h);w.updateTokensAndExpiration(B,Z,Number(Ee))})()}updateTokensAndExpiration(d,h,w){this.refreshToken=h||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(d,h){const{refreshToken:w,accessToken:B,expirationTime:Z}=h,Ee=new Sr;return w&&(me("string"==typeof w,"internal-error",{appName:d}),Ee.refreshToken=w),B&&(me("string"==typeof B,"internal-error",{appName:d}),Ee.accessToken=B),Z&&(me("number"==typeof Z,"internal-error",{appName:d}),Ee.expirationTime=Z),Ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Sr,this.toJSON())}_performRefresh(){return Be("not implemented")}}function Oe(y,d){me("string"==typeof y||typeof y>"u","internal-error",{appName:d})}class Mt{constructor(d){var{uid:h,auth:w,stsTokenManager:B}=d,Z=(0,ge._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=w,this.stsTokenManager=B,this.accessToken=B.accessToken,this.displayName=Z.displayName||null,this.email=Z.email||null,this.emailVerified=Z.emailVerified||!1,this.phoneNumber=Z.phoneNumber||null,this.photoURL=Z.photoURL||null,this.isAnonymous=Z.isAnonymous||!1,this.tenantId=Z.tenantId||null,this.providerData=Z.providerData?[...Z.providerData]:[],this.metadata=new an(Z.createdAt||void 0,Z.lastLoginAt||void 0)}getIdToken(d){var h=this;return(0,g.Z)(function*(){const w=yield zt(h,h.stsTokenManager.getToken(h.auth,d));return me(w,h.auth,"internal-error"),h.accessToken!==w&&(h.accessToken=w,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),w})()}getIdTokenResult(d){return function Br(y){return ur.apply(this,arguments)}(this,d)}reload(){return function Fr(y){return nr.apply(this,arguments)}(this)}_assign(d){this!==d&&(me(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(h=>Object.assign({},h)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const h=new Mt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(d){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,h=!1){var w=this;return(0,g.Z)(function*(){let B=!1;d.idToken&&d.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(d),B=!0),h&&(yield Tr(w)),yield w.auth._persistUserIfCurrent(w),B&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var d=this;return(0,g.Z)(function*(){const h=yield d.getIdToken();return yield zt(d,function Jn(y,d){return br.apply(this,arguments)}(d.auth,{idToken:h})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,h){var w,B,Z,Ee,Ye,Ot,Nt,kt;const pn=null!==(w=h.displayName)&&void 0!==w?w:void 0,Si=null!==(B=h.email)&&void 0!==B?B:void 0,Go=null!==(Z=h.phoneNumber)&&void 0!==Z?Z:void 0,fu=null!==(Ee=h.photoURL)&&void 0!==Ee?Ee:void 0,ah=null!==(Ye=h.tenantId)&&void 0!==Ye?Ye:void 0,ns=null!==(Ot=h._redirectEventId)&&void 0!==Ot?Ot:void 0,uh=null!==(Nt=h.createdAt)&&void 0!==Nt?Nt:void 0,lh=null!==(kt=h.lastLoginAt)&&void 0!==kt?kt:void 0,{uid:cl,emailVerified:dl,isAnonymous:Fl,providerData:hl,stsTokenManager:hc}=h;me(cl&&hc,d,"internal-error");const _f=Sr.fromJSON(this.name,hc);me("string"==typeof cl,d,"internal-error"),Oe(pn,d.name),Oe(Si,d.name),me("boolean"==typeof dl,d,"internal-error"),me("boolean"==typeof Fl,d,"internal-error"),Oe(Go,d.name),Oe(fu,d.name),Oe(ah,d.name),Oe(ns,d.name),Oe(uh,d.name),Oe(lh,d.name);const fc=new Mt({uid:cl,auth:d,email:Si,emailVerified:dl,displayName:pn,isAnonymous:Fl,photoURL:fu,phoneNumber:Go,tenantId:ah,stsTokenManager:_f,createdAt:uh,lastLoginAt:lh});return hl&&Array.isArray(hl)&&(fc.providerData=hl.map(Jp=>Object.assign({},Jp))),ns&&(fc._redirectEventId=ns),fc}static _fromIdTokenResponse(d,h,w=!1){return(0,g.Z)(function*(){const B=new Sr;B.updateFromServerResponse(h);const Z=new Mt({uid:h.localId,auth:d,stsTokenManager:B,isAnonymous:w});return yield Tr(Z),Z})()}}const Me=new Map;function Ct(y){pt(y instanceof Function,"Expected a class definition");let d=Me.get(y);return d?(pt(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,Me.set(y,d),d)}const Xt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(h,w){var B=this;return(0,g.Z)(function*(){B.storage[h]=w})()}_get(h){var w=this;return(0,g.Z)(function*(){const B=w.storage[h];return void 0===B?null:B})()}_remove(h){var w=this;return(0,g.Z)(function*(){delete w.storage[h]})()}_addListener(h,w){}_removeListener(h,w){}}return y.type="NONE",y})();function ue(y,d,h){return`firebase:${y}:${d}:${h}`}class ce{constructor(d,h,w){this.persistence=d,this.auth=h,this.userKey=w;const{config:B,name:Z}=this.auth;this.fullUserKey=ue(this.userKey,B.apiKey,Z),this.fullPersistenceKey=ue("persistence",B.apiKey,Z),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const h=yield d.persistence._get(d.fullUserKey);return h?Mt._fromJSON(d.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var h=this;return(0,g.Z)(function*(){if(h.persistence===d)return;const w=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=d,w?h.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,h,w="authUser"){return(0,g.Z)(function*(){if(!h.length)return new ce(Ct(Xt),d,w);const B=(yield Promise.all(h.map(function(){var Nt=(0,g.Z)(function*(kt){if(yield kt._isAvailable())return kt});return function(kt){return Nt.apply(this,arguments)}}()))).filter(Nt=>Nt);let Z=B[0]||Ct(Xt);const Ee=ue(w,d.config.apiKey,d.name);let Ye=null;for(const Nt of h)try{const kt=yield Nt._get(Ee);if(kt){const pn=Mt._fromJSON(d,kt);Nt!==Z&&(Ye=pn),Z=Nt;break}}catch{}const Ot=B.filter(Nt=>Nt._shouldAllowMigration);return Z._shouldAllowMigration&&Ot.length?(Z=Ot[0],Ye&&(yield Z._set(Ee,Ye.toJSON())),yield Promise.all(h.map(function(){var Nt=(0,g.Z)(function*(kt){if(kt!==Z)try{yield kt._remove(Ee)}catch{}});return function(kt){return Nt.apply(this,arguments)}}())),new ce(Z,d,w)):new ce(Z,d,w)})()}}function Ce(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(we(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(lt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(ne(d))return"Blackberry";if(Se(d))return"Webos";if($e(d))return"Safari";if((d.includes("chrome/")||Et(d))&&!d.includes("edge/"))return"Chrome";if(ve(d))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function lt(y=(0,q.z$)()){return/firefox\//i.test(y)}function $e(y=(0,q.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function Et(y=(0,q.z$)()){return/crios\//i.test(y)}function we(y=(0,q.z$)()){return/iemobile/i.test(y)}function ve(y=(0,q.z$)()){return/android/i.test(y)}function ne(y=(0,q.z$)()){return/blackberry/i.test(y)}function Se(y=(0,q.z$)()){return/webos/i.test(y)}function ut(y=(0,q.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function rr(y=(0,q.z$)()){return ut(y)||ve(y)||Se(y)||ne(y)||/windows phone/i.test(y)||we(y)}function Ke(y,d=[]){let h;switch(y){case"Browser":h=Ce((0,q.z$)());break;case"Worker":h=`${Ce((0,q.z$)())}-${y}`;break;default:h=y}const w=d.length?d.join(","):"FirebaseCore-web";return`${h}/JsCore/${ye.SDK_VERSION}/${w}`}function wt(){return(wt=(0,g.Z)(function*(y){return(yield Rt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Kt(y,d){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(y,d){return Rt(y,"GET","/v2/recaptchaConfig",xt(y,d))})).apply(this,arguments)}function Tn(y){return void 0!==y&&void 0!==y.getResponse}function un(y){return void 0!==y&&void 0!==y.enterprise}class Gn{constructor(d){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.emailPasswordEnabled=d.recaptchaEnforcementState.some(h=>"EMAIL_PASSWORD_PROVIDER"===h.provider&&"OFF"!==h.enforcementState)}}function gr(y){return new Promise((d,h)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=d,w.onerror=B=>{const Z=he("internal-error");Z.customData=B,h(Z)},w.type="text/javascript",w.charset="UTF-8",function kn(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(w)})}function Zr(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Zs="NO_RECAPTCHA";class ai{constructor(d){this.type="recaptcha-enterprise",this.auth=Ln(d)}verify(d="verify",h=!1){var w=this;return(0,g.Z)(function*(){function Z(){return Z=(0,g.Z)(function*(Ye){if(!h){if(null==Ye.tenantId&&null!=Ye._agentRecaptchaConfig)return Ye._agentRecaptchaConfig.siteKey;if(null!=Ye.tenantId&&void 0!==Ye._tenantRecaptchaConfigs[Ye.tenantId])return Ye._tenantRecaptchaConfigs[Ye.tenantId].siteKey}return new Promise(function(){var Ot=(0,g.Z)(function*(Nt,kt){Kt(Ye,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(pn=>{if(void 0!==pn.recaptchaKey){const Si=new Gn(pn);return null==Ye.tenantId?Ye._agentRecaptchaConfig=Si:Ye._tenantRecaptchaConfigs[Ye.tenantId]=Si,Nt(Si.siteKey)}kt(new Error("recaptcha Enterprise site key undefined"))}).catch(pn=>{kt(pn)})});return function(Nt,kt){return Ot.apply(this,arguments)}}())}),Z.apply(this,arguments)}function Ee(Ye,Ot,Nt){const kt=window.grecaptcha;un(kt)?kt.enterprise.ready(()=>{kt.enterprise.execute(Ye,{action:d}).then(pn=>{Ot(pn)}).catch(()=>{Ot(Zs)})}):Nt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ye,Ot)=>{(function B(Ye){return Z.apply(this,arguments)})(w.auth).then(Nt=>{if(!h&&un(window.grecaptcha))Ee(Nt,Ye,Ot);else{if(typeof window>"u")return void Ot(new Error("RecaptchaVerifier is only supported in browser"));gr("https://www.google.com/recaptcha/enterprise.js?render="+Nt).then(()=>{Ee(Nt,Ye,Ot)}).catch(kt=>{Ot(kt)})}}).catch(Nt=>{Ot(Nt)})})})()}}function Ft(y,d,h){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(y,d,h,w=!1){const B=new ai(y);let Z;try{Z=yield B.verify(h)}catch{Z=yield B.verify(h,!0)}const Ee=Object.assign({},d);return Object.assign(Ee,w?{captchaResp:Z}:{captchaResponse:Z}),Object.assign(Ee,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ee,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ee})).apply(this,arguments)}class vr{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,h){const w=Z=>new Promise((Ee,Ye)=>{try{Ee(d(Z))}catch(Ot){Ye(Ot)}});w.onAbort=h,this.queue.push(w);const B=this.queue.length-1;return()=>{this.queue[B]=()=>Promise.resolve()}}runMiddleware(d){var h=this;return(0,g.Z)(function*(){if(h.auth.currentUser===d)return;const w=[];try{for(const B of h.queue)yield B(d),B.onAbort&&w.push(B.onAbort)}catch(B){w.reverse();for(const Z of w)try{Z()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:B?.message})}})()}}class yi{constructor(d,h,w,B){this.app=d,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=w,this.config=B,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pr(this),this.idTokenSubscription=new Pr(this),this.beforeStateQueue=new vr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Le,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=B.sdkClientVersion}_initializeWithPersistence(d,h){var w=this;return h&&(this._popupRedirectResolver=Ct(h)),this._initializationPromise=this.queue((0,g.Z)(function*(){var B,Z;if(!w._deleted&&(w.persistenceManager=yield ce.create(w,d),!w._deleted)){if(null!==(B=w._popupRedirectResolver)&&void 0!==B&&B._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(h),w.lastNotifiedUid=(null===(Z=w.currentUser)||void 0===Z?void 0:Z.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const h=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||h){if(d.currentUser&&h&&d.currentUser.uid===h.uid)return d._currentUser._assign(h),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(h,!0)}})()}initializeCurrentUser(d){var h=this;return(0,g.Z)(function*(){var w;const B=yield h.assertedPersistence.getCurrentUser();let Z=B,Ee=!1;if(d&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Ye=null===(w=h.redirectUser)||void 0===w?void 0:w._redirectEventId,Ot=Z?._redirectEventId,Nt=yield h.tryRedirectSignIn(d);(!Ye||Ye===Ot)&&Nt?.user&&(Z=Nt.user,Ee=!0)}if(!Z)return h.directlySetCurrentUser(null);if(!Z._redirectEventId){if(Ee)try{yield h.beforeStateQueue.runMiddleware(Z)}catch(Ye){Z=B,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Ye))}return Z?h.reloadAndSetCurrentUserOrClear(Z):h.directlySetCurrentUser(null)}return me(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===Z._redirectEventId?h.directlySetCurrentUser(Z):h.reloadAndSetCurrentUserOrClear(Z)})()}tryRedirectSignIn(d){var h=this;return(0,g.Z)(function*(){let w=null;try{w=yield h._popupRedirectResolver._completeRedirectFn(h,d,!0)}catch{yield h._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(d){var h=this;return(0,g.Z)(function*(){try{yield Tr(d)}catch(w){if("auth/network-request-failed"!==w?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var h=this;return(0,g.Z)(function*(){const w=d?(0,q.m9)(d):null;return w&&me(w.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(w&&w._clone(h))})()}_updateCurrentUser(d,h=!1){var w=this;return(0,g.Z)(function*(){if(!w._deleted)return d&&me(w.tenantId===d.tenantId,w,"tenant-id-mismatch"),h||(yield w.beforeStateQueue.runMiddleware(d)),w.queue((0,g.Z)(function*(){yield w.directlySetCurrentUser(d),w.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var h=this;return this.queue((0,g.Z)(function*(){yield h.assertedPersistence.setPersistence(Ct(d))}))}initializeRecaptchaConfig(){var d=this;return(0,g.Z)(function*(){const h=yield Kt(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new Gn(h);null==d.tenantId?d._agentRecaptchaConfig=w:d._tenantRecaptchaConfigs[d.tenantId]=w,w.emailPasswordEnabled&&new ai(d).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new q.LL("auth","Firebase",d())}onAuthStateChanged(d,h,w){return this.registerStateListener(this.authStateSubscription,d,h,w)}beforeAuthStateChanged(d,h){return this.beforeStateQueue.pushCallback(d,h)}onIdTokenChanged(d,h,w){return this.registerStateListener(this.idTokenSubscription,d,h,w)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,h){var w=this;return(0,g.Z)(function*(){const B=yield w.getOrInitRedirectPersistenceManager(h);return null===d?B.removeCurrentUser():B.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var h=this;return(0,g.Z)(function*(){if(!h.redirectPersistenceManager){const w=d&&Ct(d)||h._popupRedirectResolver;me(w,h,"argument-error"),h.redirectPersistenceManager=yield ce.create(h,[Ct(w._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(d){var h=this;return(0,g.Z)(function*(){var w,B;return h._isInitialized&&(yield h.queue((0,g.Z)(function*(){}))),(null===(w=h._currentUser)||void 0===w?void 0:w._redirectEventId)===d?h._currentUser:(null===(B=h.redirectUser)||void 0===B?void 0:B._redirectEventId)===d?h.redirectUser:null})()}_persistUserIfCurrent(d){var h=this;return(0,g.Z)(function*(){if(d===h.currentUser)return h.queue((0,g.Z)(function*(){return h.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(h=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,h,w,B){if(this._deleted)return()=>{};const Z="function"==typeof h?h:h.next.bind(h),Ee=this._isInitialized?Promise.resolve():this._initializationPromise;return me(Ee,this,"internal-error"),Ee.then(()=>Z(this.currentUser)),"function"==typeof h?d.addObserver(h,w,B):d.addObserver(h)}directlySetCurrentUser(d){var h=this;return(0,g.Z)(function*(){h.currentUser&&h.currentUser!==d&&h._currentUser._stopProactiveRefresh(),d&&h.isProactiveRefreshEnabled&&d._startProactiveRefresh(),h.currentUser=d,d?yield h.assertedPersistence.setCurrentUser(d):yield h.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Ke(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){var h;const w={"X-Client-Version":d.clientVersion};d.app.options.appId&&(w["X-Firebase-gmpid"]=d.app.options.appId);const B=yield null===(h=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();B&&(w["X-Firebase-Client"]=B);const Z=yield d._getAppCheckToken();return Z&&(w["X-Firebase-AppCheck"]=Z),w})()}_getAppCheckToken(){var d=this;return(0,g.Z)(function*(){var h;const w=yield null===(h=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return w?.error&&function z(y,...d){st.logLevel<=pe.in.WARN&&st.warn(`Auth (${ye.SDK_VERSION}): ${y}`,...d)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function Ln(y){return(0,q.m9)(y)}class Pr{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,q.ne)(h=>this.observer=h)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ni(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function _i(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class $i{constructor(d,h){this.providerId=d,this.signInMethod=h}toJSON(){return Be("not implemented")}_getIdTokenResponse(d){return Be("not implemented")}_linkToIdToken(d,h){return Be("not implemented")}_getReauthenticationResolver(d){return Be("not implemented")}}function ki(y,d){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:resetPassword",xt(y,d))})).apply(this,arguments)}function _s(y,d){return qr.apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function As(){return(As=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:update",xt(y,d))})).apply(this,arguments)}function ir(y,d){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,d){return nn(y,"POST","/v1/accounts:signInWithPassword",xt(y,d))})).apply(this,arguments)}function ui(y,d){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:sendOobCode",xt(y,d))})).apply(this,arguments)}function Ie(){return(Ie=(0,g.Z)(function*(y,d){return ui(y,d)})).apply(this,arguments)}function je(y,d){return dt.apply(this,arguments)}function dt(){return(dt=(0,g.Z)(function*(y,d){return ui(y,d)})).apply(this,arguments)}function Tt(y,d){return vn.apply(this,arguments)}function vn(){return(vn=(0,g.Z)(function*(y,d){return ui(y,d)})).apply(this,arguments)}function Dn(){return(Dn=(0,g.Z)(function*(y,d){return ui(y,d)})).apply(this,arguments)}function Or(){return(Or=(0,g.Z)(function*(y,d){return nn(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,d))})).apply(this,arguments)}function Er(){return(Er=(0,g.Z)(function*(y,d){return nn(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,d))})).apply(this,arguments)}class Ys extends $i{constructor(d,h,w,B=null){super("password",w),this._email=d,this._password=h,this._tenantId=B}static _fromEmailAndPassword(d,h){return new Ys(d,h,"password")}static _fromEmailAndCode(d,h,w=null){return new Ys(d,h,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(d){var h=this;return(0,g.Z)(function*(){var w;switch(h.signInMethod){case"password":const B={returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=d._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Z=yield Ft(d,B,"signInWithPassword");return ir(d,Z)}return ir(d,B).catch(function(){var Z=(0,g.Z)(function*(Ee){if("auth/missing-recaptcha-token"===Ee.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ye=yield Ft(d,B,"signInWithPassword");return ir(d,Ye)}return Promise.reject(Ee)});return function(Ee){return Z.apply(this,arguments)}}());case"emailLink":return function Wn(y,d){return Or.apply(this,arguments)}(d,{email:h._email,oobCode:h._password});default:se(d,"internal-error")}})()}_linkToIdToken(d,h){var w=this;return(0,g.Z)(function*(){switch(w.signInMethod){case"password":return _s(d,{idToken:h,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function is(y,d){return Er.apply(this,arguments)}(d,{idToken:h,email:w._email,oobCode:w._password});default:se(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function vi(y,d){return vs.apply(this,arguments)}function vs(){return(vs=(0,g.Z)(function*(y,d){return nn(y,"POST","/v1/accounts:signInWithIdp",xt(y,d))})).apply(this,arguments)}class ss extends $i{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const h=new ss(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(h.idToken=d.idToken),d.accessToken&&(h.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(h.nonce=d.nonce),d.pendingToken&&(h.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(h.accessToken=d.oauthToken,h.secret=d.oauthTokenSecret):se("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:B}=h,Z=(0,ge._T)(h,["providerId","signInMethod"]);if(!w||!B)return null;const Ee=new ss(w,B);return Ee.idToken=Z.idToken||void 0,Ee.accessToken=Z.accessToken||void 0,Ee.secret=Z.secret,Ee.nonce=Z.nonce,Ee.pendingToken=Z.pendingToken||null,Ee}_getIdTokenResponse(d){return vi(d,this.buildRequest())}_linkToIdToken(d,h){const w=this.buildRequest();return w.idToken=h,vi(d,w)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,vi(d,h)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),d.postBody=(0,q.xO)(h)}return d}}function uo(){return(uo=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:sendVerificationCode",xt(y,d))})).apply(this,arguments)}function Ns(){return(Ns=(0,g.Z)(function*(y,d){return nn(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,d))})).apply(this,arguments)}function Qi(){return(Qi=(0,g.Z)(function*(y,d){const h=yield nn(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,d));if(h.temporaryProof)throw _n(y,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Es={USER_NOT_FOUND:"user-not-found"};function ko(){return(ko=(0,g.Z)(function*(y,d){return nn(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Es)})).apply(this,arguments)}class ds extends $i{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,h){return new ds({verificationId:d,verificationCode:h})}static _fromTokenResponse(d,h){return new ds({phoneNumber:d,temporaryProof:h})}_getIdTokenResponse(d){return function lo(y,d){return Ns.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,h){return function co(y,d){return Qi.apply(this,arguments)}(d,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function No(y,d){return ko.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:h,verificationId:w,verificationCode:B}=this.params;return d&&h?{temporaryProof:d,phoneNumber:h}:{sessionInfo:w,code:B}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:h,verificationCode:w,phoneNumber:B,temporaryProof:Z}=d;return w||h||B||Z?new ds({verificationId:h,verificationCode:w,phoneNumber:B,temporaryProof:Z}):null}}class ks{constructor(d){var h,w,B,Z,Ee,Ye;const Ot=(0,q.zd)((0,q.pd)(d)),Nt=null!==(h=Ot.apiKey)&&void 0!==h?h:null,kt=null!==(w=Ot.oobCode)&&void 0!==w?w:null,pn=function Yo(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(B=Ot.mode)&&void 0!==B?B:null);me(Nt&&kt&&pn,"argument-error"),this.apiKey=Nt,this.operation=pn,this.code=kt,this.continueUrl=null!==(Z=Ot.continueUrl)&&void 0!==Z?Z:null,this.languageCode=null!==(Ee=Ot.languageCode)&&void 0!==Ee?Ee:null,this.tenantId=null!==(Ye=Ot.tenantId)&&void 0!==Ye?Ye:null}static parseLink(d){const h=function ho(y){const d=(0,q.zd)((0,q.pd)(y)).link,h=d?(0,q.zd)((0,q.pd)(d)).deep_link_id:null,w=(0,q.zd)((0,q.pd)(y)).deep_link_id;return(w?(0,q.zd)((0,q.pd)(w)).link:null)||w||h||d||y}(d);try{return new ks(h)}catch{return null}}}let hs=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(h,w){return Ys._fromEmailAndPassword(h,w)}static credentialWithLink(h,w){const B=ks.parseLink(w);return me(B,"argument-error"),Ys._fromEmailAndCode(h,B.code,B.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ei{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class wi extends Ei{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ji extends wi{static credentialFromJSON(d){const h="string"==typeof d?JSON.parse(d):d;return me("providerId"in h&&"signInMethod"in h,"argument-error"),ss._fromParams(h)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return me(d.idToken||d.accessToken,"argument-error"),ss._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ji.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ji.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:h,oauthAccessToken:w,oauthTokenSecret:B,pendingToken:Z,nonce:Ee,providerId:Ye}=d;if(!w&&!B&&!h&&!Z||!Ye)return null;try{return new Ji(Ye)._credential({idToken:h,accessToken:w,nonce:Ee,pendingToken:Z})}catch{return null}}}let wr=(()=>{class y extends wi{constructor(){super("facebook.com")}static credential(h){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return y.credential(h.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Fs=(()=>{class y extends wi{constructor(){super("google.com"),this.addScope("profile")}static credential(h,w){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:w})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:w,oauthAccessToken:B}=h;if(!w&&!B)return null;try{return y.credential(w,B)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Js=(()=>{class y extends wi{constructor(){super("github.com")}static credential(h){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return y.credential(h.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class fs extends $i{constructor(d,h){super(d,d),this.pendingToken=h}_getIdTokenResponse(d){return vi(d,this.buildRequest())}_linkToIdToken(d,h){const w=this.buildRequest();return w.idToken=h,vi(d,w)}_getReauthenticationResolver(d){const h=this.buildRequest();return h.autoCreate=!1,vi(d,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const h="string"==typeof d?JSON.parse(d):d,{providerId:w,signInMethod:B,pendingToken:Z}=h;return w&&B&&Z&&w===B?new fs(w,Z):null}static _create(d,h){return new fs(d,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qo extends Ei{constructor(d){me(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Qo.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Qo.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const h=fs.fromJSON(d);return me(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:h,providerId:w}=d;if(!h||!w)return null;try{return fs._create(w,h)}catch{return null}}}let Xs=(()=>{class y extends wi{constructor(){super("twitter.com")}static credential(h,w){return ss._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:w})}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:w,oauthTokenSecret:B}=h;if(!w||!B)return null;try{return y.credential(w,B)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Us(y,d){return li.apply(this,arguments)}function li(){return(li=(0,g.Z)(function*(y,d){return nn(y,"POST","/v1/accounts:signUp",xt(y,d))})).apply(this,arguments)}class Ar{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,h,w,B=!1){return(0,g.Z)(function*(){const Z=yield Mt._fromIdTokenResponse(d,w,B),Ee=ji(w);return new Ar({user:Z,providerId:Ee,_tokenResponse:w,operationType:h})})()}static _forOperation(d,h,w){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(w,!0);const B=ji(w);return new Ar({user:d,providerId:B,_tokenResponse:w,operationType:h})})()}}function ji(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ps(){return(ps=(0,g.Z)(function*(y){var d;const h=Ln(y);if(yield h._initializationPromise,null!==(d=h.currentUser)&&void 0!==d&&d.isAnonymous)return new Ar({user:h.currentUser,providerId:null,operationType:"signIn"});const w=yield Us(h,{returnSecureToken:!0}),B=yield Ar._fromIdTokenResponse(h,"signIn",w,!0);return yield h._updateCurrentUser(B.user),B})).apply(this,arguments)}class ei extends q.ZR{constructor(d,h,w,B){var Z;super(h.code,h.message),this.operationType=w,this.user=B,Object.setPrototypeOf(this,ei.prototype),this.customData={appName:d.name,tenantId:null!==(Z=d.tenantId)&&void 0!==Z?Z:void 0,_serverResponse:h.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(d,h,w,B){return new ei(d,h,w,B)}}function Kr(y,d,h,w){return("reauthenticate"===d?h._getReauthenticationResolver(y):h._getIdTokenResponse(y)).catch(Z=>{throw"auth/multi-factor-auth-required"===Z.code?ei._fromErrorAndOperation(y,Z,d,w):Z})}function Eo(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function xi(){return xi=(0,g.Z)(function*(y,d){const h=(0,q.m9)(y);yield ws(!0,h,d);const{providerUserInfo:w}=yield function Xr(y,d){return ar.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[d]}),B=Eo(w||[]);return h.providerData=h.providerData.filter(Z=>B.has(Z.providerId)),B.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),xi.apply(this,arguments)}function pi(y,d){return eo.apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(y,d,h=!1){const w=yield zt(y,d._linkToIdToken(y.auth,yield y.getIdToken()),h);return Ar._forOperation(y,"link",w)})).apply(this,arguments)}function ws(y,d,h){return to.apply(this,arguments)}function to(){return(to=(0,g.Z)(function*(y,d,h){yield Tr(d);const B=!1===y?"provider-already-linked":"no-such-provider";me(Eo(d.providerData).has(h)===y,d.auth,B)})).apply(this,arguments)}function Hi(y,d){return Is.apply(this,arguments)}function Is(){return(Is=(0,g.Z)(function*(y,d,h=!1){const{auth:w}=y,B="reauthenticate";try{const Z=yield zt(y,Kr(w,B,d,y),h);me(Z.idToken,w,"internal-error");const Ee=zn(Z.idToken);me(Ee,w,"internal-error");const{sub:Ye}=Ee;return me(y.uid===Ye,w,"user-mismatch"),Ar._forOperation(y,B,Z)}catch(Z){throw"auth/user-not-found"===Z?.code&&se(w,"user-mismatch"),Z}})).apply(this,arguments)}function wo(y,d){return xn.apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(y,d,h=!1){const w="signIn",B=yield Kr(y,w,d),Z=yield Ar._fromIdTokenResponse(y,w,B);return h||(yield y._updateCurrentUser(Z.user)),Z})).apply(this,arguments)}function Ds(y,d){return V.apply(this,arguments)}function V(){return(V=(0,g.Z)(function*(y,d){return wo(Ln(y),d)})).apply(this,arguments)}function N(y,d){return P.apply(this,arguments)}function P(){return(P=(0,g.Z)(function*(y,d){const h=(0,q.m9)(y);return yield ws(!1,h,d.providerId),pi(h,d)})).apply(this,arguments)}function I(y,d){return A.apply(this,arguments)}function A(){return(A=(0,g.Z)(function*(y,d){return Hi((0,q.m9)(y),d)})).apply(this,arguments)}function oe(){return(oe=(0,g.Z)(function*(y,d){return nn(y,"POST","/v1/accounts:signInWithCustomToken",xt(y,d))})).apply(this,arguments)}function Re(){return Re=(0,g.Z)(function*(y,d){const h=Ln(y),w=yield function Q(y,d){return oe.apply(this,arguments)}(h,{token:d,returnSecureToken:!0}),B=yield Ar._fromIdTokenResponse(h,"signIn",w);return yield h._updateCurrentUser(B.user),B}),Re.apply(this,arguments)}class It{constructor(d,h){this.factorId=d,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(d,h){return"phoneInfo"in h?Vt._fromServerResponse(d,h):"totpInfo"in h?Bt._fromServerResponse(d,h):se(d,"internal-error")}}class Vt extends It{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,h){return new Vt(h)}}class Bt extends It{constructor(d){super("totp",d)}static _fromServerResponse(d,h){return new Bt(h)}}function En(y,d,h){var w;me((null===(w=h.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),me(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=h.url,d.dynamicLinkDomain=h.dynamicLinkDomain,d.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(me(h.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=h.iOS.bundleId),h.android&&(me(h.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=h.android.installApp,d.androidMinimumVersionCode=h.android.minimumVersion,d.androidPackageName=h.android.packageName)}function dr(){return dr=(0,g.Z)(function*(y,d,h){var w;const B=Ln(y),Z={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=B._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Ee=yield Ft(B,Z,"getOobCode",!0);h&&En(B,Ee,h),yield je(B,Ee)}else h&&En(B,Z,h),yield je(B,Z).catch(function(){var Ee=(0,g.Z)(function*(Ye){if("auth/missing-recaptcha-token"!==Ye.code)return Promise.reject(Ye);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ot=yield Ft(B,Z,"getOobCode",!0);h&&En(B,Ot,h),yield je(B,Ot)}});return function(Ye){return Ee.apply(this,arguments)}}())}),dr.apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(y,d,h){yield ki((0,q.m9)(y),{oobCode:d,newPassword:h})})).apply(this,arguments)}function Yr(){return Yr=(0,g.Z)(function*(y,d){yield function Ai(y,d){return As.apply(this,arguments)}((0,q.m9)(y),{oobCode:d})}),Yr.apply(this,arguments)}function Gr(y,d){return sr.apply(this,arguments)}function sr(){return(sr=(0,g.Z)(function*(y,d){const h=(0,q.m9)(y),w=yield ki(h,{oobCode:d}),B=w.requestType;switch(me(B,h,"internal-error"),B){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":me(w.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":me(w.mfaInfo,h,"internal-error");default:me(w.email,h,"internal-error")}let Z=null;return w.mfaInfo&&(Z=It._fromServerResponse(Ln(h),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:Z},operation:B}})).apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(y,d){const{data:h}=yield Gr((0,q.m9)(y),d);return h.email})).apply(this,arguments)}function ni(){return ni=(0,g.Z)(function*(y,d,h){var w;const B=Ln(y),Z={returnSecureToken:!0,email:d,password:h,clientType:"CLIENT_TYPE_WEB"};let Ee;if(null!==(w=B._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Nt=yield Ft(B,Z,"signUpPassword");Ee=Us(B,Nt)}else Ee=Us(B,Z).catch(function(){var Nt=(0,g.Z)(function*(kt){if("auth/missing-recaptcha-token"===kt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const pn=yield Ft(B,Z,"signUpPassword");return Us(B,pn)}return Promise.reject(kt)});return function(kt){return Nt.apply(this,arguments)}}());const Ye=yield Ee.catch(Nt=>Promise.reject(Nt)),Ot=yield Ar._fromIdTokenResponse(B,"signIn",Ye);return yield B._updateCurrentUser(Ot.user),Ot}),ni.apply(this,arguments)}function Ms(){return Ms=(0,g.Z)(function*(y,d,h){var w;const B=Ln(y),Z={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};function Ee(Ye,Ot){me(Ot.handleCodeInApp,B,"argument-error"),Ot&&En(B,Ye,Ot)}if(null!==(w=B._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Ye=yield Ft(B,Z,"getOobCode",!0);Ee(Ye,h),yield Tt(B,Ye)}else Ee(Z,h),yield Tt(B,Z).catch(function(){var Ye=(0,g.Z)(function*(Ot){if("auth/missing-recaptcha-token"!==Ot.code)return Promise.reject(Ot);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Nt=yield Ft(B,Z,"getOobCode",!0);Ee(Nt,h),yield Tt(B,Nt)}});return function(Ot){return Ye.apply(this,arguments)}}())}),Ms.apply(this,arguments)}function aa(){return(aa=(0,g.Z)(function*(y,d,h){const w=(0,q.m9)(y),B=hs.credentialWithLink(d,h||ft());return me(B._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ds(w,B)})).apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:createAuthUri",xt(y,d))})).apply(this,arguments)}function Fo(){return Fo=(0,g.Z)(function*(y,d){const w={identifier:d,continueUri:Dt()?ft():"http://localhost"},{signinMethods:B}=yield function Xo(y,d){return Io.apply(this,arguments)}((0,q.m9)(y),w);return B||[]}),Fo.apply(this,arguments)}function Lo(){return Lo=(0,g.Z)(function*(y,d){const h=(0,q.m9)(y),B={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&En(h.auth,B,d);const{email:Z}=yield function xe(y,d){return Ie.apply(this,arguments)}(h.auth,B);Z!==y.email&&(yield y.reload())}),Lo.apply(this,arguments)}function Co(){return Co=(0,g.Z)(function*(y,d,h){const w=(0,q.m9)(y),Z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};h&&En(w.auth,Z,h);const{email:Ee}=yield function bn(y,d){return Dn.apply(this,arguments)}(w.auth,Z);Ee!==y.email&&(yield y.reload())}),Co.apply(this,arguments)}function va(){return(va=(0,g.Z)(function*(y,d){return Rt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ea(){return Ea=(0,g.Z)(function*(y,{displayName:d,photoURL:h}){if(void 0===d&&void 0===h)return;const w=(0,q.m9)(y),Z={idToken:yield w.getIdToken(),displayName:d,photoUrl:h,returnSecureToken:!0},Ee=yield zt(w,function Xa(y,d){return va.apply(this,arguments)}(w.auth,Z));w.displayName=Ee.displayName||null,w.photoURL=Ee.photoUrl||null;const Ye=w.providerData.find(({providerId:Ot})=>"password"===Ot);Ye&&(Ye.displayName=w.displayName,Ye.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Ee)}),Ea.apply(this,arguments)}function ri(y,d,h){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,g.Z)(function*(y,d,h){const{auth:w}=y,Z={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(Z.email=d),h&&(Z.password=h);const Ee=yield zt(y,_s(w,Z));yield y._updateTokensIfNecessary(Ee,!0)})).apply(this,arguments)}class bo{constructor(d,h,w={}){this.isNewUser=d,this.providerId=h,this.profile=w}}class Iu extends bo{constructor(d,h,w,B){super(d,h,w),this.username=B}}class ta extends bo{constructor(d,h){super(d,"facebook.com",h)}}class Il extends Iu{constructor(d,h){super(d,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class gs extends bo{constructor(d,h){super(d,"google.com",h)}}class wa extends Iu{constructor(d,h,w){super(d,"twitter.com",h,w)}}function Ir(y){const{user:d,_tokenResponse:h}=y;return d.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function xs(y){var d,h;if(!y)return null;const{providerId:w}=y,B=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},Z=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const Ee=null===(h=null===(d=zn(y.idToken))||void 0===d?void 0:d.firebase)||void 0===h?void 0:h.sign_in_provider;if(Ee)return new bo(Z,"anonymous"!==Ee&&"custom"!==Ee?Ee:null)}if(!w)return null;switch(w){case"facebook.com":return new ta(Z,B);case"github.com":return new Il(Z,B);case"google.com":return new gs(Z,B);case"twitter.com":return new wa(Z,B,y.screenName||null);case"custom":case"anonymous":return new bo(Z,null);default:return new bo(Z,w,B)}}(h)}class Sn{constructor(d,h,w){this.type=d,this.credential=h,this.auth=w}static _fromIdtoken(d,h){return new Sn("enroll",d,h)}static _fromMfaPendingCredential(d){return new Sn("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var h,w;if(d?.multiFactorSession){if(null!==(h=d.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Sn._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(w=d.multiFactorSession)&&void 0!==w&&w.idToken)return Sn._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Un{constructor(d,h,w){this.session=d,this.hints=h,this.signInResolver=w}static _fromError(d,h){const w=Ln(d),B=h.customData._serverResponse,Z=(B.mfaInfo||[]).map(Ye=>It._fromServerResponse(w,Ye));me(B.mfaPendingCredential,w,"internal-error");const Ee=Sn._fromMfaPendingCredential(B.mfaPendingCredential);return new Un(Ee,Z,function(){var Ye=(0,g.Z)(function*(Ot){const Nt=yield Ot._process(w,Ee);delete B.mfaInfo,delete B.mfaPendingCredential;const kt=Object.assign(Object.assign({},B),{idToken:Nt.idToken,refreshToken:Nt.refreshToken});switch(h.operationType){case"signIn":const pn=yield Ar._fromIdTokenResponse(w,h.operationType,kt);return yield w._updateCurrentUser(pn.user),pn;case"reauthenticate":return me(h.user,w,"internal-error"),Ar._forOperation(h.user,h.operationType,kt);default:se(w,"internal-error")}});return function(Ot){return Ye.apply(this,arguments)}}())}resolveSignIn(d){var h=this;return(0,g.Z)(function*(){return h.signInResolver(d)})()}}class Li{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(w=>It._fromServerResponse(d.auth,w)))})}static _fromUser(d){return new Li(d)}getSession(){var d=this;return(0,g.Z)(function*(){return Sn._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,h){var w=this;return(0,g.Z)(function*(){const B=d,Z=yield w.getSession(),Ee=yield zt(w.user,B._process(w.user.auth,Z,h));return yield w.user._updateTokensIfNecessary(Ee),w.user.reload()})()}unenroll(d){var h=this;return(0,g.Z)(function*(){const w="string"==typeof d?d:d.uid,B=yield h.user.getIdToken();try{const Z=yield zt(h.user,function fo(y,d){return Rt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",xt(y,d))}(h.user.auth,{idToken:B,mfaEnrollmentId:w}));h.enrolledFactors=h.enrolledFactors.filter(({uid:Ee})=>Ee!==w),yield h.user._updateTokensIfNecessary(Z),yield h.user.reload()}catch(Z){throw Z}})()}}const os=new WeakMap,Bs="__sak";class eu{constructor(d,h){this.storageRetriever=d,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Bs,"1"),this.storage.removeItem(Bs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,h){return this.storage.setItem(d,JSON.stringify(h)),Promise.resolve()}_get(d){const h=this.storage.getItem(d);return Promise.resolve(h?JSON.parse(h):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const So=(()=>{class y extends eu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,w)=>this.onStorageEvent(h,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Du(){const y=(0,q.z$)();return $e(y)||ut(y)}()&&function cr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=rr(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const w of Object.keys(this.listeners)){const B=this.storage.getItem(w),Z=this.localCache[w];B!==Z&&h(w,Z,B)}}onStorageEvent(h,w=!1){if(!h.key)return void this.forAllChangedKeys((Ye,Ot,Nt)=>{this.notifyListeners(Ye,Nt)});const B=h.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ye=this.storage.getItem(B);if(h.newValue!==Ye)null!==h.newValue?this.storage.setItem(B,h.newValue):this.storage.removeItem(B);else if(this.localCache[B]===h.newValue&&!w)return}const Z=()=>{const Ye=this.storage.getItem(B);!w&&this.localCache[B]===Ye||this.notifyListeners(B,Ye)},Ee=this.storage.getItem(B);!function On(){return(0,q.w1)()&&10===document.documentMode}()||Ee===h.newValue||h.newValue===h.oldValue?Z():setTimeout(Z,10)}notifyListeners(h,w){this.localCache[h]=w;const B=this.listeners[h];if(B)for(const Z of Array.from(B))Z(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,w,B)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:w,newValue:B}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(w)}_removeListener(h,w){this.listeners[h]&&(this.listeners[h].delete(w),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,w){var B=()=>super._set,Z=this;return(0,g.Z)(function*(){yield B().call(Z,h,w),Z.localCache[h]=JSON.stringify(w)})()}_get(h){var w=()=>super._get,B=this;return(0,g.Z)(function*(){const Z=yield w().call(B,h);return B.localCache[h]=JSON.stringify(Z),Z})()}_remove(h){var w=()=>super._remove,B=this;return(0,g.Z)(function*(){yield w().call(B,h),delete B.localCache[h]})()}}return y.type="LOCAL",y})(),si=(()=>{class y extends eu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,w){}_removeListener(h,w){}}return y.type="SESSION",y})();let po=(()=>{class y{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const w=this.receivers.find(Z=>Z.isListeningto(h));if(w)return w;const B=new y(h);return this.receivers.push(B),B}isListeningto(h){return this.eventTarget===h}handleEvent(h){var w=this;return(0,g.Z)(function*(){const B=h,{eventId:Z,eventType:Ee,data:Ye}=B.data,Ot=w.handlersMap[Ee];if(!Ot?.size)return;B.ports[0].postMessage({status:"ack",eventId:Z,eventType:Ee});const Nt=Array.from(Ot).map(function(){var pn=(0,g.Z)(function*(Si){return Si(B.origin,Ye)});return function(Si){return pn.apply(this,arguments)}}()),kt=yield function ua(y){return Promise.all(y.map(function(){var d=(0,g.Z)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(w){return{fulfilled:!1,reason:w}}});return function(h){return d.apply(this,arguments)}}()))}(Nt);B.ports[0].postMessage({status:"done",eventId:Z,eventType:Ee,response:kt})})()}_subscribe(h,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(w)}_unsubscribe(h,w){this.handlersMap[h]&&w&&this.handlersMap[h].delete(w),(!w||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ia(y="",d=10){let h="";for(let w=0;w<d;w++)h+=Math.floor(10*Math.random());return y+h}class Dl{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,h,w=50){var B=this;return(0,g.Z)(function*(){const Z=typeof MessageChannel<"u"?new MessageChannel:null;if(!Z)throw new Error("connection_unavailable");let Ee,Ye;return new Promise((Ot,Nt)=>{const kt=Ia("",20);Z.port1.start();const pn=setTimeout(()=>{Nt(new Error("unsupported_event"))},w);Ye={messageChannel:Z,onMessage(Si){const Go=Si;if(Go.data.eventId===kt)switch(Go.data.status){case"ack":clearTimeout(pn),Ee=setTimeout(()=>{Nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ee),Ot(Go.data.response);break;default:clearTimeout(pn),clearTimeout(Ee),Nt(new Error("invalid_response"))}}},B.handlers.add(Ye),Z.port1.addEventListener("message",Ye.onMessage),B.target.postMessage({eventType:d,eventId:kt,data:h},[Z.port2])}).finally(()=>{Ye&&B.removeMessageHandler(Ye)})})()}}function ct(){return window}function as(){return typeof ct().WorkerGlobalScope<"u"&&"function"==typeof ct().importScripts}function en(){return(en=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Yt="firebaseLocalStorageDb",Ze=1,St="firebaseLocalStorage",Ii="fbase_key";class es{constructor(d){this.request=d}toPromise(){return new Promise((d,h)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function na(y,d){return y.transaction([St],d?"readwrite":"readonly").objectStore(St)}function ju(){const y=indexedDB.open(Yt,Ze);return new Promise((d,h)=>{y.addEventListener("error",()=>{h(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(St,{keyPath:Ii})}catch(B){h(B)}}),y.addEventListener("success",(0,g.Z)(function*(){const w=y.result;w.objectStoreNames.contains(St)?d(w):(w.close(),yield function ka(){const y=indexedDB.deleteDatabase(Yt);return new es(y).toPromise()}(),d(yield ju()))}))})}function Da(y,d,h){return $o.apply(this,arguments)}function $o(){return($o=(0,g.Z)(function*(y,d,h){const w=na(y,!0).put({[Ii]:d,value:h});return new es(w).toPromise()})).apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,d){const h=na(y,!1).get(d),w=yield new es(h).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ru(y,d){const h=na(y,!0).delete(d);return new es(h).toPromise()}const Rs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,g.Z)(function*(){return h.db||(h.db=yield ju()),h.db})()}_withRetries(h){var w=this;return(0,g.Z)(function*(){let B=0;for(;;)try{const Z=yield w._openDb();return yield h(Z)}catch(Z){if(B++>3)throw Z;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,g.Z)(function*(){return as()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,g.Z)(function*(){h.receiver=po._getInstance(function ms(){return as()?self:null}()),h.receiver._subscribe("keyChanged",function(){var w=(0,g.Z)(function*(B,Z){return{keyProcessed:(yield h._poll()).includes(Z.key)}});return function(B,Z){return w.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var w=(0,g.Z)(function*(B,Z){return["keyChanged"]});return function(B,Z){return w.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,g.Z)(function*(){var w,B;if(h.activeServiceWorker=yield function tu(){return en.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Dl(h.activeServiceWorker);const Z=yield h.sender._send("ping",{},800);Z&&null!==(w=Z[0])&&void 0!==w&&w.fulfilled&&null!==(B=Z[0])&&void 0!==B&&B.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var w=this;return(0,g.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function mn(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:h},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const h=yield ju();return yield Da(h,Bs,"1"),yield ru(h,Bs),!0}catch{}return!1})()}_withPendingWrite(h){var w=this;return(0,g.Z)(function*(){w.pendingWrites++;try{yield h()}finally{w.pendingWrites--}})()}_set(h,w){var B=this;return(0,g.Z)(function*(){return B._withPendingWrite((0,g.Z)(function*(){return yield B._withRetries(Z=>Da(Z,h,w)),B.localCache[h]=w,B.notifyServiceWorker(h)}))})()}_get(h){var w=this;return(0,g.Z)(function*(){const B=yield w._withRetries(Z=>function Ca(y,d){return nu.apply(this,arguments)}(Z,h));return w.localCache[h]=B,B})()}_remove(h){var w=this;return(0,g.Z)(function*(){return w._withPendingWrite((0,g.Z)(function*(){return yield w._withRetries(B=>ru(B,h)),delete w.localCache[h],w.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,g.Z)(function*(){const w=yield h._withRetries(Ee=>{const Ye=na(Ee,!1).getAll();return new es(Ye).toPromise()});if(!w)return[];if(0!==h.pendingWrites)return[];const B=[],Z=new Set;for(const{fbase_key:Ee,value:Ye}of w)Z.add(Ee),JSON.stringify(h.localCache[Ee])!==JSON.stringify(Ye)&&(h.notifyListeners(Ee,Ye),B.push(Ee));for(const Ee of Object.keys(h.localCache))h.localCache[Ee]&&!Z.has(Ee)&&(h.notifyListeners(Ee,null),B.push(Ee));return B})()}notifyListeners(h,w){this.localCache[h]=w;const B=this.listeners[h];if(B)for(const Z of Array.from(B))Z(w)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(w)}_removeListener(h,w){this.listeners[h]&&(this.listeners[h].delete(w),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),Su=1e12;class Vi{constructor(d){this.auth=d,this.counter=Su,this._widgets=new Map}render(d,h){const w=this.counter;return this._widgets.set(w,new Qt(d,this.auth.name,h||{})),this.counter++,w}reset(d){var h;const w=d||Su;null===(h=this._widgets.get(w))||void 0===h||h.delete(),this._widgets.delete(w)}getResponse(d){var h;return(null===(h=this._widgets.get(d||Su))||void 0===h?void 0:h.getResponse())||""}execute(d){var h=this;return(0,g.Z)(function*(){var w;return null===(w=h._widgets.get(d||Su))||void 0===w||w.execute(),""})()}}class Qt{constructor(d,h,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const B="string"==typeof d?document.getElementById(d):d;me(B,"argument-error",{appName:h}),this.container=B,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ba(y){const d=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)d.push(h.charAt(Math.floor(Math.random()*h.length)));return d.join("")}(50);const{callback:d,"expired-callback":h}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hu=Zr("rcb"),Ta=new Je(3e4,6e4);class Gu{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=ct().grecaptcha)||void 0===d||!d.render)}load(d,h=""){return me(function Cl(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(h),d,"argument-error"),this.shouldResolveImmediately(h)&&Tn(ct().grecaptcha)?Promise.resolve(ct().grecaptcha):new Promise((w,B)=>{const Z=ct().setTimeout(()=>{B(he(d,"network-request-failed"))},Ta.get());ct()[Hu]=()=>{ct().clearTimeout(Z),delete ct()[Hu];const Ye=ct().grecaptcha;if(!Ye||!Tn(Ye))return void B(he(d,"internal-error"));const Ot=Ye.render;Ye.render=(Nt,kt)=>{const pn=Ot(Nt,kt);return this.counter++,pn},this.hostLanguage=h,w(Ye)},gr(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:Hu,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(Z),B(he(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var h;return!(null===(h=ct().grecaptcha)||void 0===h||!h.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ci{load(d){return(0,g.Z)(function*(){return new Vi(d)})()}clearedOneInstance(){}}const Aa="recaptcha",Fa={theme:"light",type:"image"};class Ps{constructor(d,h=Object.assign({},Fa),w){this.parameters=h,this.type=Aa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(w),this.isInvisible="invisible"===this.parameters.size,me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const B="string"==typeof d?document.getElementById(d):d;me(B,this.auth,"argument-error"),this.container=B,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ci:new Gu,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const h=yield d.render(),w=d.getAssertedRecaptcha();return w.getResponse(h)||new Promise(Z=>{const Ee=Ye=>{Ye&&(d.tokenChangeListeners.delete(Ee),Z(Ye))};d.tokenChangeListeners.add(Ee),d.isInvisible&&w.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return h=>{if(this.tokenChangeListeners.forEach(w=>w(h)),"function"==typeof d)d(h);else if("string"==typeof d){const w=ct()[d];"function"==typeof w&&w(h)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let h=d.container;if(!d.isInvisible){const w=document.createElement("div");h.appendChild(w),h=w}d.widgetId=d.getAssertedRecaptcha().render(h,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){me(Dt()&&!as(),d.auth,"internal-error"),yield function $s(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const h=yield function ze(y){return wt.apply(this,arguments)}(d.auth);me(h,d.auth,"internal-error"),d.parameters.sitekey=h})()}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class io{constructor(d,h){this.verificationId=d,this.onConfirmation=h}confirm(d){const h=ds._fromVerification(this.verificationId,d);return this.onConfirmation(h)}}function js(){return(js=(0,g.Z)(function*(y,d,h){const w=Ln(y),B=yield U(w,d,(0,q.m9)(h));return new io(B,Z=>Ds(w,Z))})).apply(this,arguments)}function _(){return(_=(0,g.Z)(function*(y,d,h){const w=(0,q.m9)(y);yield ws(!1,w,"phone");const B=yield U(w.auth,d,(0,q.m9)(h));return new io(B,Z=>N(w,Z))})).apply(this,arguments)}function T(){return(T=(0,g.Z)(function*(y,d,h){const w=(0,q.m9)(y),B=yield U(w.auth,d,(0,q.m9)(h));return new io(B,Z=>I(w,Z))})).apply(this,arguments)}function U(y,d,h){return K.apply(this,arguments)}function K(){return K=(0,g.Z)(function*(y,d,h){var w;const B=yield h.verify();try{let Z;if(me("string"==typeof B,y,"argument-error"),me(h.type===Aa,y,"argument-error"),Z="string"==typeof d?{phoneNumber:d}:d,"session"in Z){const Ee=Z.session;if("phoneNumber"in Z)return me("enroll"===Ee.type,y,"internal-error"),(yield function er(y,d){return Rt(y,"POST","/v2/accounts/mfaEnrollment:start",xt(y,d))}(y,{idToken:Ee.credential,phoneEnrollmentInfo:{phoneNumber:Z.phoneNumber,recaptchaToken:B}})).phoneSessionInfo.sessionInfo;{me("signin"===Ee.type,y,"internal-error");const Ye=(null===(w=Z.multiFactorHint)||void 0===w?void 0:w.uid)||Z.multiFactorUid;return me(Ye,y,"missing-multi-factor-info"),(yield function ca(y,d){return Rt(y,"POST","/v2/accounts/mfaSignIn:start",xt(y,d))}(y,{mfaPendingCredential:Ee.credential,mfaEnrollmentId:Ye,phoneSignInInfo:{recaptchaToken:B}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ee}=yield function Oo(y,d){return uo.apply(this,arguments)}(y,{phoneNumber:Z.phoneNumber,recaptchaToken:B});return Ee}}finally{h._reset()}}),K.apply(this,arguments)}function Fe(){return(Fe=(0,g.Z)(function*(y,d){yield pi((0,q.m9)(y),d)})).apply(this,arguments)}let mt=(()=>{class y{constructor(h){this.providerId=y.PROVIDER_ID,this.auth=Ln(h)}verifyPhoneNumber(h,w){return U(this.auth,h,(0,q.m9)(w))}static credential(h,w){return ds._fromVerification(h,w)}static credentialFromResult(h){return y.credentialFromTaggedObject(h)}static credentialFromError(h){return y.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:w,temporaryProof:B}=h;return w&&B?ds._fromTokenResponse(w,B):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Zt(y,d){return d?Ct(d):(me(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class qt extends $i{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return vi(d,this._buildIdpRequest())}_linkToIdToken(d,h){return vi(d,this._buildIdpRequest(h))}_getReauthenticationResolver(d){return vi(d,this._buildIdpRequest())}_buildIdpRequest(d){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(h.idToken=d),h}}function Rr(y){return wo(y.auth,new qt(y),y.bypassAuthState)}function ts(y){const{auth:d,user:h}=y;return me(h,d,"internal-error"),Hi(h,new qt(y),y.bypassAuthState)}function bi(y){return bs.apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(y){const{auth:d,user:h}=y;return me(h,d,"internal-error"),pi(h,new qt(y),y.bypassAuthState)})).apply(this,arguments)}class so{constructor(d,h,w,B,Z=!1){this.auth=d,this.resolver=w,this.user=B,this.bypassAuthState=Z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var d=this;return new Promise(function(){var h=(0,g.Z)(function*(w,B){d.pendingPromise={resolve:w,reject:B};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(Z){d.reject(Z)}});return function(w,B){return h.apply(this,arguments)}}())}onAuthEvent(d){var h=this;return(0,g.Z)(function*(){const{urlResponse:w,sessionId:B,postBody:Z,tenantId:Ee,error:Ye,type:Ot}=d;if(Ye)return void h.reject(Ye);const Nt={auth:h.auth,requestUri:w,sessionId:B,tenantId:Ee||void 0,postBody:Z||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(Ot)(Nt))}catch(kt){h.reject(kt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Rr;case"linkViaPopup":case"linkViaRedirect":return bi;case"reauthViaPopup":case"reauthViaRedirect":return ts;default:se(this.auth,"internal-error")}}resolve(d){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ti=new Je(2e3,1e4);function La(){return(La=(0,g.Z)(function*(y,d,h){const w=Ln(y);Ge(y,d,Ei);const B=Zt(w,h);return new qu(w,"signInViaPopup",d,B).executeNotNull()})).apply(this,arguments)}function Ao(){return(Ao=(0,g.Z)(function*(y,d,h){const w=(0,q.m9)(y);Ge(w.auth,d,Ei);const B=Zt(w.auth,h);return new qu(w.auth,"reauthViaPopup",d,B,w).executeNotNull()})).apply(this,arguments)}function Au(){return(Au=(0,g.Z)(function*(y,d,h){const w=(0,q.m9)(y);Ge(w.auth,d,Ei);const B=Zt(w.auth,h);return new qu(w.auth,"linkViaPopup",d,B,w).executeNotNull()})).apply(this,arguments)}let qu=(()=>{class y extends so{constructor(h,w,B,Z,Ee){super(h,w,Z,Ee),this.provider=B,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var h=this;return(0,g.Z)(function*(){const w=yield h.execute();return me(w,h.auth,"internal-error"),w})()}onExecution(){var h=this;return(0,g.Z)(function*(){pt(1===h.filter.length,"Popup operations only handle one event");const w=Ia();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],w),h.authWindow.associatedEvent=w,h.resolver._originValidation(h.auth).catch(B=>{h.reject(B)}),h.resolver._isIframeWebStorageSupported(h.auth,B=>{B||h.reject(he(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(he(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const h=()=>{var w,B;this.pollId=null!==(B=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==B&&B.closed?window.setTimeout(()=>{this.pollId=null,this.reject(he(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,Ti.get())};h()}}return y.currentPopupAction=null,y})();const su="pendingRedirect",ou=new Map;class qd extends so{constructor(d,h,w=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,w),this.eventId=null}execute(){var d=()=>super.execute,h=this;return(0,g.Z)(function*(){let w=ou.get(h.auth._key());if(!w){try{const Z=(yield function nc(y,d){return Wc.apply(this,arguments)}(h.resolver,h.auth))?yield d().call(h):null;w=()=>Promise.resolve(Z)}catch(B){w=()=>Promise.reject(B)}ou.set(h.auth._key(),w)}return h.bypassAuthState||ou.set(h.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(d){var h=()=>super.onAuthEvent,w=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return h().call(w,d);if("unknown"!==d.type){if(d.eventId){const B=yield w.auth._redirectUserForId(d.eventId);if(B)return w.user=B,h().call(w,d);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Wc(){return(Wc=(0,g.Z)(function*(y,d){const h=rc(d),w=Kc(y);if(!(yield w._isAvailable()))return!1;const B="true"===(yield w._get(h));return yield w._remove(h),B})).apply(this,arguments)}function au(y,d){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,g.Z)(function*(y,d){return Kc(y)._set(rc(d),"true")})).apply(this,arguments)}function qc(y,d){ou.set(y._key(),d)}function Kc(y){return Ct(y._redirectPersistence)}function rc(y){return ue(su,y.config.apiKey,y.name)}function Kd(y,d,h){return function Zd(y,d,h){return ic.apply(this,arguments)}(y,d,h)}function ic(){return(ic=(0,g.Z)(function*(y,d,h){const w=Ln(y);Ge(y,d,Ei),yield w._initializationPromise;const B=Zt(w,h);return yield au(B,w),B._openRedirect(w,d,"signInViaRedirect")})).apply(this,arguments)}function Yd(y,d,h){return function Ku(y,d,h){return bl.apply(this,arguments)}(y,d,h)}function bl(){return(bl=(0,g.Z)(function*(y,d,h){const w=(0,q.m9)(y);Ge(w.auth,d,Ei),yield w.auth._initializationPromise;const B=Zt(w.auth,h);yield au(B,w.auth);const Z=yield uu(w);return B._openRedirect(w.auth,d,"reauthViaRedirect",Z)})).apply(this,arguments)}function Zc(y,d,h){return function Yc(y,d,h){return Qc.apply(this,arguments)}(y,d,h)}function Qc(){return(Qc=(0,g.Z)(function*(y,d,h){const w=(0,q.m9)(y);Ge(w.auth,d,Ei),yield w.auth._initializationPromise;const B=Zt(w.auth,h);yield ws(!1,w,d.providerId),yield au(B,w.auth);const Z=yield uu(w);return B._openRedirect(w.auth,d,"linkViaRedirect",Z)})).apply(this,arguments)}function us(){return(us=(0,g.Z)(function*(y,d){return yield Ln(y)._initializationPromise,Zu(y,d,!1)})).apply(this,arguments)}function Zu(y,d){return da.apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(y,d,h=!1){const w=Ln(y),B=Zt(w,d),Ee=yield new qd(w,B,h).execute();return Ee&&!h&&(delete Ee.user._redirectEventId,yield w._persistUserIfCurrent(Ee.user),yield w._setRedirectUser(null,d)),Ee})).apply(this,arguments)}function uu(y){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(y){const d=Ia(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class zi{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let h=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(d,w)&&(h=!0,this.sendToConsumer(d,w),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function lu(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sl(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=d,h=!0)),h}sendToConsumer(d,h){var w;if(d.error&&!Sl(d)){const B=(null===(w=d.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";h.onError(he(this.auth,B))}else h.onAuthEvent(d)}isEventForConsumer(d,h){const w=null===h.eventId||!!d.eventId&&d.eventId===h.eventId;return h.filter.includes(d.type)&&w}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hi(d))}saveEventToCache(d){this.cachedEventUids.add(hi(d)),this.lastProcessedEventTime=Date.now()}}function hi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function Sl({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===d?.code}function Mo(y){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,g.Z)(function*(y,d={}){return Rt(y,"GET","/v1/projects",d)})).apply(this,arguments)}const rf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ls=/^https?/;function Hs(){return(Hs=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield Mo(y);for(const h of d)try{if(Ri(h))return}catch{}se(y,"unauthorized-domain")})).apply(this,arguments)}function Ri(y){const d=ft(),{protocol:h,hostname:w}=new URL(d);if(y.startsWith("chrome-extension://")){const Ee=new URL(y);return""===Ee.hostname&&""===w?"chrome-extension:"===h&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===h&&Ee.hostname===w}if(!ls.test(h))return!1;if(rf.test(y))return w===y;const B=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+B+"|"+B+")$","i").test(w)}const ha=new Je(3e4,6e4);function go(){const y=ct().___jsl;if(y?.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let h=0;h<y.CP.length;h++)y.CP[h]=null}let Va=null;const Ma=new Je(5e3,15e3),xa="__/auth/iframe",Qu="emulator/auth/iframe",Ba={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ju(y){const d=y.config;me(d.authDomain,y,"auth-domain-config-required");const h=d.emulator?at(d,Qu):`https://${y.config.authDomain}/${xa}`,w={apiKey:d.apiKey,appName:y.name,v:ye.SDK_VERSION},B=pa.get(y.config.apiHost);B&&(w.eid=B);const Z=y._getFrameworks();return Z.length&&(w.fw=Z.join(",")),`${h}?${(0,q.xO)(w).slice(1)}`}function M(){return M=(0,g.Z)(function*(y){const d=yield function cu(y){return Va=Va||function fa(y){return new Promise((d,h)=>{var w,B,Z;function Ee(){go(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{go(),h(he(y,"network-request-failed"))},timeout:ha.get()})}if(null!==(B=null===(w=ct().gapi)||void 0===w?void 0:w.iframes)&&void 0!==B&&B.Iframe)d(gapi.iframes.getContext());else{if(null===(Z=ct().gapi)||void 0===Z||!Z.load){const Ye=Zr("iframefcb");return ct()[Ye]=()=>{gapi.load?Ee():h(he(y,"network-request-failed"))},gr(`https://apis.google.com/js/api.js?onload=${Ye}`).catch(Ot=>h(Ot))}Ee()}}).catch(d=>{throw Va=null,d})}(y),Va}(y),h=ct().gapi;return me(h,y,"internal-error"),d.open({where:document.body,url:Ju(y),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ba,dontclear:!0},w=>new Promise(function(){var B=(0,g.Z)(function*(Z,Ee){yield w.restyle({setHideOnLeave:!1});const Ye=he(y,"network-request-failed"),Ot=ct().setTimeout(()=>{Ee(Ye)},Ma.get());function Nt(){ct().clearTimeout(Ot),Z(w)}w.ping(Nt).then(Nt,()=>{Ee(Ye)})});return function(Z,Ee){return B.apply(this,arguments)}}()))}),M.apply(this,arguments)}const $={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},re=500,De=600,Ue="_blank",nt="http://localhost";class Ht{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Hn="__/auth/handler",Vn="emulator/auth/handler",xo=encodeURIComponent("fac");function cs(y,d,h,w,B,Z){return xu.apply(this,arguments)}function xu(){return(xu=(0,g.Z)(function*(y,d,h,w,B,Z){me(y.config.authDomain,y,"auth-domain-config-required"),me(y.config.apiKey,y,"invalid-api-key");const Ee={apiKey:y.config.apiKey,appName:y.name,authType:h,redirectUrl:w,v:ye.SDK_VERSION,eventId:B};if(d instanceof Ei){d.setDefaultLanguage(y.languageCode),Ee.providerId=d.providerId||"",(0,q.xb)(d.getCustomParameters())||(Ee.customParameters=JSON.stringify(d.getCustomParameters()));for(const[kt,pn]of Object.entries(Z||{}))Ee[kt]=pn}if(d instanceof wi){const kt=d.getScopes().filter(pn=>""!==pn);kt.length>0&&(Ee.scopes=kt.join(","))}y.tenantId&&(Ee.tid=y.tenantId);const Ye=Ee;for(const kt of Object.keys(Ye))void 0===Ye[kt]&&delete Ye[kt];const Ot=yield y._getAppCheckToken(),Nt=Ot?`#${xo}=${encodeURIComponent(Ot)}`:"";return`${function Xu({config:y}){return y.emulator?at(y,Vn):`https://${y.authDomain}/${Hn}`}(y)}?${(0,q.xO)(Ye).slice(1)}${Nt}`})).apply(this,arguments)}const $a="webStorageSupport",jo=class fi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=si,this._completeRedirectFn=Zu,this._overrideRedirectResult=qc}_openPopup(d,h,w,B){var Z=this;return(0,g.Z)(function*(){var Ee;pt(null===(Ee=Z.eventManagers[d._key()])||void 0===Ee?void 0:Ee.manager,"_initialize() not called before _openPopup()");const Ye=yield cs(d,h,w,ft(),B);return function Wt(y,d,h,w=re,B=De){const Z=Math.max((window.screen.availHeight-B)/2,0).toString(),Ee=Math.max((window.screen.availWidth-w)/2,0).toString();let Ye="";const Ot=Object.assign(Object.assign({},$),{width:w.toString(),height:B.toString(),top:Z,left:Ee}),Nt=(0,q.z$)().toLowerCase();h&&(Ye=Et(Nt)?Ue:h),lt(Nt)&&(d=d||nt,Ot.scrollbars="yes");const kt=Object.entries(Ot).reduce((Si,[Go,fu])=>`${Si}${Go}=${fu},`,"");if(function hn(y=(0,q.z$)()){var d;return ut(y)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Nt)&&"_self"!==Ye)return function yn(y,d){const h=document.createElement("a");h.href=y,h.target=d;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(w)}(d||"",Ye),new Ht(null);const pn=window.open(d||"",Ye,kt);me(pn,y,"popup-blocked");try{pn.focus()}catch{}return new Ht(pn)}(d,Ye,Ia())})()}_openRedirect(d,h,w,B){var Z=this;return(0,g.Z)(function*(){return yield Z._originValidation(d),function Ui(y){ct().location.href=y}(yield cs(d,h,w,ft(),B)),new Promise(()=>{})})()}_initialize(d){const h=d._key();if(this.eventManagers[h]){const{manager:B,promise:Z}=this.eventManagers[h];return B?Promise.resolve(B):(pt(Z,"If manager is not set, promise should be"),Z)}const w=this.initAndGetManager(d);return this.eventManagers[h]={promise:w},w.catch(()=>{delete this.eventManagers[h]}),w}initAndGetManager(d){var h=this;return(0,g.Z)(function*(){const w=yield function D(y){return M.apply(this,arguments)}(d),B=new zi(d);return w.register("authEvent",Z=>(me(Z?.authEvent,d,"invalid-auth-event"),{status:B.onEvent(Z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[d._key()]={manager:B},h.iframes[d._key()]=w,B})()}_isIframeWebStorageSupported(d,h){this.iframes[d._key()].send($a,{type:$a},B=>{var Z;const Ee=null===(Z=B?.[0])||void 0===Z?void 0:Z[$a];void 0!==Ee&&h(!!Ee),se(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function sc(y){return Hs.apply(this,arguments)}(d)),this.originValidationPromises[h]}get _shouldInitProactively(){return rr()||$e()||ut()}};class oi{constructor(d){this.factorId=d}_process(d,h,w){switch(h.type){case"enroll":return this._finalizeEnroll(d,h.credential,w);case"signin":return this._finalizeSignIn(d,h.credential);default:return Be("unexpected MultiFactorSessionType")}}}class ja extends oi{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new ja(d)}_finalizeEnroll(d,h,w){return function ii(y,d){return Rt(y,"POST","/v2/accounts/mfaEnrollment:finalize",xt(y,d))}(d,{idToken:h,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,h){return function Di(y,d){return Rt(y,"POST","/v2/accounts/mfaSignIn:finalize",xt(y,d))}(d,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Al=(()=>{class y{constructor(){}static assertion(h){return ja._fromCredential(h)}}return y.FACTOR_ID="phone",y})();var Dr="@firebase/auth";class Pu{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var h=this;return(0,g.Z)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const h=this.auth.onIdTokenChanged(w=>{d(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,h),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const h=this.internalListeners.get(d);h&&(this.internalListeners.delete(d),h(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tl(){return window}(0,q.Pz)("authIdTokenMaxAge"),function Qd(y){(0,ye._registerComponent)(new be.wA("auth",(d,{options:h})=>{const w=d.getProvider("app").getImmediate(),B=d.getProvider("heartbeat"),Z=d.getProvider("app-check-internal"),{apiKey:Ee,authDomain:Ye}=w.options;me(Ee&&!Ee.includes(":"),"invalid-api-key",{appName:w.name});const Ot={apiKey:Ee,authDomain:Ye,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ke(y)},Nt=new yi(w,B,Z,Ot);return function Yn(y,d){const h=d?.persistence||[],w=(Array.isArray(h)?h:[h]).map(Ct);d?.errorMap&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(w,d?.popupRedirectResolver)}(Nt,h),Nt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,h,w)=>{d.getProvider("auth-internal").initialize()})),(0,ye._registerComponent)(new be.wA("auth-internal",d=>{const h=Ln(d.getProvider("auth").getImmediate());return new Pu(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ye.registerVersion)(Dr,"0.23.2",function ed(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ye.registerVersion)(Dr,"0.23.2","esm2017")}("Browser");const Wp=2e3;function Ml(){return Ml=(0,g.Z)(function*(y,d,h){var w;const{BuildInfo:B}=tl();pt(d.sessionId,"AuthEvent did not contain a session ID");const Z=yield function ra(y){return Ou.apply(this,arguments)}(d.sessionId),Ee={};return ut()?Ee.ibi=B.packageName:ve()?Ee.apn=B.packageName:se(y,"operation-not-supported-in-this-environment"),B.displayName&&(Ee.appDisplayName=B.displayName),Ee.sessionId=Z,cs(y,h,d.type,void 0,null!==(w=d.eventId)&&void 0!==w?w:void 0,Ee)}),Ml.apply(this,arguments)}function xl(){return(xl=(0,g.Z)(function*(y){const{BuildInfo:d}=tl(),h={};ut()?h.iosBundleId=d.packageName:ve()?h.androidPackageName=d.packageName:se(y,"operation-not-supported-in-this-environment"),yield Mo(y,h)})).apply(this,arguments)}function nd(){return(nd=(0,g.Z)(function*(y,d,h){const{cordova:w}=tl();let B=()=>{};try{yield new Promise((Z,Ee)=>{let Ye=null;function Ot(){var pn;Z();const Si=null===(pn=w.plugins.browsertab)||void 0===pn?void 0:pn.close;"function"==typeof Si&&Si(),"function"==typeof h?.close&&h.close()}function Nt(){Ye||(Ye=window.setTimeout(()=>{Ee(he(y,"redirect-cancelled-by-user"))},Wp))}function kt(){"visible"===document?.visibilityState&&Nt()}d.addPassiveListener(Ot),document.addEventListener("resume",Nt,!1),ve()&&document.addEventListener("visibilitychange",kt,!1),B=()=>{d.removePassiveListener(Ot),document.removeEventListener("resume",Nt,!1),document.removeEventListener("visibilitychange",kt,!1),Ye&&window.clearTimeout(Ye)}})}finally{B()}})).apply(this,arguments)}function Ou(){return(Ou=(0,g.Z)(function*(y){const d=function oc(y){if(pt(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),h=new Uint8Array(d);for(let w=0;w<y.length;w++)h[w]=y.charCodeAt(w);return h}(y),h=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(h)).map(B=>B.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const id=20;class Zp extends zi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(h=>h(d)),super.onEvent(d)}initialized(){var d=this;return(0,g.Z)(function*(){yield d.initPromise})()}}function sd(y){return hu.apply(this,arguments)}function hu(){return(hu=(0,g.Z)(function*(y){const d=yield nl()._get(Nu(y));return d&&(yield nl()._remove(Nu(y))),d})).apply(this,arguments)}function uc(){const y=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let h=0;h<id;h++){const w=Math.floor(Math.random()*d.length);y.push(d.charAt(w))}return y.join("")}function nl(){return Ct(So)}function Nu(y){return ue("authEvent",y.config.apiKey,y.name)}function ku(y){if(!y?.includes("?"))return{};const[d,...h]=y.split("?");return(0,q.zd)(h.join("?"))}const Pl=class rl{constructor(){this._redirectPersistence=si,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Zu,this._overrideRedirectResult=qc}_initialize(d){var h=this;return(0,g.Z)(function*(){const w=d._key();let B=h.eventManagers.get(w);return B||(B=new Zp(d),h.eventManagers.set(w,B),h.attachCallbackListeners(d,B)),B})()}_openPopup(d){se(d,"operation-not-supported-in-this-environment")}_openRedirect(d,h,w,B){var Z=this;return(0,g.Z)(function*(){!function rd(y){var d,h,w,B,Z,Ee,Ye,Ot,Nt,kt;const pn=tl();me("function"==typeof(null===(d=pn?.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),me(typeof(null===(h=pn?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),me("function"==typeof(null===(Z=null===(B=null===(w=pn?.cordova)||void 0===w?void 0:w.plugins)||void 0===B?void 0:B.browsertab)||void 0===Z?void 0:Z.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(Ot=null===(Ye=null===(Ee=pn?.cordova)||void 0===Ee?void 0:Ee.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===Ot?void 0:Ot.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(kt=null===(Nt=pn?.cordova)||void 0===Nt?void 0:Nt.InAppBrowser)||void 0===kt?void 0:kt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Ee=yield Z._initialize(d);yield Ee.initialized(),Ee.resetRedirect(),function nf(){ou.clear()}(),yield Z._originValidation(d);const Ye=function ac(y,d,h=null){return{type:d,eventId:h,urlResponse:null,sessionId:uc(),postBody:null,tenantId:y.tenantId,error:he(y,"no-auth-event")}}(d,w,B);yield function du(y,d){return nl()._set(Nu(y),d)}(d,Ye);const Ot=yield function af(y,d,h){return Ml.apply(this,arguments)}(d,Ye,h),Nt=yield function qp(y){const{cordova:d}=tl();return new Promise(h=>{d.plugins.browsertab.isAvailable(w=>{let B=null;w?d.plugins.browsertab.openUrl(y):B=d.InAppBrowser.open(y,function bt(y=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),h(B)})})}(Ot);return function Kp(y,d,h){return nd.apply(this,arguments)}(d,Ee,Nt)})()}_isIframeWebStorageSupported(d,h){throw new Error("Method not implemented.")}_originValidation(d){const h=d._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function uf(y){return xl.apply(this,arguments)}(d)),this.originValidationPromises[h]}attachCallbackListeners(d,h){const{universalLinks:w,handleOpenURL:B,BuildInfo:Z}=tl(),Ee=setTimeout((0,g.Z)(function*(){yield sd(d),h.onEvent(od())}),500),Ye=function(){var kt=(0,g.Z)(function*(pn){clearTimeout(Ee);const Si=yield sd(d);let Go=null;Si&&pn?.url&&(Go=function eh(y,d){var h,w;const B=function mo(y){const d=ku(y),h=d.link?decodeURIComponent(d.link):void 0,w=ku(h).link,B=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return ku(B).link||B||w||h||y}(d);if(B.includes("/__/auth/callback")){const Z=ku(B),Ee=Z.firebaseError?function Ha(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(Z.firebaseError)):null,Ye=null===(w=null===(h=Ee?.code)||void 0===h?void 0:h.split("auth/"))||void 0===w?void 0:w[1],Ot=Ye?he(Ye):null;return Ot?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ot,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:B,postBody:null}}return null}(Si,pn.url)),h.onEvent(Go||od())});return function(Si){return kt.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,Ye);const Ot=B,Nt=`${Z.packageName.toLowerCase()}://`;tl().handleOpenURL=function(){var kt=(0,g.Z)(function*(pn){if(pn.toLowerCase().startsWith(Nt)&&Ye({url:pn}),"function"==typeof Ot)try{Ot(pn)}catch(Si){console.error(Si)}});return function(pn){return kt.apply(this,arguments)}}()}};function od(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:he("no-auth-event")}}const Yp=1e3;function Ho(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Gs(y=(0,q.z$)()){return!("file:"!==Ho()&&"ionic:"!==Ho()&&"capacitor:"!==Ho()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function ff(){try{const y=self.localStorage,d=Ia();if(y)return y.setItem(d,"1"),y.removeItem(d),!function za(y=(0,q.z$)()){return function Ga(){return(0,q.w1)()&&11===document?.documentMode}()||function hf(y=(0,q.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,q.hl)()}catch{return il()&&(0,q.hl)()}return!1}function il(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function lc(){return(function df(){return"http:"===Ho()||"https:"===Ho()}()||(0,q.ru)()||Gs())&&!function ad(){return(0,q.b$)()||(0,q.UG)()}()&&ff()&&!il()}function pf(){return Gs()&&typeof document<"u"}function Nl(){return(Nl=(0,g.Z)(function*(){return!!pf()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},Yp);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const Ro={LOCAL:"local",NONE:"none",SESSION:"session"},sl=me,ud="persistence";function th(y){return nh.apply(this,arguments)}function nh(){return(nh=(0,g.Z)(function*(y){yield y._initializationPromise;const d=ol(),h=ue(ud,y.config.apiKey,y.name);d&&d.setItem(h,y._getPersistence())})).apply(this,arguments)}function ol(){var y;try{return(null===(y=function cc(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const al=me;class oo{constructor(){this.browserResolver=Ct(jo),this.cordovaResolver=Ct(Pl),this.underlyingResolver=null,this._redirectPersistence=si,this._completeRedirectFn=Zu,this._overrideRedirectResult=qc}_initialize(d){var h=this;return(0,g.Z)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,h,w,B){var Z=this;return(0,g.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openPopup(d,h,w,B)})()}_openRedirect(d,h,w,B){var Z=this;return(0,g.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._openRedirect(d,h,w,B)})()}_isIframeWebStorageSupported(d,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,h)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return pf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return al(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,g.Z)(function*(){if(d.underlyingResolver)return;const h=yield function or(){return Nl.apply(this,arguments)}();d.underlyingResolver=h?d.cordovaResolver:d.browserResolver})()}}function ia(y){return y.unwrap()}function kl(y){return rh(y)}function rh(y){const{_tokenResponse:d}=y instanceof q.ZR?y.customData:y;if(!d)return null;if(!(y instanceof q.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return mt.credentialFromResult(y);const h=d.providerId;if(!h||h===Pe.PASSWORD)return null;let w;switch(h){case Pe.GOOGLE:w=Fs;break;case Pe.FACEBOOK:w=wr;break;case Pe.GITHUB:w=Js;break;case Pe.TWITTER:w=Xs;break;default:const{oauthIdToken:B,oauthAccessToken:Z,oauthTokenSecret:Ee,pendingToken:Ye,nonce:Ot}=d;return Z||Ee||B||Ye?Ye?h.startsWith("saml.")?fs._create(h,Ye):ss._fromParams({providerId:h,signInMethod:h,pendingToken:Ye,idToken:B,accessToken:Z}):new Ji(h).credential({idToken:B,accessToken:Z,rawNonce:Ot}):null}return y instanceof q.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function zs(y,d){return d.catch(h=>{throw h instanceof q.ZR&&function yf(y,d){var h;const w=null===(h=d.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===d?.code)d.resolver=new Wi(y,function Qr(y,d){var h;const w=(0,q.m9)(y),B=d;return me(d.customData.operationType,w,"argument-error"),me(null===(h=B.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,w,"argument-error"),Un._fromError(w,B)}(y,d));else if(w){const B=rh(d),Z=d;B&&(Z.credential=B,Z.tenantId=w.tenantId||void 0,Z.email=w.email||void 0,Z.phoneNumber=w.phoneNumber||void 0)}}(y,h),h}).then(h=>{const B=h.user;return{operationType:h.operationType,credential:kl(h),additionalUserInfo:Ir(h),user:ga.getOrCreate(B)}})}function ih(y,d){return ld.apply(this,arguments)}function ld(){return(ld=(0,g.Z)(function*(y,d){const h=yield d;return{verificationId:h.verificationId,confirm:w=>zs(y,h.confirm(w))}})).apply(this,arguments)}class Wi{constructor(d,h){this.resolver=h,this.auth=function mf(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return zs(ia(this.auth),this.resolver.resolveSignIn(d))}}class ga{constructor(d){this._delegate=d,this.multiFactor=function To(y){const d=(0,q.m9)(y);return os.has(d)||os.set(d,Li._fromUser(d)),os.get(d)}(d)}static getOrCreate(d){return ga.USER_MAP.has(d)||ga.USER_MAP.set(d,new ga(d)),ga.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var h=this;return(0,g.Z)(function*(){return zs(h.auth,N(h._delegate,d))})()}linkWithPhoneNumber(d,h){var w=this;return(0,g.Z)(function*(){return ih(w.auth,function E(y,d,h){return _.apply(this,arguments)}(w._delegate,d,h))})()}linkWithPopup(d){var h=this;return(0,g.Z)(function*(){return zs(h.auth,function Wu(y,d,h){return Au.apply(this,arguments)}(h._delegate,d,oo))})()}linkWithRedirect(d){var h=this;return(0,g.Z)(function*(){return yield th(Ln(h.auth)),Zc(h._delegate,d,oo)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var h=this;return(0,g.Z)(function*(){return zs(h.auth,I(h._delegate,d))})()}reauthenticateWithPhoneNumber(d,h){return ih(this.auth,function m(y,d,h){return T.apply(this,arguments)}(this._delegate,d,h))}reauthenticateWithPopup(d){return zs(this.auth,function Ua(y,d,h){return Ao.apply(this,arguments)}(this._delegate,d,oo))}reauthenticateWithRedirect(d){var h=this;return(0,g.Z)(function*(){return yield th(Ln(h.auth)),Yd(h._delegate,d,oo)})()}sendEmailVerification(d){return function Do(y,d){return Lo.apply(this,arguments)}(this._delegate,d)}unlink(d){var h=this;return(0,g.Z)(function*(){return yield function Jo(y,d){return xi.apply(this,arguments)}(h._delegate,d),h})()}updateEmail(d){return function Xi(y,d){return ri((0,q.m9)(y),d,null)}(this._delegate,d)}updatePassword(d){return function no(y,d){return ri((0,q.m9)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function te(y,d){return Fe.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ea(y,d){return Ea.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,h){return function Uo(y,d,h){return Co.apply(this,arguments)}(this._delegate,d,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ga.USER_MAP=new WeakMap;const Fu=me;let sh=(()=>{class y{constructor(h,w){if(this.app=h,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:B}=h.options;Fu(B,"invalid-api-key",{appName:h.name}),Fu(B,"invalid-api-key",{appName:h.name});const Z=typeof window<"u"?oo:void 0;this._delegate=w.initialize({options:{persistence:sa(B,h.name),popupRedirectResolver:Z}}),this._delegate._updateErrorMap(ot),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ga.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,w){!function Oi(y,d,h){const w=Ln(y);me(w._canInitEmulator,w,"emulator-config-failed"),me(/^https?:\/\//.test(d),w,"invalid-emulator-scheme");const B=!!h?.disableWarnings,Z=Ni(d),{host:Ee,port:Ye}=function ln(y){const d=Ni(y),h=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!h)return{host:"",port:null};const w=h[2].split("@").pop()||"",B=/^(\[[^\]]+\])(:|$)/.exec(w);if(B){const Z=B[1];return{host:Z,port:_i(w.substr(Z.length+1))}}{const[Z,Ee]=w.split(":");return{host:Z,port:_i(Ee)}}}(d);w.config.emulator={url:`${Z}//${Ee}${null===Ye?"":`:${Ye}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Ee,port:Ye,protocol:Z.replace(":",""),options:Object.freeze({disableWarnings:B})}),B||function ys(){function y(){const d=document.createElement("p"),h=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,h,w)}applyActionCode(h){return function di(y,d){return Yr.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return Gr(this._delegate,h)}confirmPasswordReset(h,w){return function Hr(y,d,h){return Lr.apply(this,arguments)}(this._delegate,h,w)}createUserWithEmailAndPassword(h,w){var B=this;return(0,g.Z)(function*(){return zs(B._delegate,function Ur(y,d,h){return ni.apply(this,arguments)}(B._delegate,h,w))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function Na(y,d){return Fo.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function _a(y,d){return"EMAIL_SIGNIN"===ks.parseLink(d)?.operation}(0,h)}getRedirectResult(){var h=this;return(0,g.Z)(function*(){Fu(lc(),h._delegate,"operation-not-supported-in-this-environment");const w=yield function Tl(y,d){return us.apply(this,arguments)}(h._delegate,oo);return w?zs(h._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function Ol(y,d){Ln(y)._logFramework(d)}(this._delegate,h)}onAuthStateChanged(h,w,B){const{next:Z,error:Ee,complete:Ye}=dc(h,w,B);return this._delegate.onAuthStateChanged(Z,Ee,Ye)}onIdTokenChanged(h,w,B){const{next:Z,error:Ee,complete:Ye}=dc(h,w,B);return this._delegate.onIdTokenChanged(Z,Ee,Ye)}sendSignInLinkToEmail(h,w){return function Cs(y,d,h){return Ms.apply(this,arguments)}(this._delegate,h,w)}sendPasswordResetEmail(h,w){return function Kn(y,d,h){return dr.apply(this,arguments)}(this._delegate,h,w||void 0)}setPersistence(h){var w=this;return(0,g.Z)(function*(){let B;switch(function Wa(y,d){sl(Object.values(Ro).includes(d),y,"invalid-persistence-type"),(0,q.b$)()?sl(d!==Ro.SESSION,y,"unsupported-persistence-type"):(0,q.UG)()?sl(d===Ro.NONE,y,"unsupported-persistence-type"):il()?sl(d===Ro.NONE||d===Ro.LOCAL&&(0,q.hl)(),y,"unsupported-persistence-type"):sl(d===Ro.NONE||ff(),y,"unsupported-persistence-type")}(w._delegate,h),h){case Ro.SESSION:B=si;break;case Ro.LOCAL:B=(yield Ct(Rs)._isAvailable())?Rs:So;break;case Ro.NONE:B=Xt;break;default:return se("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(B)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return zs(this._delegate,function ci(y){return ps.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return zs(this._delegate,Ds(this._delegate,h))}signInWithCustomToken(h){return zs(this._delegate,function ee(y,d){return Re.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,w){return zs(this._delegate,function Vs(y,d,h){return Ds((0,q.m9)(y),hs.credential(d,h))}(this._delegate,h,w))}signInWithEmailLink(h,w){return zs(this._delegate,function gi(y,d,h){return aa.apply(this,arguments)}(this._delegate,h,w))}signInWithPhoneNumber(h,w){return ih(this._delegate,function zu(y,d,h){return js.apply(this,arguments)}(this._delegate,h,w))}signInWithPopup(h){var w=this;return(0,g.Z)(function*(){return Fu(lc(),w._delegate,"operation-not-supported-in-this-environment"),zs(w._delegate,function Gi(y,d,h){return La.apply(this,arguments)}(w._delegate,h,oo))})()}signInWithRedirect(h){var w=this;return(0,g.Z)(function*(){return Fu(lc(),w._delegate,"operation-not-supported-in-this-environment"),yield th(w._delegate),Kd(w._delegate,h,oo)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function ti(y,d){return jr.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ro,y})();function dc(y,d,h){let w=y;"function"!=typeof y&&({next:w,error:d,complete:h}=y);const B=w;return{next:Ee=>B(Ee&&ga.getOrCreate(Ee)),error:d,complete:h}}function sa(y,d){const h=function gf(y,d){const h=ol();if(!h)return[];const w=ue(ud,y,d);switch(h.getItem(w)){case Ro.NONE:return[Xt];case Ro.LOCAL:return[Rs,si];case Ro.SESSION:return[si];default:return[]}}(y,d);if(typeof self<"u"&&!h.includes(Rs)&&h.push(Rs),typeof window<"u")for(const w of[So,si])h.includes(w)||h.push(w);return h.includes(Xt)||h.push(Xt),h}class ul{constructor(){this.providerId="phone",this._delegate=new mt(ia(W.Z.auth()))}static credential(d,h){return mt.credential(d,h)}verifyPhoneNumber(d,h){return this._delegate.verifyPhoneNumber(d,h)}unwrap(){return this._delegate}}ul.PHONE_SIGN_IN_METHOD=mt.PHONE_SIGN_IN_METHOD,ul.PROVIDER_ID=mt.PROVIDER_ID;const oh=me;class ll{constructor(d,h,w=W.Z.app()){var B;oh(null===(B=w.options)||void 0===B?void 0:B.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Ps(d,h,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Qp(y){y.INTERNAL.registerComponent(new be.wA("auth-compat",d=>{const h=d.getProvider("app-compat").getImmediate(),w=d.getProvider("auth");return new sh(h,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:_e_EMAIL_SIGNIN,PASSWORD_RESET:_e_PASSWORD_RESET,RECOVER_EMAIL:_e_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:_e_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:_e_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:_e_VERIFY_EMAIL}},EmailAuthProvider:hs,FacebookAuthProvider:wr,GithubAuthProvider:Js,GoogleAuthProvider:Fs,OAuthProvider:Ji,SAMLAuthProvider:Qo,PhoneAuthProvider:ul,PhoneMultiFactorGenerator:Al,RecaptchaVerifier:ll,TwitterAuthProvider:Xs,Auth:sh,AuthCredential:$i,Error:q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(W.Z)},1094:(jt,He,L)=>{L.d(He,{hx:()=>ht,yI:()=>rt});var g=L(5861),W=L(4650),q=L(4006),ye=L(6895);const ge=new W.OlP("ngx-mask config"),pe=new W.OlP("new ngx-mask config"),be=new W.OlP("initial ngx-mask config"),F={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new W.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},Pe=["Hh:m0:s0","Hh:m0","m0:s0"],le=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let ie=(()=>{class ke{constructor(z){this._config=z,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(O,se,he,Ve)=>{let Ge=[],Ae="";if(Array.isArray(he)){const Dt=new RegExp(he.map(Rn=>"[\\^$.|?*+()".indexOf(Rn)>=0?`\\${Rn}`:Rn).join("|"));Ge=O.split(Dt),Ae=O.match(Dt)?.[0]??""}else Ge=O.split(he),Ae=he;const me=Ge.length>1?`${Ae}${Ge[1]}`:"";let Be=Ge[0]??"";const pt=this.separatorLimit.replace(/\s/g,"");pt&&+pt&&(Be="-"===Be[0]?`-${Be.slice(1,Be.length).slice(0,pt.length)}`:Be.slice(0,pt.length));const ft=/(\d+)(\d{3})/;for(;se&&ft.test(Be);)Be=Be.replace(ft,"$1"+se+"$2");return void 0===Ve?Be+me:0===Ve?Be:Be+me.substring(0,Ve+1)},this.percentage=O=>Number(O)>=0&&Number(O)<=100,this.getPrecision=O=>{const se=O.split(".");return se.length>1?Number(se[se.length-1]):1/0},this.checkAndRemoveSuffix=O=>{for(let se=this.suffix?.length-1;se>=0;se--){const he=this.suffix.substring(se,this.suffix?.length);if(O.includes(he)&&se!==this.suffix?.length-1&&(se-1<0||!O.includes(this.suffix.substring(se-1,this.suffix?.length))))return O.replace(he,"")}return O},this.checkInputPrecision=(O,se,he)=>{if(se<1/0){if(Array.isArray(he)){const me=he.find(Be=>Be!==this.thousandSeparator);he=me||he[0]}const Ve=new RegExp(this._charToRegExpExpression(he)+`\\d{${se}}.*$`),Ae=(O.match(Ve)??[])[0]?.length??0;Ae-1>se&&(O=O.substring(0,O.length-(Ae-1-se))),0===se&&this._compareOrIncludes(O[O.length-1],he,this.thousandSeparator)&&(O=O.substring(0,O.length-1))}return O},this._shift=new Set,this.clearIfNotMatch=this._config.clearIfNotMatch,this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.maskSpecialCharacters=this._config.specialCharacters,this.maskAvailablePatterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.hiddenInput=this._config.hiddenInput,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime}applyMaskWithPattern(z,O){const[se,he]=O;return this.customPattern=he,this.applyMask(z,se)}applyMask(z,O,se=0,he=!1,Ve=!1,Ge=(()=>{})){if(!O||"string"!=typeof z)return"";let Ae=0,me="",Be=!1,pt=!1,ft=1,Dt=!1;z.slice(0,this.prefix.length)===this.prefix&&(z=z.slice(this.prefix.length,z.length)),this.suffix&&z?.length>0&&(z=this.checkAndRemoveSuffix(z));const Rn=z.toString().split("");if("IP"===O){const tt=z.split(".");this.ipError=this._validIP(tt),O="099.099.099.099"}const Qe=[];for(let tt=0;tt<z.length;tt++)z[tt]?.match("\\d")&&Qe.push(z[tt]??"");if("CPF_CNPJ"===O&&(this.cpfCnpjError=11!==Qe.length&&14!==Qe.length,O=Qe.length>11?"00.000.000/0000-00":"000.000.000-00"),O.startsWith("percent")){if(z.match("[a-z]|[A-Z]")||z.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){z=this._stripToDecimal(z);const tt=this.getPrecision(O);z=this.checkInputPrecision(z,tt,this.decimalMarker)}z.indexOf(".")>0&&!this.percentage(z.substring(0,z.indexOf(".")))&&(z=`${z.substring(0,z.indexOf(".")-1)}${z.substring(z.indexOf("."),z.length)}`),me=this.percentage(z)?z:z.substring(0,z.length-1)}else if(O.startsWith("separator")){(z.match("[w\u0430-\u044f\u0410-\u042f]")||z.match("[\u0401\u0451\u0410-\u044f]")||z.match("[a-z]|[A-Z]")||z.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||z.match("[^A-Za-z0-9,]"))&&(z=this._stripToDecimal(z)),z=z.length>1&&"0"===z[0]&&z[1]!==this.thousandSeparator&&!this._compareOrIncludes(z[1],this.decimalMarker,this.thousandSeparator)&&!Ve?z.slice(0,z.length-1):z,Ve&&(z=this._compareOrIncludes(z[z.length-1],this.decimalMarker,this.thousandSeparator)?z.slice(0,z.length-1):z);const tt=this._charToRegExpExpression(this.thousandSeparator);let Xe='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(tt,"");if(Array.isArray(this.decimalMarker))for(const nn of this.decimalMarker)Xe=Xe.replace(this._charToRegExpExpression(nn),"");else Xe=Xe.replace(this._charToRegExpExpression(this.decimalMarker),"");const xt=new RegExp("["+Xe+"]");(z.match(xt)||1===z.length&&this._compareOrIncludes(z,this.decimalMarker,this.thousandSeparator))&&(z=z.substring(0,z.length-1));const Rt=this.getPrecision(O),Pt=(z=this.checkInputPrecision(z,Rt,this.decimalMarker)).replace(new RegExp(tt,"g"),"");me=this._formatWithSeparators(Pt,this.thousandSeparator,this.decimalMarker,Rt);const vt=me.indexOf(",")-z.indexOf(","),tn=me.length-z.length;if(tn>0&&","!==me[se]){pt=!0;let nn=0;do{this._shift.add(se+nn),nn++}while(nn<tn)}else 0!==vt&&se>0&&!(me.indexOf(",")>=se&&se>3)||!(me.indexOf(".")>=se&&se>3)&&tn<=0?(this._shift.clear(),pt=!0,ft=tn,this._shift.add(se+=tn)):this._shift.clear()}else for(let tt=0,Xe=Rn[0];tt<Rn.length&&Ae!==O.length;tt++,Xe=Rn[tt]??"")if(this._checkSymbolMask(Xe,O[Ae]??"")&&"?"===O[Ae+1])me+=Xe,Ae+=2;else if("*"===O[Ae+1]&&Be&&this._checkSymbolMask(Xe,O[Ae+2]??""))me+=Xe,Ae+=3,Be=!1;else if(this._checkSymbolMask(Xe,O[Ae]??"")&&"*"===O[Ae+1])me+=Xe,Be=!0;else if("?"===O[Ae+1]&&this._checkSymbolMask(Xe,O[Ae+2]??""))me+=Xe,Ae+=3;else if(this._checkSymbolMask(Xe,O[Ae]??"")){if("H"===O[Ae]&&Number(Xe)>2){Ae+=1,this._shiftStep(O,Ae,Rn.length),tt--,this.leadZeroDateTime&&(me+="0");continue}if("h"===O[Ae]&&"2"===me&&Number(Xe)>3){Ae+=1,tt--;continue}if("m"===O[Ae]&&Number(Xe)>5){Ae+=1,this._shiftStep(O,Ae,Rn.length),tt--,this.leadZeroDateTime&&(me+="0");continue}if("s"===O[Ae]&&Number(Xe)>5){Ae+=1,this._shiftStep(O,Ae,Rn.length),tt--,this.leadZeroDateTime&&(me+="0");continue}const xt=31;if("d"===O[Ae]&&(Number(Xe)>3&&this.leadZeroDateTime||Number(z.slice(Ae,Ae+2))>xt||"/"===z[Ae+1])){Ae+=1,this._shiftStep(O,Ae,Rn.length),tt--,this.leadZeroDateTime&&(me+="0");continue}if("M"===O[Ae]){const Pt=0===Ae&&(Number(Xe)>2||Number(z.slice(Ae,Ae+2))>12||"/"===z[Ae+1]),vt=z.slice(Ae-3,Ae-1).includes("/")&&("/"===z[Ae-2]&&Number(z.slice(Ae-1,Ae+1))>12&&"/"!==z[Ae]||"/"===z[Ae]||"/"===z[Ae-3]&&Number(z.slice(Ae-2,Ae))>12&&"/"!==z[Ae-1]||"/"===z[Ae-1]),tn=Number(z.slice(Ae-3,Ae-1))<=xt&&!z.slice(Ae-3,Ae-1).includes("/")&&"/"===z[Ae-1]&&(Number(z.slice(Ae,Ae+2))>12||"/"===z[Ae+1]),nn=Number(z.slice(Ae-3,Ae-1))>xt&&!z.slice(Ae-3,Ae-1).includes("/")&&!z.slice(Ae-2,Ae).includes("/")&&Number(z.slice(Ae-2,Ae))>12,gn=Number(z.slice(Ae-3,Ae-1))<=xt&&!z.slice(Ae-3,Ae-1).includes("/")&&"/"!==z[Ae-1]&&Number(z.slice(Ae-1,Ae+1))>12;if(Number(Xe)>1&&this.leadZeroDateTime||Pt||vt||tn||nn||gn){Ae+=1,this._shiftStep(O,Ae,Rn.length),tt--,this.leadZeroDateTime&&(me+="0");continue}}me+=Xe,Ae++}else" "===Xe&&" "===O[Ae]?(me+=Xe,Ae++):-1!==this.maskSpecialCharacters.indexOf(O[Ae]??"")?(me+=O[Ae],Ae++,this._shiftStep(O,Ae,Rn.length),tt--):this.maskSpecialCharacters.indexOf(Xe)>-1&&this.maskAvailablePatterns[O[Ae]??""]&&this.maskAvailablePatterns[O[Ae]??""]?.optional?(Rn[Ae]&&"099.099.099.099"!==O&&"000.000.000-00"!==O&&"00.000.000/0000-00"!==O&&!O.match(/^9+\.0+$/)&&(me+=Rn[Ae]),Ae++,tt--):"*"===this.maskExpression[Ae+1]&&this._findSpecialChar(this.maskExpression[Ae+2]??"")&&this._findSpecialChar(Xe)===this.maskExpression[Ae+2]&&Be||"?"===this.maskExpression[Ae+1]&&this._findSpecialChar(this.maskExpression[Ae+2]??"")&&this._findSpecialChar(Xe)===this.maskExpression[Ae+2]&&Be?(Ae+=3,me+=Xe):this.showMaskTyped&&this.maskSpecialCharacters.indexOf(Xe)<0&&Xe!==this.placeHolderCharacter&&(Dt=!0);me.length+1===O.length&&-1!==this.maskSpecialCharacters.indexOf(O[O.length-1]??"")&&(me+=O[O.length-1]);let qe=se+1;for(;this._shift.has(qe);)ft++,qe++;let Je=he&&!O.startsWith("separator")?Ae:this._shift.has(se)?ft:0;Dt&&Je--,Ge(Je,pt),ft<0&&this._shift.clear();let at=!1;Ve&&(at=Rn.every(tt=>this.maskSpecialCharacters.includes(tt)));let yt=`${this.prefix}${at?"":me}${this.suffix}`;return 0===me.length&&(yt=`${this.prefix}${me}`),yt}_findSpecialChar(z){return this.maskSpecialCharacters.find(O=>O===z)}_checkSymbolMask(z,O){return this.maskAvailablePatterns=this.customPattern?this.customPattern:this.maskAvailablePatterns,(this.maskAvailablePatterns[O]?.pattern&&this.maskAvailablePatterns[O]?.pattern.test(z))??!1}_stripToDecimal(z){return z.split("").filter((O,se)=>{const he="string"==typeof this.decimalMarker?O===this.decimalMarker:this.decimalMarker.includes(O);return O.match("^-?\\d")||O===this.thousandSeparator||he||"-"===O&&0===se&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(z){return z&&(" "===z?"\\s":"[\\^$.|?*+()".indexOf(z)>=0?`\\${z}`:z)}_shiftStep(z,O,se){const he=/[*?]/g.test(z.slice(0,O))?se:O;this._shift.add(he+this.prefix.length||0)}_compareOrIncludes(z,O,se){return Array.isArray(O)?O.filter(he=>he!==se).includes(z):z===O}_validIP(z){return!(4===z.length&&!z.some((O,se)=>z.length!==se+1?""===O||Number(O)>255:""===O||Number(O.substring(0,3))>255))}}return ke.\u0275fac=function(z){return new(z||ke)(W.LFG(ge))},ke.\u0275prov=W.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),_e=(()=>{class ke extends ie{constructor(z,O,se,he){super(O),this.document=z,this._config=O,this._elementRef=se,this._renderer=he,this.maskExpression="",this.isNumberValue=!1,this.placeHolderCharacter="_",this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=Ve=>{}}applyMask(z,O,se=0,he=!1,Ve=!1,Ge=(()=>{})){if(!O)return z!==this.actualValue?this.actualValue:z;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(z||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(z||"#")),!z&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const Ae=z&&"number"==typeof this.selStart?z[this.selStart]??"":"";let me="";if(void 0!==this.hiddenInput&&!this.writingValue){let Dt=this.actualValue.split("");""!==z&&Dt.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(z.length>Dt.length?Dt.splice(this.selStart,0,Ae):z.length<Dt.length&&(Dt.length-z.length==1?Dt.splice(this.selStart-1,1):Dt.splice(this.selStart,this.selEnd-this.selStart))):Dt=[],this.showMaskTyped&&(z=this.removeMask(z)),me=this.actualValue.length&&Dt.length<=z.length?this.shiftTypedSymbols(Dt.join("")):z}this.showMaskTyped&&(z=this.removeMask(z)),me=Boolean(me)&&me.length?me:z;const Be=super.applyMask(me,O,se,he,Ve,Ge);if(this.actualValue=this.getActualValue(Be),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.maskSpecialCharacters=this.maskSpecialCharacters.filter(Dt=>!this._compareOrIncludes(Dt,this.decimalMarker,this.thousandSeparator))),this.formControlResult(Be),!this.showMaskTyped)return this.hiddenInput&&Be&&Be.length?this.hideInput(Be,this.maskExpression):Be;const pt=Be.length,ft=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const Dt=this._numberSkipedSymbols(Be);return Be+ft.slice(pt+Dt)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?Be+ft:Be+ft.slice(pt)}_numberSkipedSymbols(z){const O=/(^|\D)(\d\D)/g;let se=O.exec(z),he=0;for(;null!=se;)he+=1,se=O.exec(z);return he}applyValueChanges(z,O,se,he=(()=>{})){const Ve=this._elementRef.nativeElement;Ve.value=this.applyMask(Ve.value,this.maskExpression,z,O,se,he),Ve!==this._getActiveElement()&&this.clearIfNotMatchFn()}hideInput(z,O){return z.split("").map((se,he)=>this.maskAvailablePatterns&&this.maskAvailablePatterns[O[he]??""]&&this.maskAvailablePatterns[O[he]??""]?.symbol?this.maskAvailablePatterns[O[he]??""]?.symbol:se).join("")}getActualValue(z){const O=z.split("").filter((se,he)=>{const Ve=this.maskExpression[he]??"";return this._checkSymbolMask(se,Ve)||this.maskSpecialCharacters.includes(Ve)&&se===Ve});return O.join("")===z?O.join(""):z}shiftTypedSymbols(z){let O="";return(z&&z.split("").map((he,Ve)=>{if(this.maskSpecialCharacters.includes(z[Ve+1]??"")&&z[Ve+1]!==this.maskExpression[Ve+1])return O=he,z[Ve+1];if(O.length){const Ge=O;return O="",Ge}return he})||[]).join("")}numberToString(z){return z||0===z?Number(z).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(z)}showMaskInInput(z){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(z){if("IP"===this.maskExpression)return this._checkForIp(z);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(z)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const z=this._elementRef.nativeElement;this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==z.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(z.value,this.maskExpression))}set formElementProperty([z,O]){Promise.resolve().then(()=>this._renderer.setProperty(this._elementRef.nativeElement,z,O))}checkSpecialCharAmount(z){return z.split("").filter(se=>this._findSpecialChar(se)).length}removeMask(z){return this._removeMask(this._removeSuffix(this._removePrefix(z)),this.maskSpecialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(z){if("#"===z)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const O=[];for(let se=0;se<z.length;se++){const he=z[se]??"";he&&he.match("\\d")&&O.push(he)}return O.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:O.length>3&&O.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:O.length>6&&O.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(z){const O=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,se=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===z)return O;const he=[];for(let Ve=0;Ve<z.length;Ve++){const Ge=z[Ve]??"";Ge&&Ge.match("\\d")&&he.push(Ge)}return he.length<=3?O.slice(he.length,O.length):he.length>3&&he.length<=6?O.slice(he.length+1,O.length):he.length>6&&he.length<=9?O.slice(he.length+2,O.length):he.length>9&&he.length<11?O.slice(he.length+3,O.length):11===he.length?"":12===he.length?se.slice(17===z.length?16:15,se.length):he.length>12&&he.length<=14?se.slice(he.length+4,se.length):""}_getActiveElement(z=this.document){const O=z?.activeElement?.shadowRoot;return O?.activeElement?this._getActiveElement(O):z.activeElement}formControlResult(z){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(z)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(z)):this._removeSuffix(z))}_toNumber(z){if(!this.isNumberValue||""===z)return z;const O=Number(z);return Number.isNaN(O)?z:O}_removeMask(z,O){return z&&z.replace(this._regExpForRemove(O),"")}_removePrefix(z){return this.prefix?z&&z.replace(this.prefix,""):z}_removeSuffix(z){return this.suffix?z&&z.replace(this.suffix,""):z}_retrieveSeparatorValue(z){return this._removeMask(this._removeSuffix(this._removePrefix(z)),this.maskSpecialCharacters)}_regExpForRemove(z){return new RegExp(z.map(O=>`\\${O}`).join("|"),"gi")}_replaceDecimalMarkerToDot(z){const O=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return z.replace(this._regExpForRemove(O),".")}_checkSymbols(z){if(""===z)return z;const O=this._retrieveSeparatorPrecision(this.maskExpression),se=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(z));return this.isNumberValue?O?z===this.decimalMarker?null:this._checkPrecision(this.maskExpression,se):Number(se):se}_retrieveSeparatorPrecision(z){const O=z.match(new RegExp("^separator\\.([^d]*)"));return O?Number(O[1]):null}_checkPrecision(z,O){return z.indexOf("2")>0?Number(O).toFixed(2):Number(O)}}return ke.\u0275fac=function(z){return new(z||ke)(W.LFG(ye.K0),W.LFG(ge),W.LFG(W.SBq),W.LFG(W.Qsj))},ke.\u0275prov=W.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),ht=(()=>{class ke{constructor(z,O,se){this.document=z,this._maskService=O,this._config=se,this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new W.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.onChange=he=>{},this.onTouch=()=>{}}ngOnChanges(z){const{maskExpression:O,specialCharacters:se,patterns:he,prefix:Ve,suffix:Ge,thousandSeparator:Ae,decimalMarker:me,dropSpecialCharacters:Be,hiddenInput:pt,showMaskTyped:ft,placeHolderCharacter:Dt,shownMaskExpression:Rn,showTemplate:Qe,clearIfNotMatch:qe,validation:Je,separatorLimit:at,allowNegativeNumbers:yt,leadZeroDateTime:tt,triggerOnMaskChange:Xe}=z;if(O&&(O.currentValue!==O.previousValue&&!O.firstChange&&(this._maskService.maskChanged=!0),O.currentValue&&O.currentValue.split("||").length>1?(this._maskExpressionArray=O.currentValue.split("||").sort((xt,Rt)=>xt.length-Rt.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=O.currentValue||"",this._maskService.maskExpression=this._maskValue)),se){if(!se.currentValue||!Array.isArray(se.currentValue))return;this._maskService.maskSpecialCharacters=se.currentValue||[]}he&&he.currentValue&&(this._maskService.maskAvailablePatterns=he.currentValue),Ve&&(this._maskService.prefix=Ve.currentValue),Ge&&(this._maskService.suffix=Ge.currentValue),Ae&&(this._maskService.thousandSeparator=Ae.currentValue),me&&(this._maskService.decimalMarker=me.currentValue),Be&&(this._maskService.dropSpecialCharacters=Be.currentValue),pt&&(this._maskService.hiddenInput=pt.currentValue),ft&&(this._maskService.showMaskTyped=ft.currentValue),Dt&&(this._maskService.placeHolderCharacter=Dt.currentValue),Rn&&(this._maskService.shownMaskExpression=Rn.currentValue),Qe&&(this._maskService.showTemplate=Qe.currentValue),qe&&(this._maskService.clearIfNotMatch=qe.currentValue),Je&&(this._maskService.validation=Je.currentValue),at&&(this._maskService.separatorLimit=at.currentValue),yt&&(this._maskService.allowNegativeNumbers=yt.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.maskSpecialCharacters=this._maskService.maskSpecialCharacters.filter(xt=>"-"!==xt))),tt&&(this._maskService.leadZeroDateTime=tt.currentValue),Xe&&(this._maskService.triggerOnMaskChange=Xe.currentValue),this._applyMask()}validate({value:z}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(z);if(this._maskService.cpfCnpjError)return this._createValidationError(z);if(this._maskValue.startsWith("separator")||le.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(Pe.includes(this._maskValue))return this._validateTime(z);if(z&&z.toString().length>=1){let O=0;for(const se in this._maskService.maskAvailablePatterns)if(this._maskService.maskAvailablePatterns[se]?.optional&&(this._maskValue.indexOf(se)!==this._maskValue.lastIndexOf(se)?O+=this._maskValue.split("").filter(Ve=>Ve===se).join("").length:-1!==this._maskValue.indexOf(se)&&O++,-1!==this._maskValue.indexOf(se)&&z.toString().length>=this._maskValue.indexOf(se)||O===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&z.toString().length===this._maskValue.length+Number((this._maskValue.split("{")[1]??"").split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&z.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&z.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(z);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const se=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-O:this._maskValue.length-O;if(z.toString().length<se)return this._createValidationError(z)}}return z&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(z){(""===z||null==z)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(z){const O=z.target;if(this._inputValue=O.value,this._setMask(),!this._maskValue)return void this.onChange(O.value);const se=1===O.selectionStart?O.selectionStart+this._maskService.prefix.length:O.selectionStart;let he=0,Ve=!1;if(this._maskService.applyValueChanges(se,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(Ae,me)=>{this._justPasted=!1,he=Ae,Ve=me}),this._getActiveElement()!==O)return;this._position=1===this._position&&1===this._inputValue.length?null:this._position;let Ge=this._position?this._inputValue.length+se+he:se+("Backspace"!==this._code||Ve?he:0);Ge>this._getActualInputLength()&&(Ge=this._getActualInputLength()),Ge<0&&(Ge=0),O.setSelectionRange(Ge,Ge),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(z){if(!this._maskValue)return;const O=z.target;null!==O&&null!==O.selectionStart&&O.selectionStart===O.selectionEnd&&O.selectionStart>this._maskService.prefix.length&&38!==z.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),O.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===O.value?(O.focus(),O.setSelectionRange(0,0)):O.selectionStart>this._maskService.actualValue.length&&O.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const Ve=O&&(O.value&&O.value!==this._maskService.prefix?O.value:this._maskService.prefix+this._maskService.maskIsShown);O&&O.value!==Ve&&(O.value=Ve),O&&(O.selectionStart||O.selectionEnd)<=this._maskService.prefix.length?O.selectionStart=this._maskService.prefix.length:O&&O.selectionEnd>this._getActualInputLength()&&(O.selectionEnd=this._getActualInputLength())}onKeyDown(z){if(!this._maskValue)return;this._code=z.code?z.code:z.key;const O=z.target;if(this._inputValue=O.value,this._setMask(),38===z.keyCode&&z.preventDefault(),37===z.keyCode||8===z.keyCode||46===z.keyCode){if(8===z.keyCode&&0===O.value.length&&(O.selectionStart=O.selectionEnd),8===z.keyCode&&0!==O.selectionStart)if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&O.selectionStart<=this.prefix.length)O.setSelectionRange(this.prefix.length,O.selectionEnd);else if(this._inputValue.length!==O.selectionStart&&1!==O.selectionStart)for(;this.specialCharacters.includes((this._inputValue[O.selectionStart-1]??"").toString())&&(this.prefix.length>=1&&O.selectionStart>this.prefix.length||0===this.prefix.length);)O.setSelectionRange(O.selectionStart-1,O.selectionEnd);this.checkSelectionOnDeletion(O),this._maskService.prefix.length&&O.selectionStart<=this._maskService.prefix.length&&O.selectionEnd<=this._maskService.prefix.length&&z.preventDefault(),8===z.keyCode&&!O.readOnly&&0===O.selectionStart&&O.selectionEnd===O.value.length&&0!==O.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<O.selectionStart?O.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===z.keyCode&&z.ctrlKey||65===z.keyCode&&z.metaKey)&&(O.setSelectionRange(0,this._getActualInputLength()),z.preventDefault()),this._maskService.selStart=O.selectionStart,this._maskService.selEnd=O.selectionEnd}writeValue(z){var O=this;return(0,g.Z)(function*(){"object"==typeof z&&null!==z&&"value"in z&&("disable"in z&&O.setDisabledState(Boolean(z.disable)),z=z.value),("number"==typeof z||O._maskValue.startsWith("separator"))&&(z=O._maskService.numberToString(z),Array.isArray(O.decimalMarker)||(z="."!==O.decimalMarker?z.replace(".",O.decimalMarker):z),O._maskService.isNumberValue=!0),"string"!=typeof z&&(z=""),O._inputValue=z,O._setMask(),z&&O._maskService.maskExpression||O._maskService.maskExpression&&(O._maskService.prefix||O._maskService.showMaskTyped)?(O._maskService.writingValue=!0,O._maskService.formElementProperty=["value",O._maskService.applyMask(z,O._maskService.maskExpression)],O._maskService.writingValue=!1):O._maskService.formElementProperty=["value",z],O._inputValue=z})()}registerOnChange(z){this._maskService.onChange=this.onChange=z}registerOnTouched(z){this.onTouch=z}_getActiveElement(z=this.document){const O=z?.activeElement?.shadowRoot;return O?.activeElement?this._getActiveElement(O):z.activeElement}checkSelectionOnDeletion(z){z.selectionStart=Math.min(Math.max(this.prefix.length,z.selectionStart),this._inputValue.length-this.suffix.length),z.selectionEnd=Math.min(Math.max(this.prefix.length,z.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(z){this._maskService.formElementProperty=["disabled",z]}_repeatPatternSymbols(z){return z.match(/{[0-9]+}/)&&z.split("").reduce((O,se,he)=>{if(this._start="{"===se?he:this._start,"}"!==se)return this._maskService._findSpecialChar(se)?O+se:O;this._end=he;const Ve=Number(z.slice(this._start+1,this._end));return O+new Array(Ve+1).join(z[this._start-1])},"")||z}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(z){const O=this._maskValue.split("").filter(se=>":"!==se).length;return z&&(0==+(z[z.length-1]??-1)&&z.length<O||z.length<=O-2)?this._createValidationError(z):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(z){return{mask:{requiredMask:this._maskValue,actualValue:z}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(z=>{const O=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(z)?.length;if(this._inputValue&&O)return this._maskValue=z,this.maskExpression=z,this._maskService.maskExpression=z,O;this._maskValue=this.maskExpression=this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]??""})}}return ke.\u0275fac=function(z){return new(z||ke)(W.Y36(ye.K0),W.Y36(_e),W.Y36(ge))},ke.\u0275dir=W.lG2({type:ke,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(z,O){1&z&&W.NdJ("paste",function(){return O.onPaste()})("ngModelChange",function(he){return O.onModelChange(he)})("input",function(he){return O.onInput(he)})("blur",function(){return O.onBlur()})("click",function(he){return O.onClick(he)})("keydown",function(he){return O.onKeyDown(he)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],features:[W._Bn([{provide:q.JU,useExisting:(0,W.Gpc)(()=>ke),multi:!0},{provide:q.Cf,useExisting:(0,W.Gpc)(()=>ke),multi:!0},_e]),W.TTD]}),ke})();function ot(ke,st){return st instanceof Function?{...ke,...st()}:{...ke,...st}}let rt=(()=>{class ke{static forRoot(z){return{ngModule:ke,providers:[{provide:pe,useValue:z},{provide:be,useValue:F},{provide:ge,useFactory:ot,deps:[be,pe]},ie]}}static forChild(){return{ngModule:ke}}}return ke.\u0275fac=function(z){return new(z||ke)},ke.\u0275mod=W.oAB({type:ke}),ke.\u0275inj=W.cJS({}),ke})();const Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};Le.KeyboardEvent||(Le.KeyboardEvent=function(ke,st){})},5861:(jt,He,L)=>{function g(q,ye,ge,pe,be,F,Pe){try{var le=q[F](Pe),ie=le.value}catch(_e){return void ge(_e)}le.done?ye(ie):Promise.resolve(ie).then(pe,be)}function W(q){return function(){var ye=this,ge=arguments;return new Promise(function(pe,be){var F=q.apply(ye,ge);function Pe(ie){g(F,pe,be,Pe,le,"next",ie)}function le(ie){g(F,pe,be,Pe,le,"throw",ie)}Pe(void 0)})}}L.d(He,{Z:()=>W})}},jt=>{jt(jt.s=2950)}]);